var Hi=Object.defineProperty,Gi=Object.defineProperties;var Fi=Object.getOwnPropertyDescriptors;var ds=Object.getOwnPropertySymbols;var zi=Object.prototype.hasOwnProperty,Ji=Object.prototype.propertyIsEnumerable;var hs=(n,e,t)=>e in n?Hi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Pt=(n,e)=>{for(var t in e||(e={}))zi.call(e,t)&&hs(n,t,e[t]);if(ds)for(var t of ds(e))Ji.call(e,t)&&hs(n,t,e[t]);return n},Ht=(n,e)=>Gi(n,Fi(e));import{v as Ki,S as Xi,a as mt,i as pt,s as gt,d as D,g as ms,b as wt,c as qt,o as Ut,e as gn,f as bt,h as he,q as wn,F as Re,j as ps,k as gs,l as ws,m as bs,n as T,t as ce,p as E,r as j,u as G,w as y,x as Ie,y as Ve,z as Vi,A as xi,B as F,C as Me,D as L,E as K,G as Oe,H as q,I as Qe,J as B,K as Be,L as ue,M as qe,N as Ue,O as Zi,P as $i,Q as Ae,R as xe,T as _e,U as Nt,V as $e,W as lt,X as eo,Y as to,Z as Gt,_ as ks,$ as ys,a0 as ge,a1 as no,a2 as vs,a3 as so,a4 as io,a5 as oo,a6 as bn,a7 as Ss,a8 as Ps,a9 as Es,aa as As,ab as Cs,ac as Ts,ad as $t,ae as kn,af as en,ag as yn,ah as js,ai as tn,aj as Rs,ak as Is,al as Ms,am as vn,an as Os,ao as qs,ap as Us,aq as Ns,ar as Sn,as as Pn,at as En,au as Lt,av as Ls,aw as Rt,ax as Ds,ay as Ys,az as Qs,aA as ao,aB as Dt}from"./vendor.885dcbe4.js";const ro=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}};ro();const Bs={en:{}},Et={red:{color:"#a00000",labels:{en:"red"}},green:{color:"#006000",labels:{en:"green"}},blue:{color:"#0000a0",labels:{en:"blue"}},black:{color:"#000000",labels:{en:"black"}}},nn=Object.keys(Et),Yt={triangle:{symbol:"\u25B2",labels:{en:"triangle"}},square:{symbol:"\u25A0",labels:{en:"square"}},circle:{symbol:"\u25CF",labels:{en:"circle"}},star:{symbol:"\u2605",labels:{en:"star"}}},sn=Object.keys(Yt),Qt={nobody_has:{describe:{en:n=>`nobody has ${n||"..."}`}},i_have:{describe:{en:n=>`my chip is ${n||"..."}`}}},Bt=Object.keys(Qt),Ws={attention:[{labels:{en:"the Arbiter approaches..."}}],loading:[{delay:2e3,interval:200,labels:{en:"hmmm"}},{delay:250,interval:500,labels:{en:"hmmm...."}}]},on="pulsar-1",an="pulsar-1",rn="https://9smwxzxpih.execute-api.us-west-2.amazonaws.com/",Ft="https://1hcx0z6ih3.execute-api.us-west-2.amazonaws.com/";class An extends Error{constructor(e,t){t?t instanceof TypeError?super(`${e}: ${t.stack}`):t instanceof Error?super(`${e}: ${t.stack}`):super(`${e}: Unknown error`):super(e)}}const He=1e3,ln=60*He,It=60*ln,kt=24*It,Hs=7*kt,Gs=30*kt,Fs=365*kt,Ne=Object.entries;function zs(n,e){return Ne(n).reduce((t,[s,o])=>[...t,e(s,o)],[])}function H(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}const ke=n=>n[0].toUpperCase()+n.slice(1),lo=[{ge:Fs,divisor:Fs,unit:"year"},{ge:Gs,divisor:Gs,unit:"month"},{ge:Hs,divisor:Hs,unit:"week"},{ge:kt,divisor:kt,unit:"day"},{ge:It,divisor:It,unit:"hour"},{ge:ln,divisor:ln,unit:"minute"},{ge:He,divisor:He,unit:"seconds"},{ge:0,divisor:1,text:"just now"}];function Js(n,e=Date.now(),t=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"})){const o=(typeof e=="object"?e.getTime():new Date(e).getTime())-(typeof n=="object"?n:new Date(n)).getTime(),l=Math.abs(o);for(const a of lo)if(l>=a.ge){const c=Math.round(Math.abs(o)/a.divisor),i=o<0;return a.unit?t.format(i?c:-c,a.unit):a.text}}class Ks{constructor(){this._as_intervals=new Set,this._as_timeouts=new Set}addInterval(e,t){const s=window.setInterval(e,t);return this._as_intervals.add(s),s}addTimeout(e,t){const s=window.setTimeout(()=>{this.delTimeout(s),e()},t);return this._as_timeouts.add(s),s}delInterval(e){window.clearInterval(e),this._as_intervals.delete(e)}delTimeout(e){window.clearTimeout(e),this._as_timeouts.delete(e)}killAll(){for(const e of this._as_intervals)this.delInterval(e);for(const e of this._as_timeouts)this.delTimeout(e)}}async function co(n,e,t=null){if(t==null?void 0:t.search){if(e.includes("?"))throw new Error(`Cannot specify 'search' option in fetch config when URI already contains search params: "${e}"`);e+="?"+new URLSearchParams(t.search).toString(),delete t.search}try{return await Ki(e,Ht(Pt({},t),{method:n,mode:"cors",headers:Pt({Accept:"application/json"},(t||{}).headers||{})})).json()}catch(s){throw s}}async function Xs(n,e=null){return co("GET",n,e)}const At="secret1zkn3d4u0t8hrr6jhqrdeg96ygrhmx66f9dm6cu",Vs="7c98f9e086e687e8f920dc6c0bee01a88c8097223d53bd494ffb7b8bfec4f364",zt="secret1rfwt2zlw27f9ps28svetzmt32tv0rwnr6jg5hz",xs="36d94d2066b903ede9716f77f2fe99274aaa2c434feb424302dbb8aef9f34721";class Cn extends Error{constructor(e){super(`The game contract returned the following error: ${e}`)}}const uo="1000000",_o=new TextDecoder;class Zs{constructor(e,t,s,o){this._k_wallet=e,this._p_contract=t,this._g_permit=s||null,this._si_code_hash=o}async execute(e,t,s=[]){const o=await this._k_wallet.execute(this._p_contract,e,s,t,this._si_code_hash);return{txnHash:o.transactionHash,data:JSON.parse(_o.decode(o.data))}}joinGame(){return this.execute({join:{}},{amount:[{amount:"8750",denom:"uscrt"}],gas:"35000"},[{denom:"uscrt",amount:uo}])}submitAssertion(e,t){const[s,o]=t.split(":"),l=s==="color"?{color:o}:{shape:o};return this.execute({submit:Pt({target:e},l)},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}submitGuess(e){return this.execute({guess:e},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}pickReward(e){return this.execute({pick_reward:{reward:e==="jackpot"?"pool":e}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"40000"})}query(e){return this._g_permit&&(e={with_permit:{query:e,permit:this._g_permit}}),this._k_wallet.query(this._p_contract,e)}async queryGameState(){const e=await this.query({game_state:{}});if(e.error)throw new Cn(e.error);return e.game_state}}const fo=n=>n.remaining<60*He?n.latestBlock>=n.destinationBlock?!1:Date.now()-n.lastUpdated>5*He:Date.now()-n.lastUpdated>30*He,ho=on.startsWith("pulsar")?1.98*He:5.99*He,$s=Math.floor(5*ln/ho);console.log(`Imposing global ${$s} blocks per 5 minutes estimate`);class yt{constructor(e,t=$s,s=fo){this._xt_start=0,this._xt_eta=0,this._xg_latest=0n,this._xt_updated=0,this._xg_block_start=BigInt(e),this._xg_block_dest=this._xg_block_start+BigInt(t),this._f_should_update=()=>s(this)}async fetch_start_time(){const e=new URL(Ft);e.pathname="/block";const t=await Xs(e.href,{search:{block:this._xg_block_start+""}});this._xt_start=new Date(t.data.result.block.header.time).getTime()}async estimate(){this._xt_start||await this.fetch_start_time();const e=new URL(Ft);e.pathname="/status";const t=await Xs(e.href),{latest_block_height:s,latest_block_time:o}=t.data.result.sync_info,l=this._xg_latest=BigInt(s),c=(new Date(o).getTime()-this._xt_start)/Number(l-this._xg_block_start),i=Number(this._xg_block_dest-l),r=this._xt_updated=Date.now();return this._xt_eta=r+Math.round(i*c)}get lastUpdated(){return this._xt_updated}get latestBlock(){return this._xg_latest}get destinationBlock(){return this._xg_block_dest}get eta(){return this._f_should_update()&&this.estimate(),this._xt_eta||Date.now()}get remaining(){return this._xt_eta-Date.now()}}const Tn="Scrt Prisoners";class jn extends An{constructor(e){super("While attempting to enable Keplr",e)}}class Rn extends An{constructor(e){super("While attempting to acquire offline signer",e)}}class mo extends An{constructor(e){super("While attempting to acquire enigma utils",e)}}class Wt{static isAvailable(){return!!window.keplr}static fromWindow(){if(window.keplr)return new Wt(window.keplr);throw new Error("Keplr extension is not installed")}constructor(e){this._k_keplr=e}async enable(e,t){const s=this._si_chain=e.chainId;this._fk_change=t;try{await this._k_keplr.experimentalSuggestChain({chainId:s,chainName:e.chainName,rpc:e.rpc,rest:e.rest,bip44:{coinType:529},coinType:529,stakeCurrency:{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6},bech32Config:{bech32PrefixAccAddr:"secret",bech32PrefixAccPub:"secretpub",bech32PrefixValAddr:"secretvaloper",bech32PrefixValPub:"secretvaloperpub",bech32PrefixConsAddr:"secretvalcons",bech32PrefixConsPub:"secretvalconspub"},currencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],feeCurrencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],gasPriceStep:{low:.1,average:.25,high:.4},features:["secretwasm"]})}catch{return!1}try{await this._k_keplr.enable(s)}catch(o){throw new jn(o)}try{this._k_signer=window.getOfflineSigner(s)}catch(o){throw new Rn(o)}try{this._k_enigma=window.getEnigmaUtils(s)}catch(o){throw new mo(o)}return this._g_key=await this._k_keplr.getKey(s),this._a_accounts=await this._k_signer.getAccounts(),this._k_client=new Xi(rn,this.publicAddress,this._k_signer,this._k_enigma,{exec:{amount:[{amount:"62500",denom:"uscrt"}],gas:"250000"}}),window.addEventListener("keplr_keystorechange",async()=>{(await this._k_keplr.getKey(s)).bech32Address!==this.publicAddress&&this._fk_change()}),!0}get chain(){return this._si_chain}get key(){return this._g_key}get accounts(){return this._a_accounts}get primaryAccount(){return this.accounts[0]}get publicAddress(){return this.primaryAccount.address}async signQueryPermit(){return(await this._k_keplr.signAmino(this.chain,this.publicAddress,{chain_id:this.chain,account_number:"0",sequence:"0",fee:{amount:[{denom:"uscrt",amount:"0"}],gas:"1"},msgs:[{type:"query_permit",value:{permit_name:Tn,allowed_tokens:[At,zt],permissions:["owner"]}}],memo:""},{preferNoSetFee:!0,preferNoSetMemo:!0})).signature}execute(e,t,s,o,l){let a="";if(o&&(a+=` --gas ${o.gas}`),s&&s.length){const c=s[0];a+=` --amount ${c.amount}${c.denom}`}return console.log(`secretd tx compute execute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}${a}`),this._k_client.execute(e,t,"",s,o)}query(e,t,s,o){return console.log(`secretd q compute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}`),this._k_client.queryContractSmart(e,t,s||{})}}const ei=(n,e)=>n.querySelector(e),ti=(n,e)=>Array.prototype.slice.call(n.querySelectorAll(e),0);function Pe(n,e={},t=[]){const s=document.createElement(n);for(const o in e)s.setAttribute(o,e[o]+"");for(const o of t)s.append(o);return s}function cn(){return document.cookie.split(";").reduce((n,e)=>{const t=e.trim().split("=");return Ht(Pt({},n),{[t[0]]:t.slice(1).join("=")})},{})}function Ct(n,e){document.cookie=Object.entries(Ht(Pt({},n),{"max-age":""+e})).map(([t,s])=>`${t}=${s}`).join("; ")}function Jt(n){return Ct({[n]:""},0)}const po=65535,ni=128,go="RGBK\u25B2\u2586\u25CF\u2605";function si(n){let e=[];for(let t=0;t<8;t++)n&ni?e.push(go[t]):e.push(" "),n=n<<1;return`[${e.join(",")}]`}function un(n,e=!1){const[t,s]=n.split(":");if(t==="color"){const o=nn.indexOf(s);return 1<<7-o|(e?15:0)}else{const o=sn.indexOf(s);return 1<<3-o|(e?240:0)}}function Mt(n){const[e,t]=n.split(":");return`${e==="shape"?"a ":""}${t}`}function Ot(n){const[e,t]=n.split("|");return`${e==="nobody_has"?"nobody has ":"my chip is"} ${Mt(t)}`}class Kt{constructor(e=po){this._xm_deduce=e}clone(){return new Kt(this._xm_deduce)}nobody(e){let t=un(e);return t|=t<<8,this._xm_deduce&=~t,this}opponent(e,t){if(t){const s=un(e,!0),o=~un(e);this._xm_deduce&=o<<8|s}else this._xm_deduce&=~un(e);return this}explain(){const e=this._xm_deduce>>8,t=this._xm_deduce&255;return[`A: ${si(e)}`,`O: ${si(t)}`].join(`
`)}enumerate(e){let t=e==="bag"?this._xm_deduce>>8:this._xm_deduce&255;const s=[],o=[];for(let a=0;a<8;a++)t&ni&&(a<4?s.push(nn[a]):o.push(sn[a-4])),t=t<<1;const l=[];for(const a of s)for(const c of o)l.push({target:e,color:a,shape:c});return l}}const{Object:wo,console:ii}=ms,re="src/component/MessagePanel.svelte";function In(n){let e,t,s,o,l;const a={c:function(){e=T("span"),t=ce(n[3]),E(e,"class","msg-console-eval s-l2U1SoEQLPY0"),j(e,re,623,3,16315)},m:function(i,r){G(i,e,r),y(e,t),n[22](e),l=!0},p:function(i,r){(!l||r[0]&8)&&Ie(t,i[3])},i:function(i){l||(Ve(()=>{o&&o.end(1),s=Vi(e,he,{duration:1e3}),s.start()}),l=!0)},o:function(i){s&&s.invalidate(),o=xi(e,he,{duration:500}),l=!1},d:function(i){i&&F(e),n[22](null),i&&o&&o.end()}};return D("SvelteRegisterBlock",{block:a,id:In.name,type:"if",source:"(623:2) {#if s_evaluation}",ctx:n}),a}function Mn(n){let e,t,s,o,l,a,c,i,r,u,h,k,S,w,d,g,v;o=new Re({props:{icon:ps},$$inline:!0}),h=new Re({props:{icon:gs},$$inline:!0});let m=n[12].length&&On(n);const P={c:function(){e=T("div"),t=T("span"),s=T("span"),Me(o.$$.fragment),l=L(),a=T("span"),c=ce(n[6]),i=L(),r=T("span"),u=T("span"),Me(h.$$.fragment),k=L(),S=T("span"),w=ce(n[7]),d=L(),m&&m.c(),E(s,"class","msg-nav-icon lifted s-l2U1SoEQLPY0"),j(s,re,635,4,16612),E(a,"class","msg-nav-name s-l2U1SoEQLPY0"),K(a,"long-name",n[6].length>=40),j(a,re,636,4,16677),E(t,"class","msg-nav-group s-l2U1SoEQLPY0"),j(t,re,634,3,16579),E(u,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(u,re,639,4,16813),E(S,"class","msg-nav-addr addr s-l2U1SoEQLPY0"),j(S,re,640,4,16873),E(r,"class","msg-nav-group s-l2U1SoEQLPY0"),j(r,re,638,3,16780),E(e,"class","msg-nav s-l2U1SoEQLPY0"),j(e,re,633,2,16504)},m:function(f,A){G(f,e,A),y(e,t),y(t,s),Oe(o,s,null),y(t,l),y(t,a),y(a,c),y(e,i),y(e,r),y(r,u),Oe(h,u,null),y(r,k),y(r,S),y(S,w),y(e,d),m&&m.m(e,null),v=!0},p:function(f,A){n=f,(!v||A[0]&64)&&Ie(c,n[6]),A[0]&64&&K(a,"long-name",n[6].length>=40),(!v||A[0]&128)&&Ie(w,n[7]),n[12].length?m?(m.p(n,A),A[0]&4096&&q(m,1)):(m=On(n),m.c(),q(m,1),m.m(e,null)):m&&(Qe(),B(m,1,1,()=>{m=null}),Be())},i:function(f){v||(q(o.$$.fragment,f),q(h.$$.fragment,f),q(m),Ve(()=>{g||(g=ue(e,gn,{duration:750,easing:wn},!0)),g.run(1)}),v=!0)},o:function(f){B(o.$$.fragment,f),B(h.$$.fragment,f),B(m),g||(g=ue(e,gn,{duration:750,easing:wn},!1)),g.run(0),v=!1},d:function(f){f&&F(e),qe(o),qe(h),m&&m.d(),f&&g&&g.end()}};return D("SvelteRegisterBlock",{block:P,id:Mn.name,type:"if",source:"(633:1) {#if b_nav_display}",ctx:n}),P}function On(n){let e,t,s,o,l,a,c=n[12][0]+"",i,r,u,h,k=n[12][1]+"",S,w,d,g,v,m=n[12][2]+"",P,p,f;s=new Re({props:{icon:ws},$$inline:!0});const A={c:function(){e=T("span"),t=T("span"),Me(s.$$.fragment),o=L(),l=T("span"),a=T("span"),i=ce(c),r=ce(":"),u=L(),h=T("span"),S=ce(k),w=L(),d=T("span"),d.textContent="...",g=L(),v=T("span"),P=ce(m),E(t,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(t,re,644,5,17042),E(a,"class","prefix s-l2U1SoEQLPY0"),j(a,re,646,6,17154),E(h,"class","addr s-l2U1SoEQLPY0"),j(h,re,647,6,17212),E(d,"class","ellipsis s-l2U1SoEQLPY0"),j(d,re,648,6,17267),E(v,"class","addr s-l2U1SoEQLPY0"),j(v,re,649,6,17307),E(l,"class","msg-nav-permit inline-flex s-l2U1SoEQLPY0"),j(l,re,645,5,17106),E(e,"class","msg-nav-group s-l2U1SoEQLPY0"),j(e,re,643,4,16974)},m:function(O,J){G(O,e,J),y(e,t),Oe(s,t,null),y(e,o),y(e,l),y(l,a),y(a,i),y(a,r),y(l,u),y(l,h),y(h,S),y(l,w),y(l,d),y(l,g),y(l,v),y(v,P),f=!0},p:function(O,J){(!f||J[0]&4096)&&c!==(c=O[12][0]+"")&&Ie(i,c),(!f||J[0]&4096)&&k!==(k=O[12][1]+"")&&Ie(S,k),(!f||J[0]&4096)&&m!==(m=O[12][2]+"")&&Ie(P,m)},i:function(O){f||(q(s.$$.fragment,O),Ve(()=>{p||(p=ue(e,he,{duration:1e3},!0)),p.run(1)}),f=!0)},o:function(O){B(s.$$.fragment,O),p||(p=ue(e,he,{duration:1e3},!1)),p.run(0),f=!1},d:function(O){O&&F(e),qe(s),O&&p&&p.end()}};return D("SvelteRegisterBlock",{block:A,id:On.name,type:"if",source:"(643:3) {#if a_permit_displays.length}",ctx:n}),A}function qn(n){let e,t,s,o,l,a,c,i,r;s=new Re({props:{icon:bs},$$inline:!0});const u={c:function(){e=T("div"),t=T("span"),Me(s.$$.fragment),o=L(),l=T("span"),l.textContent="Submit",E(t,"class","msg-submit-icon s-l2U1SoEQLPY0"),j(t,re,664,3,17654),E(l,"class","msg-submit-text s-l2U1SoEQLPY0"),j(l,re,665,3,17721),E(e,"class","msg-submit s-l2U1SoEQLPY0"),K(e,"active",!!n[9]),j(e,re,656,2,17432)},m:function(k,S){G(k,e,S),y(e,t),Oe(s,t,null),y(e,o),y(e,l),n[23](e),c=!0,i||(r=[Ue(e,"click",function(){Zi(n[9]||oi)&&(n[9]||oi).apply(this,arguments)},!1,!1,!1),Ue(e,"mouseenter",n[15],!1,!1,!1),Ue(e,"mouseleave",n[16],!1,!1,!1)],i=!0)},p:function(k,S){n=k,S[0]&512&&K(e,"active",!!n[9])},i:function(k){c||(q(s.$$.fragment,k),Ve(()=>{a||(a=ue(e,bt,{},!0)),a.run(1)}),c=!0)},o:function(k){B(s.$$.fragment,k),a||(a=ue(e,bt,{},!1)),a.run(0),c=!1},d:function(k){k&&F(e),qe(s),n[23](null),k&&a&&a.end(),i=!1,$i(r)}};return D("SvelteRegisterBlock",{block:u,id:qn.name,type:"if",source:"(656:1) {#if b_submit_display}",ctx:n}),u}function Un(n){let e,t,s,o,l,a,c,i,r,u,h,k,S,w,d,g=n[3]&&In(n),v=n[5]&&Mn(n),m=n[8]&&qn(n);const P={c:function(){e=T("div"),t=T("div"),s=T("div"),o=L(),l=T("div"),a=T("span"),c=ce(">\xA0"),i=ce(n[4]),r=ce(n[11]),u=L(),h=T("span"),h.textContent="\xA0",k=L(),g&&g.c(),S=L(),v&&v.c(),w=L(),m&&m.c(),E(s,"class","msg-history-scroll s-l2U1SoEQLPY0"),j(s,re,617,2,16067),E(t,"class","msg-history s-l2U1SoEQLPY0"),j(t,re,616,1,16016),E(a,"class","text s-l2U1SoEQLPY0"),j(a,re,620,2,16167),E(h,"class","cursor blinking s-l2U1SoEQLPY0"),j(h,re,621,2,16225),E(l,"class","msg-console s-l2U1SoEQLPY0"),j(l,re,619,1,16139),E(e,"class","msg-panel s-l2U1SoEQLPY0"),j(e,re,615,0,15970)},l:function(f){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(f,A){G(f,e,A),y(e,t),y(t,s),n[19](s),n[20](t),y(e,o),y(e,l),y(l,a),y(a,c),y(a,i),y(a,r),y(l,u),y(l,h),n[21](h),y(l,k),g&&g.m(l,null),y(e,S),v&&v.m(e,null),y(e,w),m&&m.m(e,null),n[24](e),d=!0},p:function(f,A){(!d||A[0]&16)&&Ie(i,f[4]),(!d||A[0]&2048)&&Ie(r,f[11]),f[3]?g?(g.p(f,A),A[0]&8&&q(g,1)):(g=In(f),g.c(),q(g,1),g.m(l,null)):g&&(Qe(),B(g,1,1,()=>{g=null}),Be()),f[5]?v?(v.p(f,A),A[0]&32&&q(v,1)):(v=Mn(f),v.c(),q(v,1),v.m(e,w)):v&&(Qe(),B(v,1,1,()=>{v=null}),Be()),f[8]?m?(m.p(f,A),A[0]&256&&q(m,1)):(m=qn(f),m.c(),q(m,1),m.m(e,null)):m&&(Qe(),B(m,1,1,()=>{m=null}),Be())},i:function(f){d||(q(g),q(v),q(m),d=!0)},o:function(f){B(g),B(v),B(m),d=!1},d:function(f){f&&F(e),n[19](null),n[20](null),n[21](null),g&&g.d(),v&&v.d(),m&&m.d(),n[24](null)}};return D("SvelteRegisterBlock",{block:P,id:Un.name,type:"component",source:"",ctx:n}),P}const oi=()=>{};function bo(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("MessagePanel",s,[]);const{language:l}=qt("game");let a;l.subscribe(b=>a=b);const c={reveal_text:O,spinning:C,commit:me,receive:de,arbiter:Ce,opponent:we,user:Te,error:De,warn:nt,wallet:Tt,permit:oe,submittable:Fe,unsubmittable:vt};let{k_killables:i}=e,r,u,h,k="\u275A",S="",w="",d=!1,g="",v="",m="",P=!1,p=null,f,A=0,M=!1;async function O(b,x=60,be=0){let Ke=++A;Q&&(t(11,I=""),i.delInterval(Q),Y=0,Q=0),x||(x=60);const Xe=w.length,ft=b.length;let Se=0;for(;Se<Math.min(Xe,ft)&&w[Se]===b[Se];Se++);const dt=3/5;for(let We=Xe;We>Se;We--)if(t(4,w=w.slice(0,-1)),await H(x*dt),A!==Ke)return;if(be&&await H(be),A===Ke){for(let We=Se;We<ft;We++)if(f.classList.remove("blinking"),await H(10),A!==Ke||(f.classList.add("blinking"),t(4,w+=b[We]),await H(x),A!==Ke))return}}const J=["\u25DC \u25DD"," \u02C9\u25DE"," \u02CD\u25DD","\u25DF \u25DE","\u25DC\u02CD ","\u25DF\u02C9 "];let I="",Q=0,Y=0;async function C(b){if(b){if(!Q){let be=function(){t(11,I=" "+J[Y++]+" "),Y%=J.length};const x=w;await O(x+" "+J[J.length-1]+" "),t(4,w=x),be(),Q=i.addInterval(be,100)}}else Q&&(t(11,I=""),i.delInterval(Q),Y=0,Q=0)}async function fe(){await O("")}let ve=0;async function de(b){if(M)return;for(;!r;)await H(100);const x=b.widgets||{},be=ve++,Ke=Pe("div",{class:["line-commit",...b.classes||[]].join(" ")},[`> ${b.from}: `,...b.text.flatMap(pe=>{const Ye=[];let Ze=0;for(const{0:ot,1:at,index:ht}of pe.matchAll(/\{([a-z0-9-_]+)\}/ig)){const jt=x[at];jt?(Ze!==ht&&Ye.push(pe.slice(Ze,ht)),jt instanceof Element?Ye.push(jt):Ye.push(Pe("span",{class:`msg-widget-${at}-${be}`}))):(console.error(`No such widget '${at}' was passed in with the formatted line`),Ye.push(pe.slice(Ze,ht+ot.length))),Ze=ht+ot.length}return Ze!==pe.length&&Ye.push(pe.slice(Ze)),Ye.push(Pe("div",{class:"newline"})),Ye})]);for(const[pe,Ye]of Ne(x))typeof Ye.subscribe=="function"&&Ye.subscribe(Ze=>{const ot=ti(Ke,`.msg-widget-${pe}-${be}`);for(const at of ot)at.innerHTML=Ze});const Xe=Pe("div",{class:"curtain"});u.append(Ke),u.append(Xe),t(0,r.scrollTop=r.scrollHeight,r);const ft=u.getBoundingClientRect(),Se=Ke.getBoundingClientRect(),dt=Se.top-ft.top,We=Se.height+5;Object.assign(Xe.style,{top:`${dt}px`,height:`${We}px`,left:"0px",width:"100%"}),await H(100);for(let pe=0;pe<We;pe+=5)Object.assign(Xe.style,{top:`${dt+pe}px`,height:`${We-pe}px`}),await H(120);Xe.remove()}const z=b=>Array.isArray(b)?b:b.trim().split(/\n/).map(x=>x.trim());async function Ce(b,x){return await de({from:"Arbiter",classes:["from-arbiter"],text:z(b),widgets:x||{}})}async function we(b,x){return await de({from:"Opponent",classes:["from-opponent"],text:b,widgets:x||{}})}async function Te(b,x){return await de({from:`You${m}`,classes:["from-user"],text:z(b),widgets:x||{}})}async function me(){Te(w),t(4,w="")}async function De(b,x=!1){await de({from:"System",classes:["from-system-error"],text:z(b)}),x&&(M=!0)}async function nt(b,x){await de({from:"System",classes:["from-system-warn"],text:z(b),widgets:x||{}})}function Tt(b){b.addr?(t(5,d=!0),t(6,g=b.name),t(7,v=b.addr),m=g?` (${g})`:""):t(5,d=!1)}let ye=[];function oe(b,x){const be=b.allowed_tokens[0];t(12,ye=[x?"restored":"signed",be.slice(0,"secret12345".length),be.slice(-5)])}let st=0;async function Ge(){debugger;const b=Date.now();b-st>3e4&&(await O("sorry, you don't get to type :P"),await H(1600),await fe(),st=b)}let ie;function Fe(b,x){if(t(8,P=!0),ie){const be=ie.getBoundingClientRect();Object.assign(ie.style,{position:"fixed",top:`${be.top}px`,left:`${be.left}px`})}t(3,S=""),x&&setTimeout(()=>{ie&&ie.style.position&&Object.assign(ie.style,{position:"",top:"",left:""}),t(3,S=x)},500),t(9,p=b)}function vt(){t(8,P=!1),t(9,p=null)}Ut(()=>{h.addEventListener("keydown",()=>{Ge()})});let X;async function U(){await H(100),X.classList.add("hover")}async function V(){t(14,X.style.animation="0",X),await H(100),X.classList.remove("hover"),await H(1e3),t(14,X.style.animation="",X)}const St=["k_killables"];wo.keys(e).forEach(b=>{!~St.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&ii.warn(`<MessagePanel> was created with unknown prop '${b}'`)});function ct(b){Ae[b?"unshift":"push"](()=>{u=b,t(1,u)})}function ze(b){Ae[b?"unshift":"push"](()=>{r=b,t(0,r)})}function Je(b){Ae[b?"unshift":"push"](()=>{f=b,t(10,f)})}function it(b){Ae[b?"unshift":"push"](()=>{ie=b,t(13,ie)})}function ut(b){Ae[b?"unshift":"push"](()=>{X=b,t(14,X)})}function _t(b){Ae[b?"unshift":"push"](()=>{h=b,t(2,h)})}return n.$$set=b=>{"k_killables"in b&&t(18,i=b.k_killables)},n.$capture_state=()=>({getContext:qt,onMount:Ut,slide:gn,blur:bt,fade:he,quadOut:wn,Fa:Re,faUser:ps,faWallet:gs,faTicketAlt:ws,faPaperPlane:bs,ode:Ne,timeout:H,dd:Pe,qsa:ti,ys_lang:l,s_lang:a,k_panel:c,k_killables:i,dm_history:r,dm_history_data:u,dm_panel:h,s_cursor:k,s_evaluation:S,s_text:w,b_nav_display:d,s_nav_name:g,s_nav_addr:v,s_account_alias:m,b_submit_display:P,fk_submit:p,dm_cursor:f,i_iter:A,b_disabled:M,reveal_text:O,A_SPIN:J,s_spinner:I,i_spinning:Q,i_spin:Y,spinning:C,clear:fe,c_msgs:ve,receive:de,rerformat_lines:z,arbiter:Ce,opponent:we,user:Te,commit:me,error:De,warn:nt,wallet:Tt,a_permit_displays:ye,permit:oe,dt_attempt_last:st,attempt_type:Ge,dm_eval:ie,submittable:Fe,unsubmittable:vt,dm_submit:X,mouseenter_submit:U,mouseleave_submit:V}),n.$inject_state=b=>{"s_lang"in b&&(a=b.s_lang),"k_killables"in b&&t(18,i=b.k_killables),"dm_history"in b&&t(0,r=b.dm_history),"dm_history_data"in b&&t(1,u=b.dm_history_data),"dm_panel"in b&&t(2,h=b.dm_panel),"s_cursor"in b&&(k=b.s_cursor),"s_evaluation"in b&&t(3,S=b.s_evaluation),"s_text"in b&&t(4,w=b.s_text),"b_nav_display"in b&&t(5,d=b.b_nav_display),"s_nav_name"in b&&t(6,g=b.s_nav_name),"s_nav_addr"in b&&t(7,v=b.s_nav_addr),"s_account_alias"in b&&(m=b.s_account_alias),"b_submit_display"in b&&t(8,P=b.b_submit_display),"fk_submit"in b&&t(9,p=b.fk_submit),"dm_cursor"in b&&t(10,f=b.dm_cursor),"i_iter"in b&&(A=b.i_iter),"b_disabled"in b&&(M=b.b_disabled),"s_spinner"in b&&t(11,I=b.s_spinner),"i_spinning"in b&&(Q=b.i_spinning),"i_spin"in b&&(Y=b.i_spin),"c_msgs"in b&&(ve=b.c_msgs),"a_permit_displays"in b&&t(12,ye=b.a_permit_displays),"dt_attempt_last"in b&&(st=b.dt_attempt_last),"dm_eval"in b&&t(13,ie=b.dm_eval),"dm_submit"in b&&t(14,X=b.dm_submit)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[r,u,h,S,w,d,g,v,P,p,f,I,ye,ie,X,U,V,c,i,ct,ze,Je,it,ut,_t]}class ai extends mt{constructor(e){super(e);pt(this,e,bo,Un,gt,{k_panel:17,k_killables:18},null,[-1,-1]),D("SvelteRegisterComponent",{component:this,tagName:"MessagePanel",options:e,id:Un.name});const{ctx:t}=this.$$,s=e.props||{};t[18]===void 0&&!("k_killables"in s)&&ii.warn("<MessagePanel> was created without expected prop 'k_killables'")}get k_panel(){return this.$$.ctx[17]}set k_panel(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_killables(){throw new Error("<MessagePanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_killables(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ri="src/component/Prompt.svelte";function li(n,e,t){const s=n.slice();return s[17]=e[t],s}function Nn(n){let e,t,s=n[0];_e(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=Ln(li(n,s,c));const l=c=>B(o[c],1,1,()=>{o[c]=null}),a={c:function(){for(let i=0;i<o.length;i+=1)o[i].c();e=Nt()},m:function(i,r){for(let u=0;u<o.length;u+=1)o[u].m(i,r);G(i,e,r),t=!0},p:function(i,r){if(r&9){s=i[0],_e(s);let u;for(u=0;u<s.length;u+=1){const h=li(i,s,u);o[u]?(o[u].p(h,r),q(o[u],1)):(o[u]=Ln(h),o[u].c(),q(o[u],1),o[u].m(e.parentNode,e))}for(Qe(),u=s.length;u<o.length;u+=1)l(u);Be()}},i:function(i){if(!t){for(let r=0;r<s.length;r+=1)q(o[r]);t=!0}},o:function(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)B(o[r]);t=!1},d:function(i){$e(o,i),i&&F(e)}};return D("SvelteRegisterBlock",{block:a,id:Nn.name,type:"if",source:"(122:1) {#if b_display}",ctx:n}),a}function Ln(n){let e,t=n[17].label+"",s,o,l,a,c,i,r,u;function h(){return n[5](n[17])}const k={c:function(){e=T("button"),s=ce(t),o=L(),E(e,"class",l="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"),E(e,"alt",a=n[17].alt||""),j(e,ri,123,3,2717)},m:function(w,d){G(w,e,d),y(e,s),y(e,o),i=!0,r||(u=Ue(e,"click",h,!1,!1,!1),r=!0)},p:function(w,d){n=w,(!i||d&1)&&t!==(t=n[17].label+"")&&Ie(s,t),(!i||d&1&&l!==(l="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"))&&E(e,"class",l),(!i||d&1&&a!==(a=n[17].alt||""))&&E(e,"alt",a)},i:function(w){i||(Ve(()=>{c||(c=ue(e,he,{duration:3200,easing:xe},!0)),c.run(1)}),i=!0)},o:function(w){c||(c=ue(e,he,{duration:3200,easing:xe},!1)),c.run(0),i=!1},d:function(w){w&&F(e),w&&c&&c.end(),r=!1,u()}};return D("SvelteRegisterBlock",{block:k,id:Ln.name,type:"each",source:"(123:2) {#each a_opts as g_opt}",ctx:n}),k}function Dn(n){let e,t,s=n[1]&&Nn(n);const o={c:function(){e=T("div"),s&&s.c(),E(e,"class","prompt s-c0715tBQdWx2"),K(e,"showing",n[2]),j(e,ri,120,0,2624)},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){G(a,e,c),s&&s.m(e,null),t=!0},p:function(a,[c]){a[1]?s?(s.p(a,c),c&2&&q(s,1)):(s=Nn(a),s.c(),q(s,1),s.m(e,null)):s&&(Qe(),B(s,1,1,()=>{s=null}),Be()),c&4&&K(e,"showing",a[2])},i:function(a){t||(q(s),t=!0)},o:function(a){B(s),t=!1},d:function(a){a&&F(e),s&&s.d()}};return D("SvelteRegisterBlock",{block:o,id:Dn.name,type:"component",source:"",ctx:n}),o}function ko(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("Prompt",s,[]);const l={ok:P,opts:p,yes:m,yes_no:v},a={key:"yes",label:"Yes"},c={key:"no",label:"No"},i=[a,c],r=()=>{},u=M=>{M()};let h=[],k=!1,S=!1,w=r;function d(M){w(M),t(1,k=!1)}function g(M,O=u){return new Promise(J=>{w=I=>{O(J,I),t(1,k=!1)},t(0,h=M),t(1,k=!0),queueMicrotask(()=>{t(2,S=!0)})})}function v(){return g(i,(M,O)=>{M(O.key==="yes")})}function m(){return g([a])}function P(M="Ok"){return g([{key:"ok",label:M}])}function p(M){return g(zs(M,(O,J)=>Pt({key:O},J)),(O,J)=>{O(J.key)})}const f=[];Object.keys(e).forEach(M=>{!~f.indexOf(M)&&M.slice(0,2)!=="$$"&&M!=="slot"&&console.warn(`<Prompt> was created with unknown prop '${M}'`)});const A=M=>d(M);return n.$capture_state=()=>({oderac:zs,quadInOut:xe,fade:he,k_prompt:l,G_ANS_YES:a,G_ANS_NO:c,A_OPTS_YES_NO:i,F_NOOP:r,F_CALL:u,a_opts:h,b_display:k,b_showing:S,fk_answer:w,answer:d,prompt:g,yes_no:v,yes:m,ok:P,opts:p}),n.$inject_state=M=>{"a_opts"in M&&t(0,h=M.a_opts),"b_display"in M&&t(1,k=M.b_display),"b_showing"in M&&t(2,S=M.b_showing),"fk_answer"in M&&(w=M.fk_answer)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[h,k,S,d,l,A]}class ci extends mt{constructor(e){super(e);pt(this,e,ko,Dn,gt,{k_prompt:4}),D("SvelteRegisterComponent",{component:this,tagName:"Prompt",options:e,id:Dn.name})}get k_prompt(){return this.$$.ctx[4]}set k_prompt(e){throw new Error("<Prompt>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const et="src/component/Assertion.svelte";function ui(n,e,t){const s=n.slice();return s[15]=e[t],s}function _i(n,e,t){const s=n.slice();return s[18]=e[t],s}function fi(n,e,t){const s=n.slice();return s[15]=e[t],s}function di(n,e,t){const s=n.slice();return s[18]=e[t],s}function hi(n,e,t){const s=n.slice();return s[27]=e[t],s}function Yn(n){let e,t,s,o,l,a,c,i,r,u,h=Bt;_e(h);let k=[];for(let m=0;m<h.length;m+=1)k[m]=Qn(hi(n,h,m));let S=n[7];_e(S);let w=[];for(let m=0;m<S.length;m+=1)w[m]=Wn(fi(n,S,m));let d=n[7];_e(d);let g=[];for(let m=0;m<d.length;m+=1)g[m]=Gn(ui(n,d,m));const v={c:function(){e=T("div"),t=T("span");for(let P=0;P<k.length;P+=1)k[P].c();o=L(),l=T("span");for(let P=0;P<w.length;P+=1)w[P].c();c=L(),i=T("span");for(let P=0;P<g.length;P+=1)g[P].c();E(t,"class","tab-wrap s-WG7syJ6nmWd-"),j(t,et,206,2,5169),E(e,"class","tx-basis s-WG7syJ6nmWd-"),j(e,et,205,1,5092),E(l,"class","diamond tx-colors s-WG7syJ6nmWd-"),j(l,et,215,1,5445),E(i,"class","diamond tx-shapes s-WG7syJ6nmWd-"),j(i,et,234,1,6008)},m:function(P,p){G(P,e,p),y(e,t);for(let f=0;f<k.length;f+=1)k[f].m(t,null);G(P,o,p),G(P,l,p);for(let f=0;f<w.length;f+=1)w[f].m(l,null);G(P,c,p),G(P,i,p);for(let f=0;f<g.length;f+=1)g[f].m(i,null);u=!0},p:function(P,p){if(n=P,p&42){h=Bt,_e(h);let f;for(f=0;f<h.length;f+=1){const A=hi(n,h,f);k[f]?k[f].p(A,p):(k[f]=Qn(A),k[f].c(),k[f].m(t,null))}for(;f<k.length;f+=1)k[f].d(1);k.length=h.length}if(p&204){S=n[7],_e(S);let f;for(f=0;f<S.length;f+=1){const A=fi(n,S,f);w[f]?w[f].p(A,p):(w[f]=Wn(A),w[f].c(),w[f].m(l,null))}for(;f<w.length;f+=1)w[f].d(1);w.length=S.length}if(p&196){d=n[7],_e(d);let f;for(f=0;f<d.length;f+=1){const A=ui(n,d,f);g[f]?g[f].p(A,p):(g[f]=Gn(A),g[f].c(),g[f].m(i,null))}for(;f<g.length;f+=1)g[f].d(1);g.length=d.length}},i:function(P){u||(Ve(()=>{s||(s=ue(e,he,{duration:3600,easing:xe},!0)),s.run(1)}),Ve(()=>{a||(a=ue(l,he,{delay:2400,duration:3200,easing:Gt},!0)),a.run(1)}),Ve(()=>{r||(r=ue(i,he,{delay:3200,duration:3200,easing:Gt},!0)),r.run(1)}),u=!0)},o:function(P){s||(s=ue(e,he,{duration:3600,easing:xe},!1)),s.run(0),a||(a=ue(l,he,{delay:2400,duration:3200,easing:Gt},!1)),a.run(0),r||(r=ue(i,he,{delay:3200,duration:3200,easing:Gt},!1)),r.run(0),u=!1},d:function(P){P&&F(e),$e(k,P),P&&s&&s.end(),P&&F(o),P&&F(l),$e(w,P),P&&a&&a.end(),P&&F(c),P&&F(i),$e(g,P),P&&r&&r.end()}};return D("SvelteRegisterBlock",{block:v,id:Yn.name,type:"if",source:"(205:0) {#if b_visible}",ctx:n}),v}function Qn(n){let e,t=ke(Qt[n[27]].describe[n[3]](""))+"",s,o,l,a;const c={c:function(){e=T("span"),s=ce(t),o=L(),E(e,"class","active tab s-WG7syJ6nmWd-"),E(e,"data-basis",n[27]),K(e,"active",n[27]===n[1]),j(e,et,208,4,5228)},m:function(r,u){G(r,e,u),y(e,s),y(e,o),l||(a=Ue(e,"click",n[5],!1,!1,!1),l=!0)},p:function(r,u){u&8&&t!==(t=ke(Qt[r[27]].describe[r[3]](""))+"")&&Ie(s,t),u&2&&K(e,"active",r[27]===r[1])},d:function(r){r&&F(e),l=!1,a()}};return D("SvelteRegisterBlock",{block:c,id:Qn.name,type:"each",source:"(208:3) {#each A_BASES as si_basis}",ctx:n}),c}function mi(n){const e={c:ge,m:ge,p:ge,d:ge};return D("SvelteRegisterBlock",{block:e,id:mi.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function pi(n){let e,t,s=ke(Et[n[26]].labels[n[3]])+"",o,l,a;const c={c:function(){e=T("button"),t=T("span"),o=ce(s),E(t,"class","s-WG7syJ6nmWd-"),j(t,et,226,7,5875),E(e,"class","diamond-"+n[18].pos+" color-"+n[26]+" s-WG7syJ6nmWd-"),E(e,"data-quality","color:"+n[26]),K(e,"selected",`color:${n[26]}`===n[2]),j(e,et,220,6,5669)},m:function(r,u){G(r,e,u),y(e,t),y(t,o),l||(a=Ue(e,"click",n[6],!1,!1,!1),l=!0)},p:function(r,u){u&8&&s!==(s=ke(Et[r[26]].labels[r[3]])+"")&&Ie(o,s),u&132&&K(e,"selected",`color:${r[26]}`===r[2])},d:function(r){r&&F(e),l=!1,a()}};return D("SvelteRegisterBlock",{block:c,id:pi.name,type:"then",source:'(220:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function gi(n){const e={c:ge,m:ge,p:ge,d:ge};return D("SvelteRegisterBlock",{block:e,id:gi.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Bn(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:gi,then:pi,catch:mi,value:26};ks(nn[n[18].key],t);const s={c:function(){e=Nt(),t.block.c()},m:function(l,a){G(l,e,a),t.block.m(l,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(l,a){n=l,ys(t,n,a)},d:function(l){l&&F(e),t.block.d(l),t.token=null,t=null}};return D("SvelteRegisterBlock",{block:s,id:Bn.name,type:"each",source:"(219:4) {#each a_group as g_loc}",ctx:n}),s}function Wn(n){let e,t,s=n[15];_e(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=Bn(di(n,s,a));const l={c:function(){e=T("span");for(let c=0;c<o.length;c+=1)o[c].c();t=L(),E(e,"class","s-WG7syJ6nmWd-"),j(e,et,217,3,5579)},m:function(c,i){G(c,e,i);for(let r=0;r<o.length;r+=1)o[r].m(e,null);y(e,t)},p:function(c,i){if(i&204){s=c[15],_e(s);let r;for(r=0;r<s.length;r+=1){const u=di(c,s,r);o[r]?o[r].p(u,i):(o[r]=Bn(u),o[r].c(),o[r].m(e,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d:function(c){c&&F(e),$e(o,c)}};return D("SvelteRegisterBlock",{block:l,id:Wn.name,type:"each",source:"(217:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),l}function wi(n){const e={c:ge,m:ge,p:ge,d:ge};return D("SvelteRegisterBlock",{block:e,id:wi.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function bi(n){let e,t,s=Yt[n[21]].symbol+"",o,l,a;const c={c:function(){e=T("button"),t=T("span"),o=ce(s),E(t,"class","s-WG7syJ6nmWd-"),j(t,et,245,7,6440),E(e,"class","diamond-"+n[18].pos+" bg-rad-"+n[18].pos+" s-WG7syJ6nmWd-"),E(e,"data-quality","shape:"+n[21]),K(e,"selected",`shape:${n[21]}`===n[2]),j(e,et,239,6,6232)},m:function(r,u){G(r,e,u),y(e,t),y(t,o),l||(a=Ue(e,"click",n[6],!1,!1,!1),l=!0)},p:function(r,u){u&132&&K(e,"selected",`shape:${r[21]}`===r[2])},d:function(r){r&&F(e),l=!1,a()}};return D("SvelteRegisterBlock",{block:c,id:bi.name,type:"then",source:'(239:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function ki(n){const e={c:ge,m:ge,p:ge,d:ge};return D("SvelteRegisterBlock",{block:e,id:ki.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Hn(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:ki,then:bi,catch:wi,value:21};ks(sn[n[18].key],t);const s={c:function(){e=Nt(),t.block.c()},m:function(l,a){G(l,e,a),t.block.m(l,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(l,a){n=l,ys(t,n,a)},d:function(l){l&&F(e),t.block.d(l),t.token=null,t=null}};return D("SvelteRegisterBlock",{block:s,id:Hn.name,type:"each",source:"(238:4) {#each a_group as g_loc}",ctx:n}),s}function Gn(n){let e,t,s=n[15];_e(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=Hn(_i(n,s,a));const l={c:function(){e=T("span");for(let c=0;c<o.length;c+=1)o[c].c();t=L(),E(e,"class","s-WG7syJ6nmWd-"),j(e,et,236,3,6142)},m:function(c,i){G(c,e,i);for(let r=0;r<o.length;r+=1)o[r].m(e,null);y(e,t)},p:function(c,i){if(i&196){s=c[15],_e(s);let r;for(r=0;r<s.length;r+=1){const u=_i(c,s,r);o[r]?o[r].p(u,i):(o[r]=Hn(u),o[r].c(),o[r].m(e,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d:function(c){c&&F(e),$e(o,c)}};return D("SvelteRegisterBlock",{block:l,id:Gn.name,type:"each",source:"(236:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),l}function Fn(n){let e,t,s=n[0]&&Yn(n);const o={c:function(){s&&s.c(),e=Nt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),G(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&q(s,1)):(s=Yn(a),s.c(),q(s,1),s.m(e.parentNode,e)):s&&(Qe(),B(s,1,1,()=>{s=null}),Be())},i:function(a){t||(q(s),t=!0)},o:function(a){B(s),t=!1},d:function(a){s&&s.d(a),a&&F(e)}};return D("SvelteRegisterBlock",{block:o,id:Fn.name,type:"component",source:"",ctx:n}),o}function yo(n,e,t){let s,{$$slots:o={},$$scope:l}=e;wt("Assertion",o,[]);const a={show:k,hide:S},c=lt(),i=qt("game");let r=i.language;eo(r,"yw_lang"),to(n,r,f=>t(3,s=f));let u=!1,h="";async function k(f){h=f||"",f&&(t(1,w=f),c("basis",w)),t(0,u=!0)}function S(){t(0,u=!1)}let w=Bt[0],d=null;const g=(f,A)=>f.closest(`[data-${A}]`).getAttribute(`data-${A}`);function v(f){const A=g(f.target,"basis");h&&A!==h||(t(1,w=A),c("basis",w))}function m(f){t(2,d=g(f.target,"quality")),c("quality",d)}const P=[[{key:0,pos:"top"},{key:2,pos:"rgt"}],[{key:1,pos:"lft"},{key:3,pos:"btm"}]],p=[];return Object.keys(e).forEach(f=>{!~p.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Assertion> was created with unknown prop '${f}'`)}),n.$capture_state=()=>({getContext:qt,createEventDispatcher:lt,fade:he,expoOut:Gt,quadInOut:xe,proper:ke,A_BASES:Bt,A_COLORS:nn,A_SHAPES:sn,H_BASES:Qt,H_COLORS:Et,H_SHAPES:Yt,k_tx:a,dispatch:c,g_game:i,yw_lang:r,b_visible:u,si_basis_force:h,show:k,hide:S,si_basis_active:w,si_quality:d,data:g,select_basis:v,select_quality:m,A_DIAMOND_KEYS:P,$yw_lang:s}),n.$inject_state=f=>{"yw_lang"in f&&t(4,r=f.yw_lang),"b_visible"in f&&t(0,u=f.b_visible),"si_basis_force"in f&&(h=f.si_basis_force),"si_basis_active"in f&&t(1,w=f.si_basis_active),"si_quality"in f&&t(2,d=f.si_quality)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[u,w,d,s,r,v,m,P,a]}class yi extends mt{constructor(e){super(e);pt(this,e,yo,Fn,gt,{k_tx:8}),D("SvelteRegisterComponent",{component:this,tagName:"Assertion",options:e,id:Fn.name})}get k_tx(){return this.$$.ctx[8]}set k_tx(e){throw new Error("<Assertion>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function vi(n,e){const t=new no(39,39,3.3,128,1),s=[new vs({color:"red"}),new so({map:n,bumpMap:e,bumpScale:Math.random()*.2+.2}),new vs({map:n})];{const r=new io;for(var o=0;o<16;o++){var l=(o+1)/16,a=l*Math.PI*2,c=10*Math.cos(a),i=10*Math.sin(a);o==0?r.moveTo(c,i):r.lineTo(c,i)}return new oo(t,s)}}const zn=Math.PI,vo=zn*2,Jn=Math.sqrt(3);function _n(n,e,t,s,o){const l=new Path2D;switch(o){case"triangle":{const a=Math.sqrt(t*Jn),c=Jn*.5*a,i=a*Jn/6,r=i/3;l.moveTo(e,e-(c-i)+r),l.lineTo(e+a/2,e+i+r),l.lineTo(e-a/2,e+i+r);break}case"square":{const a=Math.sqrt(t),c=e-a*.5;l.moveTo(c,c),l.lineTo(c+a,c),l.lineTo(c+a,c+a),l.lineTo(c,c+a);break}case"circle":{const a=Math.sqrt(t/zn);l.ellipse(e,e,a,a,0,0,vo);break}case"star":{const a=zn/5,c=Math.sqrt(2*t/(5*Math.sin(a)));let i=-1.5*a;l.moveTo(e,e-c);for(let r=0;r<9;r++){const u=c*((r%2+1)/2);l.lineTo(e+u*Math.cos(i),e+u*Math.sin(i)),i+=a}break}}l.closePath(),n.fillStyle=Et[s].color,n.fill(l),n.globalAlpha=1,n.strokeStyle="black",n.lineWidth=Math.round(Math.sqrt(t)/50),n.stroke(l)}const So="src/component/Scene.svelte";function Kn(n){let e;const t={c:function(){e=T("div"),E(e,"class","s-O3-AoQkAZcdH"),j(e,So,212,0,7220)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,l){G(o,e,l),n[2](e)},p:ge,i:ge,o:ge,d:function(o){o&&F(e),n[2](null)}};return D("SvelteRegisterBlock",{block:t,id:Kn.name,type:"component",source:"",ctx:n}),t}function Po(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("Scene",s,[]);const l=Math.PI,a=l*2,c=Math.sqrt(3);let{k_scene:i}=e,r;async function u(d){const g={},v=new js;for(const m in d){const P=d[m];g[m]=await new Promise(p=>{v.load(P,f=>{p(f)})})}return g}function h(d){const g=d.image,v=Pe("canvas",{width:g.width,height:g.height}),m=v.getContext("2d");return[v,m,g]}let k;Ut(async()=>{t(1,i={animate_chip_entry:Q}),k=await u({chip:"/asset/chip.png",chip_displace:"/asset/chip-displacement.png",scuffs:"/asset/scuffs.png"});let d=k.chip,g=k.scuffs;{const[Y,C,fe]=h(k.scuffs),ve=Y.width,de=Y.height,z=Math.random()*a;C.save();const Ce=ve/2,we=de/2;C.translate(Ce,we),C.rotate(z),C.scale(Math.SQRT2,Math.SQRT2),C.drawImage(fe,-Ce,-we),C.restore(),g=new bn(Y)}const v=new Ss({antialias:!0}),m=ei(document.body,".msg-panel").getBoundingClientRect(),P=window.innerWidth,p=Math.max(400,Math.min(800,window.innerHeight-m.bottom));v.setSize(P,p),r.appendChild(v.domElement);const f=P/p,A=new Ps,M=new Es(45,f,1,5e3);M.position.set(0,0,140),M.lookAt(0,0,0);let O;{const Y=new As(3158064);A.add(Y)}{const Y=new Cs;Y.position.set(0,100,50),Y.decay=2.5,Y.angle=Math.PI/9,Y.penumbra=.9,A.add(Y)}function J(){v.render(A,M)}v.setAnimationLoop(()=>{J(),Ts()});function I(Y,C){const[fe,ve,de]=h(k.chip),z=de.width;de.height,ve.drawImage(de,0,0);const Ce=z/2,we=Math.pow(Ce*(2/9),2)*l;_n(ve,Ce,we,Y,C),d=new bn(fe),O=vi(d,g),A.add(O)}async function Q(Y,C){I(Y,C),O.position.y=8e5,O.visible=!0,new $t(new kn(-780,-2450,-3e3)).to(new kn(0,0,0),4e3).easing(en.Cubic.Out).onUpdate(z=>{O.position.setX(z.x),O.position.setZ(z.z)}).start(),new $t({y:750}).to({y:0},4e3).easing(en.Back.Out).onUpdate(({y:z})=>{O.position.setY(z)}).start(),new $t(new yn(0,0,0)).to(new yn(0,l/2,l/2-l/6),4e3).easing(en.Cubic.Out).onUpdate(z=>{O.rotation.set(z.x,z.y,z.z)}).start()}});const S=["k_scene"];Object.keys(e).forEach(d=>{!~S.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Scene> was created with unknown prop '${d}'`)});function w(d){Ae[d?"unshift":"push"](()=>{r=d,t(0,r)})}return n.$$set=d=>{"k_scene"in d&&t(1,i=d.k_scene)},n.$capture_state=()=>({onMount:Ut,chip:vi,AmbientLight:As,Scene:Ps,PerspectiveCamera:Es,WebGLRenderer:Ss,Vector3:kn,TextureLoader:js,SpotLight:Cs,Euler:yn,CanvasTexture:bn,Tween:$t,Easing:en,updateTween:Ts,dd:Pe,qs:ei,draw_shape:_n,X_PI:l,X_2PI:a,X_SQRT_3:c,k_scene:i,dm_container:r,load_textures:u,canvas_from_tex:h,h_textures:k}),n.$inject_state=d=>{"k_scene"in d&&t(1,i=d.k_scene),"dm_container"in d&&t(0,r=d.dm_container),"h_textures"in d&&(k=d.h_textures)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[r,i,w]}class Si extends mt{constructor(e){super(e);pt(this,e,Po,Kn,gt,{k_scene:1}),D("SvelteRegisterComponent",{component:this,tagName:"Scene_1",options:e,id:Kn.name});const{ctx:t}=this.$$,s=e.props||{};t[1]===void 0&&!("k_scene"in s)&&console.warn("<Scene> was created without expected prop 'k_scene'")}get k_scene(){throw new Error("<Scene>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_scene(e){throw new Error("<Scene>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const fn="src/component/PremiseWidget.svelte";function Pi(n,e,t){const s=n.slice();return s[14]=e[t][0],s[15]=e[t][1],s[17]=t,s}function Xn(n){let e,t,s,o,l,a=n[15].label+"",c,i,r,u,h,k,S;s=new Re({props:{icon:n[15].icon},$$inline:!0});function w(){return n[9](n[14])}const d={c:function(){e=T("span"),t=T("span"),Me(s.$$.fragment),o=L(),l=T("span"),c=ce(a),i=L(),E(t,"class","truth-opt-icon s-6n-w-T5otbqJ"),j(t,fn,158,3,4045),E(l,"class","truth-opt-text s-6n-w-T5otbqJ"),j(l,fn,161,3,4117),E(e,"class",r="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"),E(e,"data-opt",u=n[14]),K(e,"selected",n[14]===n[2]),K(e,"undeniable",n[0]==="undeniable"),K(e,"true",n[0]==="true"),K(e,"verified",n[0]==="verified"),j(e,fn,149,2,3714)},m:function(v,m){G(v,e,m),y(e,t),Oe(s,t,null),y(e,o),y(e,l),y(l,c),y(e,i),h=!0,k||(S=Ue(e,"click",w,!1,!1,!1),k=!0)},p:function(v,m){n=v;const P={};m&2&&(P.icon=n[15].icon),s.$set(P),(!h||m&2)&&a!==(a=n[15].label+"")&&Ie(c,a),(!h||m&16&&r!==(r="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"))&&E(e,"class",r),(!h||m&2&&u!==(u=n[14]))&&E(e,"data-opt",u),m&22&&K(e,"selected",n[14]===n[2]),m&17&&K(e,"undeniable",n[0]==="undeniable"),m&17&&K(e,"true",n[0]==="true"),m&17&&K(e,"verified",n[0]==="verified")},i:function(v){h||(q(s.$$.fragment,v),h=!0)},o:function(v){B(s.$$.fragment,v),h=!1},d:function(v){v&&F(e),qe(s),k=!1,S()}};return D("SvelteRegisterBlock",{block:d,id:Xn.name,type:"each",source:"(149:1) {#each a_opts as [si_opt, g_opt], i_opt}",ctx:n}),d}function Vn(n){let e,t,s=n[1];_e(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=Xn(Pi(n,s,c));const l=c=>B(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=T("span");for(let i=0;i<o.length;i+=1)o[i].c();E(e,"class","truth s-6n-w-T5otbqJ"),K(e,"known",!!n[0]),j(e,fn,147,0,3603)},l:function(i){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,r){G(i,e,r);for(let u=0;u<o.length;u+=1)o[u].m(e,null);n[10](e),t=!0},p:function(i,[r]){if(r&55){s=i[1],_e(s);let u;for(u=0;u<s.length;u+=1){const h=Pi(i,s,u);o[u]?(o[u].p(h,r),q(o[u],1)):(o[u]=Xn(h),o[u].c(),q(o[u],1),o[u].m(e,null))}for(Qe(),u=s.length;u<o.length;u+=1)l(u);Be()}r&1&&K(e,"known",!!i[0])},i:function(i){if(!t){for(let r=0;r<s.length;r+=1)q(o[r]);t=!0}},o:function(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)B(o[r]);t=!1},d:function(i){i&&F(e),$e(o,i),n[10](null)}};return D("SvelteRegisterBlock",{block:a,id:Vn.name,type:"component",source:"",ctx:n}),a}function Eo(n,e,t){let s,{$$slots:o={},$$scope:l}=e;wt("PremiseWidget",o,[]);const a={ignore:{label:"Ignore",icon:Is},trust:{label:"Trust",icon:tn},distrust:{label:"Distrust",icon:Rs}};let c=Ne(a),{b_mode_nobody:i}=e,{si_assertion:r}=e,{si_known:u}=e;const h={apply(p){return k(p)}};let k=p=>p,S="ignore",w;const d=lt();function g(p){S!==p&&(t(2,S=p),i?k=f=>S==="trust"?f.nobody(r):S==="distrust"?f.opponent(r,!0):f:k=f=>S==="trust"?f.opponent(r,!0):S==="distrust"?f.opponent(r,!1):f,d("change",p))}const v=["b_mode_nobody","si_assertion","si_known"];Object.keys(e).forEach(p=>{!~v.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<PremiseWidget> was created with unknown prop '${p}'`)});const m=p=>g(p);function P(p){Ae[p?"unshift":"push"](()=>{w=p,t(3,w)})}return n.$$set=p=>{"b_mode_nobody"in p&&t(6,i=p.b_mode_nobody),"si_assertion"in p&&t(7,r=p.si_assertion),"si_known"in p&&t(0,u=p.si_known)},n.$capture_state=()=>({createEventDispatcher:lt,Fa:Re,faCheckCircle:tn,faTimesCircle:Rs,faDotCircle:Is,faEgg:Ms,faCheck:vn,ode:Ne,proper:ke,H_OPTS:a,a_opts:c,b_mode_nobody:i,si_assertion:r,si_known:u,k_premise:h,f_apply:k,si_belief:S,dm_truth:w,dispatch:d,select_opt:g,nl_opts:s}),n.$inject_state=p=>{"a_opts"in p&&t(1,c=p.a_opts),"b_mode_nobody"in p&&t(6,i=p.b_mode_nobody),"si_assertion"in p&&t(7,r=p.si_assertion),"si_known"in p&&t(0,u=p.si_known),"f_apply"in p&&(k=p.f_apply),"si_belief"in p&&t(2,S=p.si_belief),"dm_truth"in p&&t(3,w=p.dm_truth),"nl_opts"in p&&t(4,s=p.nl_opts)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&u&&t(1,c=Ne({ignore:{label:ke(u),icon:{undeniable:Ms,true:vn,verified:vn}[u]}})),n.$$.dirty&2&&t(4,s=c.length)},[u,c,S,w,s,g,i,r,h,m,P]}class Xt extends mt{constructor(e){super(e);pt(this,e,Eo,Vn,gt,{b_mode_nobody:6,si_assertion:7,si_known:0,k_premise:8}),D("SvelteRegisterComponent",{component:this,tagName:"PremiseWidget",options:e,id:Vn.name});const{ctx:t}=this.$$,s=e.props||{};t[6]===void 0&&!("b_mode_nobody"in s)&&console.warn("<PremiseWidget> was created without expected prop 'b_mode_nobody'"),t[7]===void 0&&!("si_assertion"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_assertion'"),t[0]===void 0&&!("si_known"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_known'")}get b_mode_nobody(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set b_mode_nobody(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_assertion(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_assertion(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_known(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_known(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_premise(){return this.$$.ctx[8]}set k_premise(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Le="src/component/Decision.svelte";function Ei(n,e,t){const s=n.slice();return s[20]=e[t],s}function Ai(n,e,t){const s=n.slice();return s[20]=e[t],s}function xn(n){let e,t,s,o,l,a,c,i,r,u,h,k,S,w,d,g,v,m,P,p,f=n[3];_e(f);let A=[];for(let I=0;I<f.length;I+=1)A[I]=Zn(Ai(n,f,I));let M=n[2];_e(M);let O=[];for(let I=0;I<M.length;I+=1)O[I]=$n(Ei(n,M,I));const J={c:function(){e=T("div"),t=T("div"),s=T("div"),o=T("button"),o.textContent="Abstain",l=L(),a=T("div"),c=T("span"),c.textContent="Arbiter's bag:",i=L(),r=T("span"),u=T("span");for(let Q=0;Q<A.length;Q+=1)A[Q].c();h=L(),k=T("div"),S=T("span"),S.textContent="Opponent's chip:",w=L(),d=T("span"),g=T("span");for(let Q=0;Q<O.length;Q+=1)O[Q].c();E(o,"class","s-UQAPz40uou8M"),j(o,Le,219,4,7322),E(s,"class","decision-abstain s-UQAPz40uou8M"),K(s,"selected",n[4]===n[1]),j(s,Le,218,3,7237),E(c,"class","decision-opts-row-title s-UQAPz40uou8M"),j(c,Le,224,4,7458),E(u,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(u,Le,228,5,7576),E(r,"class","decision-opts-row-view s-UQAPz40uou8M"),j(r,Le,227,4,7533),E(a,"class","decision-opts-row s-UQAPz40uou8M"),E(a,"data-target","bag"),j(a,Le,223,3,7404),E(S,"class","decision-opts-row-title s-UQAPz40uou8M"),j(S,Le,242,4,7969),E(g,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(g,Le,246,5,8089),E(d,"class","decision-opts-row-view s-UQAPz40uou8M"),j(d,Le,245,4,8046),E(k,"class","decision-opts-row s-UQAPz40uou8M"),E(k,"data-target","opponent"),j(k,Le,241,3,7910),E(t,"class","decision-opts s-UQAPz40uou8M"),j(t,Le,217,2,7206),E(e,"class","decision s-UQAPz40uou8M"),K(e,"staged",!!n[1]),j(e,Le,213,1,7007)},m:function(Q,Y){G(Q,e,Y),y(e,t),y(t,s),y(s,o),y(t,l),y(t,a),y(a,c),y(a,i),y(a,r),y(r,u);for(let C=0;C<A.length;C+=1)A[C].m(u,null);y(t,h),y(t,k),y(k,S),y(k,w),y(k,d),y(d,g);for(let C=0;C<O.length;C+=1)O[C].m(g,null);m=!0,P||(p=Ue(o,"click",n[10],!1,!1,!1),P=!0)},p:function(Q,Y){if(n=Q,Y&18&&K(s,"selected",n[4]===n[1]),Y&170){f=n[3],_e(f);let C;for(C=0;C<f.length;C+=1){const fe=Ai(n,f,C);A[C]?A[C].p(fe,Y):(A[C]=Zn(fe),A[C].c(),A[C].m(u,null))}for(;C<A.length;C+=1)A[C].d(1);A.length=f.length}if(Y&166){M=n[2],_e(M);let C;for(C=0;C<M.length;C+=1){const fe=Ei(n,M,C);O[C]?O[C].p(fe,Y):(O[C]=$n(fe),O[C].c(),O[C].m(g,null))}for(;C<O.length;C+=1)O[C].d(1);O.length=M.length}Y&2&&K(e,"staged",!!n[1])},i:function(Q){m||(Ve(()=>{v||(v=ue(e,he,{duration:3600,easing:xe},!0)),v.run(1)}),m=!0)},o:function(Q){v||(v=ue(e,he,{duration:3600,easing:xe},!1)),v.run(0),m=!1},d:function(Q){Q&&F(e),$e(A,Q),$e(O,Q),Q&&v&&v.end(),P=!1,p()}};return D("SvelteRegisterBlock",{block:J,id:xn.name,type:"if",source:"(213:0) {#if b_visible}",ctx:n}),J}function Zn(n){let e,t,s=n[7](n[20])+"",o,l,a;function c(){return n[11](n[20])}const i={c:function(){e=T("span"),t=new qs,o=L(),t.a=o,E(e,"class","decision-opt s-UQAPz40uou8M"),K(e,"selected",n[20]===n[1]),j(e,Le,230,7,7660)},m:function(u,h){G(u,e,h),t.m(s,e),y(e,o),l||(a=Ue(e,"click",c,!1,!1,!1),l=!0)},p:function(u,h){n=u,h&8&&s!==(s=n[7](n[20])+"")&&t.p(s),h&10&&K(e,"selected",n[20]===n[1])},d:function(u){u&&F(e),l=!1,a()}};return D("SvelteRegisterBlock",{block:i,id:Zn.name,type:"each",source:"(230:6) {#each a_opts_arb as k_opt}",ctx:n}),i}function $n(n){let e,t,s=n[7](n[20])+"",o,l,a,c,i;function r(){return n[12](n[20])}const u={c:function(){e=T("span"),t=new qs,o=L(),l=T("img"),a=L(),t.a=o,Os(l,"display","none"),E(l,"alt","hidden"),E(l,"class","s-UQAPz40uou8M"),j(l,Le,254,8,8369),E(e,"class","decision-opt s-UQAPz40uou8M"),K(e,"selected",n[20]===n[1]),j(e,Le,248,7,8173)},m:function(k,S){G(k,e,S),t.m(s,e),y(e,o),y(e,l),y(e,a),c||(i=Ue(e,"click",r,!1,!1,!1),c=!0)},p:function(k,S){n=k,S&4&&s!==(s=n[7](n[20])+"")&&t.p(s),S&6&&K(e,"selected",n[20]===n[1])},d:function(k){k&&F(e),c=!1,i()}};return D("SvelteRegisterBlock",{block:u,id:$n.name,type:"each",source:"(248:6) {#each a_opts_opp as k_opt}",ctx:n}),u}function es(n){let e,t,s=n[0]&&xn(n);const o={c:function(){s&&s.c(),e=Nt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),G(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&q(s,1)):(s=xn(a),s.c(),q(s,1),s.m(e.parentNode,e)):s&&(Qe(),B(s,1,1,()=>{s=null}),Be())},i:function(a){t||(q(s),t=!0)},o:function(a){B(s),t=!1},d:function(a){s&&s.d(a),a&&F(e)}};return D("SvelteRegisterBlock",{block:o,id:es.name,type:"component",source:"",ctx:n}),o}class Ao{constructor(e,t){this._si_color=e,this._si_shape=t}get color(){return this._si_color}get shape(){return this._si_shape}}function Co(n,e,t){let s,o,{$$slots:l={},$$scope:a}=e;wt("Decision",l,[]);const c={show:S,hide:w};let{k_deduced:i}=e;const r=lt(),u=qt("game");let h=u.language,k=!1;async function S(){t(0,k=!0)}function w(){t(0,k=!1)}const d={target:"abstain",color:null,shape:null};let g=null;function v(I,Q){g!==Q&&(t(1,g=Q),r("change",Q))}function m(){t(1,g=d),r("abstain")}const P=Pe("canvas",{width:100,height:100}),p=P.getContext("2d");function f(I){p.clearRect(0,0,100,100),p.stroke(),p.globalAlpha=.8,_n(p,50,Math.pow(35,2),I.color,I.shape);const Q=P.toDataURL();return Pe("span",{},[Pe("span",{class:"decision-opt-label"},[`${ke(I.color)} ${ke(I.shape)}`]),Pe("img",{src:Q})]).innerHTML}const A=["k_deduced"];Object.keys(e).forEach(I=>{!~A.indexOf(I)&&I.slice(0,2)!=="$$"&&I!=="slot"&&console.warn(`<Decision> was created with unknown prop '${I}'`)});const M=()=>m(),O=I=>v("bag",I),J=I=>v("opponent",I);return n.$$set=I=>{"k_deduced"in I&&t(9,i=I.k_deduced)},n.$capture_state=()=>({Opt:Ao,getContext:qt,createEventDispatcher:lt,fade:he,quadInOut:xe,proper:ke,dd:Pe,draw_shape:_n,k_decision:c,k_deduced:i,dispatch:r,g_game:u,yw_lang:h,b_visible:k,show:S,hide:w,g_opt_abstain:d,g_opt_selected:g,stage_decision:v,stage_abstain:m,dm_canvas:P,d_ctx:p,render_icon:f,a_opts_opp:o,a_opts_arb:s}),n.$inject_state=I=>{"k_deduced"in I&&t(9,i=I.k_deduced),"yw_lang"in I&&(h=I.yw_lang),"b_visible"in I&&t(0,k=I.b_visible),"g_opt_selected"in I&&t(1,g=I.g_opt_selected),"a_opts_opp"in I&&t(2,o=I.a_opts_opp),"a_opts_arb"in I&&t(3,s=I.a_opts_arb)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&512&&t(3,s=i.enumerate("bag")),n.$$.dirty&512&&t(2,o=i.enumerate("opponent")),n.$$.dirty&512&&t(1,g=null)},[k,g,o,s,d,v,m,f,c,i,M,O,J]}class Ci extends mt{constructor(e){super(e);pt(this,e,Co,es,gt,{k_decision:8,k_deduced:9}),D("SvelteRegisterComponent",{component:this,tagName:"Decision",options:e,id:es.name});const{ctx:t}=this.$$,s=e.props||{};t[9]===void 0&&!("k_deduced"in s)&&console.warn("<Decision> was created without expected prop 'k_deduced'")}get k_decision(){return this.$$.ctx[8]}set k_decision(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_deduced(){throw new Error("<Decision>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_deduced(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const dn="src/component/ActionWidget.svelte";function Ti(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s[12]=t,s}function ts(n){let e,t,s,o,l,a=n[10].label+"",c,i,r,u,h;s=new Re({props:{icon:n[10].icon},$$inline:!0});function k(){return n[5](n[9])}const S={c:function(){e=T("span"),t=T("span"),Me(s.$$.fragment),o=L(),l=T("span"),c=ce(a),i=L(),E(t,"class","action-opt-icon s-8eNH5FVaHsSg"),j(t,dn,87,3,2291),E(l,"class","action-opt-text s-8eNH5FVaHsSg"),j(l,dn,90,3,2364),E(e,"class","action-opt "+(n[12]===0?"opt-lft":"")+" "+(n[3]-1===n[12]?"opt-rgt":"opt-mid")+" s-8eNH5FVaHsSg"),E(e,"data-opt",n[9]),K(e,"selected",n[9]===n[0]),j(e,dn,86,2,2093)},m:function(d,g){G(d,e,g),y(e,t),Oe(s,t,null),y(e,o),y(e,l),y(l,c),y(e,i),r=!0,u||(h=Ue(e,"click",k,!1,!1,!1),u=!0)},p:function(d,g){n=d,g&5&&K(e,"selected",n[9]===n[0])},i:function(d){r||(q(s.$$.fragment,d),r=!0)},o:function(d){B(s.$$.fragment,d),r=!1},d:function(d){d&&F(e),qe(s),u=!1,h()}};return D("SvelteRegisterBlock",{block:S,id:ts.name,type:"each",source:"(86:1) {#each ode(H_OPTS) as [si_opt, g_opt], i_opt}",ctx:n}),S}function ns(n){let e,t,s=Ne(n[2]);_e(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=ts(Ti(n,s,c));const l=c=>B(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=T("span");for(let i=0;i<o.length;i+=1)o[i].c();E(e,"class","action s-8eNH5FVaHsSg"),Os(e,"width",100*n[3]+"px"),j(e,dn,84,0,1967)},l:function(i){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,r){G(i,e,r);for(let u=0;u<o.length;u+=1)o[u].m(e,null);n[6](e),t=!0},p:function(i,[r]){if(r&29){s=Ne(i[2]),_e(s);let u;for(u=0;u<s.length;u+=1){const h=Ti(i,s,u);o[u]?(o[u].p(h,r),q(o[u],1)):(o[u]=ts(h),o[u].c(),q(o[u],1),o[u].m(e,null))}for(Qe(),u=s.length;u<o.length;u+=1)l(u);Be()}},i:function(i){if(!t){for(let r=0;r<s.length;r+=1)q(o[r]);t=!0}},o:function(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)B(o[r]);t=!1},d:function(i){i&&F(e),$e(o,i),n[6](null)}};return D("SvelteRegisterBlock",{block:a,id:ns.name,type:"component",source:"",ctx:n}),a}function To(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("ActionWidget",s,[]);const l={yes:{label:"Yes",icon:tn}},a=Ne(l).length;let c=d=>d,{si_selected:i="none"}=e,r;const u=lt();function h(d){i!==d&&(t(0,i=d),u("change",d))}const k=["si_selected"];Object.keys(e).forEach(d=>{!~k.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<ActionWidget> was created with unknown prop '${d}'`)});const S=d=>h(d);function w(d){Ae[d?"unshift":"push"](()=>{r=d,t(1,r)})}return n.$$set=d=>{"si_selected"in d&&t(0,i=d.si_selected)},n.$capture_state=()=>({createEventDispatcher:lt,Fa:Re,faCheckCircle:tn,ode:Ne,H_OPTS:l,NL_OPTS:a,f_apply:c,si_selected:i,dm_action:r,dispatch:u,select_opt:h}),n.$inject_state=d=>{"f_apply"in d&&(c=d.f_apply),"si_selected"in d&&t(0,i=d.si_selected),"dm_action"in d&&t(1,r=d.dm_action)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,r,l,a,h,S,w]}class ji extends mt{constructor(e){super(e);pt(this,e,To,ns,gt,{si_selected:0}),D("SvelteRegisterComponent",{component:this,tagName:"ActionWidget",options:e,id:ns.name})}get si_selected(){throw new Error("<ActionWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_selected(e){throw new Error("<ActionWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Vt="src/component/Pick.svelte";function Ri(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s}function ss(n){let e,t,s,o=Ne(n[2]);_e(o);let l=[];for(let i=0;i<o.length;i+=1)l[i]=is(Ri(n,o,i));const a=i=>B(l[i],1,1,()=>{l[i]=null}),c={c:function(){e=T("div");for(let r=0;r<l.length;r+=1)l[r].c();E(e,"class","pick s-AUZQ0ENzDxvQ"),K(e,"picked",!!n[1]),j(e,Vt,77,1,1812)},m:function(r,u){G(r,e,u);for(let h=0;h<l.length;h+=1)l[h].m(e,null);s=!0},p:function(r,u){if(u&14){o=Ne(r[2]),_e(o);let h;for(h=0;h<o.length;h+=1){const k=Ri(r,o,h);l[h]?(l[h].p(k,u),q(l[h],1)):(l[h]=is(k),l[h].c(),q(l[h],1),l[h].m(e,null))}for(Qe(),h=o.length;h<l.length;h+=1)a(h);Be()}u&2&&K(e,"picked",!!r[1])},i:function(r){if(!s){for(let u=0;u<o.length;u+=1)q(l[u]);Ve(()=>{t||(t=ue(e,bt,{duration:2500},!0)),t.run(1)}),s=!0}},o:function(r){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)B(l[u]);t||(t=ue(e,bt,{duration:2500},!1)),t.run(0),s=!1},d:function(r){r&&F(e),$e(l,r),r&&t&&t.end()}};return D("SvelteRegisterBlock",{block:c,id:ss.name,type:"if",source:"(77:0) {#if b_visible}",ctx:n}),c}function is(n){let e,t,s=n[10].label+"",o,l,a,c,i,r,u=n[10].description+"",h,k,S,w,d;c=new Re({props:{icon:n[10].icon},$$inline:!0});function g(){return n[5](n[9])}const v={c:function(){e=T("span"),t=T("div"),o=ce(s),l=L(),a=T("div"),Me(c.$$.fragment),i=L(),r=T("div"),h=ce(u),k=L(),E(t,"class","pick-label s-AUZQ0ENzDxvQ"),j(t,Vt,80,4,2071),E(a,"class","pick-icon s-AUZQ0ENzDxvQ"),j(a,Vt,83,4,2131),E(r,"class","pick-description s-AUZQ0ENzDxvQ"),j(r,Vt,86,4,2201),E(e,"class","pick-opt s-AUZQ0ENzDxvQ"),E(e,"data-pick",n[9]),K(e,"selected",n[1]===n[9]),j(e,Vt,79,3,1946)},m:function(P,p){G(P,e,p),y(e,t),y(t,o),y(e,l),y(e,a),Oe(c,a,null),y(e,i),y(e,r),y(r,h),y(e,k),S=!0,w||(d=Ue(e,"click",g,!1,!1,!1),w=!0)},p:function(P,p){n=P,p&6&&K(e,"selected",n[1]===n[9])},i:function(P){S||(q(c.$$.fragment,P),S=!0)},o:function(P){B(c.$$.fragment,P),S=!1},d:function(P){P&&F(e),qe(c),w=!1,d()}};return D("SvelteRegisterBlock",{block:v,id:is.name,type:"each",source:"(79:2) {#each ode(H_PICKS) as [si_pick, g_pick]}",ctx:n}),v}function os(n){let e,t,s=n[0]&&ss(n);const o={c:function(){s&&s.c(),e=Nt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),G(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&q(s,1)):(s=ss(a),s.c(),q(s,1),s.m(e.parentNode,e)):s&&(Qe(),B(s,1,1,()=>{s=null}),Be())},i:function(a){t||(q(s),t=!0)},o:function(a){B(s),t=!1},d:function(a){s&&s.d(a),a&&F(e)}};return D("SvelteRegisterBlock",{block:o,id:os.name,type:"component",source:"",ctx:n}),o}function jo(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("Pick",s,[]);const l={jackpot:{icon:Us,label:"Jackpot",description:"A pile of SCRT accrued from lost wagers. The exact amount you will receive is a secret."},nft:{icon:Ns,label:"Power-up NFT",description:"A unique NFT that gives the owner some special power when used during gameplay. The type of power-up you will receive is a secret."}};let a=!1,c=null;const i={show:r,hide:u};function r(){t(0,a=!0)}function u(){t(0,a=!1)}const h=lt();function k(d){t(1,c=d),h("pick",c)}const S=[];Object.keys(e).forEach(d=>{!~S.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Pick> was created with unknown prop '${d}'`)});const w=d=>k(d);return n.$capture_state=()=>({createEventDispatcher:lt,blur:bt,Fa:Re,faCoins:Us,faTrophy:Ns,ode:Ne,H_PICKS:l,b_visible:a,si_pick_selected:c,k_pick:i,show:r,hide:u,dispatch:h,pick:k}),n.$inject_state=d=>{"b_visible"in d&&t(0,a=d.b_visible),"si_pick_selected"in d&&t(1,c=d.si_pick_selected)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[a,c,l,k,i,w]}class Ii extends mt{constructor(e){super(e);pt(this,e,jo,os,gt,{k_pick:4}),D("SvelteRegisterComponent",{component:this,tagName:"Pick",options:e,id:os.name})}get k_pick(){return this.$$.ctx[4]}set k_pick(e){throw new Error("<Pick>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class as{#e;static includes(e){for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);if(s&&e.test(s))return!0}return!1}constructor(e,t){this._si_namespace=e,this.#e=t}set(e,t){let s;try{s=JSON.stringify(t)}catch{throw new Error("Unable to stringify value")}let o;try{o=Sn.exports.AES.encrypt(s,this.#e).toString()}catch{throw new Error("Unable to encrypt message")}return localStorage.setItem(`${this._si_namespace}.${e}`,o)}get(e){const t=localStorage.getItem(`${this._si_namespace}.${e}`);if(t===null)return t;let s;try{s=Sn.exports.AES.decrypt(t,this.#e).toString(Sn.exports.enc.Utf8)}catch{throw new Error("Failed to decrypt value using provided secret")}let o;try{o=JSON.parse(s)}catch{throw new Error("Failed to parse decrypted text")}return o}clear(){const e=`${this._si_namespace}.`;for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);(s==null?void 0:s.startsWith(e))&&localStorage.removeItem(s)}}remove(e){return localStorage.removeItem(`${this._si_namespace}.${e}`)}}const{Error:Ro,Object:Io,console:Mo}=ms,tt="src/component/App.svelte";function rs(n){let e,t,s,o,l,a;t=new Re({props:{icon:Ys},$$inline:!0});const c={c:function(){e=T("span"),Me(t.$$.fragment),E(e,"class","system-controls-burn s-SHyHC7YcIsCQ"),E(e,"alt","destroy cookies and cache"),j(e,tt,1691,2,58099)},m:function(r,u){G(r,e,u),Oe(t,e,null),o=!0,l||(a=Ue(e,"click",n[24],!1,!1,!1),l=!0)},p:ge,i:function(r){o||(q(t.$$.fragment,r),Ve(()=>{s||(s=ue(e,he,{duration:1e3},!0)),s.run(1)}),o=!0)},o:function(r){B(t.$$.fragment,r),s||(s=ue(e,he,{duration:1e3},!1)),s.run(0),o=!1},d:function(r){r&&F(e),qe(t),r&&s&&s.end(),l=!1,a()}};return D("SvelteRegisterBlock",{block:c,id:rs.name,type:"if",source:"(1691:1) {#if (h_cookie && Object.keys(h_cookie).length) || localStorage.length}",ctx:n}),c}function ls(n){let e,t,s,o=ke(n[8])+"",l,a,c=ke(n[9])+"",i,r,u,h,k,S,w=ke(Ot(`nobody_has|${n[10]}`))+"",d,g,v;const m={c:function(){e=T("div"),t=T("div"),s=ce("The "),l=ce(o),a=L(),i=ce(c),r=L(),u=T("div"),h=T("span"),h.textContent="Hint:",k=L(),S=T("span"),d=ce(w),E(t,"class","chip s-SHyHC7YcIsCQ"),j(t,tt,1713,3,58764),E(h,"class","hint-prefix s-SHyHC7YcIsCQ"),j(h,tt,1717,4,58879),E(S,"class","hint-sentence s-SHyHC7YcIsCQ"),j(S,tt,1718,4,58922),E(u,"class","hint s-SHyHC7YcIsCQ"),j(u,tt,1716,3,58856),E(e,"class","mine s-SHyHC7YcIsCQ"),j(e,tt,1712,2,58675)},m:function(p,f){G(p,e,f),y(e,t),y(t,s),y(t,l),y(t,a),y(t,i),y(e,r),y(e,u),y(u,h),y(u,k),y(u,S),y(S,d),v=!0},p:function(p,f){n=p,(!v||f[0]&256)&&o!==(o=ke(n[8])+"")&&Ie(l,o),(!v||f[0]&512)&&c!==(c=ke(n[9])+"")&&Ie(i,c),(!v||f[0]&1024)&&w!==(w=ke(Ot(`nobody_has|${n[10]}`))+"")&&Ie(d,w)},i:function(p){v||(Ve(()=>{g||(g=ue(e,bt,{duration:2400,easing:xe,delay:4500},!0)),g.run(1)}),v=!0)},o:function(p){g||(g=ue(e,bt,{duration:2400,easing:xe,delay:4500},!1)),g.run(0),v=!1},d:function(p){p&&F(e),p&&g&&g.end()}};return D("SvelteRegisterBlock",{block:m,id:ls.name,type:"if",source:"(1712:1) {#if si_player_hint}",ctx:n}),m}function cs(n){let e,t,s,o,l=n[1]&&Object.keys(n[1]).length||localStorage.length,a,c,i,r,u,h,k,S,w,d,g,v,m,P,p,f,A,M,O,J,I,Q,Y,C,fe,ve,de;s=new Re({props:{icon:n[0]?Pn:En},$$inline:!0});let z=l&&rs(n);function Ce(X){n[25](X)}let we={k_killables:n[13]};n[2]!==void 0&&(we.k_panel=n[2]),c=new ai({props:we,$$inline:!0}),Ae.push(()=>Lt(c,"k_panel",Ce));function Te(X){n[27](X)}let me={};n[5]!==void 0&&(me.k_prompt=n[5]),d=new ci({props:me,$$inline:!0}),Ae.push(()=>Lt(d,"k_prompt",Te));function De(X){n[28](X)}let nt={};n[4]!==void 0&&(nt.k_tx=n[4]),m=new yi({props:nt,$$inline:!0}),Ae.push(()=>Lt(m,"k_tx",De)),m.$on("basis",n[14]),m.$on("quality",n[15]);function Tt(X){n[29](X)}let ye={k_deduced:n[12]};n[6]!==void 0&&(ye.k_decision=n[6]),f=new Ci({props:ye,$$inline:!0}),Ae.push(()=>Lt(f,"k_decision",Tt)),f.$on("abstain",n[17]),f.$on("change",n[18]);let oe=n[10]&&ls(n);function st(X){n[30](X)}let Ge={};n[7]!==void 0&&(Ge.k_pick=n[7]),J=new Ii({props:Ge,$$inline:!0}),Ae.push(()=>Lt(J,"k_pick",st)),J.$on("pick",n[16]);function ie(X){n[31](X)}let Fe={};n[3]!==void 0&&(Fe.k_scene=n[3]),Y=new Si({props:Fe,$$inline:!0}),Ae.push(()=>Lt(Y,"k_scene",ie));const vt={c:function(){e=T("div"),t=T("span"),Me(s.$$.fragment),o=L(),z&&z.c(),a=L(),Me(c.$$.fragment),r=L(),u=T("div"),h=T("img"),S=L(),w=T("div"),Me(d.$$.fragment),v=L(),Me(m.$$.fragment),p=L(),Me(f.$$.fragment),M=L(),oe&&oe.c(),O=L(),Me(J.$$.fragment),Q=L(),Me(Y.$$.fragment),E(t,"class","system-controls-audio s-SHyHC7YcIsCQ"),E(t,"alt","audio"),j(t,tt,1687,1,57880),E(e,"class","system-controls s-SHyHC7YcIsCQ"),j(e,tt,1686,0,57849),ao(h.src,k="/asset/smile.png")||E(h,"src",k),E(h,"alt","evil smile"),E(h,"class","s-SHyHC7YcIsCQ"),j(h,tt,1701,1,58367),E(u,"class","surprise s-SHyHC7YcIsCQ"),j(u,tt,1700,0,58319),E(w,"class","container s-SHyHC7YcIsCQ"),j(w,tt,1704,0,58423)},l:function(U){throw new Ro("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(U,V){G(U,e,V),y(e,t),Oe(s,t,null),y(e,o),z&&z.m(e,null),G(U,a,V),Oe(c,U,V),G(U,r,V),G(U,u,V),y(u,h),n[26](u),G(U,S,V),G(U,w,V),Oe(d,w,null),y(w,v),Oe(m,w,null),y(w,p),Oe(f,w,null),y(w,M),oe&&oe.m(w,null),y(w,O),Oe(J,w,null),y(w,Q),Oe(Y,w,null),fe=!0,ve||(de=Ue(t,"click",n[23],!1,!1,!1),ve=!0)},p:function(U,V){const St={};V[0]&1&&(St.icon=U[0]?Pn:En),s.$set(St),V[0]&2&&(l=U[1]&&Object.keys(U[1]).length||localStorage.length),l?z?(z.p(U,V),V[0]&2&&q(z,1)):(z=rs(U),z.c(),q(z,1),z.m(e,null)):z&&(Qe(),B(z,1,1,()=>{z=null}),Be());const ct={};!i&&V[0]&4&&(i=!0,ct.k_panel=U[2],Dt(()=>i=!1)),c.$set(ct);const ze={};!g&&V[0]&32&&(g=!0,ze.k_prompt=U[5],Dt(()=>g=!1)),d.$set(ze);const Je={};!P&&V[0]&16&&(P=!0,Je.k_tx=U[4],Dt(()=>P=!1)),m.$set(Je);const it={};V[0]&4096&&(it.k_deduced=U[12]),!A&&V[0]&64&&(A=!0,it.k_decision=U[6],Dt(()=>A=!1)),f.$set(it),U[10]?oe?(oe.p(U,V),V[0]&1024&&q(oe,1)):(oe=ls(U),oe.c(),q(oe,1),oe.m(w,O)):oe&&(Qe(),B(oe,1,1,()=>{oe=null}),Be());const ut={};!I&&V[0]&128&&(I=!0,ut.k_pick=U[7],Dt(()=>I=!1)),J.$set(ut);const _t={};!C&&V[0]&8&&(C=!0,_t.k_scene=U[3],Dt(()=>C=!1)),Y.$set(_t)},i:function(U){fe||(q(s.$$.fragment,U),q(z),q(c.$$.fragment,U),q(d.$$.fragment,U),q(m.$$.fragment,U),q(f.$$.fragment,U),q(oe),q(J.$$.fragment,U),q(Y.$$.fragment,U),fe=!0)},o:function(U){B(s.$$.fragment,U),B(z),B(c.$$.fragment,U),B(d.$$.fragment,U),B(m.$$.fragment,U),B(f.$$.fragment,U),B(oe),B(J.$$.fragment,U),B(Y.$$.fragment,U),fe=!1},d:function(U){U&&F(e),qe(s),z&&z.d(),U&&F(a),qe(c,U),U&&F(r),U&&F(u),n[26](null),U&&F(S),U&&F(w),qe(d),qe(m),qe(f),oe&&oe.d(),qe(J),qe(Y),ve=!1,de()}};return D("SvelteRegisterBlock",{block:vt,id:cs.name,type:"component",source:"",ctx:n}),vt}function us(n){return n}function Oo(n,e,t){let s,{$$slots:o={},$$scope:l}=e;wt("App",o,[]);let a,c;try{const _=new Intl.Locale(navigator.language).language;_ in Bs&&(c=_)}catch{}{const _=Rt("en");_.subscribe(R=>c=R),Ls("game",{language:_})}let i,r,u,h,k,S,w;const d=new Ks;let g,v,m,P,p=new Kt,f=us,A=us;const M=new Image;M.src="/asset/monster.png";const O=new Image;O.src="/asset/smile.png";async function J(_){for(const R of Ws[_])R.delay&&await H(R.delay),await i.reveal_text(R.labels[c],R.interval,R.pause)}async function I(){await H(2e3),await J("attention"),await H(1800),await i.reveal_text(""),await H(1200)}async function Q(){await i.reveal_text("good luck! ;)"),await H(800),await i.reveal_text("")}async function Y(){return await h.ok("Reload"),window.location.reload(),new Promise(()=>{})}async function C(_){return d.killAll(),i.reveal_text(""),await i.error(_),Y()}async function fe(){const _="                                 ";await i.reveal_text(_),Ce.epic_transition.play(),i.reveal_text(_+"  ",250),ye.classList.add("triggered"),await H(160),t(11,ye.style.opacity="0.0",ye),setTimeout(()=>{t(11,ye.style.display="none",ye)},6e3),await H(2e3)}async function ve(_=0){await i.warn(`
			This game stores encrypted query permit data in local storage.
			
			In order to protect this data, you must provide a passphrase each time the page is loaded.

			${as.includes(/\.permits$/)?"Enter the same passphrase to restore a previous permit, or enter a different one to sign a new permit.":""}
		`);async function R(se=0){let rt=!1;se||d.addTimeout(()=>{rt||i.reveal_text("\u2193\u2193 click below to enter passphrase \u2193\u2193")},6500),await h.ok("Provide passphrase"),rt=!0;const mn=new Uint8Array(32);crypto.getRandomValues(mn);const Wi=[...mn].map(Zt=>String.fromCharCode(Zt%93+33)).join(""),pn=window.prompt("Enter a passphrase to encrypt/decrypt query permits",Wi);if(pn)return pn.length<5?(i.reveal_text("passphrase must be at least 5 characters"),R(se+1)):pn;{const Zt=["null key encryption, eh? try again you silly goose","i can do this all day, can you?","there are only so many responses i have...","...and you're starting to piss me off","i'm serious dood -- don't make me"];return se<Zt.length?i.reveal_text(Zt[se],40):window.location.href="https://www.youtube.com/watch?v=dQw4w9WgXcQ",R(se+1)}}const ne=(await(await Qs.load()).get()).visitorId,ae=await R();if(i.reveal_text(""),!w){await i.warn(`
				This is a multiplayer, online game that uses smart contracts on the Secret Network to ensure fairness for all players.

				Interacting with the game requires submitting transactions to the blockchain via a web wallet such as Keplr (or a local wallet for testnet only).
			`),await H(600);const se=await h.opts({keplr:Wt.isAvailable()?{label:"Connect Keplr",alt:"Connect a wallet using the Keplr extension for Chrome"}:{label:"Install Keplr",alt:"Keplr was not detected. Please install it first in order to use this option"},local:{label:"Use Local Storage",alt:"Creates a wallet in your browser's local storage for a better user experience on testnet"}});switch(se){case"keplr":{try{w=Wt.fromWindow()}catch{return window.open("https://www.keplr.app/","_blank"),await Y()}Ct({wallet:"keplr"},30*kt);break}case"local":return C("Local storage wallet not yet implemented");default:return C(`Unhandled response option: '${se}'`)}}let Z=!1;const ee=Date.now();try{Z=await w.enable({chainId:on,chainName:an,rest:rn,rpc:Ft},()=>C("Account was changed in wallet. Session terminated."))}catch(se){debugger;return se instanceof jn?_>=3?C("Keplr connection request rejected too many times"):(await H(2e3),await ve(_+1)):se instanceof Rn||se instanceof Error?C(se.stack):C("Fatal unknown error")}if(!Z)return C("Chain suggestion was denied. Unable to proceed.");Date.now()-ee>He&&(await i.warn(`Please make sure your network is set to "${an}" in Keplr!`),await H(2100));const te=w.key,$=te.bech32Address;i.wallet({name:te.name,addr:$,ledger:te.isNanoLedger});const le=new as($,[ne,ae,"salt"].join("|"));let Ee=null;try{Ee=le.get("permits")}catch{await i.warn("Change in passphrase detected. Clearing old query perrmits."),le.clear()}await H(1e3);let je=!1;if(Ee&&Ee[At])a=Ee[At],je=!0;else{await i.warn(`
				Query permits allow you to read encrypted data from the blockchain without needing to write anything extra to the chain.

				Signing a query permit happens offline and does not require any gas.
			`),await H(1800),await h.ok("Sign permit");try{a={params:{chain_id:w.chain,allowed_tokens:[At,zt],permit_name:Tn,permissions:["owner"]},signature:await w.signQueryPermit()},le.set("permits",Ht(Pt({},Ee||{}),{[At]:a,[zt]:a}))}catch(se){return C(se.stack)}}i.permit(a.params,je),await H(1200),await i.reveal_text(""),await H(1100)}async function de(_=!1){let R=Rt("");_?i.warn("Still waiting for another player... {last_check}",{last_check:R}):i.warn("Created a new game. Now waiting for another player... {last_check}",{last_check:R});let N=window.Notification&&Notification.permission==="granted",W=!1;function ne(){if(N)i.warn("You will receive a notification once another player has joined.");else{const $=Pe("span"),le=new ji({target:$});le.$on("change",async()=>{const Ee=Date.now();await Notification.requestPermission()==="denied"?(le.$set({si_selected:"none"}),Date.now()-Ee<.5*He?i.warn("User previously denied request for notifications. Need to reset in browser settings."):i.warn("User denied request for notification permission.")):i.warn("Confirmed. Notification will be sent when another player joins.")}),i.warn("Would you like to receive a notification once another player has joined? {approve}",{approve:$})}}let ae=Date.now(),Z=d.addInterval(()=>{ae&&R.set(`Last checked ${Js(ae)}`),W||(W=!0,ne())},1e3),ee,te;for(;;){te=Date.now();try{ee=await me.queryGameState()}catch(le){return le instanceof Cn?C(le.message):C(le+"")}if(ee.round!==0)break;ae=Date.now();const $=Date.now()-te;$<10*He&&await H($)}return d.delInterval(Z),R.set(""),Ce.retro_game_alarm.play(),ee}const z={epic_transition:"epic-transition.wav",coin_win:"coin-win.wav",retro_game_alarm:"retro-game-alarm.wav",retro_game_notif:"retro-game-notif.wav",trumpet_fanfare:"trumpet-fanfare.wav"},Ce=Object.fromEntries(Ne(z).map(([_,R])=>[_,new Audio(`/asset/${R}`)]));let we=!1,Te=cn(),me;class De{constructor(R){this._s_kill=R.kill_text||"",this._yw_time=Rt("10m 00s remaining"),this._i_interval=d.addInterval(()=>{const W=R.eta()-Date.now(),ne=Math.max(0,Math.floor(W/He)),ae=Math.floor(ne/60);this._yw_time.set(`${ae}m ${(""+ne%60).padStart(2,"0")}s remaining`)},100);const N=this._dm_clock=Pe("span");Object.assign(N.style,{paddingRight:"2px"}),new Re({target:N,props:{icon:Ds}})}get interval(){return this._i_interval}get clock(){return this._dm_clock}get store(){return this._yw_time}kill(R=""){this._i_interval&&(d.delInterval(this._i_interval),this._i_interval=0,this._dm_clock.remove(),this._yw_time.set(R||this._s_kill))}}async function nt(){return Jt("game"),C("Game over. Reload to play again.")}let Tt=!1,ye;Ut(async()=>{console.log({chain_name:an,chain_id:on,game_addr:At,game_hash:Vs,rest:rn,rpc:Ft,minter_addr:zt,minter_hash:xs});const _=Te.last_seen;if(_&&t(0,we=!!+Te.muted),Te.wallet==="keplr")try{w=Wt.fromWindow()}catch{Jt("wallet")}if(Ct({last_seen:""+Date.now()},30*kt),t(1,Te=cn()),await ve(),me=new Zs(w,At,a),Te.game){let R=!0;i.reveal_text("checking for active game...").then(()=>R&&i.spinning(!0));let N;try{try{N=await me.queryGameState()}finally{R=!1,i.reveal_text("")}}catch{debugger}if(N&&(console.log("Resuming:",N),N.round!==null)){i.warn("Successfully resumed active game.");let W=N;if(N.round===0&&(W=await de(!0)),W.round===1)return St(W,!0);if(W.round===3)return Ye(W,!0);await i.error(`Unrecognized game state round: ${W.round}`)}Jt("game")}return _?await Q():(await fe(),await I()),await i.arbiter(`
			Welcome${_?" back":""} to my game of secrets. In a moment, you will be matched with another player.

			I will give each of you a chip with a colored shape on it. There are only four colors (red, green, blue, black), and four shapes (triangle, square, circle, star).

			Your opponent will not be able to see your chip and vice versa. I will also take a third chip and hide it in a bag. Each chip will have a unique color and a unique shape. For example, if the chip in my bag is a red triangle, then nobody else has red, and nobody else has a triangle.

			The rules are simple. You and your opponent must exchange a message with each other. Cooperate to deduce what is in my bag and you both will advance to the next round. Betray your opponent by correctly guessing which chip they have and win their wager. Guess wrong and lose.
		`),await H(_?800:4600),oe()});async function oe(){await i.reveal_text("ready to play?"),await h.ok("Join a game");let _=!0;i.reveal_text("waiting for transaction to be verified... ").then(()=>_&&i.spinning(!0));let R;try{try{R=await me.joinGame()}finally{_=!1,i.reveal_text("")}}catch(Z){if(console.error(Z),Z instanceof Error){const ee=Z.message;if(/Account does not exist/.test(ee))return C("Looks like your wallet is empty. Make sure to acquire some SCRT tokens so that you can pay the gas fees for transactions.");if(/must finish current game/.test(ee))return Ct({game:"started"},12*It),C("Looks like you changed browsers or cleared cache since you last joined a game with this account. Please reload and the game will attempt to resume.");if(/contract not found/i.test(ee))return C("Contract not found! Are you on the right network?");if(/timed out/.test(ee)){const te=Rt("");if(await i.warn("There was a timeout error while waiting for the transaction to be included. Waiting to see if it gets included... {retries}",{retries:te}),await async function le(Ee=1){var se,rt;await H(5e3);try{R={data:{join:{status:"simulated",game_state:await me.queryGameState()}}}}catch{return await i.error(["Timeout error. Please try again with higher gas fee.",ee]),oe(),!0}const je=(rt=(se=R==null?void 0:R.data)==null?void 0:se.join)==null?void 0:rt.game_state;return!je||je.round===null?Ee>=8?C("Reached maximum retries. Seems like your transaction failed Try reloading the page."):(te.set(`Retried ${Ee===1?"once":`${Ee} times`} so far...`),await le(Ee+1)):!1}())return}else{debugger;return C(`Unhandled error: ${Z.stack}`)}}else return C(`Unknown error: ${Z}`)}console.log(R),i.reveal_text("");const{join:N,error:W}=R.data;if(W)return C(W);const ne=N==null?void 0:N.game_state;let ae=ne;return ne.round===0&&(Ct({game:"started"},12*It),ae=await de()),ae.round===1?St(ae):ae.round===3?C("round_3()"):(console.error(ae),Ct({game:"started"},12*It),C("Failed to join game while waiting for transaction. You can try once more by reloading this page."))}function st(_){var R;t(8,g=_.chip_color.split(":")[1]),t(9,v=_.chip_shape.split(":")[1]),t(10,m=(R=_.hint)==null?void 0:R.split("|")[1]),P=_.first_submit,t(20,p=new Kt),p.nobody(`color:${g}`),p.nobody(`shape:${v}`),p.nobody(m)}let Ge=Bt[0],ie="";async function Fe(){const _=ie?Mt(ie):"",R=Qt[Ge].describe[c](_);await i.reveal_text(R)}function vt(_){i.submittable(null),Ge=_.detail,ie="",Fe()}function X(){ie="",i.submittable(null),u.show(),Fe()}async function U(_){if(i.submittable(null),ie=_.detail,P){const[,ne]=P.split("|");ne===ie&&(ie="",await i.arbiter("You cannot submit a message that would contradict your previous assertion."))}const[R,N]=ie.split(":");let W="Unknowable";Ge==="nobody_has"?m===ie?W="Truth":(R==="color"&&N===g||R==="shape"&&N===v)&&(W="Lie"):R==="color"&&N===g||R==="shape"&&N===v?W="Truth":W="Lie",await Fe(),i.submittable(async()=>{var ee;u.hide(),i.submittable(null),i.spinning(!0);let ne;try{try{ne=await me.submitAssertion(Ge,ie)}finally{i.spinning(!1)}}catch(te){if(i.reveal_text(""),te instanceof Error){const $=te.message;/execute contract failed/.test($)?i.error(`Contract error: ${$}`):/Request rejected/.test($)?i.error("Transaction rejected"):i.error(`Unhandled error: ${te.stack}`)}else i.error(`Unknown error: ${te}`);return X()}const{data:ae}=ne;if(ae.error)return i.error(`Contract error: ${ae.error}`),X();await i.commit(),V&&V.kill(),Je&&Je.kill(),i.unsubmittable();const Z=(ee=ae.submit)==null?void 0:ee.game_state;Z.second_submit?be(Z):it(Z)},W)}let V;async function St(_,R=!1){st(_),await i.reveal_text(""),await i.arbiter("Here is your chip, player..."),await r.animate_chip_entry(g,v),R||await H(5e3);let N=m.startsWith("color:");if(await i.arbiter(`
			Round 1: I've given you the ${g} ${v} this round, and a hint that nobody has ${N?"":"a "}${m.replace(/^[^:]+:/,"")}.

			I've also given your opponent a hint. Theirs is that nobody has a certain ${N?"shape":"color"}.
		`),R){if(_.first_submit)return await i.user(Ot(_.first_submit)),it(_,R)}else await H(4100);{const W=new yt(_.first_round_start_block+"");V=new De({eta:()=>W.eta,kill_text:"successfully submitted"}),await i.arbiter(["Now you must choose what to tell the other player. I will reveal both of your messages simultaneously once they both have been submitted. You have {clock_icon}{time_remaining}."],{clock_icon:V.clock,time_remaining:V.store})}await u.show(),R||await H(4e3),Fe()}let ct=!1,ze,Je;async function it(_,R=!1){var ee;st(_);const{opponent_first_submit:N,first_extra_secret:W}=_;if(!N&&!W){if(!ct){ct=!0,V&&V.kill("already submittted");const te=new yt(_.first_round_start_block+"");ze=new De({eta:()=>te.eta,kill_text:"also submitted theirs"}),await i.arbiter(["Your submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:ze.clock,time_remaining:ze.store})}return await H(5e3),it(await me.queryGameState())}ze&&ze.kill();const ne=Pe("span");if(W){const[te,$]=W.split("|"),le=Rt("");te==="nobody_has"?(p.nobody($),le.set(`Your opponent has the hint that "nobody has ${Mt($)}".`)):(p.opponent($,!0),le.set(`Your opponent has ${Mt($)}.`)),new Xt({target:ne,props:{b_mode_nobody:!1,si_assertion:$,si_known:"true"}}),await i.arbiter(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:le,premise:ne})}else if(N){const[te,$]=N.split("|");let le=p.clone();const Ee=te==="nobody_has"&&$===m,je=new Xt({target:ne,props:{b_mode_nobody:te==="nobody_has",si_assertion:$,si_known:Ee?"undeniable":""}}),se=je.k_premise;je.$on("change",()=>{t(21,f=se.apply),console.log(`Priori: ${p.explain()}`),console.log(`Opp1: ${le.explain()}`),console.log([p,le])}),await i.opponent([`${ke(Ot(N))} {premise}`],{premise:ne})}else return C("Fatal system error: unable to parse game state");if(R){if(_.second_submit)return await i.user(Ot(_.second_submit)),be(_,R)}else await H(4100);const ae=new yt(_.second_submit_turn_start_block+"");Je=new De({eta:()=>ae.eta,kill_text:"already submitted"});const Z=((ee=_.first_submit)==null?void 0:ee.split("|")[0])==="nobody_has"?"i_have":"nobody_has";await i.arbiter([`Both of you must now exchange one more message with each other. This time, I'm requiring you to submit a message about ${Z==="nobody_has"?'what "nobody has"':"your chip"}. You have {clock_icon}{time_remaining}.`],{clock_icon:Je.clock,time_remaining:Je.store}),await u.show(Z),Fe()}let ut=!1,_t,b,x;async function be(_,R=!1){const{opponent_second_submit:N,second_extra_secret:W}=_;if(!N&&!W){if(!ut){ut=!0,_t&&_t.kill();const Z=new yt(_.second_submit_turn_start_block+"");b=new De({eta:()=>Z.eta,kill_text:"also submitted theirs"}),await i.arbiter(["Your 2nd submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:b.clock,time_remaining:b.store})}return await H(5e3),be(await me.queryGameState())}const ne=Pe("span");if(W){const[Z,ee]=W.split("|"),te=Rt("");Z==="nobody_has"?(t(22,A=$=>$.nobody(ee)),te.set(`Your opponent has the hint that "nobody has ${Mt(ee)}".`)):(t(22,A=$=>$.opponent(ee,!0)),te.set(`Your opponent has ${Mt(ee)}.`)),new Xt({target:ne,props:{b_mode_nobody:!1,si_assertion:ee,si_known:"true"}}),await i.arbiter(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:te,premise:ne})}else if(N){b&&b.kill();const[Z,ee]=N.split("|"),te=Z==="nobody_has"&&ee===m,$=new Xt({target:ne,props:{b_mode_nobody:Z==="nobody_has",si_assertion:ee,si_known:te?"undeniable":""}}),le=$.k_premise;$.$on("change",()=>{t(22,A=le.apply)}),await i.opponent([`${ke(Ot(N))} {premise}`],{premise:ne})}else return C("Fatal system error: unable to parse game state");if(R&&_.guess)return await i.user(jt(_.guess)),dt(_,R);const ae=new yt(_.guess_turn_start_block+"");x=new De({eta:()=>ae.eta,kill_text:"successfully submitted"}),await i.arbiter(`
			The time has come for you to surmise my secrets. You may either guess what is in my bag, what your opponent has, or abstain completely. You have {clock_icon}{time_remaining}.

			The precedence for winning is as follows:
			- [Guess wrong] < [Abstain] < [Correctly guess arbiter's bag] < [Corrrectly guess opponent's chip]

			Use the inline widgets next to each assertion above to logically reduce your option space.
		`,{clock_icon:x.clock,time_remaining:x.store}),await k.show(),console.log(_)}async function Ke(_){i.submittable(null),await i.reveal_text(jt(_),30),i.submittable(async()=>{i.submittable(null),i.spinning(!0);let R;try{try{R=(await me.submitGuess(_)).data}finally{i.reveal_text("")}i.commit()}catch(W){W instanceof Error?await i.error(`Unhandled error: ${W.stack}`):await i.error(`Unknown error: ${W}`);return}if(R.error){await i.error(`Contract error: ${R.error}`);return}x.kill();const N=R.guess.game_state;dt(N)})}let Xe=!1,ft=!1,Se;async function dt(_,R=!1){const{round_result:N,round:W,result:ne}=_;let ae=!1;if(N&&!Xe){Xe=!0;const[Z,ee]=N.split("|");ee==="wrong"?(await i.arbiter(`
					Sorry, your guess about ${Z==="opponent"?"your opponent's chip":"my bag"} was wrong.
					
					Guessing wrong is the worst because you automatically lose your wager. Consider abstaining next time if you're unsure.
				`),ae=!0):await i.arbiter(`Nicely done, your guess about ${Z==="opponent"?"your opponent's chip":"my bag"} was correct!`)}if(W===1){if(!ft){ft=!0;const Z=new yt(_.guess_turn_start_block+"");Se=new De({eta:()=>Z.eta,kill_text:"now submitted"}),await i.arbiter(`${ae?"Even though you lost":"However"}, I am still waiting for a guess from your opponent. They have {clock_icon}{time_remaining}.`,{clock_icon:Se.clock,time_remaining:Se.store})}return await H(5e3),dt(await me.queryGameState())}if(Se&&Se.kill(),console.log("round_1d#over",_),ne){const{opponent_round_result:Z,opponent_guess:ee}=_,[te,$,le]=ee.split(/\|/g),[,Ee]=Z.split("|");let je="",se=!1;if(te==="abstain")je="abstained from guessing";else{const rt=Et[$].labels[c]+" "+Yt[le].labels[c];se=Ee!=="correct",je=`${se?"wrongly":"correctly"} guessed that ${te==="bag"?"my bag":"your chip"} is the ${rt}`}if(ne==="you lost wager"){const rt=se?"But you'll be happy to know that your opponent":"Your opponent";return await i.arbiter([`${ae?"As you already know":"Bad news"}, you lost your wager. ${rt} ${je}, so they ${se?"also lost their wager":"won and gained your lost wager"}.`]),await H(9e3),nt()}else{if(ne==="you won wager")return await i.arbiter([`Congratulations, you won! Your opponent ${je}, so they lost their wager and you earned SCRT.`]),await H(9e3),nt();await i.arbiter([`Well done. You and your opponent have tied, so you both can claim a reward. They ${je}.`]),R||await H(4e3)}_.round===3&&Ye(_,R)}}let We=!1,pe;async function Ye(_,R=!1){const N=new yt(_.pick_reward_round_start_block+"");if(pe=new De({eta:()=>N.eta,kill_text:"made your decision"}),await i.arbiter(`
			Congratulations on passing round 1 together! I have two rewards to choose from, a jackpot of SCRT, or an NFT that can be used to give you special powers next time you play.

			However, if you both attempt to claim the same prize, then neither of you will take it. You will only be able to take a reward if you and your opponent claim different things.

			You have {clock_icon}{time_remaining}.
		`,{clock_icon:pe.clock,time_remaining:pe.store}),_.pick)return ht(_,!0);S.show()}async function Ze({detail:_}){i.submittable(null),await i.reveal_text(`i pick the ${_}`),i.submittable(async()=>{i.spinning(!0);let R;try{try{R=(await me.pickReward(_)).data}finally{i.reveal_text("")}i.commit()}catch(W){return C(W+"")}const N=R.pick_reward.game_state;ht(N)})}let ot,at=!1;async function ht(_,R=!1){pe&&pe.kill();const{result:N}=_;if(N){switch(N){case"you won jackpot":{await i.arbiter(`
						Fortune favors the bold! Your opponent picked the NFT, so you have successfully claimed the jackpot.
					`);break}case"you won nft":{await i.arbiter(`
						Wise move. While your opponent chose the short-term gain, you see the long-term potential. You have successfully claimed an NFT.
					`);break}case"you lost reward":{_.pick==="jackpot"?await i.arbiter(`
							Greed has spoiled your riches. Both players attempted to claim the jackpot, so you both shall leave empty-handed.
						`):await i.arbiter(`
							An unlucky pick. Both players attempted to claim the NFT, so you both shall leave empty-handed.
						`);break}}return await H(9e3),nt()}else{if(!at){at=!0;const W=new yt(_.pick_reward_round_start_block+"");ot=new De({eta:()=>W.eta,kill_text:"also picked theirs"}),await i.arbiter(["Your pick has been noted. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:ot.clock,time_remaining:ot.store})}return await H(5e3),ht(await me.queryGameState())}}function jt(_){let R;if(typeof _=="string"?R=Object.fromEntries(_.split(/\|/g).map(N=>N.split(":"))):R=_,R.target==="abstain")return"i abstain from guessing this round";{let N="";return R.target==="bag"?N+="the arbiter's bag is: a ":N+="my opponent's chip is: a ",N+Et[R.color].labels[c]+" "+Yt[R.shape].labels[c]}}async function _s(){Ke({target:"abstain",color:null,shape:null})}async function fs({detail:_}){Ke(_)}let xt=!1;function hn(){if(!xt)xt=!0,i.error("The button you just clicked will remove all cookies and cache that the game previously created and then disable the current UI. If you agree to this, click the burn icon again.");else return Object.keys(cn()).forEach(_=>Jt(_)),localStorage.clear(),i.reveal_text(""),C("Cache burned")}const Mi=[];Io.keys(e).forEach(_=>{!~Mi.indexOf(_)&&_.slice(0,2)!=="$$"&&_!=="slot"&&Mo.warn(`<App> was created with unknown prop '${_}'`)});const Oi=()=>t(0,we=!we),qi=()=>hn();function Ui(_){i=_,t(2,i)}function Ni(_){Ae[_?"unshift":"push"](()=>{ye=_,t(11,ye)})}function Li(_){h=_,t(5,h)}function Di(_){u=_,t(4,u)}function Yi(_){k=_,t(6,k)}function Qi(_){S=_,t(7,S)}function Bi(_){r=_,t(3,r)}return n.$capture_state=()=>({onMount:Ut,setContext:Ls,writable:Rt,blur:bt,fade:he,quadInOut:xe,Fa:Re,faClock:Ds,faVolumeUp:En,faVolumeMute:Pn,faFire:Ys,fingerprintjs:Qs,H_LANGUAGES:Bs,H_COLORS:Et,H_SHAPES:Yt,A_BASES:Bt,H_BASES:Qt,H_MESSAGES:Ws,SI_CHAIN:on,S_CHAIN_NAME:an,P_LCD_REST:rn,P_LCD_RPC:Ft,KeplrWallet:Wt,EnableKeplrError:jn,OfflineSignerError:Rn,dd:Pe,delete_cookie:Jt,read_cookie:cn,write_cookie:Ct,XTL_SECONDS:He,XTL_HOURS:It,XTL_DAYS:kt,ode:Ne,proper:ke,timeout:H,relative_time:Js,Killables:Ks,Deduction:Kt,use_assertion_in_sentence:Ot,use_quality_in_sentence:Mt,MessagePanel:ai,Prompt:ci,Assertion:yi,Scene:Si,PremiseWidget:Xt,Decision:Ci,ActionWidget:ji,Pick:Ii,SI_PERMIT:Tn,ContractError:Cn,EtaEstimator:yt,GameContract:Zs,P_CONTRACT_GAME_ADDR:At,SI_CONTRACT_GAME_CODE_HASH:Vs,P_CONTRACT_MINTER_ADDR:zt,SI_CONTRACT_MINTER_CODE_HASH:xs,EncryptedLocalStorage:as,F_IDENTITY:us,g_permit:a,s_lang:c,k_panel:i,k_scene:r,k_tx:u,k_prompt:h,k_decision:k,k_pick:S,k_wallet:w,k_killables:d,si_player_color:g,si_player_shape:v,si_player_hint:m,si_submit_first:P,k_priori:p,f_assert_1:f,f_assert_2:A,d_img_monster:M,d_img_smile:O,reveal_prepared:J,introduction:I,welcome_back:Q,reload:Y,fatal:C,surprise:fe,connect_wallet:ve,wait_for_other_player:de,H_AUDIO_SRC:z,H_AUDIO:Ce,b_muted:we,h_cookie:Te,k_game:me,Countdown:De,game_over:nt,b_surprise:Tt,dm_surprise:ye,try_join:oe,update_player_state:st,si_assert_basis:Ge,si_assert_quality:ie,reveal_tx:Fe,select_basis:vt,reset_tx:X,select_quality:U,k_countdown_1a:V,round_1a:St,b_notif_1b_waiting:ct,k_countdown_1a2:ze,k_countdown_1b:Je,round_1b:it,b_notif_1c_waiting:ut,k_countdown_1b2:_t,k_countdown_1c:b,k_countdown_1c2:x,round_1c:be,prepare_guess:Ke,b_notif_1d_result:Xe,b_notif_1d_waiting:ft,k_countdown_1d:Se,round_1d:dt,b_notif_3a_waiting:We,k_countdown_3a:pe,round_3a:Ye,select_pick:Ze,k_countdown_3b:ot,b_notif_3b_waiting:at,round_3b:ht,use_guess_in_sentence:jt,select_abstain:_s,select_decision:fs,b_burn_clicked:xt,burn:hn,k_deduced:s}),n.$inject_state=_=>{"g_permit"in _&&(a=_.g_permit),"s_lang"in _&&(c=_.s_lang),"k_panel"in _&&t(2,i=_.k_panel),"k_scene"in _&&t(3,r=_.k_scene),"k_tx"in _&&t(4,u=_.k_tx),"k_prompt"in _&&t(5,h=_.k_prompt),"k_decision"in _&&t(6,k=_.k_decision),"k_pick"in _&&t(7,S=_.k_pick),"k_wallet"in _&&(w=_.k_wallet),"si_player_color"in _&&t(8,g=_.si_player_color),"si_player_shape"in _&&t(9,v=_.si_player_shape),"si_player_hint"in _&&t(10,m=_.si_player_hint),"si_submit_first"in _&&(P=_.si_submit_first),"k_priori"in _&&t(20,p=_.k_priori),"f_assert_1"in _&&t(21,f=_.f_assert_1),"f_assert_2"in _&&t(22,A=_.f_assert_2),"b_muted"in _&&t(0,we=_.b_muted),"h_cookie"in _&&t(1,Te=_.h_cookie),"k_game"in _&&(me=_.k_game),"b_surprise"in _&&(Tt=_.b_surprise),"dm_surprise"in _&&t(11,ye=_.dm_surprise),"si_assert_basis"in _&&(Ge=_.si_assert_basis),"si_assert_quality"in _&&(ie=_.si_assert_quality),"k_countdown_1a"in _&&(V=_.k_countdown_1a),"b_notif_1b_waiting"in _&&(ct=_.b_notif_1b_waiting),"k_countdown_1a2"in _&&(ze=_.k_countdown_1a2),"k_countdown_1b"in _&&(Je=_.k_countdown_1b),"b_notif_1c_waiting"in _&&(ut=_.b_notif_1c_waiting),"k_countdown_1b2"in _&&(_t=_.k_countdown_1b2),"k_countdown_1c"in _&&(b=_.k_countdown_1c),"k_countdown_1c2"in _&&(x=_.k_countdown_1c2),"b_notif_1d_result"in _&&(Xe=_.b_notif_1d_result),"b_notif_1d_waiting"in _&&(ft=_.b_notif_1d_waiting),"k_countdown_1d"in _&&(Se=_.k_countdown_1d),"b_notif_3a_waiting"in _&&(We=_.b_notif_3a_waiting),"k_countdown_3a"in _&&(pe=_.k_countdown_3a),"k_countdown_3b"in _&&(ot=_.k_countdown_3b),"b_notif_3b_waiting"in _&&(at=_.b_notif_3b_waiting),"b_burn_clicked"in _&&(xt=_.b_burn_clicked),"k_deduced"in _&&t(12,s=_.k_deduced)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty[0]&7340032&&t(12,s=A(f(p.clone()).clone()).clone()),n.$$.dirty[0]&3&&Te&&(Object.values(Ce).forEach(_=>_.muted=we),Ct({muted:we?"1":"0"},30*kt))},[we,Te,i,r,u,h,k,S,g,v,m,ye,s,d,vt,U,Ze,_s,fs,hn,p,f,A,Oi,qi,Ui,Ni,Li,Di,Yi,Qi,Bi]}class qo extends mt{constructor(e){super(e);pt(this,e,Oo,cs,gt,{},null,[-1,-1,-1]),D("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:cs.name})}}new qo({target:document.body,props:{}});
//# sourceMappingURL=index.1494e8a9.js.map
