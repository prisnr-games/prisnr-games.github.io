var ho=Object.defineProperty,po=Object.defineProperties;var go=Object.getOwnPropertyDescriptors;var Ls=Object.getOwnPropertySymbols;var wo=Object.prototype.hasOwnProperty,bo=Object.prototype.propertyIsEnumerable;var Ys=(n,e,t)=>e in n?ho(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,At=(n,e)=>{for(var t in e||(e={}))wo.call(e,t)&&Ys(n,t,e[t]);if(Ls)for(var t of Ls(e))bo.call(e,t)&&Ys(n,t,e[t]);return n},en=(n,e)=>po(n,go(e));import{v as yo,S as ko,a as mt,i as ht,s as pt,d as Q,g as Bs,b as gt,c as Ht,o as Gt,e as Yn,f as wt,h as he,q as tn,F as Ie,j as Qs,k as Ws,l as Hs,m as Gs,n as T,t as fe,p as C,r as j,u as H,w as S,x as Re,y as xe,z as Bn,A as Qn,B as G,C as Oe,D as Y,E as z,G as Me,H as N,I as Qe,J as W,K as We,L as Ee,M as Ne,N as Ue,O as vo,P as So,Q as Ce,R as bt,T as de,U as Ft,V as st,W as lt,X as Eo,Y as Po,Z as yt,_ as Fs,$ as zs,a0 as ye,a1 as Ao,a2 as Js,a3 as Co,a4 as To,a5 as jo,a6 as Wn,a7 as Ks,a8 as Xs,a9 as xs,aa as Vs,ab as nn,ac as Zs,ad as $s,ae as sn,af as Ut,ag as Dt,ah as ei,ai as vn,aj as ti,ak as ni,al as si,am as Hn,an as ii,ao as oi,ap as ai,aq as ri,ar as Gn,as as Fn,at as zn,au as zt,av as li,aw as Lt,ax as ci,ay as ui,az as _i,aA as qo,aB as Jt}from"./vendor.5ff8e4c0.js";const Io=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}};Io();const fi={en:{}},Ct={red:{color:"#a00000",labels:{en:"red"}},green:{color:"#006000",labels:{en:"green"}},blue:{color:"#0000a0",labels:{en:"blue"}},black:{color:"#000000",labels:{en:"black"}}},Sn=Object.keys(Ct),Kt={triangle:{symbol:"\u25B2",labels:{en:"triangle"}},square:{symbol:"\u25A0",labels:{en:"square"}},circle:{symbol:"\u25CF",labels:{en:"circle"}},star:{symbol:"\u2605",labels:{en:"star"}}},En=Object.keys(Kt),Tt={nobody_has:{describe:{en:n=>`nobody has ${n||"..."}`}},i_have:{describe:{en:n=>`my chip is ${n||"..."}`}}},Xt=Object.keys(Tt),di={attention:[{labels:{en:"the Arbiter approaches..."}}],loading:[{delay:2e3,interval:200,labels:{en:"hmmm"}},{delay:250,interval:500,labels:{en:"hmmm...."}}]},Jn="pulsar-1",Pn="pulsar-1",An="https://h7pwct6jl3.execute-api.us-west-2.amazonaws.com/",on="https://7yp08exitj.execute-api.us-west-2.amazonaws.com/",an=n=>(Number(n/10000n)/100).toFixed(2).replace(/\.0+$/,"")+" SCRT";class Kn extends Error{constructor(e,t){t?t instanceof TypeError?super(`${e}: ${t.stack}`):t instanceof Error?super(`${e}: ${t.stack}`):super(`${e}: Unknown error`):super(e)}}const Ve=1e3,Xn=60*Ve,Yt=60*Xn,kt=24*Yt,mi=7*kt,hi=30*kt,pi=365*kt,De=Object.entries;function gi(n,e){return De(n).reduce((t,[s,o])=>[...t,e(s,o)],[])}function B(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}const ke=n=>n[0].toUpperCase()+n.slice(1),Ro=[{ge:pi,divisor:pi,unit:"year"},{ge:hi,divisor:hi,unit:"month"},{ge:mi,divisor:mi,unit:"week"},{ge:kt,divisor:kt,unit:"day"},{ge:Yt,divisor:Yt,unit:"hour"},{ge:Xn,divisor:Xn,unit:"minute"},{ge:Ve,divisor:Ve,unit:"seconds"},{ge:0,divisor:1,text:"just now"}];function wi(n,e=Date.now(),t=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"})){const o=(typeof e=="object"?e.getTime():new Date(e).getTime())-(typeof n=="object"?n:new Date(n)).getTime(),r=Math.abs(o);for(const a of Ro)if(r>=a.ge){const c=Math.round(Math.abs(o)/a.divisor),u=o<0;return a.unit?t.format(u?c:-c,a.unit):a.text}}class bi{constructor(){this._as_intervals=new Set,this._as_timeouts=new Set}addInterval(e,t){const s=window.setInterval(e,t);return this._as_intervals.add(s),s}addTimeout(e,t){const s=window.setTimeout(()=>{this.delTimeout(s),e()},t);return this._as_timeouts.add(s),s}delInterval(e){window.clearInterval(e),this._as_intervals.delete(e)}delTimeout(e){window.clearTimeout(e),this._as_timeouts.delete(e)}killAll(){for(const e of this._as_intervals)this.delInterval(e);for(const e of this._as_timeouts)this.delTimeout(e)}}async function Oo(n,e,t=null){if(t==null?void 0:t.search){if(e.includes("?"))throw new Error(`Cannot specify 'search' option in fetch config when URI already contains search params: "${e}"`);e+="?"+new URLSearchParams(t.search).toString(),delete t.search}try{return await yo(e,en(At({},t),{method:n,mode:"cors",headers:At({Accept:"application/json"},(t||{}).headers||{})})).json()}catch(s){throw s}}async function yi(n,e=null){return Oo("GET",n,e)}const jt="secret1zkn3d4u0t8hrr6jhqrdeg96ygrhmx66f9dm6cu",ki="7c98f9e086e687e8f920dc6c0bee01a88c8097223d53bd494ffb7b8bfec4f364",rn="secret1rfwt2zlw27f9ps28svetzmt32tv0rwnr6jg5hz",vi="36d94d2066b903ede9716f77f2fe99274aaa2c434feb424302dbb8aef9f34721";class xn extends Error{constructor(e){super(`The game contract returned the following error: ${e}`)}}const Mo="1000000",No=new TextDecoder;class Si{constructor(e,t,s,o){this._k_wallet=e,this._p_contract=t,this._g_permit=s||null,this._si_code_hash=o}async execute(e,t,s=[]){const o=await this._k_wallet.execute(this._p_contract,e,s,t,this._si_code_hash);return{txnHash:o.transactionHash,data:JSON.parse(No.decode(o.data))}}joinGame(){return this.execute({join:{}},{amount:[{amount:"8750",denom:"uscrt"}],gas:"35000"},[{denom:"uscrt",amount:Mo}])}submitAssertion(e,t){const[s,o]=t.split(":"),r=s==="color"?{color:o}:{shape:o};return this.execute({submit:At({target:e},r)},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}submitGuess(e){return this.execute({guess:e},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}pickReward(e){return this.execute({pick_reward:{reward:e}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"1000000"})}forceEndgame(){return this.execute({force_endgame:{}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"40000"})}query(e){return this._g_permit&&(e={with_permit:{query:e,permit:this._g_permit}}),this._k_wallet.query(this._p_contract,e)}async queryGameState(){const e=await this.query({game_state:{}});if(e.error)throw new xn(e.error);return e.game_state}}const Uo=(n,e)=>e<60*Ve?Date.now()-n.lastUpdated>5*Ve:Date.now()-n.lastUpdated>30*Ve,Ei=200;console.log(`Imposing global ${Ei} blocks per 5 minutes estimate`);let Vn=!1,Cn=0n,Pi=0,Ai=0;async function Do(){if(Date.now()-Ai<5*Ve)return;const n=new URL(on);n.pathname="/status";try{const e=await yi(n.href),{latest_block_height:t,latest_block_time:s}=e.data.result.sync_info;Cn=BigInt(t),Pi=new Date(s).getTime(),Ai=Date.now()}catch{}}class vt{constructor(e,t=Ei,s=Uo){this._xt_start=0,this._xt_eta=0,this._xt_updated=0,this._b_currently_updating=!1,this._xg_block_start=BigInt(e),this._xg_block_dest=this._xg_block_start+BigInt(t),this._f_should_update=()=>s(this,this._xt_eta-Date.now())}async fetch_start_time(){const e=new URL(on);e.pathname="/block";const t=await yi(e.href,{search:{block:this._xg_block_start+""}});this._xt_start=new Date(t.data.result.block.header.time).getTime()}async estimate(){Vn=!0,this._xt_start||await this.fetch_start_time(),await Do();const e=Number(Cn-this._xg_block_start);if(e<5)return 0;const t=(Pi-this._xt_start)/e,s=Number(this._xg_block_dest-Cn),o=this._xt_updated=Date.now();return Vn=!1,this._xt_eta=o+Math.round(s*t)}get lastUpdated(){return this._xt_updated}get destinationBlock(){return this._xg_block_dest}get expired(){return Cn>=this.destinationBlock}get ready(){return this._xt_eta!==0}get eta(){return!this.expired&&!Vn&&this._f_should_update()&&this.estimate(),this._xt_eta}get remaining(){return this.eta-Date.now()}}const Zn="prisnr.games";class $n extends Kn{constructor(e){super("While attempting to enable Keplr",e)}}class es extends Kn{constructor(e){super("While attempting to acquire offline signer",e)}}class Lo extends Kn{constructor(e){super("While attempting to acquire enigma utils",e)}}class xt{static isAvailable(){return!!window.keplr}static fromWindow(){if(window.keplr)return new xt(window.keplr);throw new Error("Keplr extension is not installed")}constructor(e){this._k_keplr=e}async enable(e,t){const s=this._si_chain=e.chainId;this._fk_change=t;try{await this._k_keplr.experimentalSuggestChain({chainId:s,chainName:e.chainName,rpc:e.rpc,rest:e.rest,bip44:{coinType:529},coinType:529,stakeCurrency:{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6},bech32Config:{bech32PrefixAccAddr:"secret",bech32PrefixAccPub:"secretpub",bech32PrefixValAddr:"secretvaloper",bech32PrefixValPub:"secretvaloperpub",bech32PrefixConsAddr:"secretvalcons",bech32PrefixConsPub:"secretvalconspub"},currencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],feeCurrencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],gasPriceStep:{low:.1,average:.25,high:.4},features:["secretwasm"]})}catch{return!1}try{await this._k_keplr.enable(s)}catch(o){throw new $n(o)}try{this._k_signer=window.getOfflineSigner(s)}catch(o){throw new es(o)}try{this._k_enigma=window.getEnigmaUtils(s)}catch(o){throw new Lo(o)}return this._g_key=await this._k_keplr.getKey(s),this._a_accounts=await this._k_signer.getAccounts(),this._k_client=new ko(An,this.publicAddress,this._k_signer,this._k_enigma,{exec:{amount:[{amount:"62500",denom:"uscrt"}],gas:"250000"}}),window.addEventListener("keplr_keystorechange",async()=>{(await this._k_keplr.getKey(s)).bech32Address!==this.publicAddress&&this._fk_change()}),!0}get chain(){return this._si_chain}get key(){return this._g_key}get accounts(){return this._a_accounts}get primaryAccount(){return this.accounts[0]}get publicAddress(){return this.primaryAccount.address}async signQueryPermit(){return(await this._k_keplr.signAmino(this.chain,this.publicAddress,{chain_id:this.chain,account_number:"0",sequence:"0",fee:{amount:[{denom:"uscrt",amount:"0"}],gas:"1"},msgs:[{type:"query_permit",value:{permit_name:Zn,allowed_tokens:[jt,rn],permissions:["owner"]}}],memo:""},{preferNoSetFee:!0,preferNoSetMemo:!0})).signature}execute(e,t,s,o,r){let a="";if(o&&(a+=` --gas ${o.gas}`),s&&s.length){const c=s[0];a+=` --amount ${c.amount}${c.denom}`}return console.log(`secretd tx compute execute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}${a}`),this._k_client.execute(e,t,"",s,o,r||void 0)}query(e,t,s,o){return console.log(`secretd q compute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}`),this._k_client.queryContractSmart(e,t,s||{},o||void 0)}}const Tn=(n,e)=>n.querySelector(e),Ci=(n,e)=>Array.prototype.slice.call(n.querySelectorAll(e),0);function Pe(n,e={},t=[]){const s=document.createElement(n);for(const o in e)s.setAttribute(o,e[o]+"");for(const o of t)s.append(o);return s}function jn(){return document.cookie.split(";").reduce((n,e)=>{const t=e.trim().split("=");return en(At({},n),{[t[0]]:t.slice(1).join("=")})},{})}function qt(n,e){document.cookie=Object.entries(en(At({},n),{"max-age":""+e})).map(([t,s])=>`${t}=${s}`).join("; ")}function ln(n){return qt({[n]:""},0)}const Yo=65535,Ti=128,Bo="RGBK\u25B2\u2586\u25CF\u2605";function ji(n){let e=[];for(let t=0;t<8;t++)n&Ti?e.push(Bo[t]):e.push(" "),n=n<<1;return`[${e.join(",")}]`}function qn(n,e=!1){const[t,s]=n.split(":");if(t==="color"){const o=Sn.indexOf(s);return 1<<7-o|(e?15:0)}else{const o=En.indexOf(s);return 1<<3-o|(e?240:0)}}function Bt(n){const[e,t]=n.split(":");return`${e==="shape"?"a ":""}${t}`}function Qt(n){const[e,t]=n.split("|");return`${e==="nobody_has"?"nobody has ":"my chip is"} ${Bt(t)}`}class cn{constructor(e=Yo){this._xm_deduce=e}clone(){return new cn(this._xm_deduce)}nobody(e){let t=qn(e);return t|=t<<8,this._xm_deduce&=~t,this}opponent(e,t){if(t){const s=qn(e,!0),o=~qn(e);this._xm_deduce&=o<<8|s}else this._xm_deduce&=~qn(e);return this}explain(){const e=this._xm_deduce>>8,t=this._xm_deduce&255;return[`A: ${ji(e)}`,`O: ${ji(t)}`].join(`
`)}enumerate(e){let t=e==="bag"?this._xm_deduce>>8:this._xm_deduce&255;const s=[],o=[];for(let a=0;a<8;a++)t&Ti&&(a<4?s.push(Sn[a]):o.push(En[a-4])),t=t<<1;const r=[];for(const a of s)for(const c of o)r.push({target:e,color:a,shape:c});return r}}const{Object:Qo,console:qi}=Bs,_e="src/component/MessagePanel.svelte";function ts(n){let e,t,s,o,r;const a={c:function(){e=T("span"),t=fe(n[3]),C(e,"class","msg-console-eval s-l2U1SoEQLPY0"),j(e,_e,630,3,16559)},m:function(u,i){H(u,e,i),S(e,t),n[22](e),r=!0},p:function(u,i){(!r||i[0]&8)&&Re(t,u[3])},i:function(u){r||(xe(()=>{o&&o.end(1),s=Bn(e,he,{duration:1e3}),s.start()}),r=!0)},o:function(u){s&&s.invalidate(),o=Qn(e,he,{duration:500}),r=!1},d:function(u){u&&G(e),n[22](null),u&&o&&o.end()}};return Q("SvelteRegisterBlock",{block:a,id:ts.name,type:"if",source:"(630:2) {#if s_evaluation}",ctx:n}),a}function ns(n){let e,t,s,o,r,a,c,u,i,_,d,w,k,g,m,p,A;o=new Ie({props:{icon:Qs},$$inline:!0}),d=new Ie({props:{icon:Ws},$$inline:!0});let h=n[12].length&&ss(n);const P={c:function(){e=T("div"),t=T("span"),s=T("span"),Oe(o.$$.fragment),r=Y(),a=T("span"),c=fe(n[6]),u=Y(),i=T("span"),_=T("span"),Oe(d.$$.fragment),w=Y(),k=T("span"),g=fe(n[7]),m=Y(),h&&h.c(),C(s,"class","msg-nav-icon lifted s-l2U1SoEQLPY0"),j(s,_e,642,4,16856),C(a,"class","msg-nav-name s-l2U1SoEQLPY0"),z(a,"long-name",n[6].length>=40),j(a,_e,643,4,16921),C(t,"class","msg-nav-group s-l2U1SoEQLPY0"),j(t,_e,641,3,16823),C(_,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(_,_e,646,4,17057),C(k,"class","msg-nav-addr addr s-l2U1SoEQLPY0"),j(k,_e,647,4,17117),C(i,"class","msg-nav-group s-l2U1SoEQLPY0"),j(i,_e,645,3,17024),C(e,"class","msg-nav s-l2U1SoEQLPY0"),j(e,_e,640,2,16748)},m:function(f,v){H(f,e,v),S(e,t),S(t,s),Me(o,s,null),S(t,r),S(t,a),S(a,c),S(e,u),S(e,i),S(i,_),Me(d,_,null),S(i,w),S(i,k),S(k,g),S(e,m),h&&h.m(e,null),A=!0},p:function(f,v){n=f,(!A||v[0]&64)&&Re(c,n[6]),v[0]&64&&z(a,"long-name",n[6].length>=40),(!A||v[0]&128)&&Re(g,n[7]),n[12].length?h?(h.p(n,v),v[0]&4096&&N(h,1)):(h=ss(n),h.c(),N(h,1),h.m(e,null)):h&&(Qe(),W(h,1,1,()=>{h=null}),We())},i:function(f){A||(N(o.$$.fragment,f),N(d.$$.fragment,f),N(h),xe(()=>{p||(p=Ee(e,Yn,{duration:750,easing:tn},!0)),p.run(1)}),A=!0)},o:function(f){W(o.$$.fragment,f),W(d.$$.fragment,f),W(h),p||(p=Ee(e,Yn,{duration:750,easing:tn},!1)),p.run(0),A=!1},d:function(f){f&&G(e),Ne(o),Ne(d),h&&h.d(),f&&p&&p.end()}};return Q("SvelteRegisterBlock",{block:P,id:ns.name,type:"if",source:"(640:1) {#if b_nav_display}",ctx:n}),P}function ss(n){let e,t,s,o,r,a,c=n[12][0]+"",u,i,_,d,w=n[12][1]+"",k,g,m,p,A,h=n[12][2]+"",P,y,f;s=new Ie({props:{icon:Hs},$$inline:!0});const v={c:function(){e=T("span"),t=T("span"),Oe(s.$$.fragment),o=Y(),r=T("span"),a=T("span"),u=fe(c),i=fe(":"),_=Y(),d=T("span"),k=fe(w),g=Y(),m=T("span"),m.textContent="...",p=Y(),A=T("span"),P=fe(h),C(t,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(t,_e,651,5,17286),C(a,"class","prefix s-l2U1SoEQLPY0"),j(a,_e,653,6,17398),C(d,"class","addr s-l2U1SoEQLPY0"),j(d,_e,654,6,17456),C(m,"class","ellipsis s-l2U1SoEQLPY0"),j(m,_e,655,6,17511),C(A,"class","addr s-l2U1SoEQLPY0"),j(A,_e,656,6,17551),C(r,"class","msg-nav-permit inline-flex s-l2U1SoEQLPY0"),j(r,_e,652,5,17350),C(e,"class","msg-nav-group s-l2U1SoEQLPY0"),j(e,_e,650,4,17218)},m:function(O,U){H(O,e,U),S(e,t),Me(s,t,null),S(e,o),S(e,r),S(r,a),S(a,u),S(a,i),S(r,_),S(r,d),S(d,k),S(r,g),S(r,m),S(r,p),S(r,A),S(A,P),f=!0},p:function(O,U){(!f||U[0]&4096)&&c!==(c=O[12][0]+"")&&Re(u,c),(!f||U[0]&4096)&&w!==(w=O[12][1]+"")&&Re(k,w),(!f||U[0]&4096)&&h!==(h=O[12][2]+"")&&Re(P,h)},i:function(O){f||(N(s.$$.fragment,O),xe(()=>{y||(y=Ee(e,he,{duration:1e3},!0)),y.run(1)}),f=!0)},o:function(O){W(s.$$.fragment,O),y||(y=Ee(e,he,{duration:1e3},!1)),y.run(0),f=!1},d:function(O){O&&G(e),Ne(s),O&&y&&y.end()}};return Q("SvelteRegisterBlock",{block:v,id:ss.name,type:"if",source:"(650:3) {#if a_permit_displays.length}",ctx:n}),v}function is(n){let e,t,s,o,r,a,c,u,i;s=new Ie({props:{icon:Gs},$$inline:!0});const _={c:function(){e=T("div"),t=T("span"),Oe(s.$$.fragment),o=Y(),r=T("span"),r.textContent="Submit",C(t,"class","msg-submit-icon s-l2U1SoEQLPY0"),j(t,_e,671,3,17898),C(r,"class","msg-submit-text s-l2U1SoEQLPY0"),j(r,_e,672,3,17965),C(e,"class","msg-submit s-l2U1SoEQLPY0"),z(e,"active",!!n[9]),j(e,_e,663,2,17676)},m:function(w,k){H(w,e,k),S(e,t),Me(s,t,null),S(e,o),S(e,r),n[23](e),c=!0,u||(i=[Ue(e,"click",function(){vo(n[9]||Ii)&&(n[9]||Ii).apply(this,arguments)},!1,!1,!1),Ue(e,"mouseenter",n[15],!1,!1,!1),Ue(e,"mouseleave",n[16],!1,!1,!1)],u=!0)},p:function(w,k){n=w,k[0]&512&&z(e,"active",!!n[9])},i:function(w){c||(N(s.$$.fragment,w),xe(()=>{a||(a=Ee(e,wt,{},!0)),a.run(1)}),c=!0)},o:function(w){W(s.$$.fragment,w),a||(a=Ee(e,wt,{},!1)),a.run(0),c=!1},d:function(w){w&&G(e),Ne(s),n[23](null),w&&a&&a.end(),u=!1,So(i)}};return Q("SvelteRegisterBlock",{block:_,id:is.name,type:"if",source:"(663:1) {#if b_submit_display}",ctx:n}),_}function os(n){let e,t,s,o,r,a,c,u,i,_,d,w,k,g,m,p=n[3]&&ts(n),A=n[5]&&ns(n),h=n[8]&&is(n);const P={c:function(){e=T("div"),t=T("div"),s=T("div"),o=Y(),r=T("div"),a=T("span"),c=fe(">\xA0"),u=fe(n[4]),i=fe(n[11]),_=Y(),d=T("span"),d.textContent="\xA0",w=Y(),p&&p.c(),k=Y(),A&&A.c(),g=Y(),h&&h.c(),C(s,"class","msg-history-scroll s-l2U1SoEQLPY0"),j(s,_e,624,2,16311),C(t,"class","msg-history s-l2U1SoEQLPY0"),j(t,_e,623,1,16260),C(a,"class","text s-l2U1SoEQLPY0"),j(a,_e,627,2,16411),C(d,"class","cursor blinking s-l2U1SoEQLPY0"),j(d,_e,628,2,16469),C(r,"class","msg-console s-l2U1SoEQLPY0"),j(r,_e,626,1,16383),C(e,"class","msg-panel s-l2U1SoEQLPY0"),j(e,_e,622,0,16214)},l:function(f){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(f,v){H(f,e,v),S(e,t),S(t,s),n[19](s),n[20](t),S(e,o),S(e,r),S(r,a),S(a,c),S(a,u),S(a,i),S(r,_),S(r,d),n[21](d),S(r,w),p&&p.m(r,null),S(e,k),A&&A.m(e,null),S(e,g),h&&h.m(e,null),n[24](e),m=!0},p:function(f,v){(!m||v[0]&16)&&Re(u,f[4]),(!m||v[0]&2048)&&Re(i,f[11]),f[3]?p?(p.p(f,v),v[0]&8&&N(p,1)):(p=ts(f),p.c(),N(p,1),p.m(r,null)):p&&(Qe(),W(p,1,1,()=>{p=null}),We()),f[5]?A?(A.p(f,v),v[0]&32&&N(A,1)):(A=ns(f),A.c(),N(A,1),A.m(e,g)):A&&(Qe(),W(A,1,1,()=>{A=null}),We()),f[8]?h?(h.p(f,v),v[0]&256&&N(h,1)):(h=is(f),h.c(),N(h,1),h.m(e,null)):h&&(Qe(),W(h,1,1,()=>{h=null}),We())},i:function(f){m||(N(p),N(A),N(h),m=!0)},o:function(f){W(p),W(A),W(h),m=!1},d:function(f){f&&G(e),n[19](null),n[20](null),n[21](null),p&&p.d(),A&&A.d(),h&&h.d(),n[24](null)}};return Q("SvelteRegisterBlock",{block:P,id:os.name,type:"component",source:"",ctx:n}),P}const Ii=()=>{};function Wo(n,e,t){let{$$slots:s={},$$scope:o}=e;gt("MessagePanel",s,[]);const{language:r}=Ht("game");let a;r.subscribe(b=>a=b);const c={reveal_text:U,spinning:le,commit:Ye,receive:Z,arbiter:$e,opponent:pe,user:ve,error:me,warn:et,wallet:Te,permit:St,submittable:ct,unsubmittable:re};let{k_killables:u}=e,i,_,d,w="\u275A",k="",g="",m=!1,p="",A="",h="",P=!1,y=null,f,v=0,q=!1,O="";async function U(b,X=60,ae=0){O=b;let qe=++v;F&&(t(11,D=""),u.delInterval(F),M=0,F=0),X||(X=60);const rt=g.length,ft=b.length;let Je=0;for(;Je<Math.min(rt,ft)&&g[Je]===b[Je];Je++);const It=3/5;for(let se=rt;se>Je;se--)if(t(4,g=g.slice(0,-1)),await B(X*It),v!==qe)return;if(ae&&await B(ae),v!==qe)return;const nt=f||Tn(document.body,".cursor");if(!!nt){for(let se=Je;se<ft;se++)if(nt.classList.remove("blinking"),await B(10),v!==qe||(nt.classList.add("blinking"),t(4,g+=b[se]),await B(X),v!==qe))return}}const I=["\u25DC \u25DD"," \u02C9\u25DE"," \u02CD\u25DD","\u25DF \u25DE","\u25DC\u02CD ","\u25DF\u02C9 "];let D="",F=0,M=0;async function le(b){if(b){if(F===0){let ae=function(){t(11,D=" "+I[M++]+" "),M%=I.length};F=-1;const X=g;await U(X+" "+I[I.length-1]+" "),t(4,g=X),ae(),F=u.addInterval(ae,100)}}else F>0&&(t(11,D=""),u.delInterval(F),M=0,F=0)}async function J(){await U("")}let Ze=0;async function Z(b){if(q)return;for(;!i;)await B(100);const X=b.widgets||{},ae=Ze++,qe=Pe("div",{class:["line-commit",...b.classes||[]].join(" ")},[`> ${b.from}: `,...b.text.flatMap(se=>{const Be=[];let Fe=0;for(const{0:Ke,1:ze,index:dt}of se.matchAll(/\{([a-z0-9-_]+)\}/ig)){const Pt=X[ze];Pt?(Fe!==dt&&Be.push(se.slice(Fe,dt)),Pt instanceof Element?Be.push(Pt):Be.push(Pe("span",{class:`msg-widget-${ze}-${ae}`}))):(console.error(`No such widget '${ze}' was passed in with the formatted line`),Be.push(se.slice(Fe,dt+Ke.length))),Fe=dt+Ke.length}return Fe!==se.length&&Be.push(se.slice(Fe)),Be.push(Pe("div",{class:"newline"})),Be})]);for(const[se,Be]of De(X))typeof Be.subscribe=="function"&&Be.subscribe(Fe=>{const Ke=Ci(qe,`.msg-widget-${se}-${ae}`);for(const ze of Ke)ze.innerHTML=Fe});const rt=Pe("div",{class:"curtain"});_.append(qe),_.append(rt),t(0,i.scrollTop=i.scrollHeight,i);const ft=_.getBoundingClientRect(),Je=qe.getBoundingClientRect(),It=Je.top-ft.top,nt=Je.height+5;Object.assign(rt.style,{top:`${It}px`,height:`${nt}px`,left:"0px",width:"100%"}),await B(100);for(let se=0;se<nt;se+=5)Object.assign(rt.style,{top:`${It+se}px`,height:`${nt-se}px`}),await B(100);rt.remove()}const He=b=>Array.isArray(b)?b:b.trim().split(/\n/).map(X=>X.trim());async function $e(b,X){return await Z({from:"Arbiter",classes:["from-arbiter"],text:He(b),widgets:X||{}})}async function pe(b,X){return await Z({from:"Opponent",classes:["from-opponent"],text:b,widgets:X||{}})}async function ve(b,X){return await Z({from:`You${h}`,classes:["from-user"],text:He(b),widgets:X||{}})}async function Ye(){ve(O||g),t(4,g="")}async function me(b,X=!1){await Z({from:"System",classes:["from-system-error"],text:He(b)}),X&&(q=!0)}async function et(b,X){await Z({from:"System",classes:["from-system-warn"],text:He(b),widgets:X||{}})}function Te(b){b.addr?(t(5,m=!0),t(6,p=b.name),t(7,A=b.addr),h=p?` (${p})`:""):t(5,m=!1)}let ne=[];function St(b,X){const ae=b.allowed_tokens[0];t(12,ne=[X?"restored":"signed",ae.slice(0,"secret12345".length),ae.slice(-5)])}let at=0;async function je(){debugger;const b=Date.now();b-at>3e4&&(await U("sorry, you don't get to type :P"),await B(1600),await J(),at=b)}let ge;function ct(b,X){if(t(8,P=!0),ge){const ae=ge.getBoundingClientRect();Object.assign(ge.style,{position:"fixed",top:`${ae.top}px`,left:`${ae.left}px`})}t(3,k=""),X&&setTimeout(()=>{ge&&ge.style.position&&Object.assign(ge.style,{position:"",top:"",left:""}),t(3,k=X)},500),t(9,y=b)}function re(){t(8,P=!1),t(9,y=null)}Gt(()=>{d.addEventListener("keydown",()=>{je()})});let R;async function oe(){await B(100),R.classList.add("hover")}async function ut(){t(14,R.style.animation="0",R),await B(100),R.classList.remove("hover"),await B(1e3),t(14,R.style.animation="",R)}const Et=["k_killables"];Qo.keys(e).forEach(b=>{!~Et.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&qi.warn(`<MessagePanel> was created with unknown prop '${b}'`)});function we(b){Ce[b?"unshift":"push"](()=>{_=b,t(1,_)})}function Ge(b){Ce[b?"unshift":"push"](()=>{i=b,t(0,i)})}function x(b){Ce[b?"unshift":"push"](()=>{f=b,t(10,f)})}function _t(b){Ce[b?"unshift":"push"](()=>{ge=b,t(13,ge)})}function tt(b){Ce[b?"unshift":"push"](()=>{R=b,t(14,R)})}function Vt(b){Ce[b?"unshift":"push"](()=>{d=b,t(2,d)})}return n.$$set=b=>{"k_killables"in b&&t(18,u=b.k_killables)},n.$capture_state=()=>({getContext:Ht,onMount:Gt,slide:Yn,blur:wt,fade:he,quadOut:tn,Fa:Ie,faUser:Qs,faWallet:Ws,faTicketAlt:Hs,faPaperPlane:Gs,ode:De,timeout:B,dd:Pe,qs:Tn,qsa:Ci,ys_lang:r,s_lang:a,k_panel:c,k_killables:u,dm_history:i,dm_history_data:_,dm_panel:d,s_cursor:w,s_evaluation:k,s_text:g,b_nav_display:m,s_nav_name:p,s_nav_addr:A,s_account_alias:h,b_submit_display:P,fk_submit:y,dm_cursor:f,i_iter:v,b_disabled:q,s_revealing:O,reveal_text:U,A_SPIN:I,s_spinner:D,i_spinning:F,i_spin:M,spinning:le,clear:J,c_msgs:Ze,receive:Z,rerformat_lines:He,arbiter:$e,opponent:pe,user:ve,commit:Ye,error:me,warn:et,wallet:Te,a_permit_displays:ne,permit:St,dt_attempt_last:at,attempt_type:je,dm_eval:ge,submittable:ct,unsubmittable:re,dm_submit:R,mouseenter_submit:oe,mouseleave_submit:ut}),n.$inject_state=b=>{"s_lang"in b&&(a=b.s_lang),"k_killables"in b&&t(18,u=b.k_killables),"dm_history"in b&&t(0,i=b.dm_history),"dm_history_data"in b&&t(1,_=b.dm_history_data),"dm_panel"in b&&t(2,d=b.dm_panel),"s_cursor"in b&&(w=b.s_cursor),"s_evaluation"in b&&t(3,k=b.s_evaluation),"s_text"in b&&t(4,g=b.s_text),"b_nav_display"in b&&t(5,m=b.b_nav_display),"s_nav_name"in b&&t(6,p=b.s_nav_name),"s_nav_addr"in b&&t(7,A=b.s_nav_addr),"s_account_alias"in b&&(h=b.s_account_alias),"b_submit_display"in b&&t(8,P=b.b_submit_display),"fk_submit"in b&&t(9,y=b.fk_submit),"dm_cursor"in b&&t(10,f=b.dm_cursor),"i_iter"in b&&(v=b.i_iter),"b_disabled"in b&&(q=b.b_disabled),"s_revealing"in b&&(O=b.s_revealing),"s_spinner"in b&&t(11,D=b.s_spinner),"i_spinning"in b&&(F=b.i_spinning),"i_spin"in b&&(M=b.i_spin),"c_msgs"in b&&(Ze=b.c_msgs),"a_permit_displays"in b&&t(12,ne=b.a_permit_displays),"dt_attempt_last"in b&&(at=b.dt_attempt_last),"dm_eval"in b&&t(13,ge=b.dm_eval),"dm_submit"in b&&t(14,R=b.dm_submit)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,_,d,k,g,m,p,A,P,y,f,D,ne,ge,R,oe,ut,c,u,we,Ge,x,_t,tt,Vt]}class Ri extends mt{constructor(e){super(e);ht(this,e,Wo,os,pt,{k_panel:17,k_killables:18},null,[-1,-1]),Q("SvelteRegisterComponent",{component:this,tagName:"MessagePanel",options:e,id:os.name});const{ctx:t}=this.$$,s=e.props||{};t[18]===void 0&&!("k_killables"in s)&&qi.warn("<MessagePanel> was created without expected prop 'k_killables'")}get k_panel(){return this.$$.ctx[17]}set k_panel(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_killables(){throw new Error("<MessagePanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_killables(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Oi="src/component/Prompt.svelte";function Mi(n,e,t){const s=n.slice();return s[17]=e[t],s}function as(n){let e,t,s=n[0];de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=rs(Mi(n,s,c));const r=c=>W(o[c],1,1,()=>{o[c]=null}),a={c:function(){for(let u=0;u<o.length;u+=1)o[u].c();e=Ft()},m:function(u,i){for(let _=0;_<o.length;_+=1)o[_].m(u,i);H(u,e,i),t=!0},p:function(u,i){if(i&9){s=u[0],de(s);let _;for(_=0;_<s.length;_+=1){const d=Mi(u,s,_);o[_]?(o[_].p(d,i),N(o[_],1)):(o[_]=rs(d),o[_].c(),N(o[_],1),o[_].m(e.parentNode,e))}for(Qe(),_=s.length;_<o.length;_+=1)r(_);We()}},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)N(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)W(o[i]);t=!1},d:function(u){st(o,u),u&&G(e)}};return Q("SvelteRegisterBlock",{block:a,id:as.name,type:"if",source:"(122:1) {#if b_display}",ctx:n}),a}function rs(n){let e,t=n[17].label+"",s,o,r,a,c,u,i,_,d;function w(){return n[5](n[17])}const k={c:function(){e=T("button"),s=fe(t),o=Y(),C(e,"class",r="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"),C(e,"alt",a=n[17].alt||""),j(e,Oi,123,3,2733)},m:function(m,p){H(m,e,p),S(e,s),S(e,o),i=!0,_||(d=Ue(e,"click",w,!1,!1,!1),_=!0)},p:function(m,p){n=m,(!i||p&1)&&t!==(t=n[17].label+"")&&Re(s,t),(!i||p&1&&r!==(r="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"))&&C(e,"class",r),(!i||p&1&&a!==(a=n[17].alt||""))&&C(e,"alt",a)},i:function(m){i||(xe(()=>{u&&u.end(1),c=Bn(e,he,{duration:2800,easing:bt}),c.start()}),i=!0)},o:function(m){c&&c.invalidate(),u=Qn(e,he,{duration:2800,easing:tn}),i=!1},d:function(m){m&&G(e),m&&u&&u.end(),_=!1,d()}};return Q("SvelteRegisterBlock",{block:k,id:rs.name,type:"each",source:"(123:2) {#each a_opts as g_opt}",ctx:n}),k}function ls(n){let e,t,s=n[1]&&as(n);const o={c:function(){e=T("div"),s&&s.c(),C(e,"class","prompt s-c0715tBQdWx2"),z(e,"showing",n[2]),j(e,Oi,120,0,2640)},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){H(a,e,c),s&&s.m(e,null),t=!0},p:function(a,[c]){a[1]?s?(s.p(a,c),c&2&&N(s,1)):(s=as(a),s.c(),N(s,1),s.m(e,null)):s&&(Qe(),W(s,1,1,()=>{s=null}),We()),c&4&&z(e,"showing",a[2])},i:function(a){t||(N(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){a&&G(e),s&&s.d()}};return Q("SvelteRegisterBlock",{block:o,id:ls.name,type:"component",source:"",ctx:n}),o}function Ho(n,e,t){let{$$slots:s={},$$scope:o}=e;gt("Prompt",s,[]);const r={ok:P,opts:y,yes:h,yes_no:A},a={key:"yes",label:"Yes"},c={key:"no",label:"No"},u=[a,c],i=()=>{},_=q=>{q()};let d=[],w=!1,k=!1,g=i;function m(q){g(q),t(1,w=!1)}function p(q,O=_){return new Promise(U=>{g=I=>{O(U,I),t(1,w=!1)},t(0,d=q),t(1,w=!0),queueMicrotask(()=>{t(2,k=!0)})})}function A(){return p(u,(q,O)=>{q(O.key==="yes")})}function h(){return p([a])}function P(q="Ok"){return p([{key:"ok",label:q}])}function y(q){return p(gi(q,(O,U)=>At({key:O},U)),(O,U)=>{O(U.key)})}const f=[];Object.keys(e).forEach(q=>{!~f.indexOf(q)&&q.slice(0,2)!=="$$"&&q!=="slot"&&console.warn(`<Prompt> was created with unknown prop '${q}'`)});const v=q=>m(q);return n.$capture_state=()=>({oderac:gi,expoOut:bt,quadOut:tn,fade:he,k_prompt:r,G_ANS_YES:a,G_ANS_NO:c,A_OPTS_YES_NO:u,F_NOOP:i,F_CALL:_,a_opts:d,b_display:w,b_showing:k,fk_answer:g,answer:m,prompt:p,yes_no:A,yes:h,ok:P,opts:y}),n.$inject_state=q=>{"a_opts"in q&&t(0,d=q.a_opts),"b_display"in q&&t(1,w=q.b_display),"b_showing"in q&&t(2,k=q.b_showing),"fk_answer"in q&&(g=q.fk_answer)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[d,w,k,m,r,v]}class Ni extends mt{constructor(e){super(e);ht(this,e,Ho,ls,pt,{k_prompt:4}),Q("SvelteRegisterComponent",{component:this,tagName:"Prompt",options:e,id:ls.name})}get k_prompt(){return this.$$.ctx[4]}set k_prompt(e){throw new Error("<Prompt>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const it="src/component/Assertion.svelte";function Ui(n,e,t){const s=n.slice();return s[15]=e[t],s}function Di(n,e,t){const s=n.slice();return s[18]=e[t],s}function Li(n,e,t){const s=n.slice();return s[15]=e[t],s}function Yi(n,e,t){const s=n.slice();return s[18]=e[t],s}function Bi(n,e,t){const s=n.slice();return s[27]=e[t],s}function cs(n){let e,t,s,o,r,a,c,u,i,_,d=Xt;de(d);let w=[];for(let h=0;h<d.length;h+=1)w[h]=us(Bi(n,d,h));let k=n[7];de(k);let g=[];for(let h=0;h<k.length;h+=1)g[h]=fs(Li(n,k,h));let m=n[7];de(m);let p=[];for(let h=0;h<m.length;h+=1)p[h]=ms(Ui(n,m,h));const A={c:function(){e=T("div"),t=T("span");for(let P=0;P<w.length;P+=1)w[P].c();o=Y(),r=T("span");for(let P=0;P<g.length;P+=1)g[P].c();c=Y(),u=T("span");for(let P=0;P<p.length;P+=1)p[P].c();C(t,"class","tab-wrap s-WG7syJ6nmWd-"),j(t,it,207,2,5236),C(e,"class","tx-basis s-WG7syJ6nmWd-"),j(e,it,206,1,5159),C(r,"class","diamond tx-colors s-WG7syJ6nmWd-"),j(r,it,216,1,5512),C(u,"class","diamond tx-shapes s-WG7syJ6nmWd-"),j(u,it,235,1,6075)},m:function(P,y){H(P,e,y),S(e,t);for(let f=0;f<w.length;f+=1)w[f].m(t,null);H(P,o,y),H(P,r,y);for(let f=0;f<g.length;f+=1)g[f].m(r,null);H(P,c,y),H(P,u,y);for(let f=0;f<p.length;f+=1)p[f].m(u,null);_=!0},p:function(P,y){if(n=P,y&42){d=Xt,de(d);let f;for(f=0;f<d.length;f+=1){const v=Bi(n,d,f);w[f]?w[f].p(v,y):(w[f]=us(v),w[f].c(),w[f].m(t,null))}for(;f<w.length;f+=1)w[f].d(1);w.length=d.length}if(y&204){k=n[7],de(k);let f;for(f=0;f<k.length;f+=1){const v=Li(n,k,f);g[f]?g[f].p(v,y):(g[f]=fs(v),g[f].c(),g[f].m(r,null))}for(;f<g.length;f+=1)g[f].d(1);g.length=k.length}if(y&196){m=n[7],de(m);let f;for(f=0;f<m.length;f+=1){const v=Ui(n,m,f);p[f]?p[f].p(v,y):(p[f]=ms(v),p[f].c(),p[f].m(u,null))}for(;f<p.length;f+=1)p[f].d(1);p.length=m.length}},i:function(P){_||(xe(()=>{s||(s=Ee(e,he,{duration:3600,easing:yt},!0)),s.run(1)}),xe(()=>{a||(a=Ee(r,he,{delay:2400,duration:3200,easing:bt},!0)),a.run(1)}),xe(()=>{i||(i=Ee(u,he,{delay:3200,duration:3200,easing:bt},!0)),i.run(1)}),_=!0)},o:function(P){s||(s=Ee(e,he,{duration:3600,easing:yt},!1)),s.run(0),a||(a=Ee(r,he,{delay:2400,duration:3200,easing:bt},!1)),a.run(0),i||(i=Ee(u,he,{delay:3200,duration:3200,easing:bt},!1)),i.run(0),_=!1},d:function(P){P&&G(e),st(w,P),P&&s&&s.end(),P&&G(o),P&&G(r),st(g,P),P&&a&&a.end(),P&&G(c),P&&G(u),st(p,P),P&&i&&i.end()}};return Q("SvelteRegisterBlock",{block:A,id:cs.name,type:"if",source:"(206:0) {#if b_visible}",ctx:n}),A}function us(n){let e,t=ke(Tt[n[27]].describe[n[3]](""))+"",s,o,r,a;const c={c:function(){e=T("span"),s=fe(t),o=Y(),C(e,"class","active tab s-WG7syJ6nmWd-"),C(e,"data-basis",n[27]),z(e,"active",n[27]===n[1]),j(e,it,209,4,5295)},m:function(i,_){H(i,e,_),S(e,s),S(e,o),r||(a=Ue(e,"click",n[5],!1,!1,!1),r=!0)},p:function(i,_){_&8&&t!==(t=ke(Tt[i[27]].describe[i[3]](""))+"")&&Re(s,t),_&2&&z(e,"active",i[27]===i[1])},d:function(i){i&&G(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:us.name,type:"each",source:"(209:3) {#each A_BASES as si_basis}",ctx:n}),c}function Qi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Qi.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Wi(n){let e,t,s=ke(Ct[n[26]].labels[n[3]])+"",o,r,a;const c={c:function(){e=T("button"),t=T("span"),o=fe(s),C(t,"class","s-WG7syJ6nmWd-"),j(t,it,227,7,5942),C(e,"class","diamond-"+n[18].pos+" color-"+n[26]+" s-WG7syJ6nmWd-"),C(e,"data-quality","color:"+n[26]),z(e,"selected",`color:${n[26]}`===n[2]),j(e,it,221,6,5736)},m:function(i,_){H(i,e,_),S(e,t),S(t,o),r||(a=Ue(e,"click",n[6],!1,!1,!1),r=!0)},p:function(i,_){_&8&&s!==(s=ke(Ct[i[26]].labels[i[3]])+"")&&Re(o,s),_&132&&z(e,"selected",`color:${i[26]}`===i[2])},d:function(i){i&&G(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:Wi.name,type:"then",source:'(221:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function Hi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Hi.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function _s(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Hi,then:Wi,catch:Qi,value:26};Fs(Sn[n[18].key],t);const s={c:function(){e=Ft(),t.block.c()},m:function(r,a){H(r,e,a),t.block.m(r,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(r,a){n=r,zs(t,n,a)},d:function(r){r&&G(e),t.block.d(r),t.token=null,t=null}};return Q("SvelteRegisterBlock",{block:s,id:_s.name,type:"each",source:"(220:4) {#each a_group as g_loc}",ctx:n}),s}function fs(n){let e,t,s=n[15];de(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=_s(Yi(n,s,a));const r={c:function(){e=T("span");for(let c=0;c<o.length;c+=1)o[c].c();t=Y(),C(e,"class","s-WG7syJ6nmWd-"),j(e,it,218,3,5646)},m:function(c,u){H(c,e,u);for(let i=0;i<o.length;i+=1)o[i].m(e,null);S(e,t)},p:function(c,u){if(u&204){s=c[15],de(s);let i;for(i=0;i<s.length;i+=1){const _=Yi(c,s,i);o[i]?o[i].p(_,u):(o[i]=_s(_),o[i].c(),o[i].m(e,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d:function(c){c&&G(e),st(o,c)}};return Q("SvelteRegisterBlock",{block:r,id:fs.name,type:"each",source:"(218:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),r}function Gi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Gi.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Fi(n){let e,t,s=Kt[n[21]].symbol+"",o,r,a;const c={c:function(){e=T("button"),t=T("span"),o=fe(s),C(t,"class","s-WG7syJ6nmWd-"),j(t,it,246,7,6507),C(e,"class","diamond-"+n[18].pos+" bg-rad-"+n[18].pos+" s-WG7syJ6nmWd-"),C(e,"data-quality","shape:"+n[21]),z(e,"selected",`shape:${n[21]}`===n[2]),j(e,it,240,6,6299)},m:function(i,_){H(i,e,_),S(e,t),S(t,o),r||(a=Ue(e,"click",n[6],!1,!1,!1),r=!0)},p:function(i,_){_&132&&z(e,"selected",`shape:${i[21]}`===i[2])},d:function(i){i&&G(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:Fi.name,type:"then",source:'(240:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function zi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:zi.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function ds(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:zi,then:Fi,catch:Gi,value:21};Fs(En[n[18].key],t);const s={c:function(){e=Ft(),t.block.c()},m:function(r,a){H(r,e,a),t.block.m(r,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(r,a){n=r,zs(t,n,a)},d:function(r){r&&G(e),t.block.d(r),t.token=null,t=null}};return Q("SvelteRegisterBlock",{block:s,id:ds.name,type:"each",source:"(239:4) {#each a_group as g_loc}",ctx:n}),s}function ms(n){let e,t,s=n[15];de(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=ds(Di(n,s,a));const r={c:function(){e=T("span");for(let c=0;c<o.length;c+=1)o[c].c();t=Y(),C(e,"class","s-WG7syJ6nmWd-"),j(e,it,237,3,6209)},m:function(c,u){H(c,e,u);for(let i=0;i<o.length;i+=1)o[i].m(e,null);S(e,t)},p:function(c,u){if(u&196){s=c[15],de(s);let i;for(i=0;i<s.length;i+=1){const _=Di(c,s,i);o[i]?o[i].p(_,u):(o[i]=ds(_),o[i].c(),o[i].m(e,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d:function(c){c&&G(e),st(o,c)}};return Q("SvelteRegisterBlock",{block:r,id:ms.name,type:"each",source:"(237:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),r}function hs(n){let e,t,s=n[0]&&cs(n);const o={c:function(){s&&s.c(),e=Ft()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),H(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&N(s,1)):(s=cs(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(Qe(),W(s,1,1,()=>{s=null}),We())},i:function(a){t||(N(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){s&&s.d(a),a&&G(e)}};return Q("SvelteRegisterBlock",{block:o,id:hs.name,type:"component",source:"",ctx:n}),o}function Go(n,e,t){let s,{$$slots:o={},$$scope:r}=e;gt("Assertion",o,[]);const a={show:w,hide:k},c=lt(),u=Ht("game");let i=u.language;Eo(i,"yw_lang"),Po(n,i,f=>t(3,s=f));let _=!1,d="";async function w(f){d=f||"",f&&(t(1,g=f),c("basis",g)),t(0,_=!0)}function k(){t(0,_=!1)}let g=Xt[0],m=null;const p=(f,v)=>f.closest(`[data-${v}]`).getAttribute(`data-${v}`);function A(f){const v=p(f.target,"basis");if(d&&v!==d){c("force_reject",[v,d]);return}t(1,g=v),c("basis",g)}function h(f){t(2,m=p(f.target,"quality")),c("quality",m)}const P=[[{key:0,pos:"top"},{key:2,pos:"rgt"}],[{key:1,pos:"lft"},{key:3,pos:"btm"}]],y=[];return Object.keys(e).forEach(f=>{!~y.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Assertion> was created with unknown prop '${f}'`)}),n.$capture_state=()=>({getContext:Ht,createEventDispatcher:lt,fade:he,expoOut:bt,quadInOut:yt,proper:ke,A_BASES:Xt,A_COLORS:Sn,A_SHAPES:En,H_BASES:Tt,H_COLORS:Ct,H_SHAPES:Kt,k_tx:a,dispatch:c,g_game:u,yw_lang:i,b_visible:_,si_basis_force:d,show:w,hide:k,si_basis_active:g,si_quality:m,data:p,select_basis:A,select_quality:h,A_DIAMOND_KEYS:P,$yw_lang:s}),n.$inject_state=f=>{"yw_lang"in f&&t(4,i=f.yw_lang),"b_visible"in f&&t(0,_=f.b_visible),"si_basis_force"in f&&(d=f.si_basis_force),"si_basis_active"in f&&t(1,g=f.si_basis_active),"si_quality"in f&&t(2,m=f.si_quality)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[_,g,m,s,i,A,h,P,a]}class Ji extends mt{constructor(e){super(e);ht(this,e,Go,hs,pt,{k_tx:8}),Q("SvelteRegisterComponent",{component:this,tagName:"Assertion",options:e,id:hs.name})}get k_tx(){return this.$$.ctx[8]}set k_tx(e){throw new Error("<Assertion>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Ki(n,e){const t=new Ao(39,39,3.3,128,1),s=[new Js({color:"red"}),new Co({map:n,bumpMap:e,bumpScale:Math.random()*.2+.2}),new Js({map:n})];{const i=new To;for(var o=0;o<16;o++){var r=(o+1)/16,a=r*Math.PI*2,c=10*Math.cos(a),u=10*Math.sin(a);o==0?i.moveTo(c,u):i.lineTo(c,u)}return new jo(t,s)}}const ps=Math.PI,Fo=ps*2,gs=Math.sqrt(3);function In(n,e,t,s,o){const r=new Path2D;switch(o){case"triangle":{const a=Math.sqrt(t*gs),c=gs*.5*a,u=a*gs/6,i=u/3;r.moveTo(e,e-(c-u)+i),r.lineTo(e+a/2,e+u+i),r.lineTo(e-a/2,e+u+i);break}case"square":{const a=Math.sqrt(t),c=e-a*.5;r.moveTo(c,c),r.lineTo(c+a,c),r.lineTo(c+a,c+a),r.lineTo(c,c+a);break}case"circle":{const a=Math.sqrt(t/ps);r.ellipse(e,e,a,a,0,0,Fo);break}case"star":{const a=ps/5,c=Math.sqrt(2*t/(5*Math.sin(a)));let u=-1.5*a;r.moveTo(e,e-c);for(let i=0;i<9;i++){const _=c*((i%2+1)/2);r.lineTo(e+_*Math.cos(u),e+_*Math.sin(u)),u+=a}break}}r.closePath(),n.fillStyle=Ct[s].color,n.fill(r),n.globalAlpha=1,n.strokeStyle="black",n.lineWidth=Math.round(Math.sqrt(t)/50),n.stroke(r)}const zo="src/component/Scene.svelte";function ws(n){let e;const t={c:function(){e=T("div"),C(e,"class","s-O3-AoQkAZcdH"),j(e,zo,246,0,8015)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,r){H(o,e,r),n[2](e)},p:ye,i:ye,o:ye,d:function(o){o&&G(e),n[2](null)}};return Q("SvelteRegisterBlock",{block:t,id:ws.name,type:"component",source:"",ctx:n}),t}function Jo(n,e,t){let{$$slots:s={},$$scope:o}=e;gt("Scene",s,[]);const r=Math.PI,a=r*2,c=Math.sqrt(3),u={animate_chip_entry:h,animate_chip_exit:P};let i;async function _(v){const q={},O=new Zs;for(const U in v){const I=v[U];q[U]=await new Promise(D=>{O.load(I,F=>{D(F)})})}return q}function d(v){const q=v.image,O=Pe("canvas",{width:q.width,height:q.height}),U=O.getContext("2d");return[O,U,q]}let w,k,g,m,p;function A(v,q){const[O,U,I]=d(w.chip),D=I.width;I.height,U.drawImage(I,0,0);const F=D/2,M=Math.pow(F*(2/9),2)*r;In(U,F,M,v,q),g=new Wn(O),k=Ki(g,m),p.add(k)}async function h(v,q){A(v,q),k.position.y=8e5,k.visible=!0,new Ut(new nn(-780,-2450,-3e3)).to(new nn(0,0,0),4e3).easing(Dt.Cubic.Out).onUpdate(D=>{k.position.setX(D.x),k.position.setZ(D.z)}).start(),new Ut({y:750}).to({y:0},4e3).easing(Dt.Back.Out).onUpdate(({y:D})=>{k.position.setY(D)}).start(),new Ut(new sn(0,0,0)).to(new sn(0,r/2,r/2-r/6),4e3).easing(Dt.Cubic.Out).onUpdate(D=>{k.rotation.set(D.x,D.y,D.z)}).start()}async function P(){new Ut(new nn(0,0,0)).to(new nn(-780,-2450,-3e3),4e3).easing(Dt.Cubic.Out).onUpdate(U=>{k.position.setX(U.x),k.position.setZ(U.z)}).start(),new Ut({y:0}).to({y:750},4e3).easing(Dt.Back.Out).onUpdate(({y:U})=>{k.position.setY(U)}).start(),new Ut(new sn(0,r/2,r/2-r/6)).to(new sn(0,0,0),4e3).easing(Dt.Cubic.Out).onUpdate(U=>{k.rotation.set(U.x,U.y,U.z)}).start(),await B(4e3),k.visible=!0}Gt(async()=>{w=await _({chip:"/asset/chip.png",chip_displace:"/asset/chip-displacement.png",scuffs:"/asset/scuffs.png"}),g=w.chip,m=w.scuffs;{const[M,le,J]=d(w.scuffs),Ze=M.width,Z=M.height,He=Math.random()*a;le.save();const $e=Ze/2,pe=Z/2;le.translate($e,pe),le.rotate(He),le.scale(Math.SQRT2,Math.SQRT2),le.drawImage(J,-$e,-pe),le.restore(),m=new Wn(M)}const v=new Ks({antialias:!0}),q=Tn(document.body,".msg-panel").getBoundingClientRect(),O=window.innerWidth,U=Math.max(400,Math.min(800,window.innerHeight-q.bottom));if(v.setSize(O,U),!i)return;i.appendChild(v.domElement);const I=O/U;p=new xs;const D=new Vs(45,I,1,5e3);D.position.set(0,0,140),D.lookAt(0,0,0);{const M=new Xs(3158064);p.add(M)}{const M=new $s;M.position.set(0,100,50),M.decay=2.5,M.angle=Math.PI/9,M.penumbra=.9,p.add(M)}function F(){v.render(p,D)}v.setAnimationLoop(()=>{F(),ei()})});const y=[];Object.keys(e).forEach(v=>{!~y.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&console.warn(`<Scene> was created with unknown prop '${v}'`)});function f(v){Ce[v?"unshift":"push"](()=>{i=v,t(0,i)})}return n.$capture_state=()=>({onMount:Gt,chip:Ki,AmbientLight:Xs,Scene:xs,PerspectiveCamera:Vs,WebGLRenderer:Ks,Vector3:nn,TextureLoader:Zs,SpotLight:$s,Euler:sn,CanvasTexture:Wn,Tween:Ut,Easing:Dt,updateTween:ei,timeout:B,dd:Pe,qs:Tn,draw_shape:In,X_PI:r,X_2PI:a,X_SQRT_3:c,k_scene:u,dm_container:i,load_textures:_,canvas_from_tex:d,h_textures:w,ym_chip:k,yt_chip:g,yt_bump:m,y_scene:p,create_chip:A,animate_chip_entry:h,animate_chip_exit:P}),n.$inject_state=v=>{"dm_container"in v&&t(0,i=v.dm_container),"h_textures"in v&&(w=v.h_textures),"ym_chip"in v&&(k=v.ym_chip),"yt_chip"in v&&(g=v.yt_chip),"yt_bump"in v&&(m=v.yt_bump),"y_scene"in v&&(p=v.y_scene)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,u,f]}class Xi extends mt{constructor(e){super(e);ht(this,e,Jo,ws,pt,{k_scene:1}),Q("SvelteRegisterComponent",{component:this,tagName:"Scene_1",options:e,id:ws.name})}get k_scene(){return this.$$.ctx[1]}set k_scene(e){throw new Error("<Scene>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Rn="src/component/PremiseWidget.svelte";function xi(n,e,t){const s=n.slice();return s[14]=e[t][0],s[15]=e[t][1],s[17]=t,s}function bs(n){let e,t,s,o,r,a=n[15].label+"",c,u,i,_,d,w,k;s=new Ie({props:{icon:n[15].icon},$$inline:!0});function g(){return n[9](n[14])}const m={c:function(){e=T("span"),t=T("span"),Oe(s.$$.fragment),o=Y(),r=T("span"),c=fe(a),u=Y(),C(t,"class","truth-opt-icon s-6n-w-T5otbqJ"),j(t,Rn,158,3,4045),C(r,"class","truth-opt-text s-6n-w-T5otbqJ"),j(r,Rn,161,3,4117),C(e,"class",i="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"),C(e,"data-opt",_=n[14]),z(e,"selected",n[14]===n[2]),z(e,"undeniable",n[0]==="undeniable"),z(e,"true",n[0]==="true"),z(e,"verified",n[0]==="verified"),j(e,Rn,149,2,3714)},m:function(A,h){H(A,e,h),S(e,t),Me(s,t,null),S(e,o),S(e,r),S(r,c),S(e,u),d=!0,w||(k=Ue(e,"click",g,!1,!1,!1),w=!0)},p:function(A,h){n=A;const P={};h&2&&(P.icon=n[15].icon),s.$set(P),(!d||h&2)&&a!==(a=n[15].label+"")&&Re(c,a),(!d||h&16&&i!==(i="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"))&&C(e,"class",i),(!d||h&2&&_!==(_=n[14]))&&C(e,"data-opt",_),h&22&&z(e,"selected",n[14]===n[2]),h&17&&z(e,"undeniable",n[0]==="undeniable"),h&17&&z(e,"true",n[0]==="true"),h&17&&z(e,"verified",n[0]==="verified")},i:function(A){d||(N(s.$$.fragment,A),d=!0)},o:function(A){W(s.$$.fragment,A),d=!1},d:function(A){A&&G(e),Ne(s),w=!1,k()}};return Q("SvelteRegisterBlock",{block:m,id:bs.name,type:"each",source:"(149:1) {#each a_opts as [si_opt, g_opt], i_opt}",ctx:n}),m}function ys(n){let e,t,s=n[1];de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=bs(xi(n,s,c));const r=c=>W(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=T("span");for(let u=0;u<o.length;u+=1)o[u].c();C(e,"class","truth s-6n-w-T5otbqJ"),z(e,"known",!!n[0]),j(e,Rn,147,0,3603)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,i){H(u,e,i);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[10](e),t=!0},p:function(u,[i]){if(i&55){s=u[1],de(s);let _;for(_=0;_<s.length;_+=1){const d=xi(u,s,_);o[_]?(o[_].p(d,i),N(o[_],1)):(o[_]=bs(d),o[_].c(),N(o[_],1),o[_].m(e,null))}for(Qe(),_=s.length;_<o.length;_+=1)r(_);We()}i&1&&z(e,"known",!!u[0])},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)N(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)W(o[i]);t=!1},d:function(u){u&&G(e),st(o,u),n[10](null)}};return Q("SvelteRegisterBlock",{block:a,id:ys.name,type:"component",source:"",ctx:n}),a}function Ko(n,e,t){let s,{$$slots:o={},$$scope:r}=e;gt("PremiseWidget",o,[]);const a={ignore:{label:"Ignore",icon:ni},trust:{label:"Trust",icon:vn},distrust:{label:"Distrust",icon:ti}};let c=De(a),{b_mode_nobody:u}=e,{si_assertion:i}=e,{si_known:_}=e;const d={apply(y){return w(y)}};let w=y=>y,k="ignore",g;const m=lt();function p(y){k!==y&&(t(2,k=y),u?w=f=>k==="trust"?f.nobody(i):k==="distrust"?f.opponent(i,!0):f:w=f=>k==="trust"?f.opponent(i,!0):k==="distrust"?f.opponent(i,!1):f,m("change",y))}const A=["b_mode_nobody","si_assertion","si_known"];Object.keys(e).forEach(y=>{!~A.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&console.warn(`<PremiseWidget> was created with unknown prop '${y}'`)});const h=y=>p(y);function P(y){Ce[y?"unshift":"push"](()=>{g=y,t(3,g)})}return n.$$set=y=>{"b_mode_nobody"in y&&t(6,u=y.b_mode_nobody),"si_assertion"in y&&t(7,i=y.si_assertion),"si_known"in y&&t(0,_=y.si_known)},n.$capture_state=()=>({createEventDispatcher:lt,Fa:Ie,faCheckCircle:vn,faTimesCircle:ti,faDotCircle:ni,faEgg:si,faCheck:Hn,ode:De,proper:ke,H_OPTS:a,a_opts:c,b_mode_nobody:u,si_assertion:i,si_known:_,k_premise:d,f_apply:w,si_belief:k,dm_truth:g,dispatch:m,select_opt:p,nl_opts:s}),n.$inject_state=y=>{"a_opts"in y&&t(1,c=y.a_opts),"b_mode_nobody"in y&&t(6,u=y.b_mode_nobody),"si_assertion"in y&&t(7,i=y.si_assertion),"si_known"in y&&t(0,_=y.si_known),"f_apply"in y&&(w=y.f_apply),"si_belief"in y&&t(2,k=y.si_belief),"dm_truth"in y&&t(3,g=y.dm_truth),"nl_opts"in y&&t(4,s=y.nl_opts)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&_&&t(1,c=De({ignore:{label:ke(_),icon:{undeniable:si,true:Hn,verified:Hn}[_]}})),n.$$.dirty&2&&t(4,s=c.length)},[_,c,k,g,s,p,u,i,d,h,P]}class un extends mt{constructor(e){super(e);ht(this,e,Ko,ys,pt,{b_mode_nobody:6,si_assertion:7,si_known:0,k_premise:8}),Q("SvelteRegisterComponent",{component:this,tagName:"PremiseWidget",options:e,id:ys.name});const{ctx:t}=this.$$,s=e.props||{};t[6]===void 0&&!("b_mode_nobody"in s)&&console.warn("<PremiseWidget> was created without expected prop 'b_mode_nobody'"),t[7]===void 0&&!("si_assertion"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_assertion'"),t[0]===void 0&&!("si_known"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_known'")}get b_mode_nobody(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set b_mode_nobody(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_assertion(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_assertion(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_known(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_known(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_premise(){return this.$$.ctx[8]}set k_premise(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Le="src/component/Decision.svelte";function Vi(n,e,t){const s=n.slice();return s[20]=e[t],s}function Zi(n,e,t){const s=n.slice();return s[20]=e[t],s}function ks(n){let e,t,s,o,r,a,c,u,i,_,d,w,k,g,m,p,A,h,P,y,f=n[3];de(f);let v=[];for(let I=0;I<f.length;I+=1)v[I]=vs(Zi(n,f,I));let q=n[2];de(q);let O=[];for(let I=0;I<q.length;I+=1)O[I]=Ss(Vi(n,q,I));const U={c:function(){e=T("div"),t=T("div"),s=T("div"),o=T("button"),o.textContent="Abstain",r=Y(),a=T("div"),c=T("span"),c.textContent="Arbiter's bag:",u=Y(),i=T("span"),_=T("span");for(let D=0;D<v.length;D+=1)v[D].c();d=Y(),w=T("div"),k=T("span"),k.textContent="Opponent's chip:",g=Y(),m=T("span"),p=T("span");for(let D=0;D<O.length;D+=1)O[D].c();C(o,"class","s-UQAPz40uou8M"),j(o,Le,220,4,7343),C(s,"class","decision-abstain s-UQAPz40uou8M"),z(s,"selected",n[4]===n[1]),j(s,Le,219,3,7258),C(c,"class","decision-opts-row-title s-UQAPz40uou8M"),j(c,Le,225,4,7479),C(_,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(_,Le,229,5,7597),C(i,"class","decision-opts-row-view s-UQAPz40uou8M"),j(i,Le,228,4,7554),C(a,"class","decision-opts-row s-UQAPz40uou8M"),C(a,"data-target","bag"),j(a,Le,224,3,7425),C(k,"class","decision-opts-row-title s-UQAPz40uou8M"),j(k,Le,243,4,7990),C(p,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(p,Le,247,5,8110),C(m,"class","decision-opts-row-view s-UQAPz40uou8M"),j(m,Le,246,4,8067),C(w,"class","decision-opts-row s-UQAPz40uou8M"),C(w,"data-target","opponent"),j(w,Le,242,3,7931),C(t,"class","decision-opts s-UQAPz40uou8M"),j(t,Le,218,2,7227),C(e,"class","decision s-UQAPz40uou8M"),z(e,"staged",!!n[1]),j(e,Le,214,1,7028)},m:function(D,F){H(D,e,F),S(e,t),S(t,s),S(s,o),S(t,r),S(t,a),S(a,c),S(a,u),S(a,i),S(i,_);for(let M=0;M<v.length;M+=1)v[M].m(_,null);S(t,d),S(t,w),S(w,k),S(w,g),S(w,m),S(m,p);for(let M=0;M<O.length;M+=1)O[M].m(p,null);h=!0,P||(y=Ue(o,"click",n[10],!1,!1,!1),P=!0)},p:function(D,F){if(n=D,F&18&&z(s,"selected",n[4]===n[1]),F&170){f=n[3],de(f);let M;for(M=0;M<f.length;M+=1){const le=Zi(n,f,M);v[M]?v[M].p(le,F):(v[M]=vs(le),v[M].c(),v[M].m(_,null))}for(;M<v.length;M+=1)v[M].d(1);v.length=f.length}if(F&166){q=n[2],de(q);let M;for(M=0;M<q.length;M+=1){const le=Vi(n,q,M);O[M]?O[M].p(le,F):(O[M]=Ss(le),O[M].c(),O[M].m(p,null))}for(;M<O.length;M+=1)O[M].d(1);O.length=q.length}F&2&&z(e,"staged",!!n[1])},i:function(D){h||(xe(()=>{A||(A=Ee(e,he,{duration:3600,easing:yt},!0)),A.run(1)}),h=!0)},o:function(D){A||(A=Ee(e,he,{duration:3600,easing:yt},!1)),A.run(0),h=!1},d:function(D){D&&G(e),st(v,D),st(O,D),D&&A&&A.end(),P=!1,y()}};return Q("SvelteRegisterBlock",{block:U,id:ks.name,type:"if",source:"(214:0) {#if b_visible}",ctx:n}),U}function vs(n){let e,t,s=n[7](n[20])+"",o,r,a;function c(){return n[11](n[20])}const u={c:function(){e=T("span"),t=new oi,o=Y(),t.a=o,C(e,"class","decision-opt s-UQAPz40uou8M"),z(e,"selected",n[20]===n[1]),j(e,Le,231,7,7681)},m:function(_,d){H(_,e,d),t.m(s,e),S(e,o),r||(a=Ue(e,"click",c,!1,!1,!1),r=!0)},p:function(_,d){n=_,d&8&&s!==(s=n[7](n[20])+"")&&t.p(s),d&10&&z(e,"selected",n[20]===n[1])},d:function(_){_&&G(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:u,id:vs.name,type:"each",source:"(231:6) {#each a_opts_arb as k_opt}",ctx:n}),u}function Ss(n){let e,t,s=n[7](n[20])+"",o,r,a,c,u;function i(){return n[12](n[20])}const _={c:function(){e=T("span"),t=new oi,o=Y(),r=T("img"),a=Y(),t.a=o,ii(r,"display","none"),C(r,"alt","hidden"),C(r,"class","s-UQAPz40uou8M"),j(r,Le,255,8,8390),C(e,"class","decision-opt s-UQAPz40uou8M"),z(e,"selected",n[20]===n[1]),j(e,Le,249,7,8194)},m:function(w,k){H(w,e,k),t.m(s,e),S(e,o),S(e,r),S(e,a),c||(u=Ue(e,"click",i,!1,!1,!1),c=!0)},p:function(w,k){n=w,k&4&&s!==(s=n[7](n[20])+"")&&t.p(s),k&6&&z(e,"selected",n[20]===n[1])},d:function(w){w&&G(e),c=!1,u()}};return Q("SvelteRegisterBlock",{block:_,id:Ss.name,type:"each",source:"(249:6) {#each a_opts_opp as k_opt}",ctx:n}),_}function Es(n){let e,t,s=n[0]&&ks(n);const o={c:function(){s&&s.c(),e=Ft()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),H(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&N(s,1)):(s=ks(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(Qe(),W(s,1,1,()=>{s=null}),We())},i:function(a){t||(N(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){s&&s.d(a),a&&G(e)}};return Q("SvelteRegisterBlock",{block:o,id:Es.name,type:"component",source:"",ctx:n}),o}class Xo{constructor(e,t){this._si_color=e,this._si_shape=t}get color(){return this._si_color}get shape(){return this._si_shape}}function xo(n,e,t){let s,o,{$$slots:r={},$$scope:a}=e;gt("Decision",r,[]);const c={show:k,hide:g};let{k_deduced:u}=e;const i=lt(),_=Ht("game");let d=_.language,w=!1;async function k(){t(0,w=!0)}function g(){t(0,w=!1)}const m={target:"abstain",color:null,shape:null};let p=null;function A(I,D){p!==D&&(t(1,p=D),i("change",D))}function h(){t(1,p=m),i("abstain")}const P=Pe("canvas",{width:100,height:100}),y=P.getContext("2d");function f(I){y.clearRect(0,0,100,100),y.stroke(),y.globalAlpha=.8,In(y,50,Math.pow(35,2),I.color,I.shape);const D=P.toDataURL();return Pe("span",{},[Pe("span",{class:"decision-opt-label"},[`${ke(I.color)} ${ke(I.shape)}`]),Pe("img",{src:D})]).innerHTML}const v=["k_deduced"];Object.keys(e).forEach(I=>{!~v.indexOf(I)&&I.slice(0,2)!=="$$"&&I!=="slot"&&console.warn(`<Decision> was created with unknown prop '${I}'`)});const q=()=>h(),O=I=>A("bag",I),U=I=>A("opponent",I);return n.$$set=I=>{"k_deduced"in I&&t(9,u=I.k_deduced)},n.$capture_state=()=>({Opt:Xo,getContext:Ht,createEventDispatcher:lt,fade:he,quadInOut:yt,proper:ke,dd:Pe,draw_shape:In,k_decision:c,k_deduced:u,dispatch:i,g_game:_,yw_lang:d,b_visible:w,show:k,hide:g,g_opt_abstain:m,g_opt_selected:p,stage_decision:A,stage_abstain:h,dm_canvas:P,d_ctx:y,render_icon:f,a_opts_opp:o,a_opts_arb:s}),n.$inject_state=I=>{"k_deduced"in I&&t(9,u=I.k_deduced),"yw_lang"in I&&(d=I.yw_lang),"b_visible"in I&&t(0,w=I.b_visible),"g_opt_selected"in I&&t(1,p=I.g_opt_selected),"a_opts_opp"in I&&t(2,o=I.a_opts_opp),"a_opts_arb"in I&&t(3,s=I.a_opts_arb)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&512&&t(3,s=u.enumerate("bag")),n.$$.dirty&512&&t(2,o=u.enumerate("opponent")),n.$$.dirty&512&&t(1,p=null)},[w,p,o,s,m,A,h,f,c,u,q,O,U]}class $i extends mt{constructor(e){super(e);ht(this,e,xo,Es,pt,{k_decision:8,k_deduced:9}),Q("SvelteRegisterComponent",{component:this,tagName:"Decision",options:e,id:Es.name});const{ctx:t}=this.$$,s=e.props||{};t[9]===void 0&&!("k_deduced"in s)&&console.warn("<Decision> was created without expected prop 'k_deduced'")}get k_decision(){return this.$$.ctx[8]}set k_decision(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_deduced(){throw new Error("<Decision>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_deduced(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const On="src/component/ActionWidget.svelte";function eo(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s[12]=t,s}function Ps(n){let e,t,s,o,r,a=n[10].label+"",c,u,i,_,d;s=new Ie({props:{icon:n[10].icon},$$inline:!0});function w(){return n[5](n[9])}const k={c:function(){e=T("span"),t=T("span"),Oe(s.$$.fragment),o=Y(),r=T("span"),c=fe(a),u=Y(),C(t,"class","action-opt-icon s-8eNH5FVaHsSg"),j(t,On,87,3,2291),C(r,"class","action-opt-text s-8eNH5FVaHsSg"),j(r,On,90,3,2364),C(e,"class","action-opt "+(n[12]===0?"opt-lft":"")+" "+(n[3]-1===n[12]?"opt-rgt":"opt-mid")+" s-8eNH5FVaHsSg"),C(e,"data-opt",n[9]),z(e,"selected",n[9]===n[0]),j(e,On,86,2,2093)},m:function(m,p){H(m,e,p),S(e,t),Me(s,t,null),S(e,o),S(e,r),S(r,c),S(e,u),i=!0,_||(d=Ue(e,"click",w,!1,!1,!1),_=!0)},p:function(m,p){n=m,p&5&&z(e,"selected",n[9]===n[0])},i:function(m){i||(N(s.$$.fragment,m),i=!0)},o:function(m){W(s.$$.fragment,m),i=!1},d:function(m){m&&G(e),Ne(s),_=!1,d()}};return Q("SvelteRegisterBlock",{block:k,id:Ps.name,type:"each",source:"(86:1) {#each ode(H_OPTS) as [si_opt, g_opt], i_opt}",ctx:n}),k}function As(n){let e,t,s=De(n[2]);de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=Ps(eo(n,s,c));const r=c=>W(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=T("span");for(let u=0;u<o.length;u+=1)o[u].c();C(e,"class","action s-8eNH5FVaHsSg"),ii(e,"width",100*n[3]+"px"),j(e,On,84,0,1967)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,i){H(u,e,i);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[6](e),t=!0},p:function(u,[i]){if(i&29){s=De(u[2]),de(s);let _;for(_=0;_<s.length;_+=1){const d=eo(u,s,_);o[_]?(o[_].p(d,i),N(o[_],1)):(o[_]=Ps(d),o[_].c(),N(o[_],1),o[_].m(e,null))}for(Qe(),_=s.length;_<o.length;_+=1)r(_);We()}},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)N(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)W(o[i]);t=!1},d:function(u){u&&G(e),st(o,u),n[6](null)}};return Q("SvelteRegisterBlock",{block:a,id:As.name,type:"component",source:"",ctx:n}),a}function Vo(n,e,t){let{$$slots:s={},$$scope:o}=e;gt("ActionWidget",s,[]);const r={yes:{label:"Yes",icon:vn}},a=De(r).length;let c=m=>m,{si_selected:u="none"}=e,i;const _=lt();function d(m){u!==m&&(t(0,u=m),_("change",m))}const w=["si_selected"];Object.keys(e).forEach(m=>{!~w.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<ActionWidget> was created with unknown prop '${m}'`)});const k=m=>d(m);function g(m){Ce[m?"unshift":"push"](()=>{i=m,t(1,i)})}return n.$$set=m=>{"si_selected"in m&&t(0,u=m.si_selected)},n.$capture_state=()=>({createEventDispatcher:lt,Fa:Ie,faCheckCircle:vn,ode:De,H_OPTS:r,NL_OPTS:a,f_apply:c,si_selected:u,dm_action:i,dispatch:_,select_opt:d}),n.$inject_state=m=>{"f_apply"in m&&(c=m.f_apply),"si_selected"in m&&t(0,u=m.si_selected),"dm_action"in m&&t(1,i=m.dm_action)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[u,i,r,a,d,k,g]}class to extends mt{constructor(e){super(e);ht(this,e,Vo,As,pt,{si_selected:0}),Q("SvelteRegisterComponent",{component:this,tagName:"ActionWidget",options:e,id:As.name})}get si_selected(){throw new Error("<ActionWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_selected(e){throw new Error("<ActionWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const _n="src/component/Pick.svelte";function no(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s}function Cs(n){let e,t,s,o=De(n[2]);de(o);let r=[];for(let u=0;u<o.length;u+=1)r[u]=Ts(no(n,o,u));const a=u=>W(r[u],1,1,()=>{r[u]=null}),c={c:function(){e=T("div");for(let i=0;i<r.length;i+=1)r[i].c();C(e,"class","pick s-AUZQ0ENzDxvQ"),z(e,"picked",!!n[1]),j(e,_n,77,1,1812)},m:function(i,_){H(i,e,_);for(let d=0;d<r.length;d+=1)r[d].m(e,null);s=!0},p:function(i,_){if(_&14){o=De(i[2]),de(o);let d;for(d=0;d<o.length;d+=1){const w=no(i,o,d);r[d]?(r[d].p(w,_),N(r[d],1)):(r[d]=Ts(w),r[d].c(),N(r[d],1),r[d].m(e,null))}for(Qe(),d=o.length;d<r.length;d+=1)a(d);We()}_&2&&z(e,"picked",!!i[1])},i:function(i){if(!s){for(let _=0;_<o.length;_+=1)N(r[_]);xe(()=>{t||(t=Ee(e,wt,{duration:2500},!0)),t.run(1)}),s=!0}},o:function(i){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)W(r[_]);t||(t=Ee(e,wt,{duration:2500},!1)),t.run(0),s=!1},d:function(i){i&&G(e),st(r,i),i&&t&&t.end()}};return Q("SvelteRegisterBlock",{block:c,id:Cs.name,type:"if",source:"(77:0) {#if b_visible}",ctx:n}),c}function Ts(n){let e,t,s=n[10].label+"",o,r,a,c,u,i,_=n[10].description+"",d,w,k,g,m;c=new Ie({props:{icon:n[10].icon},$$inline:!0});function p(){return n[5](n[9])}const A={c:function(){e=T("span"),t=T("div"),o=fe(s),r=Y(),a=T("div"),Oe(c.$$.fragment),u=Y(),i=T("div"),d=fe(_),w=Y(),C(t,"class","pick-label s-AUZQ0ENzDxvQ"),j(t,_n,80,4,2071),C(a,"class","pick-icon s-AUZQ0ENzDxvQ"),j(a,_n,83,4,2131),C(i,"class","pick-description s-AUZQ0ENzDxvQ"),j(i,_n,86,4,2201),C(e,"class","pick-opt s-AUZQ0ENzDxvQ"),C(e,"data-pick",n[9]),z(e,"selected",n[1]===n[9]),j(e,_n,79,3,1946)},m:function(P,y){H(P,e,y),S(e,t),S(t,o),S(e,r),S(e,a),Me(c,a,null),S(e,u),S(e,i),S(i,d),S(e,w),k=!0,g||(m=Ue(e,"click",p,!1,!1,!1),g=!0)},p:function(P,y){n=P,y&6&&z(e,"selected",n[1]===n[9])},i:function(P){k||(N(c.$$.fragment,P),k=!0)},o:function(P){W(c.$$.fragment,P),k=!1},d:function(P){P&&G(e),Ne(c),g=!1,m()}};return Q("SvelteRegisterBlock",{block:A,id:Ts.name,type:"each",source:"(79:2) {#each ode(H_PICKS) as [si_pick, g_pick]}",ctx:n}),A}function js(n){let e,t,s=n[0]&&Cs(n);const o={c:function(){s&&s.c(),e=Ft()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),H(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&N(s,1)):(s=Cs(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(Qe(),W(s,1,1,()=>{s=null}),We())},i:function(a){t||(N(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){s&&s.d(a),a&&G(e)}};return Q("SvelteRegisterBlock",{block:o,id:js.name,type:"component",source:"",ctx:n}),o}function Zo(n,e,t){let{$$slots:s={},$$scope:o}=e;gt("Pick",s,[]);const r={jackpot:{icon:ai,label:"Jackpot",description:"A pile of SCRT accrued from lost wagers. The exact amount you will receive is a secret."},nft:{icon:ri,label:"Power-up NFT",description:"A unique NFT that gives the owner some special power when used during gameplay. The type of power-up you will receive is a secret."}};let a=!1,c=null;const u={show:i,hide:_};function i(){t(0,a=!0)}function _(){t(0,a=!1)}const d=lt();function w(m){t(1,c=m),d("pick",c)}const k=[];Object.keys(e).forEach(m=>{!~k.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<Pick> was created with unknown prop '${m}'`)});const g=m=>w(m);return n.$capture_state=()=>({createEventDispatcher:lt,blur:wt,Fa:Ie,faCoins:ai,faTrophy:ri,ode:De,H_PICKS:r,b_visible:a,si_pick_selected:c,k_pick:u,show:i,hide:_,dispatch:d,pick:w}),n.$inject_state=m=>{"b_visible"in m&&t(0,a=m.b_visible),"si_pick_selected"in m&&t(1,c=m.si_pick_selected)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[a,c,r,w,u,g]}class so extends mt{constructor(e){super(e);ht(this,e,Zo,js,pt,{k_pick:4}),Q("SvelteRegisterComponent",{component:this,tagName:"Pick",options:e,id:js.name})}get k_pick(){return this.$$.ctx[4]}set k_pick(e){throw new Error("<Pick>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class qs{#e;static includes(e){for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);if(s&&e.test(s))return!0}return!1}constructor(e,t,s){const o=window.btoa(JSON.stringify(s||{}));this._si_namespace=`${e}.${o}`,this.#e=t}set(e,t){let s;try{s=JSON.stringify(t)}catch{throw new Error("Unable to stringify value")}let o;try{o=Gn.exports.AES.encrypt(s,this.#e).toString()}catch{throw new Error("Unable to encrypt message")}return localStorage.setItem(`${this._si_namespace}.${e}`,o)}get(e){const t=localStorage.getItem(`${this._si_namespace}.${e}`);if(t===null)return t;let s;try{s=Gn.exports.AES.decrypt(t,this.#e).toString(Gn.exports.enc.Utf8)}catch{throw new Error("Failed to decrypt value using provided secret")}let o;try{o=JSON.parse(s)}catch{throw new Error("Failed to parse decrypted text")}return o}clear(){const e=`${this._si_namespace}.`;for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);(s==null?void 0:s.startsWith(e))&&localStorage.removeItem(s)}}remove(e){return localStorage.removeItem(`${this._si_namespace}.${e}`)}}const{Error:$o,Object:ea,console:ta}=Bs,ot="src/component/App.svelte";function Is(n){let e,t,s,o,r,a;t=new Ie({props:{icon:ui},$$inline:!0});const c={c:function(){e=T("span"),Oe(t.$$.fragment),C(e,"class","system-controls-burn s-SHyHC7YcIsCQ"),C(e,"alt","destroy cookies and cache"),j(e,ot,1968,2,66132)},m:function(i,_){H(i,e,_),Me(t,e,null),o=!0,r||(a=Ue(e,"click",n[25],!1,!1,!1),r=!0)},p:ye,i:function(i){o||(N(t.$$.fragment,i),xe(()=>{s||(s=Ee(e,he,{duration:1e3},!0)),s.run(1)}),o=!0)},o:function(i){W(t.$$.fragment,i),s||(s=Ee(e,he,{duration:1e3},!1)),s.run(0),o=!1},d:function(i){i&&G(e),Ne(t),i&&s&&s.end(),r=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:Is.name,type:"if",source:"(1968:1) {#if (h_cookie && Object.keys(h_cookie).length) || localStorage.length}",ctx:n}),c}function Rs(n){let e,t,s,o=ke(n[8])+"",r,a,c=ke(n[9])+"",u,i,_,d,w,k,g=ke(Qt(`nobody_has|${n[10]}`))+"",m,p,A,h;const P={c:function(){e=T("div"),t=T("div"),s=fe("The "),r=fe(o),a=Y(),u=fe(c),i=Y(),_=T("div"),d=T("span"),d.textContent="Hint:",w=Y(),k=T("span"),m=fe(g),C(t,"class","chip s-SHyHC7YcIsCQ"),j(t,ot,1990,3,66865),C(d,"class","hint-prefix s-SHyHC7YcIsCQ"),j(d,ot,1994,4,66980),C(k,"class","hint-sentence s-SHyHC7YcIsCQ"),j(k,ot,1995,4,67023),C(_,"class","hint s-SHyHC7YcIsCQ"),j(_,ot,1993,3,66957),C(e,"class","mine s-SHyHC7YcIsCQ"),j(e,ot,1989,2,66739)},m:function(f,v){H(f,e,v),S(e,t),S(t,s),S(t,r),S(t,a),S(t,u),S(e,i),S(e,_),S(_,d),S(_,w),S(_,k),S(k,m),h=!0},p:function(f,v){n=f,(!h||v[0]&256)&&o!==(o=ke(n[8])+"")&&Re(r,o),(!h||v[0]&512)&&c!==(c=ke(n[9])+"")&&Re(u,c),(!h||v[0]&1024)&&g!==(g=ke(Qt(`nobody_has|${n[10]}`))+"")&&Re(m,g)},i:function(f){h||(xe(()=>{A&&A.end(1),p=Bn(e,wt,{duration:2400,easing:yt,delay:4500}),p.start()}),h=!0)},o:function(f){p&&p.invalidate(),A=Qn(e,wt,{duration:2400,easing:yt}),h=!1},d:function(f){f&&G(e),f&&A&&A.end()}};return Q("SvelteRegisterBlock",{block:P,id:Rs.name,type:"if",source:"(1989:1) {#if si_player_hint}",ctx:n}),P}function Os(n){let e,t,s,o,r=n[1]&&Object.keys(n[1]).length||localStorage.length,a,c,u,i,_,d,w,k,g,m,p,A,h,P,y,f,v,q,O,U,I,D,F,M,le,J,Ze;s=new Ie({props:{icon:n[0]?Fn:zn},$$inline:!0});let Z=r&&Is(n);function He(re){n[26](re)}let $e={k_killables:n[13]};n[2]!==void 0&&($e.k_panel=n[2]),c=new Ri({props:$e,$$inline:!0}),Ce.push(()=>zt(c,"k_panel",He));function pe(re){n[28](re)}let ve={};n[5]!==void 0&&(ve.k_prompt=n[5]),m=new Ni({props:ve,$$inline:!0}),Ce.push(()=>zt(m,"k_prompt",pe));function Ye(re){n[29](re)}let me={};n[4]!==void 0&&(me.k_tx=n[4]),h=new Ji({props:me,$$inline:!0}),Ce.push(()=>zt(h,"k_tx",Ye)),h.$on("basis",n[14]),h.$on("quality",n[16]),h.$on("force_reject",n[15]);function et(re){n[30](re)}let Te={k_deduced:n[12]};n[6]!==void 0&&(Te.k_decision=n[6]),f=new $i({props:Te,$$inline:!0}),Ce.push(()=>zt(f,"k_decision",et)),f.$on("abstain",n[18]),f.$on("change",n[19]);let ne=n[10]&&Rs(n);function St(re){n[31](re)}let at={};n[7]!==void 0&&(at.k_pick=n[7]),U=new so({props:at,$$inline:!0}),Ce.push(()=>zt(U,"k_pick",St)),U.$on("pick",n[17]);function je(re){n[32](re)}let ge={};n[3]!==void 0&&(ge.k_scene=n[3]),F=new Xi({props:ge,$$inline:!0}),Ce.push(()=>zt(F,"k_scene",je));const ct={c:function(){e=T("div"),t=T("span"),Oe(s.$$.fragment),o=Y(),Z&&Z.c(),a=Y(),Oe(c.$$.fragment),i=Y(),_=T("div"),d=T("img"),k=Y(),g=T("div"),Oe(m.$$.fragment),A=Y(),Oe(h.$$.fragment),y=Y(),Oe(f.$$.fragment),q=Y(),ne&&ne.c(),O=Y(),Oe(U.$$.fragment),D=Y(),Oe(F.$$.fragment),C(t,"class","system-controls-audio s-SHyHC7YcIsCQ"),C(t,"alt","audio"),j(t,ot,1964,1,65913),C(e,"class","system-controls s-SHyHC7YcIsCQ"),j(e,ot,1963,0,65882),qo(d.src,w="/asset/smile.png")||C(d,"src",w),C(d,"alt","evil smile"),C(d,"class","s-SHyHC7YcIsCQ"),j(d,ot,1978,1,66400),C(_,"class","surprise s-SHyHC7YcIsCQ"),j(_,ot,1977,0,66352),C(g,"class","container s-SHyHC7YcIsCQ"),j(g,ot,1981,0,66456)},l:function(R){throw new $o("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(R,oe){H(R,e,oe),S(e,t),Me(s,t,null),S(e,o),Z&&Z.m(e,null),H(R,a,oe),Me(c,R,oe),H(R,i,oe),H(R,_,oe),S(_,d),n[27](_),H(R,k,oe),H(R,g,oe),Me(m,g,null),S(g,A),Me(h,g,null),S(g,y),Me(f,g,null),S(g,q),ne&&ne.m(g,null),S(g,O),Me(U,g,null),S(g,D),Me(F,g,null),le=!0,J||(Ze=Ue(t,"click",n[24],!1,!1,!1),J=!0)},p:function(R,oe){const ut={};oe[0]&1&&(ut.icon=R[0]?Fn:zn),s.$set(ut),oe[0]&2&&(r=R[1]&&Object.keys(R[1]).length||localStorage.length),r?Z?(Z.p(R,oe),oe[0]&2&&N(Z,1)):(Z=Is(R),Z.c(),N(Z,1),Z.m(e,null)):Z&&(Qe(),W(Z,1,1,()=>{Z=null}),We());const Et={};!u&&oe[0]&4&&(u=!0,Et.k_panel=R[2],Jt(()=>u=!1)),c.$set(Et);const we={};!p&&oe[0]&32&&(p=!0,we.k_prompt=R[5],Jt(()=>p=!1)),m.$set(we);const Ge={};!P&&oe[0]&16&&(P=!0,Ge.k_tx=R[4],Jt(()=>P=!1)),h.$set(Ge);const x={};oe[0]&4096&&(x.k_deduced=R[12]),!v&&oe[0]&64&&(v=!0,x.k_decision=R[6],Jt(()=>v=!1)),f.$set(x),R[10]?ne?(ne.p(R,oe),oe[0]&1024&&N(ne,1)):(ne=Rs(R),ne.c(),N(ne,1),ne.m(g,O)):ne&&(Qe(),W(ne,1,1,()=>{ne=null}),We());const _t={};!I&&oe[0]&128&&(I=!0,_t.k_pick=R[7],Jt(()=>I=!1)),U.$set(_t);const tt={};!M&&oe[0]&8&&(M=!0,tt.k_scene=R[3],Jt(()=>M=!1)),F.$set(tt)},i:function(R){le||(N(s.$$.fragment,R),N(Z),N(c.$$.fragment,R),N(m.$$.fragment,R),N(h.$$.fragment,R),N(f.$$.fragment,R),N(ne),N(U.$$.fragment,R),N(F.$$.fragment,R),le=!0)},o:function(R){W(s.$$.fragment,R),W(Z),W(c.$$.fragment,R),W(m.$$.fragment,R),W(h.$$.fragment,R),W(f.$$.fragment,R),W(ne),W(U.$$.fragment,R),W(F.$$.fragment,R),le=!1},d:function(R){R&&G(e),Ne(s),Z&&Z.d(),R&&G(a),Ne(c,R),R&&G(i),R&&G(_),n[27](null),R&&G(k),R&&G(g),Ne(m),Ne(h),Ne(f),ne&&ne.d(),Ne(U),Ne(F),J=!1,Ze()}};return Q("SvelteRegisterBlock",{block:ct,id:Os.name,type:"component",source:"",ctx:n}),ct}function Ms(n){return n}function na(n,e,t){let s,{$$slots:o={},$$scope:r}=e;gt("App",o,[]);const a={chain_name:Pn,chain_id:Jn,game_addr:jt,game_hash:ki,rest:An,rpc:on,minter_addr:rn,minter_hash:vi};let c,u;try{const l=new Intl.Locale(navigator.language).language;l in fi&&(u=l)}catch{}{const l=Lt("en");l.subscribe(E=>u=E),li("game",{language:l})}let i,_,d,w,k,g,m;const p=new bi;let A,h,P,y,f=new cn,v=Ms,q=Ms;function O(l){let E=0;const L=50,te=L/5e3,ee=window.setInterval(()=>{E+=te,E>=1?window.clearInterval(ee):l.volume=1-bt(E)},L)}const U=new Image;U.src="/asset/monster.png";const I=new Image;I.src="/asset/smile.png";async function D(l){for(const E of di[l])E.delay&&await B(E.delay),await i.reveal_text(E.labels[u],E.interval,E.pause)}async function F(){await B(2e3),await D("attention"),await B(1800),await i.reveal_text(""),await B(1200)}async function M(){await i.reveal_text("good luck! ;)"),await B(800),await i.reveal_text("")}async function le(){return await w.ok("Reload"),window.location.reload(),new Promise(()=>{})}async function J(l){return p.killAll(),i.reveal_text(""),await Ge(l),le()}async function Ze(){const l="                                 ";await i.reveal_text(l),pe.epic_transition.play(),i.reveal_text(l+"  ",250),je.classList.add("triggered"),await B(160),t(11,je.style.opacity="0.0",je),setTimeout(()=>{t(11,je.style.display="none",je)},6e3),await B(2e3)}async function Z(l=0){await i.warn(`
			This game stores encrypted query permit data in local storage.
			
			In order to protect this data, you must provide a passphrase each time the page is loaded.

			${qs.includes(/\.permits$/)?"Enter the same passphrase to restore a previous permit, or enter a different one to sign a new permit.":""}
		`);async function E(ie=0){let Xe=!1;ie||p.addTimeout(()=>{Xe||i.reveal_text("\u2193\u2193 click below to enter passphrase \u2193\u2193")},6500),await w.ok("Provide passphrase"),Xe=!0;const Nt=new Uint8Array(32);crypto.getRandomValues(Nt);const $t=[...Nt].map(kn=>String.fromCharCode(kn%93+33)).join(""),Ln=window.prompt("Enter a passphrase to encrypt/decrypt query permits",$t);if(Ln)return Ln.length<5?(i.reveal_text("passphrase must be at least 5 characters"),E(ie+1)):Ln;{const kn=["null key encryption, eh? try again you silly goose","i can do this all day, can you?","there are only so many responses i have...","...and you're starting to piss me off","i'm serious dood -- don't make me"];return ie<kn.length?i.reveal_text(kn[ie],40):window.location.href="https://www.youtube.com/watch?v=dQw4w9WgXcQ",E(ie+1)}}const ee=(await(await _i.load()).get()).visitorId,ce=await E();if(i.reveal_text(""),!m){await we(`
				This is a multiplayer, online game that uses smart contracts on the Secret Network to ensure fairness for all players.

				Interacting with the game requires submitting transactions to the blockchain via a web wallet such as Keplr (or a local wallet for testnet only).
			`),await B(600);const ie=await w.opts({keplr:xt.isAvailable()?{label:"Connect Keplr",alt:"Connect a wallet using the Keplr extension for Chrome"}:{label:"Install Keplr",alt:"Keplr was not detected. Please install it first in order to use this option"}});switch(ie){case"keplr":{try{m=xt.fromWindow()}catch{return window.open("https://www.keplr.app/","_blank"),await le()}qt({wallet:"keplr"},30*kt);break}case"local":return J("Local storage wallet not yet implemented");default:return J(`Unhandled response option: '${ie}'`)}}let $=!1;const V=Date.now();try{$=await m.enable({chainId:Jn,chainName:Pn,rest:An,rpc:on},()=>J("Account was changed in wallet. Session terminated."))}catch(ie){debugger;return ie instanceof $n?l>=3?J("Keplr connection request rejected too many times"):(await B(2e3),await Z(l+1)):ie instanceof es||ie instanceof Error?J(ie.stack):J("Fatal unknown error")}if(!$)return J("Chain suggestion was denied. Unable to proceed.");Date.now()-V>Ve&&(await we(`Please make sure your network is set to "${Pn}" in Keplr!`),await B(2100));const K=m.key,ue=K.bech32Address;i.wallet({name:K.name,addr:ue,ledger:K.isNanoLedger});const be=new qs(ue,[ee,ce,"salt"].join("|"),a);let Se=null;try{Se=be.get("permits")}catch{await we("Change in passphrase detected. Clearing old query perrmits."),be.clear()}await B(1e3);let Ae=!1;if(Se&&Se[jt])c=Se[jt],Ae=!0;else{await we(`
				Query permits allow you to read encrypted data from the blockchain without needing to write anything extra to the chain.

				Signing a query permit happens offline and does not require any gas.
			`),await B(1800),await w.ok("Sign permit");try{c={params:{chain_id:m.chain,allowed_tokens:[jt,rn],permit_name:Zn,permissions:["owner"]},signature:await m.signQueryPermit()},be.set("permits",en(At({},Se||{}),{[jt]:c,[rn]:c}))}catch(ie){return J(ie.stack)}}i.permit(c.params,Ae),await B(1200),await i.reveal_text(""),await B(1100)}async function He(l=!1){let E=Lt("");l?we("Still waiting for another player... {last_check}",{last_check:E}):we("Created a new game. Now waiting for another player... {last_check}",{last_check:E});let L=window.Notification&&Notification.permission==="granted",te=!1;function ee(){if(L)we("You will receive a notification once another player has joined.");else{const ue=Pe("span"),be=new to({target:ue});be.$on("change",async()=>{const Se=Date.now();await Notification.requestPermission()==="denied"?(be.$set({si_selected:"none"}),Date.now()-Se<.5*Ve?we("User previously denied request for notifications. Need to reset in browser settings."):we("User denied request for notification permission.")):we("Confirmed. Notification will be sent when another player joins.")}),we("Would you like to receive a notification once another player has joined? {approve}",{approve:ue})}}let ce=Date.now(),$=p.addInterval(()=>{ce&&E.set(`Last checked ${wi(ce)}`),te||(te=!0,ee())},1e3),V,K;for(;;){K=Date.now();try{V=await me.queryGameState()}catch(be){return be instanceof xn?J(be.message):J(be+"")}if(V.round!==0)break;ce=Date.now();const ue=Date.now()-K;ue<10*Ve&&await B(ue)}p.delInterval($),E.set("");{let ue=function(){window.removeEventListener("focus",be)},be=function(){ue(),O(Se)};const Se=pe.retro_game_alarm;Se.play(),document.hasFocus()?(await B(1800),O(Se)):window.addEventListener("focus",be)}return V}const $e={epic_transition:"epic-transition.wav",coin:"coin.wav",death:"death.wav",menu_1a:"menu-1a.wav",menu_1b:"menu-1b.wav",rise:"rise.wav",coin_win:"coin-win.wav",retro_game_alarm:"retro-game-alarm.wav",retro_game_notif:"retro-game-notif.wav",trumpet_fanfare:"trumpet-fanfare.wav"},pe=Object.fromEntries(De($e).map(([l,E])=>[l,new Audio(`/asset/audio/${E}`)]));let ve=!1,Ye=jn(),me;async function et(){await x(`
			Your opponent is taking too long. Since you have already fulfilled your duty, I will allow you to end the game and get a refund.

			Would you like to end the game?
		`),await i.reveal_text("yes, give me my money back"),i.submittable(async()=>{i.submittable(null);const l=await tt({async exec(){const E=(await me.forceEndgame()).data.force_endgame.game_state;return i.commit(),E},check(E){return E.finished!==null},query_fail(){return et(),null}});if(!!l)return i.unsubmittable(),await x(`I have refunded you ${an(BigInt(l.wager))}.`),await pe.coin.play(),ne()})}class Te{constructor(E){this._s_expired="run out of time";const L=E.terminate;this._s_kill=E.kill_text||"",this._k_eta=E.eta,this._yw_time=Lt("(estimating...)"),this._k_eta.eta,this._i_interval=p.addInterval(()=>{const ee=this._k_eta;if(!ee.ready)return;if(ee.expired){this._yw_time.set(this._s_expired),p.delInterval(this._i_interval),this._i_interval=0;try{this._dm_clock.remove()}catch{}L&&L();return}const ce=ee.remaining,$=Math.max(0,Math.floor(ce/Ve)),V=Math.floor($/60);V?V<2?this._yw_time.set("less than 2 minutes remaining"):V<5?this._yw_time.set("less than 5 minutes remaining"):V<10?this._yw_time.set("less than 10 minutes remaining"):this._yw_time.set("a little more than 10 minutes remaining"):$<=10?this._yw_time.set("less than 10 seconds remaining"):$<=31?this._yw_time.set("less than 30 seconds remaining"):this._yw_time.set("less than 60 seconds remaining")},100);const te=this._dm_clock=Pe("span");Object.assign(te.style,{paddingRight:"2px"}),new Ie({target:te,props:{icon:ci}})}get interval(){return this._i_interval}get clock(){return this._dm_clock}get store(){return this._yw_time}kill(E=""){this._i_interval&&(p.delInterval(this._i_interval),this._i_interval=0,this._dm_clock.remove(),this._yw_time.set(E||this._s_kill))}}async function ne(){return ln("game"),J("Game over. Reload to play again.")}async function St(){let l=!0;i.reveal_text("checking for active game...").then(()=>l&&i.spinning(!0));let E;try{try{E=await me.queryGameState()}finally{l=!1,i.reveal_text("")}}catch{debugger}if(E&&(console.log("Resuming:",E),E.round!==null)){if(E.finished?we("Fast-forwarding through finished game so you can see the results."):we("Successfully resumed active game."),E.round===0&&(E=await He(!0)),E.round===1)return Be(E,!0),!0;if(E.round===3)return Mn(E,!0),!0;await Ge(`Unrecognized game state round: ${E.round}`)}return!1}let at=!1,je;const ge=l=>l.cloneNode();async function ct(){if(ve)return;const l=ge(pe.menu_1a);l.volume=.4;try{await l.play()}catch{}}async function re(){if(ve)return;const l=ge(pe.menu_1b);l.volume=.4;try{await l.play()}catch{}}async function R(){try{await pe.rise.play()}catch{}}async function oe(){const l=ge(pe.coin);l.volume=Math.random()*.35+.1;try{await l.play()}catch{}}async function ut(){if(!ve)for(let l=0;l<10;l++)oe(),await B(Math.random()<.35?150:250)}async function Et(){const l=ge(pe.death);try{await l.play()}catch{}}async function we(...l){return re(),i.warn(...l)}async function Ge(...l){return re(),i.error(...l)}async function x(...l){return ct(),i.arbiter(...l)}Object.assign(window,{H_AUDIO:pe,play_menu_1a:ct,play_menu_1b:re,play_notif:R,play_jackpot:ut}),Gt(async()=>{console.log(a);const l=Ye.last_seen;if(l&&t(0,ve=!!+Ye.muted),Ye.wallet==="keplr")try{m=xt.fromWindow()}catch{ln("wallet")}if(qt({last_seen:""+Date.now()},30*kt),t(1,Ye=jn()),await Z(),me=new Si(m,jt,c),Ye.game){if(await St())return;ln("game")}return l?await M():(await Ze(),await F()),await x(`
			Welcome${l?" back":""} to my game of secrets. In a moment, you will be matched with another player.

			I will give each of you a chip with a colored shape on it. There are only four colors (red, green, blue, black), and four shapes (triangle, square, circle, star).

			Your opponent will not be able to see your chip and vice versa. I will also take a third chip and hide it in a bag. Each chip will have a unique color and a unique shape. For example, if the chip in my bag is a red triangle, then nobody else has red, and nobody else has a triangle.

			The rules are simple. You and your opponent must exchange a message with each other. Cooperate to deduce what is in my bag and you both will advance to the next round. Betray your opponent by correctly guessing which chip they have and win their wager. Guess wrong and lose.
		`),await B(l?800:4600),Vt()});class _t extends Error{}async function tt(l){let E=!0;const L=l.reveal;typeof L=="string"?i.reveal_text(L).then(()=>E&&i.spinning(!0)):i.spinning(!0);const te=l.check,ee=l.condition||l.query_fail,ce=l.rejected||l.query_fail;let $;try{try{if($=await l.exec(),!te($))throw $=null,new _t}finally{E=!1,i.reveal_text("")}}catch(V){if(console.error(V),V instanceof Error){const K=V.message;if(/Account does not exist/.test(K))return J("Looks like your wallet is empty. Make sure to acquire some SCRT tokens so that you can pay the gas fees for transactions.");if(/must finish current game/.test(K))return qt({game:"started"},12*Yt),await St()?null:J("Looks like you changed browsers or cleared cache since you last joined a game with this account. Please reload and the game will attempt to resume.");if(/contract not found/i.test(K))return J("Contract not found! Are you on the right network?");if(/execute contract failed/.test(K))return Ge(`Contract error: ${K}`),ee(V),null;if(/Request rejected/.test(K))return Ge("Transaction rejected"),ce(V),null;if(/timed out/.test(K)){const ue=Lt("");await we("There was a timeout error while waiting for the transaction to be included. Waiting to see if it gets included... {retries}",{retries:ue});const be=await async function Se(Ae=1){await B(5e3);let ie;try{ie=await me.queryGameState(),te(ie)||(console.warn("query permit check failed on game state",ie),ie=null)}catch(Xe){if(!(Xe instanceof _t))return await Ge(["Timeout error. Please try again with higher gas fee.",K]),l.query_fail?await l.query_fail(Xe):null}return ie||(Ae>=5?(await Ge("Reached maximum retries. Seems like your transaction failed. Try again with higher gas fee?"),l.query_fail?await l.query_fail(new _t):J("Unhandled query failure path.")):(ue.set(`Retried ${Ae===1?"once":`${Ae} times`} so far...`),await Se(Ae+1)))}();if(be)$=be;else return null}else{debugger;return J(`Unhandled error: ${V.stack}`)}}else return J(`Unknown error: ${V}`)}return console.log($),i.reveal_text(""),$}async function Vt(){await i.reveal_text("ready to play?"),await w.ok("Join a game");const l=await tt({reveal:"waiting for transaction to be verified... ",async exec(){return(await me.joinGame()).data.join.game_state},check(L){return L.round!==null},query_fail(){return Vt(),null}});if(!l)return;let E=l;return l.round===0&&(qt({game:"started"},12*Yt),E=await He()),E.round===1?Be(E):E.round===3?J("round_3()"):(console.error(E),qt({game:"started"},12*Yt),J("Failed to join game while waiting for transaction. You can try once more by reloading this page."))}function b(l){var E;t(8,A=l.chip_color.split(":")[1]),t(9,h=l.chip_shape.split(":")[1]),t(10,P=(E=l.hint)==null?void 0:E.split("|")[1]),y=l.first_submit,t(21,f=new cn),f.nobody(`color:${A}`),f.nobody(`shape:${h}`),f.nobody(P)}let X=Xt[0],ae="";async function qe(){const l=ae?Bt(ae):"",E=Tt[X].describe[u](l);await i.reveal_text(E)}function rt(l){i.submittable(null),X=l.detail,ae="",qe()}let ft=!1;function Je(l){if(ft)return;ft=!0;const[E,L]=l.detail;x(`You already used "${Tt[E].describe[u]("")}" last turn. Now you must use "${Tt[L].describe[u]("")}".`)}function It(){ae="",i.submittable(null),d.show(),qe()}async function nt(l){if(i.submittable(null),ae=l.detail,y){const[,ee]=y.split("|");ee===ae&&(ae="",await x("You cannot submit a message that would contradict your previous assertion."))}const[E,L]=ae.split(":");let te="Unknowable";X==="nobody_has"?P===ae?te="Truth":(E==="color"&&L===A||E==="shape"&&L===h)&&(te="Lie"):E==="color"&&L===A||E==="shape"&&L===h?te="Truth":te="Lie",await qe(),i.submittable(async()=>{d.hide(),i.submittable(null);const ee=await tt({async exec(){return(await me.submitAssertion(X,ae)).data.submit.game_state},check(ce){return y?ce.second_submit!==null:ce.first_submit!==null},query_fail(){return It(),nt(l),null}});!ee||(await i.commit(),se&&se.kill(),ze&&ze.kill(),i.unsubmittable(),ee.second_submit?dn(ee):dt(ee))},te)}let se;async function Be(l,E=!1){b(l),await i.reveal_text(""),await x("Here is your chip, player..."),await _.animate_chip_entry(A,h),E||await B(5e3);let L=P.startsWith("color:");if(await x(`
			Round 1: I've given you the ${A} ${h} this round, and a hint that nobody has ${L?"":"a "}${P.replace(/^[^:]+:/,"")}.

			I've also given your opponent a hint. Theirs is that nobody has a certain ${L?"shape":"color"}.
		`),E){if(l.first_submit)return await i.user(Qt(l.first_submit)),dt(l,E)}else await B(4100);se=new Te({eta:new vt(l.first_round_start_block+""),kill_text:"successfully submitted"}),await x(["Now you must choose what to tell the other player. I will reveal both of your messages simultaneously once they both have been submitted. You have {clock_icon}{time_remaining}."],{clock_icon:se.clock,time_remaining:se.store}),await d.show(),E||await B(4e3),qe()}let Fe=!1,Ke,ze;async function dt(l,E=!1){var $;b(l);const{opponent_first_submit:L,first_extra_secret:te}=l;if(!L&&!te)return Fe||(Fe=!0,se&&se.kill("already submittted"),Ke=new Te({eta:new vt(l.first_round_start_block+""),kill_text:"also submitted theirs",terminate:et}),await x(["Your submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Ke.clock,time_remaining:Ke.store})),await B(5e3),dt(await me.queryGameState());Ke&&Ke.kill(),E||R();const ee=Pe("span");if(te){const[V,K]=te.split("|"),ue=Lt("");V==="nobody_has"?(f.nobody(K),ue.set(`Your opponent has the hint that "nobody has ${Bt(K)}".`)):(f.opponent(K,!0),ue.set(`Your opponent has ${Bt(K)}.`)),new un({target:ee,props:{b_mode_nobody:!1,si_assertion:K,si_known:"true"}}),await x(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:ue,premise:ee})}else if(L){const[V,K]=L.split("|");let ue=f.clone();const be=V==="nobody_has"&&K===P,Se=new un({target:ee,props:{b_mode_nobody:V==="nobody_has",si_assertion:K,si_known:be?"undeniable":""}}),Ae=Se.k_premise;Se.$on("change",()=>{t(22,v=Ae.apply),console.log(`Priori: ${f.explain()}`),console.log(`Opp1: ${ue.explain()}`),console.log([f,ue])}),await i.opponent([`${ke(Qt(L))} {premise}`],{premise:ee})}else return J("Fatal system error: unable to parse game state");if(E){if(l.second_submit)return await i.user(Qt(l.second_submit)),dn(l,E)}else await B(4100);ze=new Te({eta:new vt(l.second_submit_turn_start_block+""),kill_text:"already submitted"});const ce=(($=l.first_submit)==null?void 0:$.split("|")[0])==="nobody_has"?"i_have":"nobody_has";await x([`Both of you must now exchange one more message with each other. This time, I'm requiring you to submit a message about ${ce==="nobody_has"?'what "nobody has"':"your chip"}. You have {clock_icon}{time_remaining}.`],{clock_icon:ze.clock,time_remaining:ze.store}),await d.show(ce),qe()}let Pt=!1,fn,Rt,Wt;async function dn(l,E=!1){const{opponent_second_submit:L,second_extra_secret:te}=l;if(!L&&!te)return Pt||(Pt=!0,fn&&fn.kill(),Rt=new Te({eta:new vt(l.second_submit_turn_start_block+""),kill_text:"also submitted theirs",terminate:et}),await x(["Your 2nd submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Rt.clock,time_remaining:Rt.store})),await B(5e3),dn(await me.queryGameState());E||R();const ee=Pe("span");if(te){const[ce,$]=te.split("|"),V=Lt("");ce==="nobody_has"?(t(23,q=K=>K.nobody($)),V.set(`Your opponent has the hint that "nobody has ${Bt($)}".`)):(t(23,q=K=>K.opponent($,!0)),V.set(`Your opponent has ${Bt($)}.`)),new un({target:ee,props:{b_mode_nobody:!1,si_assertion:$,si_known:"true"}}),await x(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:V,premise:ee})}else if(L){Rt&&Rt.kill();const[ce,$]=L.split("|"),V=ce==="nobody_has"&&$===P,K=new un({target:ee,props:{b_mode_nobody:ce==="nobody_has",si_assertion:$,si_known:V?"undeniable":""}}),ue=K.k_premise;K.$on("change",()=>{t(23,q=ue.apply)}),await i.opponent([`${ke(Qt(L))} {premise}`],{premise:ee})}else return J("Fatal system error: unable to parse game state");if(E&&l.guess)return await i.user(Un(l.guess)),gn(l,E);Wt=new Te({eta:new vt(l.guess_turn_start_block+""),kill_text:"successfully submitted"}),await x(`
			The time has come for you to surmise my secrets. You may either guess what is in my bag, what your opponent has, or abstain completely. You have {clock_icon}{time_remaining}.

			The precedence for winning is as follows:
			- [Guess wrong] < [Abstain] < [Correctly guess arbiter's bag] < [Corrrectly guess opponent's chip]

			Use the inline widgets next to each assertion above to logically reduce your option space.
		`,{clock_icon:Wt.clock,time_remaining:Wt.store}),await k.show(),console.log(l)}async function mn(l){i.submittable(null),await i.reveal_text(Un(l),30),i.submittable(async()=>{i.submittable(null),k.hide();const E=await tt({async exec(){const L=(await me.submitGuess(l)).data.guess.game_state;return i.commit(),L},check(L){return L.guess!==null},query_fail(){return k.show(),mn(l),null}});!E||(Wt.kill(),gn(E))})}let hn=!1,pn=!1,Ot;async function gn(l,E=!1){const{round_result:L,round:te,result:ee}=l;let ce=!1;if(L&&!hn){hn=!0;const[$,V]=L.split("|");V==="wrong"?(await x(`
					Sorry, your guess about ${$==="opponent"?"your opponent's chip":"my bag"} was wrong.
					
					Guessing wrong is the worst because you automatically lose your wager. Consider abstaining next time if you're unsure.
				`),ce=!0):await x(`Nicely done, your guess about ${$==="opponent"?"your opponent's chip":"my bag"} was correct!`)}if(!l.opponent_guess)return pn||(pn=!0,Ot=new Te({eta:new vt(l.guess_turn_start_block+""),kill_text:"now submitted",terminate:et}),await x(`${ce?"Even though you lost":"However"}, I am still waiting for a guess from your opponent. They have {clock_icon}{time_remaining}.`,{clock_icon:Ot.clock,time_remaining:Ot.store})),await B(5e3),gn(await me.queryGameState());if(Ot&&Ot.kill(),t(10,P=""),_.animate_chip_exit(),console.log("round_1d#over",l),l.finished)if(l.opponent_round_result){const{opponent_round_result:$,opponent_guess:V}=l,[K,ue,be]=V.split(/\|/g),[,Se]=$.split("|");let Ae="",ie=!1;if(K==="abstain")Ae="abstained from guessing";else{const Xe=ue.split(":")[1],Nt=be.split(":")[1],$t=Ct[Xe].labels[u]+" "+Kt[Nt].labels[u];ie=Se!=="correct",Ae=`${ie?"wrongly":"correctly"} guessed that ${K==="bag"?"my bag":"your chip"} is the ${$t}`}if(ee==="you lost wager")return await x([`${ce?"As you already know":"Bad news"}, you lost your wager. ${ie?"But you'll be happy to know that your opponent":"Your opponent"} ${Ae}, so they ${ie?"also lost their wager":"won the game and gained your lost wager"}.`]),await B(9e3),ne();if(ee==="you won wager"){const Xe=BigInt(l.wager),Nt=an(Xe),$t=an(Xe*2n);return await x(`
						Congratulations, you won! Your opponent ${Ae}, so they lost their wager.
						
						I have refunded you your original ${Nt} plus an extra ${Nt} from your opponent's wager for a total of ${$t}.
					`),await B(9e3),ne()}else await x([`Well done. You and your opponent have tied, so you both can claim a reward. They ${Ae}.`]),E||await B(4e3)}else return J("Somebody terminated the game.");else if(l.round===3)Mn(l,E);else return J(`Game is not finished but round is ${l.round}.`)}let Ns=!1,Mt;async function Mn(l,E=!1){if(Mt=new Te({eta:new vt(l.pick_reward_round_start_block+""),kill_text:"made your decision"}),await pe.trumpet_fanfare.play(),await x(`
			Congratulations on passing round 1 together! I have two rewards to choose from, a jackpot of SCRT, or an NFT that can be used to give you special powers next time you play.

			However, if you both attempt to claim the same prize, then neither of you will take it. You will only be able to take a reward if you and your opponent claim different things.

			You have {clock_icon}{time_remaining}.
		`,{clock_icon:Mt.clock,time_remaining:Mt.store}),l.pick)return bn(l,!0);g.show()}async function Nn(l){const{detail:E}=l;i.submittable(null),await i.reveal_text(`i pick the ${E}`),i.submittable(async()=>{g.hide();const L=await tt({async exec(){const te=(await me.pickReward(E)).data.pick_reward.game_state;return i.commit(),te},check(te){return te.pick!==null},query_fail(){return g.show(),Nn(l),null}});!L||bn(L)})}let Zt,wn=!1;async function bn(l,E=!1){Mt&&Mt.kill();const{result:L}=l;if(L){switch(L){case"you won jackpot":{ut(),await x(`
						Fortune favors the bold! Your opponent picked the NFT, and you have successfully claimed the jackpot of ${an(BigInt(l.jackpot_reward||"0"))}!
					`);break}case"you won nft":{Et(),await x(`
						Wise move. While your opponent chose the short-term gain, you see the long-term potential. You have successfully claimed an NFT.
					`);break}case"you lost reward":{Et(),l.pick==="jackpot"?await x(`
							Greed has spoiled your riches. Both players attempted to claim the jackpot, so you both shall leave empty-handed.
						`):await x(`
							An unlucky pick. Both players attempted to claim the NFT, so you both shall leave empty-handed.
						`);break}}return await B(9e3),ne()}else return wn||(wn=!0,Zt=new Te({eta:new vt(l.pick_reward_round_start_block+""),kill_text:"also picked theirs",terminate:et}),await x(["Your pick has been noted. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Zt.clock,time_remaining:Zt.store})),await B(5e3),bn(await me.queryGameState())}function Un(l){let E;if(typeof l=="string"?E=Object.fromEntries(l.split(/\|/g).map(L=>L.split(":"))):E=l,E.target==="abstain")return"i abstain from guessing this round";{let L="";return E.target==="bag"?L+="the arbiter's bag is: a ":L+="my opponent's chip is: a ",L+Ct[E.color].labels[u]+" "+Kt[E.shape].labels[u]}}async function Us(){mn({target:"abstain",color:null,shape:null})}async function Ds({detail:l}){mn(l)}let yn=!1;function Dn(){if(!yn)yn=!0,Ge("The button you just clicked will remove all cookies and cache that the game previously created and then disable the current UI. If you agree to this, click the burn icon again.");else return Object.keys(jn()).forEach(l=>ln(l)),localStorage.clear(),i.reveal_text(""),J("Cache burned")}const io=[];ea.keys(e).forEach(l=>{!~io.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&ta.warn(`<App> was created with unknown prop '${l}'`)});const oo=()=>t(0,ve=!ve),ao=()=>Dn();function ro(l){i=l,t(2,i)}function lo(l){Ce[l?"unshift":"push"](()=>{je=l,t(11,je)})}function co(l){w=l,t(5,w)}function uo(l){d=l,t(4,d)}function _o(l){k=l,t(6,k)}function fo(l){g=l,t(7,g)}function mo(l){_=l,t(3,_)}return n.$capture_state=()=>({onMount:Gt,setContext:li,writable:Lt,blur:wt,fade:he,quadInOut:yt,expoOut:bt,Fa:Ie,faClock:ci,faVolumeUp:zn,faVolumeMute:Fn,faFire:ui,fingerprintjs:_i,H_LANGUAGES:fi,H_COLORS:Ct,H_SHAPES:Kt,A_BASES:Xt,H_BASES:Tt,H_MESSAGES:di,SI_CHAIN:Jn,S_CHAIN_NAME:Pn,P_LCD_REST:An,P_LCD_RPC:on,uscrt_to_scrt:an,KeplrWallet:xt,EnableKeplrError:$n,OfflineSignerError:es,dd:Pe,delete_cookie:ln,read_cookie:jn,write_cookie:qt,XTL_SECONDS:Ve,XTL_HOURS:Yt,XTL_DAYS:kt,ode:De,proper:ke,timeout:B,relative_time:wi,Killables:bi,Deduction:cn,use_assertion_in_sentence:Qt,use_quality_in_sentence:Bt,MessagePanel:Ri,Prompt:Ni,Assertion:Ji,Scene:Xi,PremiseWidget:un,Decision:$i,ActionWidget:to,Pick:so,SI_PERMIT:Zn,ContractError:xn,EtaEstimator:vt,GameContract:Si,P_CONTRACT_GAME_ADDR:jt,SI_CONTRACT_GAME_CODE_HASH:ki,P_CONTRACT_MINTER_ADDR:rn,SI_CONTRACT_MINTER_CODE_HASH:vi,EncryptedLocalStorage:qs,F_IDENTITY:Ms,G_NETWORK_SUMMARY:a,g_permit:c,s_lang:u,k_panel:i,k_scene:_,k_tx:d,k_prompt:w,k_decision:k,k_pick:g,k_wallet:m,k_killables:p,si_player_color:A,si_player_shape:h,si_player_hint:P,si_submit_first:y,k_priori:f,f_assert_1:v,f_assert_2:q,quiet_fade:O,d_img_monster:U,d_img_smile:I,reveal_prepared:D,introduction:F,welcome_back:M,reload:le,fatal:J,surprise:Ze,connect_wallet:Z,wait_for_other_player:He,H_AUDIO_SRC:$e,H_AUDIO:pe,b_muted:ve,h_cookie:Ye,k_game:me,force_endgame:et,Countdown:Te,game_over:ne,try_resume_game:St,b_surprise:at,dm_surprise:je,clone_audio:ge,play_menu_1a:ct,play_menu_1b:re,play_notif:R,play_coin:oe,play_jackpot:ut,play_death:Et,warn:we,err:Ge,arbiter:x,GameStateError:_t,safe_exec:tt,try_join:Vt,update_player_state:b,si_assert_basis:X,si_assert_quality:ae,reveal_tx:qe,select_basis:rt,b_force_rejected:ft,force_reject:Je,reset_tx:It,select_quality:nt,k_countdown_1a:se,round_1a:Be,b_notif_1b_waiting:Fe,k_countdown_1a2:Ke,k_countdown_1b:ze,round_1b:dt,b_notif_1c_waiting:Pt,k_countdown_1b2:fn,k_countdown_1c:Rt,k_countdown_1c2:Wt,round_1c:dn,prepare_guess:mn,b_notif_1d_result:hn,b_notif_1d_waiting:pn,k_countdown_1d:Ot,round_1d:gn,b_notif_3a_waiting:Ns,k_countdown_3a:Mt,round_3a:Mn,select_pick:Nn,k_countdown_3b:Zt,b_notif_3b_waiting:wn,round_3b:bn,use_guess_in_sentence:Un,select_abstain:Us,select_decision:Ds,b_burn_clicked:yn,burn:Dn,k_deduced:s}),n.$inject_state=l=>{"g_permit"in l&&(c=l.g_permit),"s_lang"in l&&(u=l.s_lang),"k_panel"in l&&t(2,i=l.k_panel),"k_scene"in l&&t(3,_=l.k_scene),"k_tx"in l&&t(4,d=l.k_tx),"k_prompt"in l&&t(5,w=l.k_prompt),"k_decision"in l&&t(6,k=l.k_decision),"k_pick"in l&&t(7,g=l.k_pick),"k_wallet"in l&&(m=l.k_wallet),"si_player_color"in l&&t(8,A=l.si_player_color),"si_player_shape"in l&&t(9,h=l.si_player_shape),"si_player_hint"in l&&t(10,P=l.si_player_hint),"si_submit_first"in l&&(y=l.si_submit_first),"k_priori"in l&&t(21,f=l.k_priori),"f_assert_1"in l&&t(22,v=l.f_assert_1),"f_assert_2"in l&&t(23,q=l.f_assert_2),"b_muted"in l&&t(0,ve=l.b_muted),"h_cookie"in l&&t(1,Ye=l.h_cookie),"k_game"in l&&(me=l.k_game),"b_surprise"in l&&(at=l.b_surprise),"dm_surprise"in l&&t(11,je=l.dm_surprise),"si_assert_basis"in l&&(X=l.si_assert_basis),"si_assert_quality"in l&&(ae=l.si_assert_quality),"b_force_rejected"in l&&(ft=l.b_force_rejected),"k_countdown_1a"in l&&(se=l.k_countdown_1a),"b_notif_1b_waiting"in l&&(Fe=l.b_notif_1b_waiting),"k_countdown_1a2"in l&&(Ke=l.k_countdown_1a2),"k_countdown_1b"in l&&(ze=l.k_countdown_1b),"b_notif_1c_waiting"in l&&(Pt=l.b_notif_1c_waiting),"k_countdown_1b2"in l&&(fn=l.k_countdown_1b2),"k_countdown_1c"in l&&(Rt=l.k_countdown_1c),"k_countdown_1c2"in l&&(Wt=l.k_countdown_1c2),"b_notif_1d_result"in l&&(hn=l.b_notif_1d_result),"b_notif_1d_waiting"in l&&(pn=l.b_notif_1d_waiting),"k_countdown_1d"in l&&(Ot=l.k_countdown_1d),"b_notif_3a_waiting"in l&&(Ns=l.b_notif_3a_waiting),"k_countdown_3a"in l&&(Mt=l.k_countdown_3a),"k_countdown_3b"in l&&(Zt=l.k_countdown_3b),"b_notif_3b_waiting"in l&&(wn=l.b_notif_3b_waiting),"b_burn_clicked"in l&&(yn=l.b_burn_clicked),"k_deduced"in l&&t(12,s=l.k_deduced)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty[0]&14680064&&t(12,s=q(v(f.clone()).clone()).clone()),n.$$.dirty[0]&3&&Ye&&(Object.values(pe).forEach(l=>l.muted=ve),qt({muted:ve?"1":"0"},30*kt))},[ve,Ye,i,_,d,w,k,g,A,h,P,je,s,p,rt,Je,nt,Nn,Us,Ds,Dn,f,v,q,oo,ao,ro,lo,co,uo,_o,fo,mo]}class sa extends mt{constructor(e){super(e);ht(this,e,na,Os,pt,{},null,[-1,-1,-1,-1]),Q("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:Os.name})}}new sa({target:document.body,props:{}});
//# sourceMappingURL=index.63d4e68c.js.map
