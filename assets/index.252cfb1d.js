var fo=Object.defineProperty,mo=Object.defineProperties;var ho=Object.getOwnPropertyDescriptors;var Us=Object.getOwnPropertySymbols;var po=Object.prototype.hasOwnProperty,go=Object.prototype.propertyIsEnumerable;var Ds=(n,e,t)=>e in n?fo(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,At=(n,e)=>{for(var t in e||(e={}))po.call(e,t)&&Ds(n,t,e[t]);if(Us)for(var t of Us(e))go.call(e,t)&&Ds(n,t,e[t]);return n},$t=(n,e)=>mo(n,ho(e));import{v as wo,S as bo,a as ht,i as pt,s as gt,d as Q,g as Ls,b as wt,c as Qt,o as Wt,e as Dn,f as bt,h as he,q as en,F as Oe,j as Ys,k as Bs,l as Qs,m as Ws,n as T,t as fe,p as C,r as j,u as H,w as S,x as Me,y as Xe,z as Ln,A as Yn,B as G,C as Ne,D as Y,E as z,G as Ue,H as N,I as He,J as W,K as Ge,L as Pe,M as De,N as Le,O as yo,P as ko,Q as je,R as yt,T as de,U as Ht,V as st,W as ct,X as vo,Y as So,Z as kt,_ as Hs,$ as Gs,a0 as ye,a1 as Eo,a2 as Fs,a3 as Po,a4 as Ao,a5 as Co,a6 as Bn,a7 as zs,a8 as Js,a9 as Ks,aa as Xs,ab as tn,ac as xs,ad as Vs,ae as nn,af as Mt,ag as Nt,ah as Zs,ai as yn,aj as $s,ak as ei,al as ti,am as Qn,an as ni,ao as si,ap as ii,aq as oi,ar as Wn,as as Hn,at as Gn,au as Gt,av as ai,aw as Ut,ax as ri,ay as li,az as ci,aA as To,aB as Ft}from"./vendor.5ff8e4c0.js";const jo=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}};jo();const ui={en:{}},Ct={red:{color:"#a00000",labels:{en:"red"}},green:{color:"#006000",labels:{en:"green"}},blue:{color:"#0000a0",labels:{en:"blue"}},black:{color:"#000000",labels:{en:"black"}}},kn=Object.keys(Ct),zt={triangle:{symbol:"\u25B2",labels:{en:"triangle"}},square:{symbol:"\u25A0",labels:{en:"square"}},circle:{symbol:"\u25CF",labels:{en:"circle"}},star:{symbol:"\u2605",labels:{en:"star"}}},vn=Object.keys(zt),Jt={nobody_has:{describe:{en:n=>`nobody has ${n||"..."}`}},i_have:{describe:{en:n=>`my chip is ${n||"..."}`}}},Kt=Object.keys(Jt),_i={attention:[{labels:{en:"the Arbiter approaches..."}}],loading:[{delay:2e3,interval:200,labels:{en:"hmmm"}},{delay:250,interval:500,labels:{en:"hmmm...."}}]},Fn="pulsar-1",Sn="pulsar-1",En="https://h7pwct6jl3.execute-api.us-west-2.amazonaws.com/",sn="https://7yp08exitj.execute-api.us-west-2.amazonaws.com/",on=n=>(Number(n/10000n)/100).toFixed(2).replace(/\.0+$/,"")+" SCRT";class zn extends Error{constructor(e,t){t?t instanceof TypeError?super(`${e}: ${t.stack}`):t instanceof Error?super(`${e}: ${t.stack}`):super(`${e}: Unknown error`):super(e)}}const xe=1e3,Jn=60*xe,Dt=60*Jn,vt=24*Dt,fi=7*vt,di=30*vt,mi=365*vt,Ye=Object.entries;function hi(n,e){return Ye(n).reduce((t,[s,o])=>[...t,e(s,o)],[])}function B(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}const ke=n=>n[0].toUpperCase()+n.slice(1),qo=[{ge:mi,divisor:mi,unit:"year"},{ge:di,divisor:di,unit:"month"},{ge:fi,divisor:fi,unit:"week"},{ge:vt,divisor:vt,unit:"day"},{ge:Dt,divisor:Dt,unit:"hour"},{ge:Jn,divisor:Jn,unit:"minute"},{ge:xe,divisor:xe,unit:"seconds"},{ge:0,divisor:1,text:"just now"}];function pi(n,e=Date.now(),t=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"})){const o=(typeof e=="object"?e.getTime():new Date(e).getTime())-(typeof n=="object"?n:new Date(n)).getTime(),r=Math.abs(o);for(const a of qo)if(r>=a.ge){const c=Math.round(Math.abs(o)/a.divisor),u=o<0;return a.unit?t.format(u?c:-c,a.unit):a.text}}class gi{constructor(){this._as_intervals=new Set,this._as_timeouts=new Set}addInterval(e,t){const s=window.setInterval(e,t);return this._as_intervals.add(s),s}addTimeout(e,t){const s=window.setTimeout(()=>{this.delTimeout(s),e()},t);return this._as_timeouts.add(s),s}delInterval(e){window.clearInterval(e),this._as_intervals.delete(e)}delTimeout(e){window.clearTimeout(e),this._as_timeouts.delete(e)}killAll(){for(const e of this._as_intervals)this.delInterval(e);for(const e of this._as_timeouts)this.delTimeout(e)}}async function Io(n,e,t=null){if(t==null?void 0:t.search){if(e.includes("?"))throw new Error(`Cannot specify 'search' option in fetch config when URI already contains search params: "${e}"`);e+="?"+new URLSearchParams(t.search).toString(),delete t.search}try{return await wo(e,$t(At({},t),{method:n,mode:"cors",headers:At({Accept:"application/json"},(t||{}).headers||{})})).json()}catch(s){throw s}}async function wi(n,e=null){return Io("GET",n,e)}const Tt="secret1zkn3d4u0t8hrr6jhqrdeg96ygrhmx66f9dm6cu",bi="7c98f9e086e687e8f920dc6c0bee01a88c8097223d53bd494ffb7b8bfec4f364",an="secret1rfwt2zlw27f9ps28svetzmt32tv0rwnr6jg5hz",yi="36d94d2066b903ede9716f77f2fe99274aaa2c434feb424302dbb8aef9f34721";class Kn extends Error{constructor(e){super(`The game contract returned the following error: ${e}`)}}const Ro="1000000",Oo=new TextDecoder;class ki{constructor(e,t,s,o){this._k_wallet=e,this._p_contract=t,this._g_permit=s||null,this._si_code_hash=o}async execute(e,t,s=[]){const o=await this._k_wallet.execute(this._p_contract,e,s,t,this._si_code_hash);return{txnHash:o.transactionHash,data:JSON.parse(Oo.decode(o.data))}}joinGame(){return this.execute({join:{}},{amount:[{amount:"8750",denom:"uscrt"}],gas:"35000"},[{denom:"uscrt",amount:Ro}])}submitAssertion(e,t){const[s,o]=t.split(":"),r=s==="color"?{color:o}:{shape:o};return this.execute({submit:At({target:e},r)},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}submitGuess(e){return this.execute({guess:e},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}pickReward(e){return this.execute({pick_reward:{reward:e}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"1000000"})}forceEndgame(){return this.execute({force_endgame:{}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"40000"})}query(e){return this._g_permit&&(e={with_permit:{query:e,permit:this._g_permit}}),this._k_wallet.query(this._p_contract,e)}async queryGameState(){const e=await this.query({game_state:{}});if(e.error)throw new Kn(e.error);return e.game_state}}const Mo=(n,e)=>e<60*xe?Date.now()-n.lastUpdated>5*xe:Date.now()-n.lastUpdated>30*xe,vi=200;console.log(`Imposing global ${vi} blocks per 5 minutes estimate`);let Xn=!1,Pn=0n,Si=0,Ei=0;async function No(){if(Date.now()-Ei<5*xe)return;const n=new URL(sn);n.pathname="/status";try{const e=await wi(n.href),{latest_block_height:t,latest_block_time:s}=e.data.result.sync_info;Pn=BigInt(t),Si=new Date(s).getTime(),Ei=Date.now()}catch{}}class St{constructor(e,t=vi,s=Mo){this._xt_start=0,this._xt_eta=0,this._xt_updated=0,this._b_currently_updating=!1,this._xg_block_start=BigInt(e),this._xg_block_dest=this._xg_block_start+BigInt(t),this._f_should_update=()=>s(this,this._xt_eta-Date.now())}async fetch_start_time(){const e=new URL(sn);e.pathname="/block";const t=await wi(e.href,{search:{block:this._xg_block_start+""}});this._xt_start=new Date(t.data.result.block.header.time).getTime()}async estimate(){Xn=!0,this._xt_start||await this.fetch_start_time(),await No();const e=Number(Pn-this._xg_block_start);if(e<5)return 0;const t=(Si-this._xt_start)/e,s=Number(this._xg_block_dest-Pn),o=this._xt_updated=Date.now();return Xn=!1,this._xt_eta=o+Math.round(s*t)}get lastUpdated(){return this._xt_updated}get destinationBlock(){return this._xg_block_dest}get expired(){return Pn>=this.destinationBlock}get ready(){return this._xt_eta!==0}get eta(){return!this.expired&&!Xn&&this._f_should_update()&&this.estimate(),this._xt_eta}get remaining(){return this.eta-Date.now()}}const xn="prisnr.games";class Vn extends zn{constructor(e){super("While attempting to enable Keplr",e)}}class Zn extends zn{constructor(e){super("While attempting to acquire offline signer",e)}}class Uo extends zn{constructor(e){super("While attempting to acquire enigma utils",e)}}class Xt{static isAvailable(){return!!window.keplr}static fromWindow(){if(window.keplr)return new Xt(window.keplr);throw new Error("Keplr extension is not installed")}constructor(e){this._k_keplr=e}async enable(e,t){const s=this._si_chain=e.chainId;this._fk_change=t;try{await this._k_keplr.experimentalSuggestChain({chainId:s,chainName:e.chainName,rpc:e.rpc,rest:e.rest,bip44:{coinType:529},coinType:529,stakeCurrency:{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6},bech32Config:{bech32PrefixAccAddr:"secret",bech32PrefixAccPub:"secretpub",bech32PrefixValAddr:"secretvaloper",bech32PrefixValPub:"secretvaloperpub",bech32PrefixConsAddr:"secretvalcons",bech32PrefixConsPub:"secretvalconspub"},currencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],feeCurrencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],gasPriceStep:{low:.1,average:.25,high:.4},features:["secretwasm"]})}catch{return!1}try{await this._k_keplr.enable(s)}catch(o){throw new Vn(o)}try{this._k_signer=window.getOfflineSigner(s)}catch(o){throw new Zn(o)}try{this._k_enigma=window.getEnigmaUtils(s)}catch(o){throw new Uo(o)}return this._g_key=await this._k_keplr.getKey(s),this._a_accounts=await this._k_signer.getAccounts(),this._k_client=new bo(En,this.publicAddress,this._k_signer,this._k_enigma,{exec:{amount:[{amount:"62500",denom:"uscrt"}],gas:"250000"}}),window.addEventListener("keplr_keystorechange",async()=>{(await this._k_keplr.getKey(s)).bech32Address!==this.publicAddress&&this._fk_change()}),!0}get chain(){return this._si_chain}get key(){return this._g_key}get accounts(){return this._a_accounts}get primaryAccount(){return this.accounts[0]}get publicAddress(){return this.primaryAccount.address}async signQueryPermit(){return(await this._k_keplr.signAmino(this.chain,this.publicAddress,{chain_id:this.chain,account_number:"0",sequence:"0",fee:{amount:[{denom:"uscrt",amount:"0"}],gas:"1"},msgs:[{type:"query_permit",value:{permit_name:xn,allowed_tokens:[Tt,an],permissions:["owner"]}}],memo:""},{preferNoSetFee:!0,preferNoSetMemo:!0})).signature}execute(e,t,s,o,r){let a="";if(o&&(a+=` --gas ${o.gas}`),s&&s.length){const c=s[0];a+=` --amount ${c.amount}${c.denom}`}return console.log(`secretd tx compute execute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}${a}`),this._k_client.execute(e,t,"",s,o,r||void 0)}query(e,t,s,o){return console.log(`secretd q compute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}`),this._k_client.queryContractSmart(e,t,s||{},o||void 0)}}const An=(n,e)=>n.querySelector(e),Pi=(n,e)=>Array.prototype.slice.call(n.querySelectorAll(e),0);function Ae(n,e={},t=[]){const s=document.createElement(n);for(const o in e)s.setAttribute(o,e[o]+"");for(const o of t)s.append(o);return s}function Cn(){return document.cookie.split(";").reduce((n,e)=>{const t=e.trim().split("=");return $t(At({},n),{[t[0]]:t.slice(1).join("=")})},{})}function jt(n,e){document.cookie=Object.entries($t(At({},n),{"max-age":""+e})).map(([t,s])=>`${t}=${s}`).join("; ")}function rn(n){return jt({[n]:""},0)}const Do=65535,Ai=128,Lo="RGBK\u25B2\u2586\u25CF\u2605";function Ci(n){let e=[];for(let t=0;t<8;t++)n&Ai?e.push(Lo[t]):e.push(" "),n=n<<1;return`[${e.join(",")}]`}function Tn(n,e=!1){const[t,s]=n.split(":");if(t==="color"){const o=kn.indexOf(s);return 1<<7-o|(e?15:0)}else{const o=vn.indexOf(s);return 1<<3-o|(e?240:0)}}function Lt(n){const[e,t]=n.split(":");return`${e==="shape"?"a ":""}${t}`}function Yt(n){const[e,t]=n.split("|");return`${e==="nobody_has"?"nobody has ":"my chip is"} ${Lt(t)}`}class ln{constructor(e=Do){this._xm_deduce=e}clone(){return new ln(this._xm_deduce)}nobody(e){let t=Tn(e);return t|=t<<8,this._xm_deduce&=~t,this}opponent(e,t){if(t){const s=Tn(e,!0),o=~Tn(e);this._xm_deduce&=o<<8|s}else this._xm_deduce&=~Tn(e);return this}explain(){const e=this._xm_deduce>>8,t=this._xm_deduce&255;return[`A: ${Ci(e)}`,`O: ${Ci(t)}`].join(`
`)}enumerate(e){let t=e==="bag"?this._xm_deduce>>8:this._xm_deduce&255;const s=[],o=[];for(let a=0;a<8;a++)t&Ai&&(a<4?s.push(kn[a]):o.push(vn[a-4])),t=t<<1;const r=[];for(const a of s)for(const c of o)r.push({target:e,color:a,shape:c});return r}}const{Object:Yo,console:Ti}=Ls,_e="src/component/MessagePanel.svelte";function $n(n){let e,t,s,o,r;const a={c:function(){e=T("span"),t=fe(n[3]),C(e,"class","msg-console-eval s-l2U1SoEQLPY0"),j(e,_e,630,3,16559)},m:function(u,i){H(u,e,i),S(e,t),n[22](e),r=!0},p:function(u,i){(!r||i[0]&8)&&Me(t,u[3])},i:function(u){r||(Xe(()=>{o&&o.end(1),s=Ln(e,he,{duration:1e3}),s.start()}),r=!0)},o:function(u){s&&s.invalidate(),o=Yn(e,he,{duration:500}),r=!1},d:function(u){u&&G(e),n[22](null),u&&o&&o.end()}};return Q("SvelteRegisterBlock",{block:a,id:$n.name,type:"if",source:"(630:2) {#if s_evaluation}",ctx:n}),a}function es(n){let e,t,s,o,r,a,c,u,i,_,d,w,k,g,m,p,A;o=new Oe({props:{icon:Ys},$$inline:!0}),d=new Oe({props:{icon:Bs},$$inline:!0});let h=n[12].length&&ts(n);const P={c:function(){e=T("div"),t=T("span"),s=T("span"),Ne(o.$$.fragment),r=Y(),a=T("span"),c=fe(n[6]),u=Y(),i=T("span"),_=T("span"),Ne(d.$$.fragment),w=Y(),k=T("span"),g=fe(n[7]),m=Y(),h&&h.c(),C(s,"class","msg-nav-icon lifted s-l2U1SoEQLPY0"),j(s,_e,642,4,16856),C(a,"class","msg-nav-name s-l2U1SoEQLPY0"),z(a,"long-name",n[6].length>=40),j(a,_e,643,4,16921),C(t,"class","msg-nav-group s-l2U1SoEQLPY0"),j(t,_e,641,3,16823),C(_,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(_,_e,646,4,17057),C(k,"class","msg-nav-addr addr s-l2U1SoEQLPY0"),j(k,_e,647,4,17117),C(i,"class","msg-nav-group s-l2U1SoEQLPY0"),j(i,_e,645,3,17024),C(e,"class","msg-nav s-l2U1SoEQLPY0"),j(e,_e,640,2,16748)},m:function(f,v){H(f,e,v),S(e,t),S(t,s),Ue(o,s,null),S(t,r),S(t,a),S(a,c),S(e,u),S(e,i),S(i,_),Ue(d,_,null),S(i,w),S(i,k),S(k,g),S(e,m),h&&h.m(e,null),A=!0},p:function(f,v){n=f,(!A||v[0]&64)&&Me(c,n[6]),v[0]&64&&z(a,"long-name",n[6].length>=40),(!A||v[0]&128)&&Me(g,n[7]),n[12].length?h?(h.p(n,v),v[0]&4096&&N(h,1)):(h=ts(n),h.c(),N(h,1),h.m(e,null)):h&&(He(),W(h,1,1,()=>{h=null}),Ge())},i:function(f){A||(N(o.$$.fragment,f),N(d.$$.fragment,f),N(h),Xe(()=>{p||(p=Pe(e,Dn,{duration:750,easing:en},!0)),p.run(1)}),A=!0)},o:function(f){W(o.$$.fragment,f),W(d.$$.fragment,f),W(h),p||(p=Pe(e,Dn,{duration:750,easing:en},!1)),p.run(0),A=!1},d:function(f){f&&G(e),De(o),De(d),h&&h.d(),f&&p&&p.end()}};return Q("SvelteRegisterBlock",{block:P,id:es.name,type:"if",source:"(640:1) {#if b_nav_display}",ctx:n}),P}function ts(n){let e,t,s,o,r,a,c=n[12][0]+"",u,i,_,d,w=n[12][1]+"",k,g,m,p,A,h=n[12][2]+"",P,y,f;s=new Oe({props:{icon:Qs},$$inline:!0});const v={c:function(){e=T("span"),t=T("span"),Ne(s.$$.fragment),o=Y(),r=T("span"),a=T("span"),u=fe(c),i=fe(":"),_=Y(),d=T("span"),k=fe(w),g=Y(),m=T("span"),m.textContent="...",p=Y(),A=T("span"),P=fe(h),C(t,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(t,_e,651,5,17286),C(a,"class","prefix s-l2U1SoEQLPY0"),j(a,_e,653,6,17398),C(d,"class","addr s-l2U1SoEQLPY0"),j(d,_e,654,6,17456),C(m,"class","ellipsis s-l2U1SoEQLPY0"),j(m,_e,655,6,17511),C(A,"class","addr s-l2U1SoEQLPY0"),j(A,_e,656,6,17551),C(r,"class","msg-nav-permit inline-flex s-l2U1SoEQLPY0"),j(r,_e,652,5,17350),C(e,"class","msg-nav-group s-l2U1SoEQLPY0"),j(e,_e,650,4,17218)},m:function(O,U){H(O,e,U),S(e,t),Ue(s,t,null),S(e,o),S(e,r),S(r,a),S(a,u),S(a,i),S(r,_),S(r,d),S(d,k),S(r,g),S(r,m),S(r,p),S(r,A),S(A,P),f=!0},p:function(O,U){(!f||U[0]&4096)&&c!==(c=O[12][0]+"")&&Me(u,c),(!f||U[0]&4096)&&w!==(w=O[12][1]+"")&&Me(k,w),(!f||U[0]&4096)&&h!==(h=O[12][2]+"")&&Me(P,h)},i:function(O){f||(N(s.$$.fragment,O),Xe(()=>{y||(y=Pe(e,he,{duration:1e3},!0)),y.run(1)}),f=!0)},o:function(O){W(s.$$.fragment,O),y||(y=Pe(e,he,{duration:1e3},!1)),y.run(0),f=!1},d:function(O){O&&G(e),De(s),O&&y&&y.end()}};return Q("SvelteRegisterBlock",{block:v,id:ts.name,type:"if",source:"(650:3) {#if a_permit_displays.length}",ctx:n}),v}function ns(n){let e,t,s,o,r,a,c,u,i;s=new Oe({props:{icon:Ws},$$inline:!0});const _={c:function(){e=T("div"),t=T("span"),Ne(s.$$.fragment),o=Y(),r=T("span"),r.textContent="Submit",C(t,"class","msg-submit-icon s-l2U1SoEQLPY0"),j(t,_e,671,3,17898),C(r,"class","msg-submit-text s-l2U1SoEQLPY0"),j(r,_e,672,3,17965),C(e,"class","msg-submit s-l2U1SoEQLPY0"),z(e,"active",!!n[9]),j(e,_e,663,2,17676)},m:function(w,k){H(w,e,k),S(e,t),Ue(s,t,null),S(e,o),S(e,r),n[23](e),c=!0,u||(i=[Le(e,"click",function(){yo(n[9]||ji)&&(n[9]||ji).apply(this,arguments)},!1,!1,!1),Le(e,"mouseenter",n[15],!1,!1,!1),Le(e,"mouseleave",n[16],!1,!1,!1)],u=!0)},p:function(w,k){n=w,k[0]&512&&z(e,"active",!!n[9])},i:function(w){c||(N(s.$$.fragment,w),Xe(()=>{a||(a=Pe(e,bt,{},!0)),a.run(1)}),c=!0)},o:function(w){W(s.$$.fragment,w),a||(a=Pe(e,bt,{},!1)),a.run(0),c=!1},d:function(w){w&&G(e),De(s),n[23](null),w&&a&&a.end(),u=!1,ko(i)}};return Q("SvelteRegisterBlock",{block:_,id:ns.name,type:"if",source:"(663:1) {#if b_submit_display}",ctx:n}),_}function ss(n){let e,t,s,o,r,a,c,u,i,_,d,w,k,g,m,p=n[3]&&$n(n),A=n[5]&&es(n),h=n[8]&&ns(n);const P={c:function(){e=T("div"),t=T("div"),s=T("div"),o=Y(),r=T("div"),a=T("span"),c=fe(">\xA0"),u=fe(n[4]),i=fe(n[11]),_=Y(),d=T("span"),d.textContent="\xA0",w=Y(),p&&p.c(),k=Y(),A&&A.c(),g=Y(),h&&h.c(),C(s,"class","msg-history-scroll s-l2U1SoEQLPY0"),j(s,_e,624,2,16311),C(t,"class","msg-history s-l2U1SoEQLPY0"),j(t,_e,623,1,16260),C(a,"class","text s-l2U1SoEQLPY0"),j(a,_e,627,2,16411),C(d,"class","cursor blinking s-l2U1SoEQLPY0"),j(d,_e,628,2,16469),C(r,"class","msg-console s-l2U1SoEQLPY0"),j(r,_e,626,1,16383),C(e,"class","msg-panel s-l2U1SoEQLPY0"),j(e,_e,622,0,16214)},l:function(f){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(f,v){H(f,e,v),S(e,t),S(t,s),n[19](s),n[20](t),S(e,o),S(e,r),S(r,a),S(a,c),S(a,u),S(a,i),S(r,_),S(r,d),n[21](d),S(r,w),p&&p.m(r,null),S(e,k),A&&A.m(e,null),S(e,g),h&&h.m(e,null),n[24](e),m=!0},p:function(f,v){(!m||v[0]&16)&&Me(u,f[4]),(!m||v[0]&2048)&&Me(i,f[11]),f[3]?p?(p.p(f,v),v[0]&8&&N(p,1)):(p=$n(f),p.c(),N(p,1),p.m(r,null)):p&&(He(),W(p,1,1,()=>{p=null}),Ge()),f[5]?A?(A.p(f,v),v[0]&32&&N(A,1)):(A=es(f),A.c(),N(A,1),A.m(e,g)):A&&(He(),W(A,1,1,()=>{A=null}),Ge()),f[8]?h?(h.p(f,v),v[0]&256&&N(h,1)):(h=ns(f),h.c(),N(h,1),h.m(e,null)):h&&(He(),W(h,1,1,()=>{h=null}),Ge())},i:function(f){m||(N(p),N(A),N(h),m=!0)},o:function(f){W(p),W(A),W(h),m=!1},d:function(f){f&&G(e),n[19](null),n[20](null),n[21](null),p&&p.d(),A&&A.d(),h&&h.d(),n[24](null)}};return Q("SvelteRegisterBlock",{block:P,id:ss.name,type:"component",source:"",ctx:n}),P}const ji=()=>{};function Bo(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("MessagePanel",s,[]);const{language:r}=Qt("game");let a;r.subscribe(b=>a=b);const c={reveal_text:U,spinning:re,commit:Qe,receive:V,arbiter:Ze,opponent:pe,user:ve,error:me,warn:$e,wallet:qe,permit:Et,submittable:ut,unsubmittable:ae};let{k_killables:u}=e,i,_,d,w="\u275A",k="",g="",m=!1,p="",A="",h="",P=!1,y=null,f,v=0,q=!1,O="";async function U(b,X=60,oe=0){O=b;let Re=++v;F&&(t(11,D=""),u.delInterval(F),M=0,F=0),X||(X=60);const rt=g.length,qt=b.length;let Je=0;for(;Je<Math.min(rt,qt)&&g[Je]===b[Je];Je++);const We=3/5;for(let le=rt;le>Je;le--)if(t(4,g=g.slice(0,-1)),await B(X*We),v!==Re)return;if(oe&&await B(oe),v!==Re)return;const tt=f||An(document.body,".cursor");if(!!tt){for(let le=Je;le<qt;le++)if(tt.classList.remove("blinking"),await B(10),v!==Re||(tt.classList.add("blinking"),t(4,g+=b[le]),await B(X),v!==Re))return}}const I=["\u25DC \u25DD"," \u02C9\u25DE"," \u02CD\u25DD","\u25DF \u25DE","\u25DC\u02CD ","\u25DF\u02C9 "];let D="",F=0,M=0;async function re(b){if(b){if(F===0){let oe=function(){t(11,D=" "+I[M++]+" "),M%=I.length};F=-1;const X=g;await U(X+" "+I[I.length-1]+" "),t(4,g=X),oe(),F=u.addInterval(oe,100)}}else F>0&&(t(11,D=""),u.delInterval(F),M=0,F=0)}async function J(){await U("")}let Ve=0;async function V(b){if(q)return;for(;!i;)await B(100);const X=b.widgets||{},oe=Ve++,Re=Ae("div",{class:["line-commit",...b.classes||[]].join(" ")},[`> ${b.from}: `,...b.text.flatMap(le=>{const Se=[];let Ce=0;for(const{0:dt,1:lt,index:mt}of le.matchAll(/\{([a-z0-9-_]+)\}/ig)){const nt=X[lt];nt?(Ce!==mt&&Se.push(le.slice(Ce,mt)),nt instanceof Element?Se.push(nt):Se.push(Ae("span",{class:`msg-widget-${lt}-${oe}`}))):(console.error(`No such widget '${lt}' was passed in with the formatted line`),Se.push(le.slice(Ce,mt+dt.length))),Ce=mt+dt.length}return Ce!==le.length&&Se.push(le.slice(Ce)),Se.push(Ae("div",{class:"newline"})),Se})]);for(const[le,Se]of Ye(X))typeof Se.subscribe=="function"&&Se.subscribe(Ce=>{const dt=Pi(Re,`.msg-widget-${le}-${oe}`);for(const lt of dt)lt.innerHTML=Ce});const rt=Ae("div",{class:"curtain"});_.append(Re),_.append(rt),t(0,i.scrollTop=i.scrollHeight,i);const qt=_.getBoundingClientRect(),Je=Re.getBoundingClientRect(),We=Je.top-qt.top,tt=Je.height+5;Object.assign(rt.style,{top:`${We}px`,height:`${tt}px`,left:"0px",width:"100%"}),await B(100);for(let le=0;le<tt;le+=5)Object.assign(rt.style,{top:`${We+le}px`,height:`${tt-le}px`}),await B(100);rt.remove()}const Fe=b=>Array.isArray(b)?b:b.trim().split(/\n/).map(X=>X.trim());async function Ze(b,X){return await V({from:"Arbiter",classes:["from-arbiter"],text:Fe(b),widgets:X||{}})}async function pe(b,X){return await V({from:"Opponent",classes:["from-opponent"],text:b,widgets:X||{}})}async function ve(b,X){return await V({from:`You${h}`,classes:["from-user"],text:Fe(b),widgets:X||{}})}async function Qe(){ve(O||g),t(4,g="")}async function me(b,X=!1){await V({from:"System",classes:["from-system-error"],text:Fe(b)}),X&&(q=!0)}async function $e(b,X){await V({from:"System",classes:["from-system-warn"],text:Fe(b),widgets:X||{}})}function qe(b){b.addr?(t(5,m=!0),t(6,p=b.name),t(7,A=b.addr),h=p?` (${p})`:""):t(5,m=!1)}let ne=[];function Et(b,X){const oe=b.allowed_tokens[0];t(12,ne=[X?"restored":"signed",oe.slice(0,"secret12345".length),oe.slice(-5)])}let at=0;async function Ie(){debugger;const b=Date.now();b-at>3e4&&(await U("sorry, you don't get to type :P"),await B(1600),await J(),at=b)}let ge;function ut(b,X){if(t(8,P=!0),ge){const oe=ge.getBoundingClientRect();Object.assign(ge.style,{position:"fixed",top:`${oe.top}px`,left:`${oe.left}px`})}t(3,k=""),X&&setTimeout(()=>{ge&&ge.style.position&&Object.assign(ge.style,{position:"",top:"",left:""}),t(3,k=X)},500),t(9,y=b)}function ae(){t(8,P=!1),t(9,y=null)}Wt(()=>{d.addEventListener("keydown",()=>{Ie()})});let R;async function ie(){await B(100),R.classList.add("hover")}async function _t(){t(14,R.style.animation="0",R),await B(100),R.classList.remove("hover"),await B(1e3),t(14,R.style.animation="",R)}const Pt=["k_killables"];Yo.keys(e).forEach(b=>{!~Pt.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&Ti.warn(`<MessagePanel> was created with unknown prop '${b}'`)});function we(b){je[b?"unshift":"push"](()=>{_=b,t(1,_)})}function ze(b){je[b?"unshift":"push"](()=>{i=b,t(0,i)})}function Z(b){je[b?"unshift":"push"](()=>{f=b,t(10,f)})}function ft(b){je[b?"unshift":"push"](()=>{ge=b,t(13,ge)})}function et(b){je[b?"unshift":"push"](()=>{R=b,t(14,R)})}function xt(b){je[b?"unshift":"push"](()=>{d=b,t(2,d)})}return n.$$set=b=>{"k_killables"in b&&t(18,u=b.k_killables)},n.$capture_state=()=>({getContext:Qt,onMount:Wt,slide:Dn,blur:bt,fade:he,quadOut:en,Fa:Oe,faUser:Ys,faWallet:Bs,faTicketAlt:Qs,faPaperPlane:Ws,ode:Ye,timeout:B,dd:Ae,qs:An,qsa:Pi,ys_lang:r,s_lang:a,k_panel:c,k_killables:u,dm_history:i,dm_history_data:_,dm_panel:d,s_cursor:w,s_evaluation:k,s_text:g,b_nav_display:m,s_nav_name:p,s_nav_addr:A,s_account_alias:h,b_submit_display:P,fk_submit:y,dm_cursor:f,i_iter:v,b_disabled:q,s_revealing:O,reveal_text:U,A_SPIN:I,s_spinner:D,i_spinning:F,i_spin:M,spinning:re,clear:J,c_msgs:Ve,receive:V,rerformat_lines:Fe,arbiter:Ze,opponent:pe,user:ve,commit:Qe,error:me,warn:$e,wallet:qe,a_permit_displays:ne,permit:Et,dt_attempt_last:at,attempt_type:Ie,dm_eval:ge,submittable:ut,unsubmittable:ae,dm_submit:R,mouseenter_submit:ie,mouseleave_submit:_t}),n.$inject_state=b=>{"s_lang"in b&&(a=b.s_lang),"k_killables"in b&&t(18,u=b.k_killables),"dm_history"in b&&t(0,i=b.dm_history),"dm_history_data"in b&&t(1,_=b.dm_history_data),"dm_panel"in b&&t(2,d=b.dm_panel),"s_cursor"in b&&(w=b.s_cursor),"s_evaluation"in b&&t(3,k=b.s_evaluation),"s_text"in b&&t(4,g=b.s_text),"b_nav_display"in b&&t(5,m=b.b_nav_display),"s_nav_name"in b&&t(6,p=b.s_nav_name),"s_nav_addr"in b&&t(7,A=b.s_nav_addr),"s_account_alias"in b&&(h=b.s_account_alias),"b_submit_display"in b&&t(8,P=b.b_submit_display),"fk_submit"in b&&t(9,y=b.fk_submit),"dm_cursor"in b&&t(10,f=b.dm_cursor),"i_iter"in b&&(v=b.i_iter),"b_disabled"in b&&(q=b.b_disabled),"s_revealing"in b&&(O=b.s_revealing),"s_spinner"in b&&t(11,D=b.s_spinner),"i_spinning"in b&&(F=b.i_spinning),"i_spin"in b&&(M=b.i_spin),"c_msgs"in b&&(Ve=b.c_msgs),"a_permit_displays"in b&&t(12,ne=b.a_permit_displays),"dt_attempt_last"in b&&(at=b.dt_attempt_last),"dm_eval"in b&&t(13,ge=b.dm_eval),"dm_submit"in b&&t(14,R=b.dm_submit)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,_,d,k,g,m,p,A,P,y,f,D,ne,ge,R,ie,_t,c,u,we,ze,Z,ft,et,xt]}class qi extends ht{constructor(e){super(e);pt(this,e,Bo,ss,gt,{k_panel:17,k_killables:18},null,[-1,-1]),Q("SvelteRegisterComponent",{component:this,tagName:"MessagePanel",options:e,id:ss.name});const{ctx:t}=this.$$,s=e.props||{};t[18]===void 0&&!("k_killables"in s)&&Ti.warn("<MessagePanel> was created without expected prop 'k_killables'")}get k_panel(){return this.$$.ctx[17]}set k_panel(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_killables(){throw new Error("<MessagePanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_killables(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ii="src/component/Prompt.svelte";function Ri(n,e,t){const s=n.slice();return s[17]=e[t],s}function is(n){let e,t,s=n[0];de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=os(Ri(n,s,c));const r=c=>W(o[c],1,1,()=>{o[c]=null}),a={c:function(){for(let u=0;u<o.length;u+=1)o[u].c();e=Ht()},m:function(u,i){for(let _=0;_<o.length;_+=1)o[_].m(u,i);H(u,e,i),t=!0},p:function(u,i){if(i&9){s=u[0],de(s);let _;for(_=0;_<s.length;_+=1){const d=Ri(u,s,_);o[_]?(o[_].p(d,i),N(o[_],1)):(o[_]=os(d),o[_].c(),N(o[_],1),o[_].m(e.parentNode,e))}for(He(),_=s.length;_<o.length;_+=1)r(_);Ge()}},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)N(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)W(o[i]);t=!1},d:function(u){st(o,u),u&&G(e)}};return Q("SvelteRegisterBlock",{block:a,id:is.name,type:"if",source:"(122:1) {#if b_display}",ctx:n}),a}function os(n){let e,t=n[17].label+"",s,o,r,a,c,u,i,_,d;function w(){return n[5](n[17])}const k={c:function(){e=T("button"),s=fe(t),o=Y(),C(e,"class",r="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"),C(e,"alt",a=n[17].alt||""),j(e,Ii,123,3,2733)},m:function(m,p){H(m,e,p),S(e,s),S(e,o),i=!0,_||(d=Le(e,"click",w,!1,!1,!1),_=!0)},p:function(m,p){n=m,(!i||p&1)&&t!==(t=n[17].label+"")&&Me(s,t),(!i||p&1&&r!==(r="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"))&&C(e,"class",r),(!i||p&1&&a!==(a=n[17].alt||""))&&C(e,"alt",a)},i:function(m){i||(Xe(()=>{u&&u.end(1),c=Ln(e,he,{duration:2800,easing:yt}),c.start()}),i=!0)},o:function(m){c&&c.invalidate(),u=Yn(e,he,{duration:2800,easing:en}),i=!1},d:function(m){m&&G(e),m&&u&&u.end(),_=!1,d()}};return Q("SvelteRegisterBlock",{block:k,id:os.name,type:"each",source:"(123:2) {#each a_opts as g_opt}",ctx:n}),k}function as(n){let e,t,s=n[1]&&is(n);const o={c:function(){e=T("div"),s&&s.c(),C(e,"class","prompt s-c0715tBQdWx2"),z(e,"showing",n[2]),j(e,Ii,120,0,2640)},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){H(a,e,c),s&&s.m(e,null),t=!0},p:function(a,[c]){a[1]?s?(s.p(a,c),c&2&&N(s,1)):(s=is(a),s.c(),N(s,1),s.m(e,null)):s&&(He(),W(s,1,1,()=>{s=null}),Ge()),c&4&&z(e,"showing",a[2])},i:function(a){t||(N(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){a&&G(e),s&&s.d()}};return Q("SvelteRegisterBlock",{block:o,id:as.name,type:"component",source:"",ctx:n}),o}function Qo(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("Prompt",s,[]);const r={ok:P,opts:y,yes:h,yes_no:A},a={key:"yes",label:"Yes"},c={key:"no",label:"No"},u=[a,c],i=()=>{},_=q=>{q()};let d=[],w=!1,k=!1,g=i;function m(q){g(q),t(1,w=!1)}function p(q,O=_){return new Promise(U=>{g=I=>{O(U,I),t(1,w=!1)},t(0,d=q),t(1,w=!0),queueMicrotask(()=>{t(2,k=!0)})})}function A(){return p(u,(q,O)=>{q(O.key==="yes")})}function h(){return p([a])}function P(q="Ok"){return p([{key:"ok",label:q}])}function y(q){return p(hi(q,(O,U)=>At({key:O},U)),(O,U)=>{O(U.key)})}const f=[];Object.keys(e).forEach(q=>{!~f.indexOf(q)&&q.slice(0,2)!=="$$"&&q!=="slot"&&console.warn(`<Prompt> was created with unknown prop '${q}'`)});const v=q=>m(q);return n.$capture_state=()=>({oderac:hi,expoOut:yt,quadOut:en,fade:he,k_prompt:r,G_ANS_YES:a,G_ANS_NO:c,A_OPTS_YES_NO:u,F_NOOP:i,F_CALL:_,a_opts:d,b_display:w,b_showing:k,fk_answer:g,answer:m,prompt:p,yes_no:A,yes:h,ok:P,opts:y}),n.$inject_state=q=>{"a_opts"in q&&t(0,d=q.a_opts),"b_display"in q&&t(1,w=q.b_display),"b_showing"in q&&t(2,k=q.b_showing),"fk_answer"in q&&(g=q.fk_answer)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[d,w,k,m,r,v]}class Oi extends ht{constructor(e){super(e);pt(this,e,Qo,as,gt,{k_prompt:4}),Q("SvelteRegisterComponent",{component:this,tagName:"Prompt",options:e,id:as.name})}get k_prompt(){return this.$$.ctx[4]}set k_prompt(e){throw new Error("<Prompt>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const it="src/component/Assertion.svelte";function Mi(n,e,t){const s=n.slice();return s[15]=e[t],s}function Ni(n,e,t){const s=n.slice();return s[18]=e[t],s}function Ui(n,e,t){const s=n.slice();return s[15]=e[t],s}function Di(n,e,t){const s=n.slice();return s[18]=e[t],s}function Li(n,e,t){const s=n.slice();return s[27]=e[t],s}function rs(n){let e,t,s,o,r,a,c,u,i,_,d=Kt;de(d);let w=[];for(let h=0;h<d.length;h+=1)w[h]=ls(Li(n,d,h));let k=n[7];de(k);let g=[];for(let h=0;h<k.length;h+=1)g[h]=us(Ui(n,k,h));let m=n[7];de(m);let p=[];for(let h=0;h<m.length;h+=1)p[h]=fs(Mi(n,m,h));const A={c:function(){e=T("div"),t=T("span");for(let P=0;P<w.length;P+=1)w[P].c();o=Y(),r=T("span");for(let P=0;P<g.length;P+=1)g[P].c();c=Y(),u=T("span");for(let P=0;P<p.length;P+=1)p[P].c();C(t,"class","tab-wrap s-WG7syJ6nmWd-"),j(t,it,206,2,5169),C(e,"class","tx-basis s-WG7syJ6nmWd-"),j(e,it,205,1,5092),C(r,"class","diamond tx-colors s-WG7syJ6nmWd-"),j(r,it,215,1,5445),C(u,"class","diamond tx-shapes s-WG7syJ6nmWd-"),j(u,it,234,1,6008)},m:function(P,y){H(P,e,y),S(e,t);for(let f=0;f<w.length;f+=1)w[f].m(t,null);H(P,o,y),H(P,r,y);for(let f=0;f<g.length;f+=1)g[f].m(r,null);H(P,c,y),H(P,u,y);for(let f=0;f<p.length;f+=1)p[f].m(u,null);_=!0},p:function(P,y){if(n=P,y&42){d=Kt,de(d);let f;for(f=0;f<d.length;f+=1){const v=Li(n,d,f);w[f]?w[f].p(v,y):(w[f]=ls(v),w[f].c(),w[f].m(t,null))}for(;f<w.length;f+=1)w[f].d(1);w.length=d.length}if(y&204){k=n[7],de(k);let f;for(f=0;f<k.length;f+=1){const v=Ui(n,k,f);g[f]?g[f].p(v,y):(g[f]=us(v),g[f].c(),g[f].m(r,null))}for(;f<g.length;f+=1)g[f].d(1);g.length=k.length}if(y&196){m=n[7],de(m);let f;for(f=0;f<m.length;f+=1){const v=Mi(n,m,f);p[f]?p[f].p(v,y):(p[f]=fs(v),p[f].c(),p[f].m(u,null))}for(;f<p.length;f+=1)p[f].d(1);p.length=m.length}},i:function(P){_||(Xe(()=>{s||(s=Pe(e,he,{duration:3600,easing:kt},!0)),s.run(1)}),Xe(()=>{a||(a=Pe(r,he,{delay:2400,duration:3200,easing:yt},!0)),a.run(1)}),Xe(()=>{i||(i=Pe(u,he,{delay:3200,duration:3200,easing:yt},!0)),i.run(1)}),_=!0)},o:function(P){s||(s=Pe(e,he,{duration:3600,easing:kt},!1)),s.run(0),a||(a=Pe(r,he,{delay:2400,duration:3200,easing:yt},!1)),a.run(0),i||(i=Pe(u,he,{delay:3200,duration:3200,easing:yt},!1)),i.run(0),_=!1},d:function(P){P&&G(e),st(w,P),P&&s&&s.end(),P&&G(o),P&&G(r),st(g,P),P&&a&&a.end(),P&&G(c),P&&G(u),st(p,P),P&&i&&i.end()}};return Q("SvelteRegisterBlock",{block:A,id:rs.name,type:"if",source:"(205:0) {#if b_visible}",ctx:n}),A}function ls(n){let e,t=ke(Jt[n[27]].describe[n[3]](""))+"",s,o,r,a;const c={c:function(){e=T("span"),s=fe(t),o=Y(),C(e,"class","active tab s-WG7syJ6nmWd-"),C(e,"data-basis",n[27]),z(e,"active",n[27]===n[1]),j(e,it,208,4,5228)},m:function(i,_){H(i,e,_),S(e,s),S(e,o),r||(a=Le(e,"click",n[5],!1,!1,!1),r=!0)},p:function(i,_){_&8&&t!==(t=ke(Jt[i[27]].describe[i[3]](""))+"")&&Me(s,t),_&2&&z(e,"active",i[27]===i[1])},d:function(i){i&&G(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:ls.name,type:"each",source:"(208:3) {#each A_BASES as si_basis}",ctx:n}),c}function Yi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Yi.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Bi(n){let e,t,s=ke(Ct[n[26]].labels[n[3]])+"",o,r,a;const c={c:function(){e=T("button"),t=T("span"),o=fe(s),C(t,"class","s-WG7syJ6nmWd-"),j(t,it,226,7,5875),C(e,"class","diamond-"+n[18].pos+" color-"+n[26]+" s-WG7syJ6nmWd-"),C(e,"data-quality","color:"+n[26]),z(e,"selected",`color:${n[26]}`===n[2]),j(e,it,220,6,5669)},m:function(i,_){H(i,e,_),S(e,t),S(t,o),r||(a=Le(e,"click",n[6],!1,!1,!1),r=!0)},p:function(i,_){_&8&&s!==(s=ke(Ct[i[26]].labels[i[3]])+"")&&Me(o,s),_&132&&z(e,"selected",`color:${i[26]}`===i[2])},d:function(i){i&&G(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:Bi.name,type:"then",source:'(220:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function Qi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Qi.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function cs(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Qi,then:Bi,catch:Yi,value:26};Hs(kn[n[18].key],t);const s={c:function(){e=Ht(),t.block.c()},m:function(r,a){H(r,e,a),t.block.m(r,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(r,a){n=r,Gs(t,n,a)},d:function(r){r&&G(e),t.block.d(r),t.token=null,t=null}};return Q("SvelteRegisterBlock",{block:s,id:cs.name,type:"each",source:"(219:4) {#each a_group as g_loc}",ctx:n}),s}function us(n){let e,t,s=n[15];de(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=cs(Di(n,s,a));const r={c:function(){e=T("span");for(let c=0;c<o.length;c+=1)o[c].c();t=Y(),C(e,"class","s-WG7syJ6nmWd-"),j(e,it,217,3,5579)},m:function(c,u){H(c,e,u);for(let i=0;i<o.length;i+=1)o[i].m(e,null);S(e,t)},p:function(c,u){if(u&204){s=c[15],de(s);let i;for(i=0;i<s.length;i+=1){const _=Di(c,s,i);o[i]?o[i].p(_,u):(o[i]=cs(_),o[i].c(),o[i].m(e,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d:function(c){c&&G(e),st(o,c)}};return Q("SvelteRegisterBlock",{block:r,id:us.name,type:"each",source:"(217:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),r}function Wi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Wi.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Hi(n){let e,t,s=zt[n[21]].symbol+"",o,r,a;const c={c:function(){e=T("button"),t=T("span"),o=fe(s),C(t,"class","s-WG7syJ6nmWd-"),j(t,it,245,7,6440),C(e,"class","diamond-"+n[18].pos+" bg-rad-"+n[18].pos+" s-WG7syJ6nmWd-"),C(e,"data-quality","shape:"+n[21]),z(e,"selected",`shape:${n[21]}`===n[2]),j(e,it,239,6,6232)},m:function(i,_){H(i,e,_),S(e,t),S(t,o),r||(a=Le(e,"click",n[6],!1,!1,!1),r=!0)},p:function(i,_){_&132&&z(e,"selected",`shape:${i[21]}`===i[2])},d:function(i){i&&G(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:Hi.name,type:"then",source:'(239:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function Gi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Gi.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function _s(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Gi,then:Hi,catch:Wi,value:21};Hs(vn[n[18].key],t);const s={c:function(){e=Ht(),t.block.c()},m:function(r,a){H(r,e,a),t.block.m(r,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(r,a){n=r,Gs(t,n,a)},d:function(r){r&&G(e),t.block.d(r),t.token=null,t=null}};return Q("SvelteRegisterBlock",{block:s,id:_s.name,type:"each",source:"(238:4) {#each a_group as g_loc}",ctx:n}),s}function fs(n){let e,t,s=n[15];de(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=_s(Ni(n,s,a));const r={c:function(){e=T("span");for(let c=0;c<o.length;c+=1)o[c].c();t=Y(),C(e,"class","s-WG7syJ6nmWd-"),j(e,it,236,3,6142)},m:function(c,u){H(c,e,u);for(let i=0;i<o.length;i+=1)o[i].m(e,null);S(e,t)},p:function(c,u){if(u&196){s=c[15],de(s);let i;for(i=0;i<s.length;i+=1){const _=Ni(c,s,i);o[i]?o[i].p(_,u):(o[i]=_s(_),o[i].c(),o[i].m(e,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d:function(c){c&&G(e),st(o,c)}};return Q("SvelteRegisterBlock",{block:r,id:fs.name,type:"each",source:"(236:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),r}function ds(n){let e,t,s=n[0]&&rs(n);const o={c:function(){s&&s.c(),e=Ht()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),H(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&N(s,1)):(s=rs(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(He(),W(s,1,1,()=>{s=null}),Ge())},i:function(a){t||(N(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){s&&s.d(a),a&&G(e)}};return Q("SvelteRegisterBlock",{block:o,id:ds.name,type:"component",source:"",ctx:n}),o}function Wo(n,e,t){let s,{$$slots:o={},$$scope:r}=e;wt("Assertion",o,[]);const a={show:w,hide:k},c=ct(),u=Qt("game");let i=u.language;vo(i,"yw_lang"),So(n,i,f=>t(3,s=f));let _=!1,d="";async function w(f){d=f||"",f&&(t(1,g=f),c("basis",g)),t(0,_=!0)}function k(){t(0,_=!1)}let g=Kt[0],m=null;const p=(f,v)=>f.closest(`[data-${v}]`).getAttribute(`data-${v}`);function A(f){const v=p(f.target,"basis");d&&v!==d||(t(1,g=v),c("basis",g))}function h(f){t(2,m=p(f.target,"quality")),c("quality",m)}const P=[[{key:0,pos:"top"},{key:2,pos:"rgt"}],[{key:1,pos:"lft"},{key:3,pos:"btm"}]],y=[];return Object.keys(e).forEach(f=>{!~y.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Assertion> was created with unknown prop '${f}'`)}),n.$capture_state=()=>({getContext:Qt,createEventDispatcher:ct,fade:he,expoOut:yt,quadInOut:kt,proper:ke,A_BASES:Kt,A_COLORS:kn,A_SHAPES:vn,H_BASES:Jt,H_COLORS:Ct,H_SHAPES:zt,k_tx:a,dispatch:c,g_game:u,yw_lang:i,b_visible:_,si_basis_force:d,show:w,hide:k,si_basis_active:g,si_quality:m,data:p,select_basis:A,select_quality:h,A_DIAMOND_KEYS:P,$yw_lang:s}),n.$inject_state=f=>{"yw_lang"in f&&t(4,i=f.yw_lang),"b_visible"in f&&t(0,_=f.b_visible),"si_basis_force"in f&&(d=f.si_basis_force),"si_basis_active"in f&&t(1,g=f.si_basis_active),"si_quality"in f&&t(2,m=f.si_quality)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[_,g,m,s,i,A,h,P,a]}class Fi extends ht{constructor(e){super(e);pt(this,e,Wo,ds,gt,{k_tx:8}),Q("SvelteRegisterComponent",{component:this,tagName:"Assertion",options:e,id:ds.name})}get k_tx(){return this.$$.ctx[8]}set k_tx(e){throw new Error("<Assertion>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function zi(n,e){const t=new Eo(39,39,3.3,128,1),s=[new Fs({color:"red"}),new Po({map:n,bumpMap:e,bumpScale:Math.random()*.2+.2}),new Fs({map:n})];{const i=new Ao;for(var o=0;o<16;o++){var r=(o+1)/16,a=r*Math.PI*2,c=10*Math.cos(a),u=10*Math.sin(a);o==0?i.moveTo(c,u):i.lineTo(c,u)}return new Co(t,s)}}const ms=Math.PI,Ho=ms*2,hs=Math.sqrt(3);function jn(n,e,t,s,o){const r=new Path2D;switch(o){case"triangle":{const a=Math.sqrt(t*hs),c=hs*.5*a,u=a*hs/6,i=u/3;r.moveTo(e,e-(c-u)+i),r.lineTo(e+a/2,e+u+i),r.lineTo(e-a/2,e+u+i);break}case"square":{const a=Math.sqrt(t),c=e-a*.5;r.moveTo(c,c),r.lineTo(c+a,c),r.lineTo(c+a,c+a),r.lineTo(c,c+a);break}case"circle":{const a=Math.sqrt(t/ms);r.ellipse(e,e,a,a,0,0,Ho);break}case"star":{const a=ms/5,c=Math.sqrt(2*t/(5*Math.sin(a)));let u=-1.5*a;r.moveTo(e,e-c);for(let i=0;i<9;i++){const _=c*((i%2+1)/2);r.lineTo(e+_*Math.cos(u),e+_*Math.sin(u)),u+=a}break}}r.closePath(),n.fillStyle=Ct[s].color,n.fill(r),n.globalAlpha=1,n.strokeStyle="black",n.lineWidth=Math.round(Math.sqrt(t)/50),n.stroke(r)}const Go="src/component/Scene.svelte";function ps(n){let e;const t={c:function(){e=T("div"),C(e,"class","s-O3-AoQkAZcdH"),j(e,Go,246,0,8015)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,r){H(o,e,r),n[2](e)},p:ye,i:ye,o:ye,d:function(o){o&&G(e),n[2](null)}};return Q("SvelteRegisterBlock",{block:t,id:ps.name,type:"component",source:"",ctx:n}),t}function Fo(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("Scene",s,[]);const r=Math.PI,a=r*2,c=Math.sqrt(3),u={animate_chip_entry:h,animate_chip_exit:P};let i;async function _(v){const q={},O=new xs;for(const U in v){const I=v[U];q[U]=await new Promise(D=>{O.load(I,F=>{D(F)})})}return q}function d(v){const q=v.image,O=Ae("canvas",{width:q.width,height:q.height}),U=O.getContext("2d");return[O,U,q]}let w,k,g,m,p;function A(v,q){const[O,U,I]=d(w.chip),D=I.width;I.height,U.drawImage(I,0,0);const F=D/2,M=Math.pow(F*(2/9),2)*r;jn(U,F,M,v,q),g=new Bn(O),k=zi(g,m),p.add(k)}async function h(v,q){A(v,q),k.position.y=8e5,k.visible=!0,new Mt(new tn(-780,-2450,-3e3)).to(new tn(0,0,0),4e3).easing(Nt.Cubic.Out).onUpdate(D=>{k.position.setX(D.x),k.position.setZ(D.z)}).start(),new Mt({y:750}).to({y:0},4e3).easing(Nt.Back.Out).onUpdate(({y:D})=>{k.position.setY(D)}).start(),new Mt(new nn(0,0,0)).to(new nn(0,r/2,r/2-r/6),4e3).easing(Nt.Cubic.Out).onUpdate(D=>{k.rotation.set(D.x,D.y,D.z)}).start()}async function P(){new Mt(new tn(0,0,0)).to(new tn(-780,-2450,-3e3),4e3).easing(Nt.Cubic.Out).onUpdate(U=>{k.position.setX(U.x),k.position.setZ(U.z)}).start(),new Mt({y:0}).to({y:750},4e3).easing(Nt.Back.Out).onUpdate(({y:U})=>{k.position.setY(U)}).start(),new Mt(new nn(0,r/2,r/2-r/6)).to(new nn(0,0,0),4e3).easing(Nt.Cubic.Out).onUpdate(U=>{k.rotation.set(U.x,U.y,U.z)}).start(),await B(4e3),k.visible=!0}Wt(async()=>{w=await _({chip:"/asset/chip.png",chip_displace:"/asset/chip-displacement.png",scuffs:"/asset/scuffs.png"}),g=w.chip,m=w.scuffs;{const[M,re,J]=d(w.scuffs),Ve=M.width,V=M.height,Fe=Math.random()*a;re.save();const Ze=Ve/2,pe=V/2;re.translate(Ze,pe),re.rotate(Fe),re.scale(Math.SQRT2,Math.SQRT2),re.drawImage(J,-Ze,-pe),re.restore(),m=new Bn(M)}const v=new zs({antialias:!0}),q=An(document.body,".msg-panel").getBoundingClientRect(),O=window.innerWidth,U=Math.max(400,Math.min(800,window.innerHeight-q.bottom));if(v.setSize(O,U),!i)return;i.appendChild(v.domElement);const I=O/U;p=new Ks;const D=new Xs(45,I,1,5e3);D.position.set(0,0,140),D.lookAt(0,0,0);{const M=new Js(3158064);p.add(M)}{const M=new Vs;M.position.set(0,100,50),M.decay=2.5,M.angle=Math.PI/9,M.penumbra=.9,p.add(M)}function F(){v.render(p,D)}v.setAnimationLoop(()=>{F(),Zs()})});const y=[];Object.keys(e).forEach(v=>{!~y.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&console.warn(`<Scene> was created with unknown prop '${v}'`)});function f(v){je[v?"unshift":"push"](()=>{i=v,t(0,i)})}return n.$capture_state=()=>({onMount:Wt,chip:zi,AmbientLight:Js,Scene:Ks,PerspectiveCamera:Xs,WebGLRenderer:zs,Vector3:tn,TextureLoader:xs,SpotLight:Vs,Euler:nn,CanvasTexture:Bn,Tween:Mt,Easing:Nt,updateTween:Zs,timeout:B,dd:Ae,qs:An,draw_shape:jn,X_PI:r,X_2PI:a,X_SQRT_3:c,k_scene:u,dm_container:i,load_textures:_,canvas_from_tex:d,h_textures:w,ym_chip:k,yt_chip:g,yt_bump:m,y_scene:p,create_chip:A,animate_chip_entry:h,animate_chip_exit:P}),n.$inject_state=v=>{"dm_container"in v&&t(0,i=v.dm_container),"h_textures"in v&&(w=v.h_textures),"ym_chip"in v&&(k=v.ym_chip),"yt_chip"in v&&(g=v.yt_chip),"yt_bump"in v&&(m=v.yt_bump),"y_scene"in v&&(p=v.y_scene)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,u,f]}class Ji extends ht{constructor(e){super(e);pt(this,e,Fo,ps,gt,{k_scene:1}),Q("SvelteRegisterComponent",{component:this,tagName:"Scene_1",options:e,id:ps.name})}get k_scene(){return this.$$.ctx[1]}set k_scene(e){throw new Error("<Scene>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const qn="src/component/PremiseWidget.svelte";function Ki(n,e,t){const s=n.slice();return s[14]=e[t][0],s[15]=e[t][1],s[17]=t,s}function gs(n){let e,t,s,o,r,a=n[15].label+"",c,u,i,_,d,w,k;s=new Oe({props:{icon:n[15].icon},$$inline:!0});function g(){return n[9](n[14])}const m={c:function(){e=T("span"),t=T("span"),Ne(s.$$.fragment),o=Y(),r=T("span"),c=fe(a),u=Y(),C(t,"class","truth-opt-icon s-6n-w-T5otbqJ"),j(t,qn,158,3,4045),C(r,"class","truth-opt-text s-6n-w-T5otbqJ"),j(r,qn,161,3,4117),C(e,"class",i="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"),C(e,"data-opt",_=n[14]),z(e,"selected",n[14]===n[2]),z(e,"undeniable",n[0]==="undeniable"),z(e,"true",n[0]==="true"),z(e,"verified",n[0]==="verified"),j(e,qn,149,2,3714)},m:function(A,h){H(A,e,h),S(e,t),Ue(s,t,null),S(e,o),S(e,r),S(r,c),S(e,u),d=!0,w||(k=Le(e,"click",g,!1,!1,!1),w=!0)},p:function(A,h){n=A;const P={};h&2&&(P.icon=n[15].icon),s.$set(P),(!d||h&2)&&a!==(a=n[15].label+"")&&Me(c,a),(!d||h&16&&i!==(i="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"))&&C(e,"class",i),(!d||h&2&&_!==(_=n[14]))&&C(e,"data-opt",_),h&22&&z(e,"selected",n[14]===n[2]),h&17&&z(e,"undeniable",n[0]==="undeniable"),h&17&&z(e,"true",n[0]==="true"),h&17&&z(e,"verified",n[0]==="verified")},i:function(A){d||(N(s.$$.fragment,A),d=!0)},o:function(A){W(s.$$.fragment,A),d=!1},d:function(A){A&&G(e),De(s),w=!1,k()}};return Q("SvelteRegisterBlock",{block:m,id:gs.name,type:"each",source:"(149:1) {#each a_opts as [si_opt, g_opt], i_opt}",ctx:n}),m}function ws(n){let e,t,s=n[1];de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=gs(Ki(n,s,c));const r=c=>W(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=T("span");for(let u=0;u<o.length;u+=1)o[u].c();C(e,"class","truth s-6n-w-T5otbqJ"),z(e,"known",!!n[0]),j(e,qn,147,0,3603)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,i){H(u,e,i);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[10](e),t=!0},p:function(u,[i]){if(i&55){s=u[1],de(s);let _;for(_=0;_<s.length;_+=1){const d=Ki(u,s,_);o[_]?(o[_].p(d,i),N(o[_],1)):(o[_]=gs(d),o[_].c(),N(o[_],1),o[_].m(e,null))}for(He(),_=s.length;_<o.length;_+=1)r(_);Ge()}i&1&&z(e,"known",!!u[0])},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)N(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)W(o[i]);t=!1},d:function(u){u&&G(e),st(o,u),n[10](null)}};return Q("SvelteRegisterBlock",{block:a,id:ws.name,type:"component",source:"",ctx:n}),a}function zo(n,e,t){let s,{$$slots:o={},$$scope:r}=e;wt("PremiseWidget",o,[]);const a={ignore:{label:"Ignore",icon:ei},trust:{label:"Trust",icon:yn},distrust:{label:"Distrust",icon:$s}};let c=Ye(a),{b_mode_nobody:u}=e,{si_assertion:i}=e,{si_known:_}=e;const d={apply(y){return w(y)}};let w=y=>y,k="ignore",g;const m=ct();function p(y){k!==y&&(t(2,k=y),u?w=f=>k==="trust"?f.nobody(i):k==="distrust"?f.opponent(i,!0):f:w=f=>k==="trust"?f.opponent(i,!0):k==="distrust"?f.opponent(i,!1):f,m("change",y))}const A=["b_mode_nobody","si_assertion","si_known"];Object.keys(e).forEach(y=>{!~A.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&console.warn(`<PremiseWidget> was created with unknown prop '${y}'`)});const h=y=>p(y);function P(y){je[y?"unshift":"push"](()=>{g=y,t(3,g)})}return n.$$set=y=>{"b_mode_nobody"in y&&t(6,u=y.b_mode_nobody),"si_assertion"in y&&t(7,i=y.si_assertion),"si_known"in y&&t(0,_=y.si_known)},n.$capture_state=()=>({createEventDispatcher:ct,Fa:Oe,faCheckCircle:yn,faTimesCircle:$s,faDotCircle:ei,faEgg:ti,faCheck:Qn,ode:Ye,proper:ke,H_OPTS:a,a_opts:c,b_mode_nobody:u,si_assertion:i,si_known:_,k_premise:d,f_apply:w,si_belief:k,dm_truth:g,dispatch:m,select_opt:p,nl_opts:s}),n.$inject_state=y=>{"a_opts"in y&&t(1,c=y.a_opts),"b_mode_nobody"in y&&t(6,u=y.b_mode_nobody),"si_assertion"in y&&t(7,i=y.si_assertion),"si_known"in y&&t(0,_=y.si_known),"f_apply"in y&&(w=y.f_apply),"si_belief"in y&&t(2,k=y.si_belief),"dm_truth"in y&&t(3,g=y.dm_truth),"nl_opts"in y&&t(4,s=y.nl_opts)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&_&&t(1,c=Ye({ignore:{label:ke(_),icon:{undeniable:ti,true:Qn,verified:Qn}[_]}})),n.$$.dirty&2&&t(4,s=c.length)},[_,c,k,g,s,p,u,i,d,h,P]}class cn extends ht{constructor(e){super(e);pt(this,e,zo,ws,gt,{b_mode_nobody:6,si_assertion:7,si_known:0,k_premise:8}),Q("SvelteRegisterComponent",{component:this,tagName:"PremiseWidget",options:e,id:ws.name});const{ctx:t}=this.$$,s=e.props||{};t[6]===void 0&&!("b_mode_nobody"in s)&&console.warn("<PremiseWidget> was created without expected prop 'b_mode_nobody'"),t[7]===void 0&&!("si_assertion"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_assertion'"),t[0]===void 0&&!("si_known"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_known'")}get b_mode_nobody(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set b_mode_nobody(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_assertion(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_assertion(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_known(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_known(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_premise(){return this.$$.ctx[8]}set k_premise(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Be="src/component/Decision.svelte";function Xi(n,e,t){const s=n.slice();return s[20]=e[t],s}function xi(n,e,t){const s=n.slice();return s[20]=e[t],s}function bs(n){let e,t,s,o,r,a,c,u,i,_,d,w,k,g,m,p,A,h,P,y,f=n[3];de(f);let v=[];for(let I=0;I<f.length;I+=1)v[I]=ys(xi(n,f,I));let q=n[2];de(q);let O=[];for(let I=0;I<q.length;I+=1)O[I]=ks(Xi(n,q,I));const U={c:function(){e=T("div"),t=T("div"),s=T("div"),o=T("button"),o.textContent="Abstain",r=Y(),a=T("div"),c=T("span"),c.textContent="Arbiter's bag:",u=Y(),i=T("span"),_=T("span");for(let D=0;D<v.length;D+=1)v[D].c();d=Y(),w=T("div"),k=T("span"),k.textContent="Opponent's chip:",g=Y(),m=T("span"),p=T("span");for(let D=0;D<O.length;D+=1)O[D].c();C(o,"class","s-UQAPz40uou8M"),j(o,Be,220,4,7343),C(s,"class","decision-abstain s-UQAPz40uou8M"),z(s,"selected",n[4]===n[1]),j(s,Be,219,3,7258),C(c,"class","decision-opts-row-title s-UQAPz40uou8M"),j(c,Be,225,4,7479),C(_,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(_,Be,229,5,7597),C(i,"class","decision-opts-row-view s-UQAPz40uou8M"),j(i,Be,228,4,7554),C(a,"class","decision-opts-row s-UQAPz40uou8M"),C(a,"data-target","bag"),j(a,Be,224,3,7425),C(k,"class","decision-opts-row-title s-UQAPz40uou8M"),j(k,Be,243,4,7990),C(p,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(p,Be,247,5,8110),C(m,"class","decision-opts-row-view s-UQAPz40uou8M"),j(m,Be,246,4,8067),C(w,"class","decision-opts-row s-UQAPz40uou8M"),C(w,"data-target","opponent"),j(w,Be,242,3,7931),C(t,"class","decision-opts s-UQAPz40uou8M"),j(t,Be,218,2,7227),C(e,"class","decision s-UQAPz40uou8M"),z(e,"staged",!!n[1]),j(e,Be,214,1,7028)},m:function(D,F){H(D,e,F),S(e,t),S(t,s),S(s,o),S(t,r),S(t,a),S(a,c),S(a,u),S(a,i),S(i,_);for(let M=0;M<v.length;M+=1)v[M].m(_,null);S(t,d),S(t,w),S(w,k),S(w,g),S(w,m),S(m,p);for(let M=0;M<O.length;M+=1)O[M].m(p,null);h=!0,P||(y=Le(o,"click",n[10],!1,!1,!1),P=!0)},p:function(D,F){if(n=D,F&18&&z(s,"selected",n[4]===n[1]),F&170){f=n[3],de(f);let M;for(M=0;M<f.length;M+=1){const re=xi(n,f,M);v[M]?v[M].p(re,F):(v[M]=ys(re),v[M].c(),v[M].m(_,null))}for(;M<v.length;M+=1)v[M].d(1);v.length=f.length}if(F&166){q=n[2],de(q);let M;for(M=0;M<q.length;M+=1){const re=Xi(n,q,M);O[M]?O[M].p(re,F):(O[M]=ks(re),O[M].c(),O[M].m(p,null))}for(;M<O.length;M+=1)O[M].d(1);O.length=q.length}F&2&&z(e,"staged",!!n[1])},i:function(D){h||(Xe(()=>{A||(A=Pe(e,he,{duration:3600,easing:kt},!0)),A.run(1)}),h=!0)},o:function(D){A||(A=Pe(e,he,{duration:3600,easing:kt},!1)),A.run(0),h=!1},d:function(D){D&&G(e),st(v,D),st(O,D),D&&A&&A.end(),P=!1,y()}};return Q("SvelteRegisterBlock",{block:U,id:bs.name,type:"if",source:"(214:0) {#if b_visible}",ctx:n}),U}function ys(n){let e,t,s=n[7](n[20])+"",o,r,a;function c(){return n[11](n[20])}const u={c:function(){e=T("span"),t=new si,o=Y(),t.a=o,C(e,"class","decision-opt s-UQAPz40uou8M"),z(e,"selected",n[20]===n[1]),j(e,Be,231,7,7681)},m:function(_,d){H(_,e,d),t.m(s,e),S(e,o),r||(a=Le(e,"click",c,!1,!1,!1),r=!0)},p:function(_,d){n=_,d&8&&s!==(s=n[7](n[20])+"")&&t.p(s),d&10&&z(e,"selected",n[20]===n[1])},d:function(_){_&&G(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:u,id:ys.name,type:"each",source:"(231:6) {#each a_opts_arb as k_opt}",ctx:n}),u}function ks(n){let e,t,s=n[7](n[20])+"",o,r,a,c,u;function i(){return n[12](n[20])}const _={c:function(){e=T("span"),t=new si,o=Y(),r=T("img"),a=Y(),t.a=o,ni(r,"display","none"),C(r,"alt","hidden"),C(r,"class","s-UQAPz40uou8M"),j(r,Be,255,8,8390),C(e,"class","decision-opt s-UQAPz40uou8M"),z(e,"selected",n[20]===n[1]),j(e,Be,249,7,8194)},m:function(w,k){H(w,e,k),t.m(s,e),S(e,o),S(e,r),S(e,a),c||(u=Le(e,"click",i,!1,!1,!1),c=!0)},p:function(w,k){n=w,k&4&&s!==(s=n[7](n[20])+"")&&t.p(s),k&6&&z(e,"selected",n[20]===n[1])},d:function(w){w&&G(e),c=!1,u()}};return Q("SvelteRegisterBlock",{block:_,id:ks.name,type:"each",source:"(249:6) {#each a_opts_opp as k_opt}",ctx:n}),_}function vs(n){let e,t,s=n[0]&&bs(n);const o={c:function(){s&&s.c(),e=Ht()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),H(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&N(s,1)):(s=bs(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(He(),W(s,1,1,()=>{s=null}),Ge())},i:function(a){t||(N(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){s&&s.d(a),a&&G(e)}};return Q("SvelteRegisterBlock",{block:o,id:vs.name,type:"component",source:"",ctx:n}),o}class Jo{constructor(e,t){this._si_color=e,this._si_shape=t}get color(){return this._si_color}get shape(){return this._si_shape}}function Ko(n,e,t){let s,o,{$$slots:r={},$$scope:a}=e;wt("Decision",r,[]);const c={show:k,hide:g};let{k_deduced:u}=e;const i=ct(),_=Qt("game");let d=_.language,w=!1;async function k(){t(0,w=!0)}function g(){t(0,w=!1)}const m={target:"abstain",color:null,shape:null};let p=null;function A(I,D){p!==D&&(t(1,p=D),i("change",D))}function h(){t(1,p=m),i("abstain")}const P=Ae("canvas",{width:100,height:100}),y=P.getContext("2d");function f(I){y.clearRect(0,0,100,100),y.stroke(),y.globalAlpha=.8,jn(y,50,Math.pow(35,2),I.color,I.shape);const D=P.toDataURL();return Ae("span",{},[Ae("span",{class:"decision-opt-label"},[`${ke(I.color)} ${ke(I.shape)}`]),Ae("img",{src:D})]).innerHTML}const v=["k_deduced"];Object.keys(e).forEach(I=>{!~v.indexOf(I)&&I.slice(0,2)!=="$$"&&I!=="slot"&&console.warn(`<Decision> was created with unknown prop '${I}'`)});const q=()=>h(),O=I=>A("bag",I),U=I=>A("opponent",I);return n.$$set=I=>{"k_deduced"in I&&t(9,u=I.k_deduced)},n.$capture_state=()=>({Opt:Jo,getContext:Qt,createEventDispatcher:ct,fade:he,quadInOut:kt,proper:ke,dd:Ae,draw_shape:jn,k_decision:c,k_deduced:u,dispatch:i,g_game:_,yw_lang:d,b_visible:w,show:k,hide:g,g_opt_abstain:m,g_opt_selected:p,stage_decision:A,stage_abstain:h,dm_canvas:P,d_ctx:y,render_icon:f,a_opts_opp:o,a_opts_arb:s}),n.$inject_state=I=>{"k_deduced"in I&&t(9,u=I.k_deduced),"yw_lang"in I&&(d=I.yw_lang),"b_visible"in I&&t(0,w=I.b_visible),"g_opt_selected"in I&&t(1,p=I.g_opt_selected),"a_opts_opp"in I&&t(2,o=I.a_opts_opp),"a_opts_arb"in I&&t(3,s=I.a_opts_arb)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&512&&t(3,s=u.enumerate("bag")),n.$$.dirty&512&&t(2,o=u.enumerate("opponent")),n.$$.dirty&512&&t(1,p=null)},[w,p,o,s,m,A,h,f,c,u,q,O,U]}class Vi extends ht{constructor(e){super(e);pt(this,e,Ko,vs,gt,{k_decision:8,k_deduced:9}),Q("SvelteRegisterComponent",{component:this,tagName:"Decision",options:e,id:vs.name});const{ctx:t}=this.$$,s=e.props||{};t[9]===void 0&&!("k_deduced"in s)&&console.warn("<Decision> was created without expected prop 'k_deduced'")}get k_decision(){return this.$$.ctx[8]}set k_decision(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_deduced(){throw new Error("<Decision>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_deduced(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const In="src/component/ActionWidget.svelte";function Zi(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s[12]=t,s}function Ss(n){let e,t,s,o,r,a=n[10].label+"",c,u,i,_,d;s=new Oe({props:{icon:n[10].icon},$$inline:!0});function w(){return n[5](n[9])}const k={c:function(){e=T("span"),t=T("span"),Ne(s.$$.fragment),o=Y(),r=T("span"),c=fe(a),u=Y(),C(t,"class","action-opt-icon s-8eNH5FVaHsSg"),j(t,In,87,3,2291),C(r,"class","action-opt-text s-8eNH5FVaHsSg"),j(r,In,90,3,2364),C(e,"class","action-opt "+(n[12]===0?"opt-lft":"")+" "+(n[3]-1===n[12]?"opt-rgt":"opt-mid")+" s-8eNH5FVaHsSg"),C(e,"data-opt",n[9]),z(e,"selected",n[9]===n[0]),j(e,In,86,2,2093)},m:function(m,p){H(m,e,p),S(e,t),Ue(s,t,null),S(e,o),S(e,r),S(r,c),S(e,u),i=!0,_||(d=Le(e,"click",w,!1,!1,!1),_=!0)},p:function(m,p){n=m,p&5&&z(e,"selected",n[9]===n[0])},i:function(m){i||(N(s.$$.fragment,m),i=!0)},o:function(m){W(s.$$.fragment,m),i=!1},d:function(m){m&&G(e),De(s),_=!1,d()}};return Q("SvelteRegisterBlock",{block:k,id:Ss.name,type:"each",source:"(86:1) {#each ode(H_OPTS) as [si_opt, g_opt], i_opt}",ctx:n}),k}function Es(n){let e,t,s=Ye(n[2]);de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=Ss(Zi(n,s,c));const r=c=>W(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=T("span");for(let u=0;u<o.length;u+=1)o[u].c();C(e,"class","action s-8eNH5FVaHsSg"),ni(e,"width",100*n[3]+"px"),j(e,In,84,0,1967)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,i){H(u,e,i);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[6](e),t=!0},p:function(u,[i]){if(i&29){s=Ye(u[2]),de(s);let _;for(_=0;_<s.length;_+=1){const d=Zi(u,s,_);o[_]?(o[_].p(d,i),N(o[_],1)):(o[_]=Ss(d),o[_].c(),N(o[_],1),o[_].m(e,null))}for(He(),_=s.length;_<o.length;_+=1)r(_);Ge()}},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)N(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)W(o[i]);t=!1},d:function(u){u&&G(e),st(o,u),n[6](null)}};return Q("SvelteRegisterBlock",{block:a,id:Es.name,type:"component",source:"",ctx:n}),a}function Xo(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("ActionWidget",s,[]);const r={yes:{label:"Yes",icon:yn}},a=Ye(r).length;let c=m=>m,{si_selected:u="none"}=e,i;const _=ct();function d(m){u!==m&&(t(0,u=m),_("change",m))}const w=["si_selected"];Object.keys(e).forEach(m=>{!~w.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<ActionWidget> was created with unknown prop '${m}'`)});const k=m=>d(m);function g(m){je[m?"unshift":"push"](()=>{i=m,t(1,i)})}return n.$$set=m=>{"si_selected"in m&&t(0,u=m.si_selected)},n.$capture_state=()=>({createEventDispatcher:ct,Fa:Oe,faCheckCircle:yn,ode:Ye,H_OPTS:r,NL_OPTS:a,f_apply:c,si_selected:u,dm_action:i,dispatch:_,select_opt:d}),n.$inject_state=m=>{"f_apply"in m&&(c=m.f_apply),"si_selected"in m&&t(0,u=m.si_selected),"dm_action"in m&&t(1,i=m.dm_action)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[u,i,r,a,d,k,g]}class $i extends ht{constructor(e){super(e);pt(this,e,Xo,Es,gt,{si_selected:0}),Q("SvelteRegisterComponent",{component:this,tagName:"ActionWidget",options:e,id:Es.name})}get si_selected(){throw new Error("<ActionWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_selected(e){throw new Error("<ActionWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const un="src/component/Pick.svelte";function eo(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s}function Ps(n){let e,t,s,o=Ye(n[2]);de(o);let r=[];for(let u=0;u<o.length;u+=1)r[u]=As(eo(n,o,u));const a=u=>W(r[u],1,1,()=>{r[u]=null}),c={c:function(){e=T("div");for(let i=0;i<r.length;i+=1)r[i].c();C(e,"class","pick s-AUZQ0ENzDxvQ"),z(e,"picked",!!n[1]),j(e,un,77,1,1812)},m:function(i,_){H(i,e,_);for(let d=0;d<r.length;d+=1)r[d].m(e,null);s=!0},p:function(i,_){if(_&14){o=Ye(i[2]),de(o);let d;for(d=0;d<o.length;d+=1){const w=eo(i,o,d);r[d]?(r[d].p(w,_),N(r[d],1)):(r[d]=As(w),r[d].c(),N(r[d],1),r[d].m(e,null))}for(He(),d=o.length;d<r.length;d+=1)a(d);Ge()}_&2&&z(e,"picked",!!i[1])},i:function(i){if(!s){for(let _=0;_<o.length;_+=1)N(r[_]);Xe(()=>{t||(t=Pe(e,bt,{duration:2500},!0)),t.run(1)}),s=!0}},o:function(i){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)W(r[_]);t||(t=Pe(e,bt,{duration:2500},!1)),t.run(0),s=!1},d:function(i){i&&G(e),st(r,i),i&&t&&t.end()}};return Q("SvelteRegisterBlock",{block:c,id:Ps.name,type:"if",source:"(77:0) {#if b_visible}",ctx:n}),c}function As(n){let e,t,s=n[10].label+"",o,r,a,c,u,i,_=n[10].description+"",d,w,k,g,m;c=new Oe({props:{icon:n[10].icon},$$inline:!0});function p(){return n[5](n[9])}const A={c:function(){e=T("span"),t=T("div"),o=fe(s),r=Y(),a=T("div"),Ne(c.$$.fragment),u=Y(),i=T("div"),d=fe(_),w=Y(),C(t,"class","pick-label s-AUZQ0ENzDxvQ"),j(t,un,80,4,2071),C(a,"class","pick-icon s-AUZQ0ENzDxvQ"),j(a,un,83,4,2131),C(i,"class","pick-description s-AUZQ0ENzDxvQ"),j(i,un,86,4,2201),C(e,"class","pick-opt s-AUZQ0ENzDxvQ"),C(e,"data-pick",n[9]),z(e,"selected",n[1]===n[9]),j(e,un,79,3,1946)},m:function(P,y){H(P,e,y),S(e,t),S(t,o),S(e,r),S(e,a),Ue(c,a,null),S(e,u),S(e,i),S(i,d),S(e,w),k=!0,g||(m=Le(e,"click",p,!1,!1,!1),g=!0)},p:function(P,y){n=P,y&6&&z(e,"selected",n[1]===n[9])},i:function(P){k||(N(c.$$.fragment,P),k=!0)},o:function(P){W(c.$$.fragment,P),k=!1},d:function(P){P&&G(e),De(c),g=!1,m()}};return Q("SvelteRegisterBlock",{block:A,id:As.name,type:"each",source:"(79:2) {#each ode(H_PICKS) as [si_pick, g_pick]}",ctx:n}),A}function Cs(n){let e,t,s=n[0]&&Ps(n);const o={c:function(){s&&s.c(),e=Ht()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),H(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&N(s,1)):(s=Ps(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(He(),W(s,1,1,()=>{s=null}),Ge())},i:function(a){t||(N(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){s&&s.d(a),a&&G(e)}};return Q("SvelteRegisterBlock",{block:o,id:Cs.name,type:"component",source:"",ctx:n}),o}function xo(n,e,t){let{$$slots:s={},$$scope:o}=e;wt("Pick",s,[]);const r={jackpot:{icon:ii,label:"Jackpot",description:"A pile of SCRT accrued from lost wagers. The exact amount you will receive is a secret."},nft:{icon:oi,label:"Power-up NFT",description:"A unique NFT that gives the owner some special power when used during gameplay. The type of power-up you will receive is a secret."}};let a=!1,c=null;const u={show:i,hide:_};function i(){t(0,a=!0)}function _(){t(0,a=!1)}const d=ct();function w(m){t(1,c=m),d("pick",c)}const k=[];Object.keys(e).forEach(m=>{!~k.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<Pick> was created with unknown prop '${m}'`)});const g=m=>w(m);return n.$capture_state=()=>({createEventDispatcher:ct,blur:bt,Fa:Oe,faCoins:ii,faTrophy:oi,ode:Ye,H_PICKS:r,b_visible:a,si_pick_selected:c,k_pick:u,show:i,hide:_,dispatch:d,pick:w}),n.$inject_state=m=>{"b_visible"in m&&t(0,a=m.b_visible),"si_pick_selected"in m&&t(1,c=m.si_pick_selected)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[a,c,r,w,u,g]}class to extends ht{constructor(e){super(e);pt(this,e,xo,Cs,gt,{k_pick:4}),Q("SvelteRegisterComponent",{component:this,tagName:"Pick",options:e,id:Cs.name})}get k_pick(){return this.$$.ctx[4]}set k_pick(e){throw new Error("<Pick>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class Ts{#e;static includes(e){for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);if(s&&e.test(s))return!0}return!1}constructor(e,t,s){const o=window.btoa(JSON.stringify(s||{}));this._si_namespace=`${e}.${o}`,this.#e=t}set(e,t){let s;try{s=JSON.stringify(t)}catch{throw new Error("Unable to stringify value")}let o;try{o=Wn.exports.AES.encrypt(s,this.#e).toString()}catch{throw new Error("Unable to encrypt message")}return localStorage.setItem(`${this._si_namespace}.${e}`,o)}get(e){const t=localStorage.getItem(`${this._si_namespace}.${e}`);if(t===null)return t;let s;try{s=Wn.exports.AES.decrypt(t,this.#e).toString(Wn.exports.enc.Utf8)}catch{throw new Error("Failed to decrypt value using provided secret")}let o;try{o=JSON.parse(s)}catch{throw new Error("Failed to parse decrypted text")}return o}clear(){const e=`${this._si_namespace}.`;for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);(s==null?void 0:s.startsWith(e))&&localStorage.removeItem(s)}}remove(e){return localStorage.removeItem(`${this._si_namespace}.${e}`)}}const{Error:Vo,Object:Zo,console:$o}=Ls,ot="src/component/App.svelte";function js(n){let e,t,s,o,r,a;t=new Oe({props:{icon:li},$$inline:!0});const c={c:function(){e=T("span"),Ne(t.$$.fragment),C(e,"class","system-controls-burn s-SHyHC7YcIsCQ"),C(e,"alt","destroy cookies and cache"),j(e,ot,1960,2,65803)},m:function(i,_){H(i,e,_),Ue(t,e,null),o=!0,r||(a=Le(e,"click",n[24],!1,!1,!1),r=!0)},p:ye,i:function(i){o||(N(t.$$.fragment,i),Xe(()=>{s||(s=Pe(e,he,{duration:1e3},!0)),s.run(1)}),o=!0)},o:function(i){W(t.$$.fragment,i),s||(s=Pe(e,he,{duration:1e3},!1)),s.run(0),o=!1},d:function(i){i&&G(e),De(t),i&&s&&s.end(),r=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:js.name,type:"if",source:"(1960:1) {#if (h_cookie && Object.keys(h_cookie).length) || localStorage.length}",ctx:n}),c}function qs(n){let e,t,s,o=ke(n[8])+"",r,a,c=ke(n[9])+"",u,i,_,d,w,k,g=ke(Yt(`nobody_has|${n[10]}`))+"",m,p,A,h;const P={c:function(){e=T("div"),t=T("div"),s=fe("The "),r=fe(o),a=Y(),u=fe(c),i=Y(),_=T("div"),d=T("span"),d.textContent="Hint:",w=Y(),k=T("span"),m=fe(g),C(t,"class","chip s-SHyHC7YcIsCQ"),j(t,ot,1982,3,66505),C(d,"class","hint-prefix s-SHyHC7YcIsCQ"),j(d,ot,1986,4,66620),C(k,"class","hint-sentence s-SHyHC7YcIsCQ"),j(k,ot,1987,4,66663),C(_,"class","hint s-SHyHC7YcIsCQ"),j(_,ot,1985,3,66597),C(e,"class","mine s-SHyHC7YcIsCQ"),j(e,ot,1981,2,66379)},m:function(f,v){H(f,e,v),S(e,t),S(t,s),S(t,r),S(t,a),S(t,u),S(e,i),S(e,_),S(_,d),S(_,w),S(_,k),S(k,m),h=!0},p:function(f,v){n=f,(!h||v[0]&256)&&o!==(o=ke(n[8])+"")&&Me(r,o),(!h||v[0]&512)&&c!==(c=ke(n[9])+"")&&Me(u,c),(!h||v[0]&1024)&&g!==(g=ke(Yt(`nobody_has|${n[10]}`))+"")&&Me(m,g)},i:function(f){h||(Xe(()=>{A&&A.end(1),p=Ln(e,bt,{duration:2400,easing:kt,delay:4500}),p.start()}),h=!0)},o:function(f){p&&p.invalidate(),A=Yn(e,bt,{duration:2400,easing:kt}),h=!1},d:function(f){f&&G(e),f&&A&&A.end()}};return Q("SvelteRegisterBlock",{block:P,id:qs.name,type:"if",source:"(1981:1) {#if si_player_hint}",ctx:n}),P}function Is(n){let e,t,s,o,r=n[1]&&Object.keys(n[1]).length||localStorage.length,a,c,u,i,_,d,w,k,g,m,p,A,h,P,y,f,v,q,O,U,I,D,F,M,re,J,Ve;s=new Oe({props:{icon:n[0]?Hn:Gn},$$inline:!0});let V=r&&js(n);function Fe(ae){n[25](ae)}let Ze={k_killables:n[13]};n[2]!==void 0&&(Ze.k_panel=n[2]),c=new qi({props:Ze,$$inline:!0}),je.push(()=>Gt(c,"k_panel",Fe));function pe(ae){n[27](ae)}let ve={};n[5]!==void 0&&(ve.k_prompt=n[5]),m=new Oi({props:ve,$$inline:!0}),je.push(()=>Gt(m,"k_prompt",pe));function Qe(ae){n[28](ae)}let me={};n[4]!==void 0&&(me.k_tx=n[4]),h=new Fi({props:me,$$inline:!0}),je.push(()=>Gt(h,"k_tx",Qe)),h.$on("basis",n[14]),h.$on("quality",n[15]);function $e(ae){n[29](ae)}let qe={k_deduced:n[12]};n[6]!==void 0&&(qe.k_decision=n[6]),f=new Vi({props:qe,$$inline:!0}),je.push(()=>Gt(f,"k_decision",$e)),f.$on("abstain",n[17]),f.$on("change",n[18]);let ne=n[10]&&qs(n);function Et(ae){n[30](ae)}let at={};n[7]!==void 0&&(at.k_pick=n[7]),U=new to({props:at,$$inline:!0}),je.push(()=>Gt(U,"k_pick",Et)),U.$on("pick",n[16]);function Ie(ae){n[31](ae)}let ge={};n[3]!==void 0&&(ge.k_scene=n[3]),F=new Ji({props:ge,$$inline:!0}),je.push(()=>Gt(F,"k_scene",Ie));const ut={c:function(){e=T("div"),t=T("span"),Ne(s.$$.fragment),o=Y(),V&&V.c(),a=Y(),Ne(c.$$.fragment),i=Y(),_=T("div"),d=T("img"),k=Y(),g=T("div"),Ne(m.$$.fragment),A=Y(),Ne(h.$$.fragment),y=Y(),Ne(f.$$.fragment),q=Y(),ne&&ne.c(),O=Y(),Ne(U.$$.fragment),D=Y(),Ne(F.$$.fragment),C(t,"class","system-controls-audio s-SHyHC7YcIsCQ"),C(t,"alt","audio"),j(t,ot,1956,1,65584),C(e,"class","system-controls s-SHyHC7YcIsCQ"),j(e,ot,1955,0,65553),To(d.src,w="/asset/smile.png")||C(d,"src",w),C(d,"alt","evil smile"),C(d,"class","s-SHyHC7YcIsCQ"),j(d,ot,1970,1,66071),C(_,"class","surprise s-SHyHC7YcIsCQ"),j(_,ot,1969,0,66023),C(g,"class","container s-SHyHC7YcIsCQ"),j(g,ot,1973,0,66127)},l:function(R){throw new Vo("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(R,ie){H(R,e,ie),S(e,t),Ue(s,t,null),S(e,o),V&&V.m(e,null),H(R,a,ie),Ue(c,R,ie),H(R,i,ie),H(R,_,ie),S(_,d),n[26](_),H(R,k,ie),H(R,g,ie),Ue(m,g,null),S(g,A),Ue(h,g,null),S(g,y),Ue(f,g,null),S(g,q),ne&&ne.m(g,null),S(g,O),Ue(U,g,null),S(g,D),Ue(F,g,null),re=!0,J||(Ve=Le(t,"click",n[23],!1,!1,!1),J=!0)},p:function(R,ie){const _t={};ie[0]&1&&(_t.icon=R[0]?Hn:Gn),s.$set(_t),ie[0]&2&&(r=R[1]&&Object.keys(R[1]).length||localStorage.length),r?V?(V.p(R,ie),ie[0]&2&&N(V,1)):(V=js(R),V.c(),N(V,1),V.m(e,null)):V&&(He(),W(V,1,1,()=>{V=null}),Ge());const Pt={};!u&&ie[0]&4&&(u=!0,Pt.k_panel=R[2],Ft(()=>u=!1)),c.$set(Pt);const we={};!p&&ie[0]&32&&(p=!0,we.k_prompt=R[5],Ft(()=>p=!1)),m.$set(we);const ze={};!P&&ie[0]&16&&(P=!0,ze.k_tx=R[4],Ft(()=>P=!1)),h.$set(ze);const Z={};ie[0]&4096&&(Z.k_deduced=R[12]),!v&&ie[0]&64&&(v=!0,Z.k_decision=R[6],Ft(()=>v=!1)),f.$set(Z),R[10]?ne?(ne.p(R,ie),ie[0]&1024&&N(ne,1)):(ne=qs(R),ne.c(),N(ne,1),ne.m(g,O)):ne&&(He(),W(ne,1,1,()=>{ne=null}),Ge());const ft={};!I&&ie[0]&128&&(I=!0,ft.k_pick=R[7],Ft(()=>I=!1)),U.$set(ft);const et={};!M&&ie[0]&8&&(M=!0,et.k_scene=R[3],Ft(()=>M=!1)),F.$set(et)},i:function(R){re||(N(s.$$.fragment,R),N(V),N(c.$$.fragment,R),N(m.$$.fragment,R),N(h.$$.fragment,R),N(f.$$.fragment,R),N(ne),N(U.$$.fragment,R),N(F.$$.fragment,R),re=!0)},o:function(R){W(s.$$.fragment,R),W(V),W(c.$$.fragment,R),W(m.$$.fragment,R),W(h.$$.fragment,R),W(f.$$.fragment,R),W(ne),W(U.$$.fragment,R),W(F.$$.fragment,R),re=!1},d:function(R){R&&G(e),De(s),V&&V.d(),R&&G(a),De(c,R),R&&G(i),R&&G(_),n[26](null),R&&G(k),R&&G(g),De(m),De(h),De(f),ne&&ne.d(),De(U),De(F),J=!1,Ve()}};return Q("SvelteRegisterBlock",{block:ut,id:Is.name,type:"component",source:"",ctx:n}),ut}function Rs(n){return n}function ea(n,e,t){let s,{$$slots:o={},$$scope:r}=e;wt("App",o,[]);const a={chain_name:Sn,chain_id:Fn,game_addr:Tt,game_hash:bi,rest:En,rpc:sn,minter_addr:an,minter_hash:yi};let c,u;try{const l=new Intl.Locale(navigator.language).language;l in ui&&(u=l)}catch{}{const l=Ut("en");l.subscribe(E=>u=E),ai("game",{language:l})}let i,_,d,w,k,g,m;const p=new gi;let A,h,P,y,f=new ln,v=Rs,q=Rs;function O(l){let E=0;const L=50,te=L/5e3,ee=window.setInterval(()=>{E+=te,E>=1?window.clearInterval(ee):l.volume=1-yt(E)},L)}const U=new Image;U.src="/asset/monster.png";const I=new Image;I.src="/asset/smile.png";async function D(l){for(const E of _i[l])E.delay&&await B(E.delay),await i.reveal_text(E.labels[u],E.interval,E.pause)}async function F(){await B(2e3),await D("attention"),await B(1800),await i.reveal_text(""),await B(1200)}async function M(){await i.reveal_text("good luck! ;)"),await B(800),await i.reveal_text("")}async function re(){return await w.ok("Reload"),window.location.reload(),new Promise(()=>{})}async function J(l){return p.killAll(),i.reveal_text(""),await ze(l),re()}async function Ve(){const l="                                 ";await i.reveal_text(l),pe.epic_transition.play(),i.reveal_text(l+"  ",250),Ie.classList.add("triggered"),await B(160),t(11,Ie.style.opacity="0.0",Ie),setTimeout(()=>{t(11,Ie.style.display="none",Ie)},6e3),await B(2e3)}async function V(l=0){await i.warn(`
			This game stores encrypted query permit data in local storage.
			
			In order to protect this data, you must provide a passphrase each time the page is loaded.

			${Ts.includes(/\.permits$/)?"Enter the same passphrase to restore a previous permit, or enter a different one to sign a new permit.":""}
		`);async function E(se=0){let Ke=!1;se||p.addTimeout(()=>{Ke||i.reveal_text("\u2193\u2193 click below to enter passphrase \u2193\u2193")},6500),await w.ok("Provide passphrase"),Ke=!0;const Ot=new Uint8Array(32);crypto.getRandomValues(Ot);const Zt=[...Ot].map(bn=>String.fromCharCode(bn%93+33)).join(""),Un=window.prompt("Enter a passphrase to encrypt/decrypt query permits",Zt);if(Un)return Un.length<5?(i.reveal_text("passphrase must be at least 5 characters"),E(se+1)):Un;{const bn=["null key encryption, eh? try again you silly goose","i can do this all day, can you?","there are only so many responses i have...","...and you're starting to piss me off","i'm serious dood -- don't make me"];return se<bn.length?i.reveal_text(bn[se],40):window.location.href="https://www.youtube.com/watch?v=dQw4w9WgXcQ",E(se+1)}}const ee=(await(await ci.load()).get()).visitorId,ce=await E();if(i.reveal_text(""),!m){await we(`
				This is a multiplayer, online game that uses smart contracts on the Secret Network to ensure fairness for all players.

				Interacting with the game requires submitting transactions to the blockchain via a web wallet such as Keplr (or a local wallet for testnet only).
			`),await B(600);const se=await w.opts({keplr:Xt.isAvailable()?{label:"Connect Keplr",alt:"Connect a wallet using the Keplr extension for Chrome"}:{label:"Install Keplr",alt:"Keplr was not detected. Please install it first in order to use this option"}});switch(se){case"keplr":{try{m=Xt.fromWindow()}catch{return window.open("https://www.keplr.app/","_blank"),await re()}jt({wallet:"keplr"},30*vt);break}case"local":return J("Local storage wallet not yet implemented");default:return J(`Unhandled response option: '${se}'`)}}let $=!1;const x=Date.now();try{$=await m.enable({chainId:Fn,chainName:Sn,rest:En,rpc:sn},()=>J("Account was changed in wallet. Session terminated."))}catch(se){debugger;return se instanceof Vn?l>=3?J("Keplr connection request rejected too many times"):(await B(2e3),await V(l+1)):se instanceof Zn||se instanceof Error?J(se.stack):J("Fatal unknown error")}if(!$)return J("Chain suggestion was denied. Unable to proceed.");Date.now()-x>xe&&(await we(`Please make sure your network is set to "${Sn}" in Keplr!`),await B(2100));const K=m.key,ue=K.bech32Address;i.wallet({name:K.name,addr:ue,ledger:K.isNanoLedger});const be=new Ts(ue,[ee,ce,"salt"].join("|"),a);let Ee=null;try{Ee=be.get("permits")}catch{await we("Change in passphrase detected. Clearing old query perrmits."),be.clear()}await B(1e3);let Te=!1;if(Ee&&Ee[Tt])c=Ee[Tt],Te=!0;else{await we(`
				Query permits allow you to read encrypted data from the blockchain without needing to write anything extra to the chain.

				Signing a query permit happens offline and does not require any gas.
			`),await B(1800),await w.ok("Sign permit");try{c={params:{chain_id:m.chain,allowed_tokens:[Tt,an],permit_name:xn,permissions:["owner"]},signature:await m.signQueryPermit()},be.set("permits",$t(At({},Ee||{}),{[Tt]:c,[an]:c}))}catch(se){return J(se.stack)}}i.permit(c.params,Te),await B(1200),await i.reveal_text(""),await B(1100)}async function Fe(l=!1){let E=Ut("");l?we("Still waiting for another player... {last_check}",{last_check:E}):we("Created a new game. Now waiting for another player... {last_check}",{last_check:E});let L=window.Notification&&Notification.permission==="granted",te=!1;function ee(){if(L)we("You will receive a notification once another player has joined.");else{const ue=Ae("span"),be=new $i({target:ue});be.$on("change",async()=>{const Ee=Date.now();await Notification.requestPermission()==="denied"?(be.$set({si_selected:"none"}),Date.now()-Ee<.5*xe?we("User previously denied request for notifications. Need to reset in browser settings."):we("User denied request for notification permission.")):we("Confirmed. Notification will be sent when another player joins.")}),we("Would you like to receive a notification once another player has joined? {approve}",{approve:ue})}}let ce=Date.now(),$=p.addInterval(()=>{ce&&E.set(`Last checked ${pi(ce)}`),te||(te=!0,ee())},1e3),x,K;for(;;){K=Date.now();try{x=await me.queryGameState()}catch(be){return be instanceof Kn?J(be.message):J(be+"")}if(x.round!==0)break;ce=Date.now();const ue=Date.now()-K;ue<10*xe&&await B(ue)}p.delInterval($),E.set("");{let ue=function(){window.removeEventListener("focus",be)},be=function(){ue(),O(Ee)};const Ee=pe.retro_game_alarm;Ee.play(),document.hasFocus()?(await B(1800),O(Ee)):window.addEventListener("focus",be)}return x}const Ze={epic_transition:"epic-transition.wav",coin:"coin.wav",death:"death.wav",menu_1a:"menu-1a.wav",menu_1b:"menu-1b.wav",rise:"rise.wav",coin_win:"coin-win.wav",retro_game_alarm:"retro-game-alarm.wav",retro_game_notif:"retro-game-notif.wav",trumpet_fanfare:"trumpet-fanfare.wav"},pe=Object.fromEntries(Ye(Ze).map(([l,E])=>[l,new Audio(`/asset/audio/${E}`)]));let ve=!1,Qe=Cn(),me;async function $e(){await Z(`
			Your opponent is taking too long. Since you have already fulfilled your duty, I will allow you to end the game and get a refund.

			Would you like to end the game?
		`),await i.reveal_text("yes, give me my money back"),i.submittable(async()=>{i.submittable(null);const l=await et({async exec(){const E=(await me.forceEndgame()).data.force_endgame.game_state;return i.commit(),E},check(E){return E.finished!==null},query_fail(){return $e(),null}});if(!!l)return i.unsubmittable(),await Z(`I have refunded you ${on(BigInt(l.wager))}.`),await pe.coin.play(),ne()})}class qe{constructor(E){this._s_expired="run out of time";const L=E.terminate;this._s_kill=E.kill_text||"",this._k_eta=E.eta,this._yw_time=Ut("(estimating...)"),this._k_eta.eta,this._i_interval=p.addInterval(()=>{const ee=this._k_eta;if(!ee.ready)return;if(ee.expired){this._yw_time.set(this._s_expired),p.delInterval(this._i_interval),this._i_interval=0;try{this._dm_clock.remove()}catch{}L&&L();return}const ce=ee.remaining,$=Math.max(0,Math.floor(ce/xe)),x=Math.floor($/60);x?x<2?this._yw_time.set("less than 2 minutes remaining"):x<5?this._yw_time.set("less than 5 minutes remaining"):x<10?this._yw_time.set("less than 10 minutes remaining"):this._yw_time.set("a little more than 10 minutes remaining"):$<=10?this._yw_time.set("less than 10 seconds remaining"):$<=31?this._yw_time.set("less than 30 seconds remaining"):this._yw_time.set("less than 60 seconds remaining")},100);const te=this._dm_clock=Ae("span");Object.assign(te.style,{paddingRight:"2px"}),new Oe({target:te,props:{icon:ri}})}get interval(){return this._i_interval}get clock(){return this._dm_clock}get store(){return this._yw_time}kill(E=""){this._i_interval&&(p.delInterval(this._i_interval),this._i_interval=0,this._dm_clock.remove(),this._yw_time.set(E||this._s_kill))}}async function ne(){return rn("game"),J("Game over. Reload to play again.")}async function Et(){let l=!0;i.reveal_text("checking for active game...").then(()=>l&&i.spinning(!0));let E;try{try{E=await me.queryGameState()}finally{l=!1,i.reveal_text("")}}catch{debugger}if(E&&(console.log("Resuming:",E),E.round!==null)){if(E.finished?we("Fast-forwarding through finished game so you can see the results."):we("Successfully resumed active game."),E.round===0&&(E=await Fe(!0)),E.round===1)return tt(E,!0),!0;if(E.round===3)return Rn(E,!0),!0;await ze(`Unrecognized game state round: ${E.round}`)}return!1}let at=!1,Ie;const ge=l=>l.cloneNode();async function ut(){if(ve)return;const l=ge(pe.menu_1a);l.volume=.4;try{await l.play()}catch{}}async function ae(){if(ve)return;const l=ge(pe.menu_1b);l.volume=.4;try{await l.play()}catch{}}async function R(){try{await pe.rise.play()}catch{}}async function ie(){const l=ge(pe.coin);l.volume=Math.random()*.35+.1;try{await l.play()}catch{}}async function _t(){if(!ve)for(let l=0;l<10;l++)ie(),await B(Math.random()<.35?150:250)}async function Pt(){const l=ge(pe.death);try{await l.play()}catch{}}async function we(...l){return ae(),i.warn(...l)}async function ze(...l){return ae(),i.error(...l)}async function Z(...l){return ut(),i.arbiter(...l)}Object.assign(window,{H_AUDIO:pe,play_menu_1a:ut,play_menu_1b:ae,play_notif:R,play_jackpot:_t}),Wt(async()=>{console.log(a);const l=Qe.last_seen;if(l&&t(0,ve=!!+Qe.muted),Qe.wallet==="keplr")try{m=Xt.fromWindow()}catch{rn("wallet")}if(jt({last_seen:""+Date.now()},30*vt),t(1,Qe=Cn()),await V(),me=new ki(m,Tt,c),Qe.game){if(await Et())return;rn("game")}return l?await M():(await Ve(),await F()),await Z(`
			Welcome${l?" back":""} to my game of secrets. In a moment, you will be matched with another player.

			I will give each of you a chip with a colored shape on it. There are only four colors (red, green, blue, black), and four shapes (triangle, square, circle, star).

			Your opponent will not be able to see your chip and vice versa. I will also take a third chip and hide it in a bag. Each chip will have a unique color and a unique shape. For example, if the chip in my bag is a red triangle, then nobody else has red, and nobody else has a triangle.

			The rules are simple. You and your opponent must exchange a message with each other. Cooperate to deduce what is in my bag and you both will advance to the next round. Betray your opponent by correctly guessing which chip they have and win their wager. Guess wrong and lose.
		`),await B(l?800:4600),xt()});class ft extends Error{}async function et(l){let E=!0;const L=l.reveal;typeof L=="string"?i.reveal_text(L).then(()=>E&&i.spinning(!0)):i.spinning(!0);const te=l.check,ee=l.condition||l.query_fail,ce=l.rejected||l.query_fail;let $;try{try{if($=await l.exec(),!te($))throw $=null,new ft}finally{E=!1,i.reveal_text("")}}catch(x){if(console.error(x),x instanceof Error){const K=x.message;if(/Account does not exist/.test(K))return J("Looks like your wallet is empty. Make sure to acquire some SCRT tokens so that you can pay the gas fees for transactions.");if(/must finish current game/.test(K))return jt({game:"started"},12*Dt),await Et()?null:J("Looks like you changed browsers or cleared cache since you last joined a game with this account. Please reload and the game will attempt to resume.");if(/contract not found/i.test(K))return J("Contract not found! Are you on the right network?");if(/execute contract failed/.test(K))return ze(`Contract error: ${K}`),ee(x),null;if(/Request rejected/.test(K))return ze("Transaction rejected"),ce(x),null;if(/timed out/.test(K)){const ue=Ut("");await we("There was a timeout error while waiting for the transaction to be included. Waiting to see if it gets included... {retries}",{retries:ue});const be=await async function Ee(Te=1){await B(5e3);let se;try{se=await me.queryGameState(),te(se)||(console.warn("query permit check failed on game state",se),se=null)}catch(Ke){if(!(Ke instanceof ft))return await ze(["Timeout error. Please try again with higher gas fee.",K]),l.query_fail?await l.query_fail(Ke):null}return se||(Te>=5?(await ze("Reached maximum retries. Seems like your transaction failed. Try again with higher gas fee?"),l.query_fail?await l.query_fail(new ft):J("Unhandled query failure path.")):(ue.set(`Retried ${Te===1?"once":`${Te} times`} so far...`),await Ee(Te+1)))}();if(be)$=be;else return null}else{debugger;return J(`Unhandled error: ${x.stack}`)}}else return J(`Unknown error: ${x}`)}return console.log($),i.reveal_text(""),$}async function xt(){await i.reveal_text("ready to play?"),await w.ok("Join a game");const l=await et({reveal:"waiting for transaction to be verified... ",async exec(){return(await me.joinGame()).data.join.game_state},check(L){return L.round!==null},query_fail(){return xt(),null}});if(!l)return;let E=l;return l.round===0&&(jt({game:"started"},12*Dt),E=await Fe()),E.round===1?tt(E):E.round===3?J("round_3()"):(console.error(E),jt({game:"started"},12*Dt),J("Failed to join game while waiting for transaction. You can try once more by reloading this page."))}function b(l){var E;t(8,A=l.chip_color.split(":")[1]),t(9,h=l.chip_shape.split(":")[1]),t(10,P=(E=l.hint)==null?void 0:E.split("|")[1]),y=l.first_submit,t(20,f=new ln),f.nobody(`color:${A}`),f.nobody(`shape:${h}`),f.nobody(P)}let X=Kt[0],oe="";async function Re(){const l=oe?Lt(oe):"",E=Jt[X].describe[u](l);await i.reveal_text(E)}function rt(l){i.submittable(null),X=l.detail,oe="",Re()}function qt(){oe="",i.submittable(null),d.show(),Re()}async function Je(l){if(i.submittable(null),oe=l.detail,y){const[,ee]=y.split("|");ee===oe&&(oe="",await Z("You cannot submit a message that would contradict your previous assertion."))}const[E,L]=oe.split(":");let te="Unknowable";X==="nobody_has"?P===oe?te="Truth":(E==="color"&&L===A||E==="shape"&&L===h)&&(te="Lie"):E==="color"&&L===A||E==="shape"&&L===h?te="Truth":te="Lie",await Re(),i.submittable(async()=>{d.hide(),i.submittable(null);const ee=await et({async exec(){return(await me.submitAssertion(X,oe)).data.submit.game_state},check(ce){return y?ce.second_submit!==null:ce.first_submit!==null},query_fail(){return qt(),Je(l),null}});!ee||(await i.commit(),We&&We.kill(),Ce&&Ce.kill(),i.unsubmittable(),ee.second_submit?_n(ee):dt(ee))},te)}let We;async function tt(l,E=!1){b(l),await i.reveal_text(""),await Z("Here is your chip, player..."),await _.animate_chip_entry(A,h),E||await B(5e3);let L=P.startsWith("color:");if(await Z(`
			Round 1: I've given you the ${A} ${h} this round, and a hint that nobody has ${L?"":"a "}${P.replace(/^[^:]+:/,"")}.

			I've also given your opponent a hint. Theirs is that nobody has a certain ${L?"shape":"color"}.
		`),E){if(l.first_submit)return await i.user(Yt(l.first_submit)),dt(l,E)}else await B(4100);We=new qe({eta:new St(l.first_round_start_block+""),kill_text:"successfully submitted"}),await Z(["Now you must choose what to tell the other player. I will reveal both of your messages simultaneously once they both have been submitted. You have {clock_icon}{time_remaining}."],{clock_icon:We.clock,time_remaining:We.store}),await d.show(),E||await B(4e3),Re()}let le=!1,Se,Ce;async function dt(l,E=!1){var $;b(l);const{opponent_first_submit:L,first_extra_secret:te}=l;if(!L&&!te)return le||(le=!0,We&&We.kill("already submittted"),Se=new qe({eta:new St(l.first_round_start_block+""),kill_text:"also submitted theirs",terminate:$e}),await Z(["Your submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Se.clock,time_remaining:Se.store})),await B(5e3),dt(await me.queryGameState());Se&&Se.kill(),E||R();const ee=Ae("span");if(te){const[x,K]=te.split("|"),ue=Ut("");x==="nobody_has"?(f.nobody(K),ue.set(`Your opponent has the hint that "nobody has ${Lt(K)}".`)):(f.opponent(K,!0),ue.set(`Your opponent has ${Lt(K)}.`)),new cn({target:ee,props:{b_mode_nobody:!1,si_assertion:K,si_known:"true"}}),await Z(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:ue,premise:ee})}else if(L){const[x,K]=L.split("|");let ue=f.clone();const be=x==="nobody_has"&&K===P,Ee=new cn({target:ee,props:{b_mode_nobody:x==="nobody_has",si_assertion:K,si_known:be?"undeniable":""}}),Te=Ee.k_premise;Ee.$on("change",()=>{t(21,v=Te.apply),console.log(`Priori: ${f.explain()}`),console.log(`Opp1: ${ue.explain()}`),console.log([f,ue])}),await i.opponent([`${ke(Yt(L))} {premise}`],{premise:ee})}else return J("Fatal system error: unable to parse game state");if(E){if(l.second_submit)return await i.user(Yt(l.second_submit)),_n(l,E)}else await B(4100);Ce=new qe({eta:new St(l.second_submit_turn_start_block+""),kill_text:"already submitted"});const ce=(($=l.first_submit)==null?void 0:$.split("|")[0])==="nobody_has"?"i_have":"nobody_has";await Z([`Both of you must now exchange one more message with each other. This time, I'm requiring you to submit a message about ${ce==="nobody_has"?'what "nobody has"':"your chip"}. You have {clock_icon}{time_remaining}.`],{clock_icon:Ce.clock,time_remaining:Ce.store}),await d.show(ce),Re()}let lt=!1,mt,nt,Bt;async function _n(l,E=!1){const{opponent_second_submit:L,second_extra_secret:te}=l;if(!L&&!te)return lt||(lt=!0,mt&&mt.kill(),nt=new qe({eta:new St(l.second_submit_turn_start_block+""),kill_text:"also submitted theirs",terminate:$e}),await Z(["Your 2nd submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:nt.clock,time_remaining:nt.store})),await B(5e3),_n(await me.queryGameState());E||R();const ee=Ae("span");if(te){const[ce,$]=te.split("|"),x=Ut("");ce==="nobody_has"?(t(22,q=K=>K.nobody($)),x.set(`Your opponent has the hint that "nobody has ${Lt($)}".`)):(t(22,q=K=>K.opponent($,!0)),x.set(`Your opponent has ${Lt($)}.`)),new cn({target:ee,props:{b_mode_nobody:!1,si_assertion:$,si_known:"true"}}),await Z(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:x,premise:ee})}else if(L){nt&&nt.kill();const[ce,$]=L.split("|"),x=ce==="nobody_has"&&$===P,K=new cn({target:ee,props:{b_mode_nobody:ce==="nobody_has",si_assertion:$,si_known:x?"undeniable":""}}),ue=K.k_premise;K.$on("change",()=>{t(22,q=ue.apply)}),await i.opponent([`${ke(Yt(L))} {premise}`],{premise:ee})}else return J("Fatal system error: unable to parse game state");if(E&&l.guess)return await i.user(Mn(l.guess)),hn(l,E);Bt=new qe({eta:new St(l.guess_turn_start_block+""),kill_text:"successfully submitted"}),await Z(`
			The time has come for you to surmise my secrets. You may either guess what is in my bag, what your opponent has, or abstain completely. You have {clock_icon}{time_remaining}.

			The precedence for winning is as follows:
			- [Guess wrong] < [Abstain] < [Correctly guess arbiter's bag] < [Corrrectly guess opponent's chip]

			Use the inline widgets next to each assertion above to logically reduce your option space.
		`,{clock_icon:Bt.clock,time_remaining:Bt.store}),await k.show(),console.log(l)}async function fn(l){i.submittable(null),await i.reveal_text(Mn(l),30),i.submittable(async()=>{i.submittable(null),k.hide();const E=await et({async exec(){const L=(await me.submitGuess(l)).data.guess.game_state;return i.commit(),L},check(L){return L.guess!==null},query_fail(){return k.show(),fn(l),null}});!E||(Bt.kill(),hn(E))})}let dn=!1,mn=!1,It;async function hn(l,E=!1){const{round_result:L,round:te,result:ee}=l;let ce=!1;if(L&&!dn){dn=!0;const[$,x]=L.split("|");x==="wrong"?(await Z(`
					Sorry, your guess about ${$==="opponent"?"your opponent's chip":"my bag"} was wrong.
					
					Guessing wrong is the worst because you automatically lose your wager. Consider abstaining next time if you're unsure.
				`),ce=!0):await Z(`Nicely done, your guess about ${$==="opponent"?"your opponent's chip":"my bag"} was correct!`)}if(!l.opponent_guess)return mn||(mn=!0,It=new qe({eta:new St(l.guess_turn_start_block+""),kill_text:"now submitted",terminate:$e}),await Z(`${ce?"Even though you lost":"However"}, I am still waiting for a guess from your opponent. They have {clock_icon}{time_remaining}.`,{clock_icon:It.clock,time_remaining:It.store})),await B(5e3),hn(await me.queryGameState());if(It&&It.kill(),t(10,P=""),_.animate_chip_exit(),console.log("round_1d#over",l),l.finished)if(l.opponent_round_result){const{opponent_round_result:$,opponent_guess:x}=l,[K,ue,be]=x.split(/\|/g),[,Ee]=$.split("|");let Te="",se=!1;if(K==="abstain")Te="abstained from guessing";else{const Ke=ue.split(":")[1],Ot=be.split(":")[1],Zt=Ct[Ke].labels[u]+" "+zt[Ot].labels[u];se=Ee!=="correct",Te=`${se?"wrongly":"correctly"} guessed that ${K==="bag"?"my bag":"your chip"} is the ${Zt}`}if(ee==="you lost wager")return await Z([`${ce?"As you already know":"Bad news"}, you lost your wager. ${se?"But you'll be happy to know that your opponent":"Your opponent"} ${Te}, so they ${se?"also lost their wager":"won the game and gained your lost wager"}.`]),await B(9e3),ne();if(ee==="you won wager"){const Ke=BigInt(l.wager),Ot=on(Ke),Zt=on(Ke*2n);return await Z(`
						Congratulations, you won! Your opponent ${Te}, so they lost their wager.
						
						I have refunded you your original ${Ot} plus an extra ${Ot} from your opponent's wager for a total of ${Zt}.
					`),await B(9e3),ne()}else await Z([`Well done. You and your opponent have tied, so you both can claim a reward. They ${Te}.`]),E||await B(4e3)}else return J("Somebody terminated the game.");else if(l.round===3)Rn(l,E);else return J(`Game is not finished but round is ${l.round}.`)}let Os=!1,Rt;async function Rn(l,E=!1){if(Rt=new qe({eta:new St(l.pick_reward_round_start_block+""),kill_text:"made your decision"}),await pe.trumpet_fanfare.play(),await Z(`
			Congratulations on passing round 1 together! I have two rewards to choose from, a jackpot of SCRT, or an NFT that can be used to give you special powers next time you play.

			However, if you both attempt to claim the same prize, then neither of you will take it. You will only be able to take a reward if you and your opponent claim different things.

			You have {clock_icon}{time_remaining}.
		`,{clock_icon:Rt.clock,time_remaining:Rt.store}),l.pick)return gn(l,!0);g.show()}async function On(l){const{detail:E}=l;i.submittable(null),await i.reveal_text(`i pick the ${E}`),i.submittable(async()=>{g.hide();const L=await et({async exec(){const te=(await me.pickReward(E)).data.pick_reward.game_state;return i.commit(),te},check(te){return te.pick!==null},query_fail(){return g.show(),On(l),null}});!L||gn(L)})}let Vt,pn=!1;async function gn(l,E=!1){Rt&&Rt.kill();const{result:L}=l;if(L){switch(L){case"you won jackpot":{_t(),await Z(`
						Fortune favors the bold! Your opponent picked the NFT, and you have successfully claimed the jackpot of ${on(BigInt(l.jackpot_reward||"0"))}!
					`);break}case"you won nft":{Pt(),await Z(`
						Wise move. While your opponent chose the short-term gain, you see the long-term potential. You have successfully claimed an NFT.
					`);break}case"you lost reward":{Pt(),l.pick==="jackpot"?await Z(`
							Greed has spoiled your riches. Both players attempted to claim the jackpot, so you both shall leave empty-handed.
						`):await Z(`
							An unlucky pick. Both players attempted to claim the NFT, so you both shall leave empty-handed.
						`);break}}return await B(9e3),ne()}else return pn||(pn=!0,Vt=new qe({eta:new St(l.pick_reward_round_start_block+""),kill_text:"also picked theirs",terminate:$e}),await Z(["Your pick has been noted. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Vt.clock,time_remaining:Vt.store})),await B(5e3),gn(await me.queryGameState())}function Mn(l){let E;if(typeof l=="string"?E=Object.fromEntries(l.split(/\|/g).map(L=>L.split(":"))):E=l,E.target==="abstain")return"i abstain from guessing this round";{let L="";return E.target==="bag"?L+="the arbiter's bag is: a ":L+="my opponent's chip is: a ",L+Ct[E.color].labels[u]+" "+zt[E.shape].labels[u]}}async function Ms(){fn({target:"abstain",color:null,shape:null})}async function Ns({detail:l}){fn(l)}let wn=!1;function Nn(){if(!wn)wn=!0,ze("The button you just clicked will remove all cookies and cache that the game previously created and then disable the current UI. If you agree to this, click the burn icon again.");else return Object.keys(Cn()).forEach(l=>rn(l)),localStorage.clear(),i.reveal_text(""),J("Cache burned")}const no=[];Zo.keys(e).forEach(l=>{!~no.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&$o.warn(`<App> was created with unknown prop '${l}'`)});const so=()=>t(0,ve=!ve),io=()=>Nn();function oo(l){i=l,t(2,i)}function ao(l){je[l?"unshift":"push"](()=>{Ie=l,t(11,Ie)})}function ro(l){w=l,t(5,w)}function lo(l){d=l,t(4,d)}function co(l){k=l,t(6,k)}function uo(l){g=l,t(7,g)}function _o(l){_=l,t(3,_)}return n.$capture_state=()=>({onMount:Wt,setContext:ai,writable:Ut,blur:bt,fade:he,quadInOut:kt,expoOut:yt,Fa:Oe,faClock:ri,faVolumeUp:Gn,faVolumeMute:Hn,faFire:li,fingerprintjs:ci,H_LANGUAGES:ui,H_COLORS:Ct,H_SHAPES:zt,A_BASES:Kt,H_BASES:Jt,H_MESSAGES:_i,SI_CHAIN:Fn,S_CHAIN_NAME:Sn,P_LCD_REST:En,P_LCD_RPC:sn,uscrt_to_scrt:on,KeplrWallet:Xt,EnableKeplrError:Vn,OfflineSignerError:Zn,dd:Ae,delete_cookie:rn,read_cookie:Cn,write_cookie:jt,XTL_SECONDS:xe,XTL_HOURS:Dt,XTL_DAYS:vt,ode:Ye,proper:ke,timeout:B,relative_time:pi,Killables:gi,Deduction:ln,use_assertion_in_sentence:Yt,use_quality_in_sentence:Lt,MessagePanel:qi,Prompt:Oi,Assertion:Fi,Scene:Ji,PremiseWidget:cn,Decision:Vi,ActionWidget:$i,Pick:to,SI_PERMIT:xn,ContractError:Kn,EtaEstimator:St,GameContract:ki,P_CONTRACT_GAME_ADDR:Tt,SI_CONTRACT_GAME_CODE_HASH:bi,P_CONTRACT_MINTER_ADDR:an,SI_CONTRACT_MINTER_CODE_HASH:yi,EncryptedLocalStorage:Ts,F_IDENTITY:Rs,G_NETWORK_SUMMARY:a,g_permit:c,s_lang:u,k_panel:i,k_scene:_,k_tx:d,k_prompt:w,k_decision:k,k_pick:g,k_wallet:m,k_killables:p,si_player_color:A,si_player_shape:h,si_player_hint:P,si_submit_first:y,k_priori:f,f_assert_1:v,f_assert_2:q,quiet_fade:O,d_img_monster:U,d_img_smile:I,reveal_prepared:D,introduction:F,welcome_back:M,reload:re,fatal:J,surprise:Ve,connect_wallet:V,wait_for_other_player:Fe,H_AUDIO_SRC:Ze,H_AUDIO:pe,b_muted:ve,h_cookie:Qe,k_game:me,force_endgame:$e,Countdown:qe,game_over:ne,try_resume_game:Et,b_surprise:at,dm_surprise:Ie,clone_audio:ge,play_menu_1a:ut,play_menu_1b:ae,play_notif:R,play_coin:ie,play_jackpot:_t,play_death:Pt,warn:we,err:ze,arbiter:Z,GameStateError:ft,safe_exec:et,try_join:xt,update_player_state:b,si_assert_basis:X,si_assert_quality:oe,reveal_tx:Re,select_basis:rt,reset_tx:qt,select_quality:Je,k_countdown_1a:We,round_1a:tt,b_notif_1b_waiting:le,k_countdown_1a2:Se,k_countdown_1b:Ce,round_1b:dt,b_notif_1c_waiting:lt,k_countdown_1b2:mt,k_countdown_1c:nt,k_countdown_1c2:Bt,round_1c:_n,prepare_guess:fn,b_notif_1d_result:dn,b_notif_1d_waiting:mn,k_countdown_1d:It,round_1d:hn,b_notif_3a_waiting:Os,k_countdown_3a:Rt,round_3a:Rn,select_pick:On,k_countdown_3b:Vt,b_notif_3b_waiting:pn,round_3b:gn,use_guess_in_sentence:Mn,select_abstain:Ms,select_decision:Ns,b_burn_clicked:wn,burn:Nn,k_deduced:s}),n.$inject_state=l=>{"g_permit"in l&&(c=l.g_permit),"s_lang"in l&&(u=l.s_lang),"k_panel"in l&&t(2,i=l.k_panel),"k_scene"in l&&t(3,_=l.k_scene),"k_tx"in l&&t(4,d=l.k_tx),"k_prompt"in l&&t(5,w=l.k_prompt),"k_decision"in l&&t(6,k=l.k_decision),"k_pick"in l&&t(7,g=l.k_pick),"k_wallet"in l&&(m=l.k_wallet),"si_player_color"in l&&t(8,A=l.si_player_color),"si_player_shape"in l&&t(9,h=l.si_player_shape),"si_player_hint"in l&&t(10,P=l.si_player_hint),"si_submit_first"in l&&(y=l.si_submit_first),"k_priori"in l&&t(20,f=l.k_priori),"f_assert_1"in l&&t(21,v=l.f_assert_1),"f_assert_2"in l&&t(22,q=l.f_assert_2),"b_muted"in l&&t(0,ve=l.b_muted),"h_cookie"in l&&t(1,Qe=l.h_cookie),"k_game"in l&&(me=l.k_game),"b_surprise"in l&&(at=l.b_surprise),"dm_surprise"in l&&t(11,Ie=l.dm_surprise),"si_assert_basis"in l&&(X=l.si_assert_basis),"si_assert_quality"in l&&(oe=l.si_assert_quality),"k_countdown_1a"in l&&(We=l.k_countdown_1a),"b_notif_1b_waiting"in l&&(le=l.b_notif_1b_waiting),"k_countdown_1a2"in l&&(Se=l.k_countdown_1a2),"k_countdown_1b"in l&&(Ce=l.k_countdown_1b),"b_notif_1c_waiting"in l&&(lt=l.b_notif_1c_waiting),"k_countdown_1b2"in l&&(mt=l.k_countdown_1b2),"k_countdown_1c"in l&&(nt=l.k_countdown_1c),"k_countdown_1c2"in l&&(Bt=l.k_countdown_1c2),"b_notif_1d_result"in l&&(dn=l.b_notif_1d_result),"b_notif_1d_waiting"in l&&(mn=l.b_notif_1d_waiting),"k_countdown_1d"in l&&(It=l.k_countdown_1d),"b_notif_3a_waiting"in l&&(Os=l.b_notif_3a_waiting),"k_countdown_3a"in l&&(Rt=l.k_countdown_3a),"k_countdown_3b"in l&&(Vt=l.k_countdown_3b),"b_notif_3b_waiting"in l&&(pn=l.b_notif_3b_waiting),"b_burn_clicked"in l&&(wn=l.b_burn_clicked),"k_deduced"in l&&t(12,s=l.k_deduced)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty[0]&7340032&&t(12,s=q(v(f.clone()).clone()).clone()),n.$$.dirty[0]&3&&Qe&&(Object.values(pe).forEach(l=>l.muted=ve),jt({muted:ve?"1":"0"},30*vt))},[ve,Qe,i,_,d,w,k,g,A,h,P,Ie,s,p,rt,Je,On,Ms,Ns,Nn,f,v,q,so,io,oo,ao,ro,lo,co,uo,_o]}class ta extends ht{constructor(e){super(e);pt(this,e,ea,Is,gt,{},null,[-1,-1,-1,-1]),Q("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:Is.name})}}new ta({target:document.body,props:{}});
//# sourceMappingURL=index.252cfb1d.js.map
