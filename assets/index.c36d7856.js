var $i=Object.defineProperty,eo=Object.defineProperties;var to=Object.getOwnPropertyDescriptors;var ys=Object.getOwnPropertySymbols;var no=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable;var ks=(n,e,t)=>e in n?$i(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,At=(n,e)=>{for(var t in e||(e={}))no.call(e,t)&&ks(n,t,e[t]);if(ys)for(var t of ys(e))so.call(e,t)&&ks(n,t,e[t]);return n},Kt=(n,e)=>eo(n,to(e));import{v as io,S as oo,a as _t,i as ft,s as dt,d as L,g as vs,b as ht,c as Lt,o as Bt,e as En,f as mt,h as me,q as An,F as qe,j as Ss,k as Ps,l as Es,m as As,n as j,t as fe,p as E,r as q,u as Q,w as k,x as Ie,y as Ze,z as Cs,A as Ts,B as W,C as Re,D,E as z,G as Oe,H as N,I as We,J as Y,K as He,L as ge,M as Me,N as Ne,O as ao,P as ro,Q as Ce,R as $e,T as de,U as Yt,V as et,W as at,X as lo,Y as co,Z as Xt,_ as js,$ as qs,a0 as we,a1 as uo,a2 as Is,a3 as _o,a4 as fo,a5 as ho,a6 as Cn,a7 as Rs,a8 as It,a9 as xt,aa as Rt,ab as Vt,ac as Os,ad as Ms,ae as Ns,af as Us,ag as Ds,ah as Ls,ai as ln,aj as Bs,ak as Ys,al as Qs,am as Tn,an as Ws,ao as Hs,ap as Gs,aq as Fs,ar as jn,as as qn,at as In,au as Qt,av as zs,aw as Ot,ax as Js,ay as Ks,az as Xs,aA as mo,aB as Wt}from"./vendor.9e3349cf.js";const po=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}};po();const xs={en:{}},Ct={red:{color:"#a00000",labels:{en:"red"}},green:{color:"#006000",labels:{en:"green"}},blue:{color:"#0000a0",labels:{en:"blue"}},black:{color:"#000000",labels:{en:"black"}}},cn=Object.keys(Ct),Ht={triangle:{symbol:"\u25B2",labels:{en:"triangle"}},square:{symbol:"\u25A0",labels:{en:"square"}},circle:{symbol:"\u25CF",labels:{en:"circle"}},star:{symbol:"\u2605",labels:{en:"star"}}},un=Object.keys(Ht),Gt={nobody_has:{describe:{en:n=>`nobody has ${n||"..."}`}},i_have:{describe:{en:n=>`my chip is ${n||"..."}`}}},Ft=Object.keys(Gt),Vs={attention:[{labels:{en:"the Arbiter approaches..."}}],loading:[{delay:2e3,interval:200,labels:{en:"hmmm"}},{delay:250,interval:500,labels:{en:"hmmm...."}}]},_n="pulsar-1",fn="pulsar-1",dn="https://9smwxzxpih.execute-api.us-west-2.amazonaws.com/",Zt="https://1hcx0z6ih3.execute-api.us-west-2.amazonaws.com/",hn=n=>(Number(n/10000n)/100).toFixed(2).replace(/\.0+$/,"")+" SCRT";class Rn extends Error{constructor(e,t){t?t instanceof TypeError?super(`${e}: ${t.stack}`):t instanceof Error?super(`${e}: ${t.stack}`):super(`${e}: Unknown error`):super(e)}}const Ge=1e3,mn=60*Ge,Mt=60*mn,pt=24*Mt,Zs=7*pt,$s=30*pt,ei=365*pt,Ue=Object.entries;function ti(n,e){return Ue(n).reduce((t,[s,o])=>[...t,e(s,o)],[])}function B(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}const ye=n=>n[0].toUpperCase()+n.slice(1),go=[{ge:ei,divisor:ei,unit:"year"},{ge:$s,divisor:$s,unit:"month"},{ge:Zs,divisor:Zs,unit:"week"},{ge:pt,divisor:pt,unit:"day"},{ge:Mt,divisor:Mt,unit:"hour"},{ge:mn,divisor:mn,unit:"minute"},{ge:Ge,divisor:Ge,unit:"seconds"},{ge:0,divisor:1,text:"just now"}];function ni(n,e=Date.now(),t=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"})){const o=(typeof e=="object"?e.getTime():new Date(e).getTime())-(typeof n=="object"?n:new Date(n)).getTime(),l=Math.abs(o);for(const a of go)if(l>=a.ge){const c=Math.round(Math.abs(o)/a.divisor),i=o<0;return a.unit?t.format(i?c:-c,a.unit):a.text}}class si{constructor(){this._as_intervals=new Set,this._as_timeouts=new Set}addInterval(e,t){const s=window.setInterval(e,t);return this._as_intervals.add(s),s}addTimeout(e,t){const s=window.setTimeout(()=>{this.delTimeout(s),e()},t);return this._as_timeouts.add(s),s}delInterval(e){window.clearInterval(e),this._as_intervals.delete(e)}delTimeout(e){window.clearTimeout(e),this._as_timeouts.delete(e)}killAll(){for(const e of this._as_intervals)this.delInterval(e);for(const e of this._as_timeouts)this.delTimeout(e)}}async function wo(n,e,t=null){if(t==null?void 0:t.search){if(e.includes("?"))throw new Error(`Cannot specify 'search' option in fetch config when URI already contains search params: "${e}"`);e+="?"+new URLSearchParams(t.search).toString(),delete t.search}try{return await io(e,Kt(At({},t),{method:n,mode:"cors",headers:At({Accept:"application/json"},(t||{}).headers||{})})).json()}catch(s){throw s}}async function ii(n,e=null){return wo("GET",n,e)}const Tt="secret1zkn3d4u0t8hrr6jhqrdeg96ygrhmx66f9dm6cu",oi="7c98f9e086e687e8f920dc6c0bee01a88c8097223d53bd494ffb7b8bfec4f364",$t="secret1rfwt2zlw27f9ps28svetzmt32tv0rwnr6jg5hz",ai="36d94d2066b903ede9716f77f2fe99274aaa2c434feb424302dbb8aef9f34721";class On extends Error{constructor(e){super(`The game contract returned the following error: ${e}`)}}const bo="1000000",yo=new TextDecoder;class ri{constructor(e,t,s,o){this._k_wallet=e,this._p_contract=t,this._g_permit=s||null,this._si_code_hash=o}async execute(e,t,s=[]){const o=await this._k_wallet.execute(this._p_contract,e,s,t,this._si_code_hash);return{txnHash:o.transactionHash,data:JSON.parse(yo.decode(o.data))}}joinGame(){return this.execute({join:{}},{amount:[{amount:"8750",denom:"uscrt"}],gas:"35000"},[{denom:"uscrt",amount:bo}])}submitAssertion(e,t){const[s,o]=t.split(":"),l=s==="color"?{color:o}:{shape:o};return this.execute({submit:At({target:e},l)},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}submitGuess(e){return this.execute({guess:e},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}pickReward(e){return this.execute({pick_reward:{reward:e}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"1000000"})}query(e){return this._g_permit&&(e={with_permit:{query:e,permit:this._g_permit}}),this._k_wallet.query(this._p_contract,e)}async queryGameState(){const e=await this.query({game_state:{}});if(e.error)throw new On(e.error);return e.game_state}}const ko=(n,e)=>e<60*Ge?Date.now()-n.lastUpdated>5*Ge:Date.now()-n.lastUpdated>30*Ge,vo=_n.startsWith("pulsar")?1.98*Ge:5.99*Ge,li=Math.floor(10*mn/vo);console.log(`Imposing global ${li} blocks per 5 minutes estimate`);let Mn=!1,ci="0",ui=new Date().toISOString(),_i=0;async function So(){if(Date.now()-_i<5*Ge)return;const n=new URL(Zt);n.pathname="/status";try{({latest_block_height:ci,latest_block_time:ui}=(await ii(n.href)).data.result.sync_info),_i=Date.now()}catch{}}class gt{constructor(e,t=li,s=ko){this._xt_start=0,this._xt_eta=0,this._xg_latest=0n,this._xt_updated=0,this._b_currently_updating=!1,this._xg_block_start=BigInt(e),this._xg_block_dest=this._xg_block_start+BigInt(t),this._f_should_update=()=>s(this,this._xt_eta-Date.now())}async fetch_start_time(){const e=new URL(Zt);e.pathname="/block";const t=await ii(e.href,{search:{block:this._xg_block_start+""}});this._xt_start=new Date(t.data.result.block.header.time).getTime()}async estimate(){Mn=!0,this._xt_start||await this.fetch_start_time(),So();const e=this._xg_latest=BigInt(ci),s=(new Date(ui).getTime()-this._xt_start)/Number(e-this._xg_block_start),o=Number(this._xg_block_dest-e),l=this._xt_updated=Date.now();return Mn=!1,this._xt_eta=l+Math.round(o*s)}get lastUpdated(){return this._xt_updated}get latestBlock(){return this._xg_latest}get destinationBlock(){return this._xg_block_dest}get expired(){return this.latestBlock>=this.destinationBlock}get ready(){return this._xt_eta!==0}get eta(){return!this.expired&&!Mn&&this._f_should_update()&&this.estimate(),this._xt_eta}get remaining(){return this.eta-Date.now()}}const Nn="Scrt Prisoners";class Un extends Rn{constructor(e){super("While attempting to enable Keplr",e)}}class Dn extends Rn{constructor(e){super("While attempting to acquire offline signer",e)}}class Po extends Rn{constructor(e){super("While attempting to acquire enigma utils",e)}}class zt{static isAvailable(){return!!window.keplr}static fromWindow(){if(window.keplr)return new zt(window.keplr);throw new Error("Keplr extension is not installed")}constructor(e){this._k_keplr=e}async enable(e,t){const s=this._si_chain=e.chainId;this._fk_change=t;try{await this._k_keplr.experimentalSuggestChain({chainId:s,chainName:e.chainName,rpc:e.rpc,rest:e.rest,bip44:{coinType:529},coinType:529,stakeCurrency:{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6},bech32Config:{bech32PrefixAccAddr:"secret",bech32PrefixAccPub:"secretpub",bech32PrefixValAddr:"secretvaloper",bech32PrefixValPub:"secretvaloperpub",bech32PrefixConsAddr:"secretvalcons",bech32PrefixConsPub:"secretvalconspub"},currencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],feeCurrencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],gasPriceStep:{low:.1,average:.25,high:.4},features:["secretwasm"]})}catch{return!1}try{await this._k_keplr.enable(s)}catch(o){throw new Un(o)}try{this._k_signer=window.getOfflineSigner(s)}catch(o){throw new Dn(o)}try{this._k_enigma=window.getEnigmaUtils(s)}catch(o){throw new Po(o)}return this._g_key=await this._k_keplr.getKey(s),this._a_accounts=await this._k_signer.getAccounts(),this._k_client=new oo(dn,this.publicAddress,this._k_signer,this._k_enigma,{exec:{amount:[{amount:"62500",denom:"uscrt"}],gas:"250000"}}),window.addEventListener("keplr_keystorechange",async()=>{(await this._k_keplr.getKey(s)).bech32Address!==this.publicAddress&&this._fk_change()}),!0}get chain(){return this._si_chain}get key(){return this._g_key}get accounts(){return this._a_accounts}get primaryAccount(){return this.accounts[0]}get publicAddress(){return this.primaryAccount.address}async signQueryPermit(){return(await this._k_keplr.signAmino(this.chain,this.publicAddress,{chain_id:this.chain,account_number:"0",sequence:"0",fee:{amount:[{denom:"uscrt",amount:"0"}],gas:"1"},msgs:[{type:"query_permit",value:{permit_name:Nn,allowed_tokens:[Tt,$t],permissions:["owner"]}}],memo:""},{preferNoSetFee:!0,preferNoSetMemo:!0})).signature}execute(e,t,s,o,l){let a="";if(o&&(a+=` --gas ${o.gas}`),s&&s.length){const c=s[0];a+=` --amount ${c.amount}${c.denom}`}return console.log(`secretd tx compute execute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}${a}`),this._k_client.execute(e,t,"",s,o)}query(e,t,s,o){return console.log(`secretd q compute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}`),this._k_client.queryContractSmart(e,t,s||{})}}const pn=(n,e)=>n.querySelector(e),fi=(n,e)=>Array.prototype.slice.call(n.querySelectorAll(e),0);function Se(n,e={},t=[]){const s=document.createElement(n);for(const o in e)s.setAttribute(o,e[o]+"");for(const o of t)s.append(o);return s}function gn(){return document.cookie.split(";").reduce((n,e)=>{const t=e.trim().split("=");return Kt(At({},n),{[t[0]]:t.slice(1).join("=")})},{})}function jt(n,e){document.cookie=Object.entries(Kt(At({},n),{"max-age":""+e})).map(([t,s])=>`${t}=${s}`).join("; ")}function en(n){return jt({[n]:""},0)}const Eo=65535,di=128,Ao="RGBK\u25B2\u2586\u25CF\u2605";function hi(n){let e=[];for(let t=0;t<8;t++)n&di?e.push(Ao[t]):e.push(" "),n=n<<1;return`[${e.join(",")}]`}function wn(n,e=!1){const[t,s]=n.split(":");if(t==="color"){const o=cn.indexOf(s);return 1<<7-o|(e?15:0)}else{const o=un.indexOf(s);return 1<<3-o|(e?240:0)}}function Nt(n){const[e,t]=n.split(":");return`${e==="shape"?"a ":""}${t}`}function Ut(n){const[e,t]=n.split("|");return`${e==="nobody_has"?"nobody has ":"my chip is"} ${Nt(t)}`}class tn{constructor(e=Eo){this._xm_deduce=e}clone(){return new tn(this._xm_deduce)}nobody(e){let t=wn(e);return t|=t<<8,this._xm_deduce&=~t,this}opponent(e,t){if(t){const s=wn(e,!0),o=~wn(e);this._xm_deduce&=o<<8|s}else this._xm_deduce&=~wn(e);return this}explain(){const e=this._xm_deduce>>8,t=this._xm_deduce&255;return[`A: ${hi(e)}`,`O: ${hi(t)}`].join(`
`)}enumerate(e){let t=e==="bag"?this._xm_deduce>>8:this._xm_deduce&255;const s=[],o=[];for(let a=0;a<8;a++)t&di&&(a<4?s.push(cn[a]):o.push(un[a-4])),t=t<<1;const l=[];for(const a of s)for(const c of o)l.push({target:e,color:a,shape:c});return l}}const{Object:Co,console:mi}=vs,ce="src/component/MessagePanel.svelte";function Ln(n){let e,t,s,o,l;const a={c:function(){e=j("span"),t=fe(n[3]),E(e,"class","msg-console-eval s-l2U1SoEQLPY0"),q(e,ce,629,3,16539)},m:function(i,r){Q(i,e,r),k(e,t),n[22](e),l=!0},p:function(i,r){(!l||r[0]&8)&&Ie(t,i[3])},i:function(i){l||(Ze(()=>{o&&o.end(1),s=Cs(e,me,{duration:1e3}),s.start()}),l=!0)},o:function(i){s&&s.invalidate(),o=Ts(e,me,{duration:500}),l=!1},d:function(i){i&&W(e),n[22](null),i&&o&&o.end()}};return L("SvelteRegisterBlock",{block:a,id:Ln.name,type:"if",source:"(629:2) {#if s_evaluation}",ctx:n}),a}function Bn(n){let e,t,s,o,l,a,c,i,r,_,h,y,v,g,d,w,S;o=new qe({props:{icon:Ss},$$inline:!0}),h=new qe({props:{icon:Ps},$$inline:!0});let m=n[12].length&&Yn(n);const P={c:function(){e=j("div"),t=j("span"),s=j("span"),Re(o.$$.fragment),l=D(),a=j("span"),c=fe(n[6]),i=D(),r=j("span"),_=j("span"),Re(h.$$.fragment),y=D(),v=j("span"),g=fe(n[7]),d=D(),m&&m.c(),E(s,"class","msg-nav-icon lifted s-l2U1SoEQLPY0"),q(s,ce,641,4,16836),E(a,"class","msg-nav-name s-l2U1SoEQLPY0"),z(a,"long-name",n[6].length>=40),q(a,ce,642,4,16901),E(t,"class","msg-nav-group s-l2U1SoEQLPY0"),q(t,ce,640,3,16803),E(_,"class","msg-nav-icon s-l2U1SoEQLPY0"),q(_,ce,645,4,17037),E(v,"class","msg-nav-addr addr s-l2U1SoEQLPY0"),q(v,ce,646,4,17097),E(r,"class","msg-nav-group s-l2U1SoEQLPY0"),q(r,ce,644,3,17004),E(e,"class","msg-nav s-l2U1SoEQLPY0"),q(e,ce,639,2,16728)},m:function(f,C){Q(f,e,C),k(e,t),k(t,s),Oe(o,s,null),k(t,l),k(t,a),k(a,c),k(e,i),k(e,r),k(r,_),Oe(h,_,null),k(r,y),k(r,v),k(v,g),k(e,d),m&&m.m(e,null),S=!0},p:function(f,C){n=f,(!S||C[0]&64)&&Ie(c,n[6]),C[0]&64&&z(a,"long-name",n[6].length>=40),(!S||C[0]&128)&&Ie(g,n[7]),n[12].length?m?(m.p(n,C),C[0]&4096&&N(m,1)):(m=Yn(n),m.c(),N(m,1),m.m(e,null)):m&&(We(),Y(m,1,1,()=>{m=null}),He())},i:function(f){S||(N(o.$$.fragment,f),N(h.$$.fragment,f),N(m),Ze(()=>{w||(w=ge(e,En,{duration:750,easing:An},!0)),w.run(1)}),S=!0)},o:function(f){Y(o.$$.fragment,f),Y(h.$$.fragment,f),Y(m),w||(w=ge(e,En,{duration:750,easing:An},!1)),w.run(0),S=!1},d:function(f){f&&W(e),Me(o),Me(h),m&&m.d(),f&&w&&w.end()}};return L("SvelteRegisterBlock",{block:P,id:Bn.name,type:"if",source:"(639:1) {#if b_nav_display}",ctx:n}),P}function Yn(n){let e,t,s,o,l,a,c=n[12][0]+"",i,r,_,h,y=n[12][1]+"",v,g,d,w,S,m=n[12][2]+"",P,p,f;s=new qe({props:{icon:Es},$$inline:!0});const C={c:function(){e=j("span"),t=j("span"),Re(s.$$.fragment),o=D(),l=j("span"),a=j("span"),i=fe(c),r=fe(":"),_=D(),h=j("span"),v=fe(y),g=D(),d=j("span"),d.textContent="...",w=D(),S=j("span"),P=fe(m),E(t,"class","msg-nav-icon s-l2U1SoEQLPY0"),q(t,ce,650,5,17266),E(a,"class","prefix s-l2U1SoEQLPY0"),q(a,ce,652,6,17378),E(h,"class","addr s-l2U1SoEQLPY0"),q(h,ce,653,6,17436),E(d,"class","ellipsis s-l2U1SoEQLPY0"),q(d,ce,654,6,17491),E(S,"class","addr s-l2U1SoEQLPY0"),q(S,ce,655,6,17531),E(l,"class","msg-nav-permit inline-flex s-l2U1SoEQLPY0"),q(l,ce,651,5,17330),E(e,"class","msg-nav-group s-l2U1SoEQLPY0"),q(e,ce,649,4,17198)},m:function(R,G){Q(R,e,G),k(e,t),Oe(s,t,null),k(e,o),k(e,l),k(l,a),k(a,i),k(a,r),k(l,_),k(l,h),k(h,v),k(l,g),k(l,d),k(l,w),k(l,S),k(S,P),f=!0},p:function(R,G){(!f||G[0]&4096)&&c!==(c=R[12][0]+"")&&Ie(i,c),(!f||G[0]&4096)&&y!==(y=R[12][1]+"")&&Ie(v,y),(!f||G[0]&4096)&&m!==(m=R[12][2]+"")&&Ie(P,m)},i:function(R){f||(N(s.$$.fragment,R),Ze(()=>{p||(p=ge(e,me,{duration:1e3},!0)),p.run(1)}),f=!0)},o:function(R){Y(s.$$.fragment,R),p||(p=ge(e,me,{duration:1e3},!1)),p.run(0),f=!1},d:function(R){R&&W(e),Me(s),R&&p&&p.end()}};return L("SvelteRegisterBlock",{block:C,id:Yn.name,type:"if",source:"(649:3) {#if a_permit_displays.length}",ctx:n}),C}function Qn(n){let e,t,s,o,l,a,c,i,r;s=new qe({props:{icon:As},$$inline:!0});const _={c:function(){e=j("div"),t=j("span"),Re(s.$$.fragment),o=D(),l=j("span"),l.textContent="Submit",E(t,"class","msg-submit-icon s-l2U1SoEQLPY0"),q(t,ce,670,3,17878),E(l,"class","msg-submit-text s-l2U1SoEQLPY0"),q(l,ce,671,3,17945),E(e,"class","msg-submit s-l2U1SoEQLPY0"),z(e,"active",!!n[9]),q(e,ce,662,2,17656)},m:function(y,v){Q(y,e,v),k(e,t),Oe(s,t,null),k(e,o),k(e,l),n[23](e),c=!0,i||(r=[Ne(e,"click",function(){ao(n[9]||pi)&&(n[9]||pi).apply(this,arguments)},!1,!1,!1),Ne(e,"mouseenter",n[15],!1,!1,!1),Ne(e,"mouseleave",n[16],!1,!1,!1)],i=!0)},p:function(y,v){n=y,v[0]&512&&z(e,"active",!!n[9])},i:function(y){c||(N(s.$$.fragment,y),Ze(()=>{a||(a=ge(e,mt,{},!0)),a.run(1)}),c=!0)},o:function(y){Y(s.$$.fragment,y),a||(a=ge(e,mt,{},!1)),a.run(0),c=!1},d:function(y){y&&W(e),Me(s),n[23](null),y&&a&&a.end(),i=!1,ro(r)}};return L("SvelteRegisterBlock",{block:_,id:Qn.name,type:"if",source:"(662:1) {#if b_submit_display}",ctx:n}),_}function Wn(n){let e,t,s,o,l,a,c,i,r,_,h,y,v,g,d,w=n[3]&&Ln(n),S=n[5]&&Bn(n),m=n[8]&&Qn(n);const P={c:function(){e=j("div"),t=j("div"),s=j("div"),o=D(),l=j("div"),a=j("span"),c=fe(">\xA0"),i=fe(n[4]),r=fe(n[11]),_=D(),h=j("span"),h.textContent="\xA0",y=D(),w&&w.c(),v=D(),S&&S.c(),g=D(),m&&m.c(),E(s,"class","msg-history-scroll s-l2U1SoEQLPY0"),q(s,ce,623,2,16291),E(t,"class","msg-history s-l2U1SoEQLPY0"),q(t,ce,622,1,16240),E(a,"class","text s-l2U1SoEQLPY0"),q(a,ce,626,2,16391),E(h,"class","cursor blinking s-l2U1SoEQLPY0"),q(h,ce,627,2,16449),E(l,"class","msg-console s-l2U1SoEQLPY0"),q(l,ce,625,1,16363),E(e,"class","msg-panel s-l2U1SoEQLPY0"),q(e,ce,621,0,16194)},l:function(f){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(f,C){Q(f,e,C),k(e,t),k(t,s),n[19](s),n[20](t),k(e,o),k(e,l),k(l,a),k(a,c),k(a,i),k(a,r),k(l,_),k(l,h),n[21](h),k(l,y),w&&w.m(l,null),k(e,v),S&&S.m(e,null),k(e,g),m&&m.m(e,null),n[24](e),d=!0},p:function(f,C){(!d||C[0]&16)&&Ie(i,f[4]),(!d||C[0]&2048)&&Ie(r,f[11]),f[3]?w?(w.p(f,C),C[0]&8&&N(w,1)):(w=Ln(f),w.c(),N(w,1),w.m(l,null)):w&&(We(),Y(w,1,1,()=>{w=null}),He()),f[5]?S?(S.p(f,C),C[0]&32&&N(S,1)):(S=Bn(f),S.c(),N(S,1),S.m(e,g)):S&&(We(),Y(S,1,1,()=>{S=null}),He()),f[8]?m?(m.p(f,C),C[0]&256&&N(m,1)):(m=Qn(f),m.c(),N(m,1),m.m(e,null)):m&&(We(),Y(m,1,1,()=>{m=null}),He())},i:function(f){d||(N(w),N(S),N(m),d=!0)},o:function(f){Y(w),Y(S),Y(m),d=!1},d:function(f){f&&W(e),n[19](null),n[20](null),n[21](null),w&&w.d(),S&&S.d(),m&&m.d(),n[24](null)}};return L("SvelteRegisterBlock",{block:P,id:Wn.name,type:"component",source:"",ctx:n}),P}const pi=()=>{};function To(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("MessagePanel",s,[]);const{language:l}=Lt("game");let a;l.subscribe(b=>a=b);const c={reveal_text:G,spinning:ne,commit:Le,receive:F,arbiter:pe,opponent:be,user:he,error:st,warn:wt,wallet:bt,permit:rt,submittable:Ke,unsubmittable:X};let{k_killables:i}=e,r,_,h,y="\u275A",v="",g="",d=!1,w="",S="",m="",P=!1,p=null,f,C=0,M=!1,R="";async function G(b,Z=60,ue=0){R=b;let Te=++C;J&&(t(11,H=""),i.delInterval(J),A=0,J=0),Z||(Z=60);const Ve=g.length,lt=b.length;let Ye=0;for(;Ye<Math.min(Ve,lt)&&g[Ye]===b[Ye];Ye++);const ct=3/5;for(let le=Ve;le>Ye;le--)if(t(4,g=g.slice(0,-1)),await B(Z*ct),C!==Te)return;if(ue&&await B(ue),C!==Te)return;const je=f||pn(document.body,".cursor");if(!!je){for(let le=Ye;le<lt;le++)if(je.classList.remove("blinking"),await B(10),C!==Te||(je.classList.add("blinking"),t(4,g+=b[le]),await B(Z),C!==Te))return}}const O=["\u25DC \u25DD"," \u02C9\u25DE"," \u02CD\u25DD","\u25DF \u25DE","\u25DC\u02CD ","\u25DF\u02C9 "];let H="",J=0,A=0;async function ne(b){if(b){if(J===0){let ue=function(){t(11,H=" "+O[A++]+" "),A%=O.length};J=-1;const Z=g;await G(Z+" "+O[O.length-1]+" "),t(4,g=Z),ue(),J=i.addInterval(ue,100)}}else J>0&&(t(11,H=""),i.delInterval(J),A=0,J=0)}async function Pe(){await G("")}let ae=0;async function F(b){if(M)return;for(;!r;)await B(100);const Z=b.widgets||{},ue=ae++,Te=Se("div",{class:["line-commit",...b.classes||[]].join(" ")},[`> ${b.from}: `,...b.text.flatMap(le=>{const ze=[];let Ee=0;for(const{0:Pt,1:ut,index:ot}of le.matchAll(/\{([a-z0-9-_]+)\}/ig)){const Et=Z[ut];Et?(Ee!==ot&&ze.push(le.slice(Ee,ot)),Et instanceof Element?ze.push(Et):ze.push(Se("span",{class:`msg-widget-${ut}-${ue}`}))):(console.error(`No such widget '${ut}' was passed in with the formatted line`),ze.push(le.slice(Ee,ot+Pt.length))),Ee=ot+Pt.length}return Ee!==le.length&&ze.push(le.slice(Ee)),ze.push(Se("div",{class:"newline"})),ze})]);for(const[le,ze]of Ue(Z))typeof ze.subscribe=="function"&&ze.subscribe(Ee=>{const Pt=fi(Te,`.msg-widget-${le}-${ue}`);for(const ut of Pt)ut.innerHTML=Ee});const Ve=Se("div",{class:"curtain"});_.append(Te),_.append(Ve),t(0,r.scrollTop=r.scrollHeight,r);const lt=_.getBoundingClientRect(),Ye=Te.getBoundingClientRect(),ct=Ye.top-lt.top,je=Ye.height+5;Object.assign(Ve.style,{top:`${ct}px`,height:`${je}px`,left:"0px",width:"100%"}),await B(100);for(let le=0;le<je;le+=5)Object.assign(Ve.style,{top:`${ct+le}px`,height:`${je-le}px`}),await B(120);Ve.remove()}const re=b=>Array.isArray(b)?b:b.trim().split(/\n/).map(Z=>Z.trim());async function pe(b,Z){return await F({from:"Arbiter",classes:["from-arbiter"],text:re(b),widgets:Z||{}})}async function be(b,Z){return await F({from:"Opponent",classes:["from-opponent"],text:b,widgets:Z||{}})}async function he(b,Z){return await F({from:`You${m}`,classes:["from-user"],text:re(b),widgets:Z||{}})}async function Le(){he(R||g),t(4,g="")}async function st(b,Z=!1){await F({from:"System",classes:["from-system-error"],text:re(b)}),Z&&(M=!0)}async function wt(b,Z){await F({from:"System",classes:["from-system-warn"],text:re(b),widgets:Z||{}})}function bt(b){b.addr?(t(5,d=!0),t(6,w=b.name),t(7,S=b.addr),m=w?` (${w})`:""):t(5,d=!1)}let K=[];function rt(b,Z){const ue=b.allowed_tokens[0];t(12,K=[Z?"restored":"signed",ue.slice(0,"secret12345".length),ue.slice(-5)])}let Fe=0;async function yt(){debugger;const b=Date.now();b-Fe>3e4&&(await G("sorry, you don't get to type :P"),await B(1600),await Pe(),Fe=b)}let ke;function Ke(b,Z){if(t(8,P=!0),ke){const ue=ke.getBoundingClientRect();Object.assign(ke.style,{position:"fixed",top:`${ue.top}px`,left:`${ue.left}px`})}t(3,v=""),Z&&setTimeout(()=>{ke&&ke.style.position&&Object.assign(ke.style,{position:"",top:"",left:""}),t(3,v=Z)},500),t(9,p=b)}function X(){t(8,P=!1),t(9,p=null)}Bt(()=>{h.addEventListener("keydown",()=>{yt()})});let I;async function se(){await B(100),I.classList.add("hover")}async function kt(){t(14,I.style.animation="0",I),await B(100),I.classList.remove("hover"),await B(1e3),t(14,I.style.animation="",I)}const vt=["k_killables"];Co.keys(e).forEach(b=>{!~vt.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&mi.warn(`<MessagePanel> was created with unknown prop '${b}'`)});function Be(b){Ce[b?"unshift":"push"](()=>{_=b,t(1,_)})}function St(b){Ce[b?"unshift":"push"](()=>{r=b,t(0,r)})}function it(b){Ce[b?"unshift":"push"](()=>{f=b,t(10,f)})}function Xe(b){Ce[b?"unshift":"push"](()=>{ke=b,t(13,ke)})}function xe(b){Ce[b?"unshift":"push"](()=>{I=b,t(14,I)})}function Dt(b){Ce[b?"unshift":"push"](()=>{h=b,t(2,h)})}return n.$$set=b=>{"k_killables"in b&&t(18,i=b.k_killables)},n.$capture_state=()=>({getContext:Lt,onMount:Bt,slide:En,blur:mt,fade:me,quadOut:An,Fa:qe,faUser:Ss,faWallet:Ps,faTicketAlt:Es,faPaperPlane:As,ode:Ue,timeout:B,dd:Se,qs:pn,qsa:fi,ys_lang:l,s_lang:a,k_panel:c,k_killables:i,dm_history:r,dm_history_data:_,dm_panel:h,s_cursor:y,s_evaluation:v,s_text:g,b_nav_display:d,s_nav_name:w,s_nav_addr:S,s_account_alias:m,b_submit_display:P,fk_submit:p,dm_cursor:f,i_iter:C,b_disabled:M,s_revealing:R,reveal_text:G,A_SPIN:O,s_spinner:H,i_spinning:J,i_spin:A,spinning:ne,clear:Pe,c_msgs:ae,receive:F,rerformat_lines:re,arbiter:pe,opponent:be,user:he,commit:Le,error:st,warn:wt,wallet:bt,a_permit_displays:K,permit:rt,dt_attempt_last:Fe,attempt_type:yt,dm_eval:ke,submittable:Ke,unsubmittable:X,dm_submit:I,mouseenter_submit:se,mouseleave_submit:kt}),n.$inject_state=b=>{"s_lang"in b&&(a=b.s_lang),"k_killables"in b&&t(18,i=b.k_killables),"dm_history"in b&&t(0,r=b.dm_history),"dm_history_data"in b&&t(1,_=b.dm_history_data),"dm_panel"in b&&t(2,h=b.dm_panel),"s_cursor"in b&&(y=b.s_cursor),"s_evaluation"in b&&t(3,v=b.s_evaluation),"s_text"in b&&t(4,g=b.s_text),"b_nav_display"in b&&t(5,d=b.b_nav_display),"s_nav_name"in b&&t(6,w=b.s_nav_name),"s_nav_addr"in b&&t(7,S=b.s_nav_addr),"s_account_alias"in b&&(m=b.s_account_alias),"b_submit_display"in b&&t(8,P=b.b_submit_display),"fk_submit"in b&&t(9,p=b.fk_submit),"dm_cursor"in b&&t(10,f=b.dm_cursor),"i_iter"in b&&(C=b.i_iter),"b_disabled"in b&&(M=b.b_disabled),"s_revealing"in b&&(R=b.s_revealing),"s_spinner"in b&&t(11,H=b.s_spinner),"i_spinning"in b&&(J=b.i_spinning),"i_spin"in b&&(A=b.i_spin),"c_msgs"in b&&(ae=b.c_msgs),"a_permit_displays"in b&&t(12,K=b.a_permit_displays),"dt_attempt_last"in b&&(Fe=b.dt_attempt_last),"dm_eval"in b&&t(13,ke=b.dm_eval),"dm_submit"in b&&t(14,I=b.dm_submit)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[r,_,h,v,g,d,w,S,P,p,f,H,K,ke,I,se,kt,c,i,Be,St,it,Xe,xe,Dt]}class gi extends _t{constructor(e){super(e);ft(this,e,To,Wn,dt,{k_panel:17,k_killables:18},null,[-1,-1]),L("SvelteRegisterComponent",{component:this,tagName:"MessagePanel",options:e,id:Wn.name});const{ctx:t}=this.$$,s=e.props||{};t[18]===void 0&&!("k_killables"in s)&&mi.warn("<MessagePanel> was created without expected prop 'k_killables'")}get k_panel(){return this.$$.ctx[17]}set k_panel(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_killables(){throw new Error("<MessagePanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_killables(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const wi="src/component/Prompt.svelte";function bi(n,e,t){const s=n.slice();return s[17]=e[t],s}function Hn(n){let e,t,s=n[0];de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=Gn(bi(n,s,c));const l=c=>Y(o[c],1,1,()=>{o[c]=null}),a={c:function(){for(let i=0;i<o.length;i+=1)o[i].c();e=Yt()},m:function(i,r){for(let _=0;_<o.length;_+=1)o[_].m(i,r);Q(i,e,r),t=!0},p:function(i,r){if(r&9){s=i[0],de(s);let _;for(_=0;_<s.length;_+=1){const h=bi(i,s,_);o[_]?(o[_].p(h,r),N(o[_],1)):(o[_]=Gn(h),o[_].c(),N(o[_],1),o[_].m(e.parentNode,e))}for(We(),_=s.length;_<o.length;_+=1)l(_);He()}},i:function(i){if(!t){for(let r=0;r<s.length;r+=1)N(o[r]);t=!0}},o:function(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)Y(o[r]);t=!1},d:function(i){et(o,i),i&&W(e)}};return L("SvelteRegisterBlock",{block:a,id:Hn.name,type:"if",source:"(122:1) {#if b_display}",ctx:n}),a}function Gn(n){let e,t=n[17].label+"",s,o,l,a,c,i,r,_;function h(){return n[5](n[17])}const y={c:function(){e=j("button"),s=fe(t),o=D(),E(e,"class",l="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"),E(e,"alt",a=n[17].alt||""),q(e,wi,123,3,2717)},m:function(g,d){Q(g,e,d),k(e,s),k(e,o),i=!0,r||(_=Ne(e,"click",h,!1,!1,!1),r=!0)},p:function(g,d){n=g,(!i||d&1)&&t!==(t=n[17].label+"")&&Ie(s,t),(!i||d&1&&l!==(l="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"))&&E(e,"class",l),(!i||d&1&&a!==(a=n[17].alt||""))&&E(e,"alt",a)},i:function(g){i||(Ze(()=>{c||(c=ge(e,me,{duration:3200,easing:$e},!0)),c.run(1)}),i=!0)},o:function(g){c||(c=ge(e,me,{duration:3200,easing:$e},!1)),c.run(0),i=!1},d:function(g){g&&W(e),g&&c&&c.end(),r=!1,_()}};return L("SvelteRegisterBlock",{block:y,id:Gn.name,type:"each",source:"(123:2) {#each a_opts as g_opt}",ctx:n}),y}function Fn(n){let e,t,s=n[1]&&Hn(n);const o={c:function(){e=j("div"),s&&s.c(),E(e,"class","prompt s-c0715tBQdWx2"),z(e,"showing",n[2]),q(e,wi,120,0,2624)},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){Q(a,e,c),s&&s.m(e,null),t=!0},p:function(a,[c]){a[1]?s?(s.p(a,c),c&2&&N(s,1)):(s=Hn(a),s.c(),N(s,1),s.m(e,null)):s&&(We(),Y(s,1,1,()=>{s=null}),He()),c&4&&z(e,"showing",a[2])},i:function(a){t||(N(s),t=!0)},o:function(a){Y(s),t=!1},d:function(a){a&&W(e),s&&s.d()}};return L("SvelteRegisterBlock",{block:o,id:Fn.name,type:"component",source:"",ctx:n}),o}function jo(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("Prompt",s,[]);const l={ok:P,opts:p,yes:m,yes_no:S},a={key:"yes",label:"Yes"},c={key:"no",label:"No"},i=[a,c],r=()=>{},_=M=>{M()};let h=[],y=!1,v=!1,g=r;function d(M){g(M),t(1,y=!1)}function w(M,R=_){return new Promise(G=>{g=O=>{R(G,O),t(1,y=!1)},t(0,h=M),t(1,y=!0),queueMicrotask(()=>{t(2,v=!0)})})}function S(){return w(i,(M,R)=>{M(R.key==="yes")})}function m(){return w([a])}function P(M="Ok"){return w([{key:"ok",label:M}])}function p(M){return w(ti(M,(R,G)=>At({key:R},G)),(R,G)=>{R(G.key)})}const f=[];Object.keys(e).forEach(M=>{!~f.indexOf(M)&&M.slice(0,2)!=="$$"&&M!=="slot"&&console.warn(`<Prompt> was created with unknown prop '${M}'`)});const C=M=>d(M);return n.$capture_state=()=>({oderac:ti,quadInOut:$e,fade:me,k_prompt:l,G_ANS_YES:a,G_ANS_NO:c,A_OPTS_YES_NO:i,F_NOOP:r,F_CALL:_,a_opts:h,b_display:y,b_showing:v,fk_answer:g,answer:d,prompt:w,yes_no:S,yes:m,ok:P,opts:p}),n.$inject_state=M=>{"a_opts"in M&&t(0,h=M.a_opts),"b_display"in M&&t(1,y=M.b_display),"b_showing"in M&&t(2,v=M.b_showing),"fk_answer"in M&&(g=M.fk_answer)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[h,y,v,d,l,C]}class yi extends _t{constructor(e){super(e);ft(this,e,jo,Fn,dt,{k_prompt:4}),L("SvelteRegisterComponent",{component:this,tagName:"Prompt",options:e,id:Fn.name})}get k_prompt(){return this.$$.ctx[4]}set k_prompt(e){throw new Error("<Prompt>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const tt="src/component/Assertion.svelte";function ki(n,e,t){const s=n.slice();return s[15]=e[t],s}function vi(n,e,t){const s=n.slice();return s[18]=e[t],s}function Si(n,e,t){const s=n.slice();return s[15]=e[t],s}function Pi(n,e,t){const s=n.slice();return s[18]=e[t],s}function Ei(n,e,t){const s=n.slice();return s[27]=e[t],s}function zn(n){let e,t,s,o,l,a,c,i,r,_,h=Ft;de(h);let y=[];for(let m=0;m<h.length;m+=1)y[m]=Jn(Ei(n,h,m));let v=n[7];de(v);let g=[];for(let m=0;m<v.length;m+=1)g[m]=Xn(Si(n,v,m));let d=n[7];de(d);let w=[];for(let m=0;m<d.length;m+=1)w[m]=Vn(ki(n,d,m));const S={c:function(){e=j("div"),t=j("span");for(let P=0;P<y.length;P+=1)y[P].c();o=D(),l=j("span");for(let P=0;P<g.length;P+=1)g[P].c();c=D(),i=j("span");for(let P=0;P<w.length;P+=1)w[P].c();E(t,"class","tab-wrap s-WG7syJ6nmWd-"),q(t,tt,206,2,5169),E(e,"class","tx-basis s-WG7syJ6nmWd-"),q(e,tt,205,1,5092),E(l,"class","diamond tx-colors s-WG7syJ6nmWd-"),q(l,tt,215,1,5445),E(i,"class","diamond tx-shapes s-WG7syJ6nmWd-"),q(i,tt,234,1,6008)},m:function(P,p){Q(P,e,p),k(e,t);for(let f=0;f<y.length;f+=1)y[f].m(t,null);Q(P,o,p),Q(P,l,p);for(let f=0;f<g.length;f+=1)g[f].m(l,null);Q(P,c,p),Q(P,i,p);for(let f=0;f<w.length;f+=1)w[f].m(i,null);_=!0},p:function(P,p){if(n=P,p&42){h=Ft,de(h);let f;for(f=0;f<h.length;f+=1){const C=Ei(n,h,f);y[f]?y[f].p(C,p):(y[f]=Jn(C),y[f].c(),y[f].m(t,null))}for(;f<y.length;f+=1)y[f].d(1);y.length=h.length}if(p&204){v=n[7],de(v);let f;for(f=0;f<v.length;f+=1){const C=Si(n,v,f);g[f]?g[f].p(C,p):(g[f]=Xn(C),g[f].c(),g[f].m(l,null))}for(;f<g.length;f+=1)g[f].d(1);g.length=v.length}if(p&196){d=n[7],de(d);let f;for(f=0;f<d.length;f+=1){const C=ki(n,d,f);w[f]?w[f].p(C,p):(w[f]=Vn(C),w[f].c(),w[f].m(i,null))}for(;f<w.length;f+=1)w[f].d(1);w.length=d.length}},i:function(P){_||(Ze(()=>{s||(s=ge(e,me,{duration:3600,easing:$e},!0)),s.run(1)}),Ze(()=>{a||(a=ge(l,me,{delay:2400,duration:3200,easing:Xt},!0)),a.run(1)}),Ze(()=>{r||(r=ge(i,me,{delay:3200,duration:3200,easing:Xt},!0)),r.run(1)}),_=!0)},o:function(P){s||(s=ge(e,me,{duration:3600,easing:$e},!1)),s.run(0),a||(a=ge(l,me,{delay:2400,duration:3200,easing:Xt},!1)),a.run(0),r||(r=ge(i,me,{delay:3200,duration:3200,easing:Xt},!1)),r.run(0),_=!1},d:function(P){P&&W(e),et(y,P),P&&s&&s.end(),P&&W(o),P&&W(l),et(g,P),P&&a&&a.end(),P&&W(c),P&&W(i),et(w,P),P&&r&&r.end()}};return L("SvelteRegisterBlock",{block:S,id:zn.name,type:"if",source:"(205:0) {#if b_visible}",ctx:n}),S}function Jn(n){let e,t=ye(Gt[n[27]].describe[n[3]](""))+"",s,o,l,a;const c={c:function(){e=j("span"),s=fe(t),o=D(),E(e,"class","active tab s-WG7syJ6nmWd-"),E(e,"data-basis",n[27]),z(e,"active",n[27]===n[1]),q(e,tt,208,4,5228)},m:function(r,_){Q(r,e,_),k(e,s),k(e,o),l||(a=Ne(e,"click",n[5],!1,!1,!1),l=!0)},p:function(r,_){_&8&&t!==(t=ye(Gt[r[27]].describe[r[3]](""))+"")&&Ie(s,t),_&2&&z(e,"active",r[27]===r[1])},d:function(r){r&&W(e),l=!1,a()}};return L("SvelteRegisterBlock",{block:c,id:Jn.name,type:"each",source:"(208:3) {#each A_BASES as si_basis}",ctx:n}),c}function Ai(n){const e={c:we,m:we,p:we,d:we};return L("SvelteRegisterBlock",{block:e,id:Ai.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Ci(n){let e,t,s=ye(Ct[n[26]].labels[n[3]])+"",o,l,a;const c={c:function(){e=j("button"),t=j("span"),o=fe(s),E(t,"class","s-WG7syJ6nmWd-"),q(t,tt,226,7,5875),E(e,"class","diamond-"+n[18].pos+" color-"+n[26]+" s-WG7syJ6nmWd-"),E(e,"data-quality","color:"+n[26]),z(e,"selected",`color:${n[26]}`===n[2]),q(e,tt,220,6,5669)},m:function(r,_){Q(r,e,_),k(e,t),k(t,o),l||(a=Ne(e,"click",n[6],!1,!1,!1),l=!0)},p:function(r,_){_&8&&s!==(s=ye(Ct[r[26]].labels[r[3]])+"")&&Ie(o,s),_&132&&z(e,"selected",`color:${r[26]}`===r[2])},d:function(r){r&&W(e),l=!1,a()}};return L("SvelteRegisterBlock",{block:c,id:Ci.name,type:"then",source:'(220:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function Ti(n){const e={c:we,m:we,p:we,d:we};return L("SvelteRegisterBlock",{block:e,id:Ti.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Kn(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Ti,then:Ci,catch:Ai,value:26};js(cn[n[18].key],t);const s={c:function(){e=Yt(),t.block.c()},m:function(l,a){Q(l,e,a),t.block.m(l,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(l,a){n=l,qs(t,n,a)},d:function(l){l&&W(e),t.block.d(l),t.token=null,t=null}};return L("SvelteRegisterBlock",{block:s,id:Kn.name,type:"each",source:"(219:4) {#each a_group as g_loc}",ctx:n}),s}function Xn(n){let e,t,s=n[15];de(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=Kn(Pi(n,s,a));const l={c:function(){e=j("span");for(let c=0;c<o.length;c+=1)o[c].c();t=D(),E(e,"class","s-WG7syJ6nmWd-"),q(e,tt,217,3,5579)},m:function(c,i){Q(c,e,i);for(let r=0;r<o.length;r+=1)o[r].m(e,null);k(e,t)},p:function(c,i){if(i&204){s=c[15],de(s);let r;for(r=0;r<s.length;r+=1){const _=Pi(c,s,r);o[r]?o[r].p(_,i):(o[r]=Kn(_),o[r].c(),o[r].m(e,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d:function(c){c&&W(e),et(o,c)}};return L("SvelteRegisterBlock",{block:l,id:Xn.name,type:"each",source:"(217:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),l}function ji(n){const e={c:we,m:we,p:we,d:we};return L("SvelteRegisterBlock",{block:e,id:ji.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function qi(n){let e,t,s=Ht[n[21]].symbol+"",o,l,a;const c={c:function(){e=j("button"),t=j("span"),o=fe(s),E(t,"class","s-WG7syJ6nmWd-"),q(t,tt,245,7,6440),E(e,"class","diamond-"+n[18].pos+" bg-rad-"+n[18].pos+" s-WG7syJ6nmWd-"),E(e,"data-quality","shape:"+n[21]),z(e,"selected",`shape:${n[21]}`===n[2]),q(e,tt,239,6,6232)},m:function(r,_){Q(r,e,_),k(e,t),k(t,o),l||(a=Ne(e,"click",n[6],!1,!1,!1),l=!0)},p:function(r,_){_&132&&z(e,"selected",`shape:${r[21]}`===r[2])},d:function(r){r&&W(e),l=!1,a()}};return L("SvelteRegisterBlock",{block:c,id:qi.name,type:"then",source:'(239:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function Ii(n){const e={c:we,m:we,p:we,d:we};return L("SvelteRegisterBlock",{block:e,id:Ii.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function xn(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Ii,then:qi,catch:ji,value:21};js(un[n[18].key],t);const s={c:function(){e=Yt(),t.block.c()},m:function(l,a){Q(l,e,a),t.block.m(l,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(l,a){n=l,qs(t,n,a)},d:function(l){l&&W(e),t.block.d(l),t.token=null,t=null}};return L("SvelteRegisterBlock",{block:s,id:xn.name,type:"each",source:"(238:4) {#each a_group as g_loc}",ctx:n}),s}function Vn(n){let e,t,s=n[15];de(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=xn(vi(n,s,a));const l={c:function(){e=j("span");for(let c=0;c<o.length;c+=1)o[c].c();t=D(),E(e,"class","s-WG7syJ6nmWd-"),q(e,tt,236,3,6142)},m:function(c,i){Q(c,e,i);for(let r=0;r<o.length;r+=1)o[r].m(e,null);k(e,t)},p:function(c,i){if(i&196){s=c[15],de(s);let r;for(r=0;r<s.length;r+=1){const _=vi(c,s,r);o[r]?o[r].p(_,i):(o[r]=xn(_),o[r].c(),o[r].m(e,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=s.length}},d:function(c){c&&W(e),et(o,c)}};return L("SvelteRegisterBlock",{block:l,id:Vn.name,type:"each",source:"(236:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),l}function Zn(n){let e,t,s=n[0]&&zn(n);const o={c:function(){s&&s.c(),e=Yt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),Q(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&N(s,1)):(s=zn(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(We(),Y(s,1,1,()=>{s=null}),He())},i:function(a){t||(N(s),t=!0)},o:function(a){Y(s),t=!1},d:function(a){s&&s.d(a),a&&W(e)}};return L("SvelteRegisterBlock",{block:o,id:Zn.name,type:"component",source:"",ctx:n}),o}function qo(n,e,t){let s,{$$slots:o={},$$scope:l}=e;ht("Assertion",o,[]);const a={show:y,hide:v},c=at(),i=Lt("game");let r=i.language;lo(r,"yw_lang"),co(n,r,f=>t(3,s=f));let _=!1,h="";async function y(f){h=f||"",f&&(t(1,g=f),c("basis",g)),t(0,_=!0)}function v(){t(0,_=!1)}let g=Ft[0],d=null;const w=(f,C)=>f.closest(`[data-${C}]`).getAttribute(`data-${C}`);function S(f){const C=w(f.target,"basis");h&&C!==h||(t(1,g=C),c("basis",g))}function m(f){t(2,d=w(f.target,"quality")),c("quality",d)}const P=[[{key:0,pos:"top"},{key:2,pos:"rgt"}],[{key:1,pos:"lft"},{key:3,pos:"btm"}]],p=[];return Object.keys(e).forEach(f=>{!~p.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Assertion> was created with unknown prop '${f}'`)}),n.$capture_state=()=>({getContext:Lt,createEventDispatcher:at,fade:me,expoOut:Xt,quadInOut:$e,proper:ye,A_BASES:Ft,A_COLORS:cn,A_SHAPES:un,H_BASES:Gt,H_COLORS:Ct,H_SHAPES:Ht,k_tx:a,dispatch:c,g_game:i,yw_lang:r,b_visible:_,si_basis_force:h,show:y,hide:v,si_basis_active:g,si_quality:d,data:w,select_basis:S,select_quality:m,A_DIAMOND_KEYS:P,$yw_lang:s}),n.$inject_state=f=>{"yw_lang"in f&&t(4,r=f.yw_lang),"b_visible"in f&&t(0,_=f.b_visible),"si_basis_force"in f&&(h=f.si_basis_force),"si_basis_active"in f&&t(1,g=f.si_basis_active),"si_quality"in f&&t(2,d=f.si_quality)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[_,g,d,s,r,S,m,P,a]}class Ri extends _t{constructor(e){super(e);ft(this,e,qo,Zn,dt,{k_tx:8}),L("SvelteRegisterComponent",{component:this,tagName:"Assertion",options:e,id:Zn.name})}get k_tx(){return this.$$.ctx[8]}set k_tx(e){throw new Error("<Assertion>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Oi(n,e){const t=new uo(39,39,3.3,128,1),s=[new Is({color:"red"}),new _o({map:n,bumpMap:e,bumpScale:Math.random()*.2+.2}),new Is({map:n})];{const r=new fo;for(var o=0;o<16;o++){var l=(o+1)/16,a=l*Math.PI*2,c=10*Math.cos(a),i=10*Math.sin(a);o==0?r.moveTo(c,i):r.lineTo(c,i)}return new ho(t,s)}}const $n=Math.PI,Io=$n*2,es=Math.sqrt(3);function bn(n,e,t,s,o){const l=new Path2D;switch(o){case"triangle":{const a=Math.sqrt(t*es),c=es*.5*a,i=a*es/6,r=i/3;l.moveTo(e,e-(c-i)+r),l.lineTo(e+a/2,e+i+r),l.lineTo(e-a/2,e+i+r);break}case"square":{const a=Math.sqrt(t),c=e-a*.5;l.moveTo(c,c),l.lineTo(c+a,c),l.lineTo(c+a,c+a),l.lineTo(c,c+a);break}case"circle":{const a=Math.sqrt(t/$n);l.ellipse(e,e,a,a,0,0,Io);break}case"star":{const a=$n/5,c=Math.sqrt(2*t/(5*Math.sin(a)));let i=-1.5*a;l.moveTo(e,e-c);for(let r=0;r<9;r++){const _=c*((r%2+1)/2);l.lineTo(e+_*Math.cos(i),e+_*Math.sin(i)),i+=a}break}}l.closePath(),n.fillStyle=Ct[s].color,n.fill(l),n.globalAlpha=1,n.strokeStyle="black",n.lineWidth=Math.round(Math.sqrt(t)/50),n.stroke(l)}const Ro="src/component/Scene.svelte";function ts(n){let e;const t={c:function(){e=j("div"),E(e,"class","s-O3-AoQkAZcdH"),q(e,Ro,244,0,8367)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,l){Q(o,e,l),n[2](e)},p:we,i:we,o:we,d:function(o){o&&W(e),n[2](null)}};return L("SvelteRegisterBlock",{block:t,id:ts.name,type:"component",source:"",ctx:n}),t}function Oo(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("Scene",s,[]);const l=Math.PI,a=l*2,c=Math.sqrt(3);let{k_scene:i}=e,r;async function _(d){const w={},S=new Us;for(const m in d){const P=d[m];w[m]=await new Promise(p=>{S.load(P,f=>{p(f)})})}return w}function h(d){const w=d.image,S=Se("canvas",{width:w.width,height:w.height}),m=S.getContext("2d");return[S,m,w]}let y;Bt(async()=>{t(1,i={animate_chip_entry:H,animate_chip_exit:J}),y=await _({chip:"/asset/chip.png",chip_displace:"/asset/chip-displacement.png",scuffs:"/asset/scuffs.png"});let d=y.chip,w=y.scuffs;{const[A,ne,Pe]=h(y.scuffs),ae=A.width,F=A.height,re=Math.random()*a;ne.save();const pe=ae/2,be=F/2;ne.translate(pe,be),ne.rotate(re),ne.scale(Math.SQRT2,Math.SQRT2),ne.drawImage(Pe,-pe,-be),ne.restore(),w=new Cn(A)}const S=new Rs({antialias:!0}),m=pn(document.body,".msg-panel").getBoundingClientRect(),P=window.innerWidth,p=Math.max(400,Math.min(800,window.innerHeight-m.bottom));if(S.setSize(P,p),!r)return;r.appendChild(S.domElement);const f=P/p,C=new Ms,M=new Ns(45,f,1,5e3);M.position.set(0,0,140),M.lookAt(0,0,0);let R;{const A=new Os(3158064);C.add(A)}{const A=new Ds;A.position.set(0,100,50),A.decay=2.5,A.angle=Math.PI/9,A.penumbra=.9,C.add(A)}function G(){S.render(C,M)}S.setAnimationLoop(()=>{G(),Ls()});function O(A,ne){const[Pe,ae,F]=h(y.chip),re=F.width;F.height,ae.drawImage(F,0,0);const pe=re/2,be=Math.pow(pe*(2/9),2)*l;bn(ae,pe,be,A,ne),d=new Cn(Pe),R=Oi(d,w),C.add(R)}async function H(A,ne){O(A,ne),R.position.y=8e5,R.visible=!0,new It(new xt(-780,-2450,-3e3)).to(new xt(0,0,0),4e3).easing(Rt.Cubic.Out).onUpdate(re=>{R.position.setX(re.x),R.position.setZ(re.z)}).start(),new It({y:750}).to({y:0},4e3).easing(Rt.Back.Out).onUpdate(({y:re})=>{R.position.setY(re)}).start(),new It(new Vt(0,0,0)).to(new Vt(0,l/2,l/2-l/6),4e3).easing(Rt.Cubic.Out).onUpdate(re=>{R.rotation.set(re.x,re.y,re.z)}).start()}async function J(){new It(new xt(0,0,0)).to(new xt(-780,-2450,-3e3),4e3).easing(Rt.Cubic.Out).onUpdate(ae=>{R.position.setX(ae.x),R.position.setZ(ae.z)}).start(),new It({y:0}).to({y:750},4e3).easing(Rt.Back.Out).onUpdate(({y:ae})=>{R.position.setY(ae)}).start(),new It(new Vt(0,l/2,l/2-l/6)).to(new Vt(0,0,0),4e3).easing(Rt.Cubic.Out).onUpdate(ae=>{R.rotation.set(ae.x,ae.y,ae.z)}).start(),await B(4e3),R.visible=!0}});const v=["k_scene"];Object.keys(e).forEach(d=>{!~v.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Scene> was created with unknown prop '${d}'`)});function g(d){Ce[d?"unshift":"push"](()=>{r=d,t(0,r)})}return n.$$set=d=>{"k_scene"in d&&t(1,i=d.k_scene)},n.$capture_state=()=>({onMount:Bt,chip:Oi,AmbientLight:Os,Scene:Ms,PerspectiveCamera:Ns,WebGLRenderer:Rs,Vector3:xt,TextureLoader:Us,SpotLight:Ds,Euler:Vt,CanvasTexture:Cn,Tween:It,Easing:Rt,updateTween:Ls,timeout:B,dd:Se,qs:pn,draw_shape:bn,X_PI:l,X_2PI:a,X_SQRT_3:c,k_scene:i,dm_container:r,load_textures:_,canvas_from_tex:h,h_textures:y}),n.$inject_state=d=>{"k_scene"in d&&t(1,i=d.k_scene),"dm_container"in d&&t(0,r=d.dm_container),"h_textures"in d&&(y=d.h_textures)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[r,i,g]}class Mi extends _t{constructor(e){super(e);ft(this,e,Oo,ts,dt,{k_scene:1}),L("SvelteRegisterComponent",{component:this,tagName:"Scene_1",options:e,id:ts.name});const{ctx:t}=this.$$,s=e.props||{};t[1]===void 0&&!("k_scene"in s)&&console.warn("<Scene> was created without expected prop 'k_scene'")}get k_scene(){throw new Error("<Scene>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_scene(e){throw new Error("<Scene>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const yn="src/component/PremiseWidget.svelte";function Ni(n,e,t){const s=n.slice();return s[14]=e[t][0],s[15]=e[t][1],s[17]=t,s}function ns(n){let e,t,s,o,l,a=n[15].label+"",c,i,r,_,h,y,v;s=new qe({props:{icon:n[15].icon},$$inline:!0});function g(){return n[9](n[14])}const d={c:function(){e=j("span"),t=j("span"),Re(s.$$.fragment),o=D(),l=j("span"),c=fe(a),i=D(),E(t,"class","truth-opt-icon s-6n-w-T5otbqJ"),q(t,yn,158,3,4045),E(l,"class","truth-opt-text s-6n-w-T5otbqJ"),q(l,yn,161,3,4117),E(e,"class",r="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"),E(e,"data-opt",_=n[14]),z(e,"selected",n[14]===n[2]),z(e,"undeniable",n[0]==="undeniable"),z(e,"true",n[0]==="true"),z(e,"verified",n[0]==="verified"),q(e,yn,149,2,3714)},m:function(S,m){Q(S,e,m),k(e,t),Oe(s,t,null),k(e,o),k(e,l),k(l,c),k(e,i),h=!0,y||(v=Ne(e,"click",g,!1,!1,!1),y=!0)},p:function(S,m){n=S;const P={};m&2&&(P.icon=n[15].icon),s.$set(P),(!h||m&2)&&a!==(a=n[15].label+"")&&Ie(c,a),(!h||m&16&&r!==(r="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"))&&E(e,"class",r),(!h||m&2&&_!==(_=n[14]))&&E(e,"data-opt",_),m&22&&z(e,"selected",n[14]===n[2]),m&17&&z(e,"undeniable",n[0]==="undeniable"),m&17&&z(e,"true",n[0]==="true"),m&17&&z(e,"verified",n[0]==="verified")},i:function(S){h||(N(s.$$.fragment,S),h=!0)},o:function(S){Y(s.$$.fragment,S),h=!1},d:function(S){S&&W(e),Me(s),y=!1,v()}};return L("SvelteRegisterBlock",{block:d,id:ns.name,type:"each",source:"(149:1) {#each a_opts as [si_opt, g_opt], i_opt}",ctx:n}),d}function ss(n){let e,t,s=n[1];de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=ns(Ni(n,s,c));const l=c=>Y(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=j("span");for(let i=0;i<o.length;i+=1)o[i].c();E(e,"class","truth s-6n-w-T5otbqJ"),z(e,"known",!!n[0]),q(e,yn,147,0,3603)},l:function(i){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,r){Q(i,e,r);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[10](e),t=!0},p:function(i,[r]){if(r&55){s=i[1],de(s);let _;for(_=0;_<s.length;_+=1){const h=Ni(i,s,_);o[_]?(o[_].p(h,r),N(o[_],1)):(o[_]=ns(h),o[_].c(),N(o[_],1),o[_].m(e,null))}for(We(),_=s.length;_<o.length;_+=1)l(_);He()}r&1&&z(e,"known",!!i[0])},i:function(i){if(!t){for(let r=0;r<s.length;r+=1)N(o[r]);t=!0}},o:function(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)Y(o[r]);t=!1},d:function(i){i&&W(e),et(o,i),n[10](null)}};return L("SvelteRegisterBlock",{block:a,id:ss.name,type:"component",source:"",ctx:n}),a}function Mo(n,e,t){let s,{$$slots:o={},$$scope:l}=e;ht("PremiseWidget",o,[]);const a={ignore:{label:"Ignore",icon:Ys},trust:{label:"Trust",icon:ln},distrust:{label:"Distrust",icon:Bs}};let c=Ue(a),{b_mode_nobody:i}=e,{si_assertion:r}=e,{si_known:_}=e;const h={apply(p){return y(p)}};let y=p=>p,v="ignore",g;const d=at();function w(p){v!==p&&(t(2,v=p),i?y=f=>v==="trust"?f.nobody(r):v==="distrust"?f.opponent(r,!0):f:y=f=>v==="trust"?f.opponent(r,!0):v==="distrust"?f.opponent(r,!1):f,d("change",p))}const S=["b_mode_nobody","si_assertion","si_known"];Object.keys(e).forEach(p=>{!~S.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<PremiseWidget> was created with unknown prop '${p}'`)});const m=p=>w(p);function P(p){Ce[p?"unshift":"push"](()=>{g=p,t(3,g)})}return n.$$set=p=>{"b_mode_nobody"in p&&t(6,i=p.b_mode_nobody),"si_assertion"in p&&t(7,r=p.si_assertion),"si_known"in p&&t(0,_=p.si_known)},n.$capture_state=()=>({createEventDispatcher:at,Fa:qe,faCheckCircle:ln,faTimesCircle:Bs,faDotCircle:Ys,faEgg:Qs,faCheck:Tn,ode:Ue,proper:ye,H_OPTS:a,a_opts:c,b_mode_nobody:i,si_assertion:r,si_known:_,k_premise:h,f_apply:y,si_belief:v,dm_truth:g,dispatch:d,select_opt:w,nl_opts:s}),n.$inject_state=p=>{"a_opts"in p&&t(1,c=p.a_opts),"b_mode_nobody"in p&&t(6,i=p.b_mode_nobody),"si_assertion"in p&&t(7,r=p.si_assertion),"si_known"in p&&t(0,_=p.si_known),"f_apply"in p&&(y=p.f_apply),"si_belief"in p&&t(2,v=p.si_belief),"dm_truth"in p&&t(3,g=p.dm_truth),"nl_opts"in p&&t(4,s=p.nl_opts)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&_&&t(1,c=Ue({ignore:{label:ye(_),icon:{undeniable:Qs,true:Tn,verified:Tn}[_]}})),n.$$.dirty&2&&t(4,s=c.length)},[_,c,v,g,s,w,i,r,h,m,P]}class nn extends _t{constructor(e){super(e);ft(this,e,Mo,ss,dt,{b_mode_nobody:6,si_assertion:7,si_known:0,k_premise:8}),L("SvelteRegisterComponent",{component:this,tagName:"PremiseWidget",options:e,id:ss.name});const{ctx:t}=this.$$,s=e.props||{};t[6]===void 0&&!("b_mode_nobody"in s)&&console.warn("<PremiseWidget> was created without expected prop 'b_mode_nobody'"),t[7]===void 0&&!("si_assertion"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_assertion'"),t[0]===void 0&&!("si_known"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_known'")}get b_mode_nobody(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set b_mode_nobody(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_assertion(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_assertion(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_known(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_known(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_premise(){return this.$$.ctx[8]}set k_premise(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const De="src/component/Decision.svelte";function Ui(n,e,t){const s=n.slice();return s[20]=e[t],s}function Di(n,e,t){const s=n.slice();return s[20]=e[t],s}function is(n){let e,t,s,o,l,a,c,i,r,_,h,y,v,g,d,w,S,m,P,p,f=n[3];de(f);let C=[];for(let O=0;O<f.length;O+=1)C[O]=os(Di(n,f,O));let M=n[2];de(M);let R=[];for(let O=0;O<M.length;O+=1)R[O]=as(Ui(n,M,O));const G={c:function(){e=j("div"),t=j("div"),s=j("div"),o=j("button"),o.textContent="Abstain",l=D(),a=j("div"),c=j("span"),c.textContent="Arbiter's bag:",i=D(),r=j("span"),_=j("span");for(let H=0;H<C.length;H+=1)C[H].c();h=D(),y=j("div"),v=j("span"),v.textContent="Opponent's chip:",g=D(),d=j("span"),w=j("span");for(let H=0;H<R.length;H+=1)R[H].c();E(o,"class","s-UQAPz40uou8M"),q(o,De,220,4,7343),E(s,"class","decision-abstain s-UQAPz40uou8M"),z(s,"selected",n[4]===n[1]),q(s,De,219,3,7258),E(c,"class","decision-opts-row-title s-UQAPz40uou8M"),q(c,De,225,4,7479),E(_,"class","decision-opts-row-view-data s-UQAPz40uou8M"),q(_,De,229,5,7597),E(r,"class","decision-opts-row-view s-UQAPz40uou8M"),q(r,De,228,4,7554),E(a,"class","decision-opts-row s-UQAPz40uou8M"),E(a,"data-target","bag"),q(a,De,224,3,7425),E(v,"class","decision-opts-row-title s-UQAPz40uou8M"),q(v,De,243,4,7990),E(w,"class","decision-opts-row-view-data s-UQAPz40uou8M"),q(w,De,247,5,8110),E(d,"class","decision-opts-row-view s-UQAPz40uou8M"),q(d,De,246,4,8067),E(y,"class","decision-opts-row s-UQAPz40uou8M"),E(y,"data-target","opponent"),q(y,De,242,3,7931),E(t,"class","decision-opts s-UQAPz40uou8M"),q(t,De,218,2,7227),E(e,"class","decision s-UQAPz40uou8M"),z(e,"staged",!!n[1]),q(e,De,214,1,7028)},m:function(H,J){Q(H,e,J),k(e,t),k(t,s),k(s,o),k(t,l),k(t,a),k(a,c),k(a,i),k(a,r),k(r,_);for(let A=0;A<C.length;A+=1)C[A].m(_,null);k(t,h),k(t,y),k(y,v),k(y,g),k(y,d),k(d,w);for(let A=0;A<R.length;A+=1)R[A].m(w,null);m=!0,P||(p=Ne(o,"click",n[10],!1,!1,!1),P=!0)},p:function(H,J){if(n=H,J&18&&z(s,"selected",n[4]===n[1]),J&170){f=n[3],de(f);let A;for(A=0;A<f.length;A+=1){const ne=Di(n,f,A);C[A]?C[A].p(ne,J):(C[A]=os(ne),C[A].c(),C[A].m(_,null))}for(;A<C.length;A+=1)C[A].d(1);C.length=f.length}if(J&166){M=n[2],de(M);let A;for(A=0;A<M.length;A+=1){const ne=Ui(n,M,A);R[A]?R[A].p(ne,J):(R[A]=as(ne),R[A].c(),R[A].m(w,null))}for(;A<R.length;A+=1)R[A].d(1);R.length=M.length}J&2&&z(e,"staged",!!n[1])},i:function(H){m||(Ze(()=>{S||(S=ge(e,me,{duration:3600,easing:$e},!0)),S.run(1)}),m=!0)},o:function(H){S||(S=ge(e,me,{duration:3600,easing:$e},!1)),S.run(0),m=!1},d:function(H){H&&W(e),et(C,H),et(R,H),H&&S&&S.end(),P=!1,p()}};return L("SvelteRegisterBlock",{block:G,id:is.name,type:"if",source:"(214:0) {#if b_visible}",ctx:n}),G}function os(n){let e,t,s=n[7](n[20])+"",o,l,a;function c(){return n[11](n[20])}const i={c:function(){e=j("span"),t=new Hs,o=D(),t.a=o,E(e,"class","decision-opt s-UQAPz40uou8M"),z(e,"selected",n[20]===n[1]),q(e,De,231,7,7681)},m:function(_,h){Q(_,e,h),t.m(s,e),k(e,o),l||(a=Ne(e,"click",c,!1,!1,!1),l=!0)},p:function(_,h){n=_,h&8&&s!==(s=n[7](n[20])+"")&&t.p(s),h&10&&z(e,"selected",n[20]===n[1])},d:function(_){_&&W(e),l=!1,a()}};return L("SvelteRegisterBlock",{block:i,id:os.name,type:"each",source:"(231:6) {#each a_opts_arb as k_opt}",ctx:n}),i}function as(n){let e,t,s=n[7](n[20])+"",o,l,a,c,i;function r(){return n[12](n[20])}const _={c:function(){e=j("span"),t=new Hs,o=D(),l=j("img"),a=D(),t.a=o,Ws(l,"display","none"),E(l,"alt","hidden"),E(l,"class","s-UQAPz40uou8M"),q(l,De,255,8,8390),E(e,"class","decision-opt s-UQAPz40uou8M"),z(e,"selected",n[20]===n[1]),q(e,De,249,7,8194)},m:function(y,v){Q(y,e,v),t.m(s,e),k(e,o),k(e,l),k(e,a),c||(i=Ne(e,"click",r,!1,!1,!1),c=!0)},p:function(y,v){n=y,v&4&&s!==(s=n[7](n[20])+"")&&t.p(s),v&6&&z(e,"selected",n[20]===n[1])},d:function(y){y&&W(e),c=!1,i()}};return L("SvelteRegisterBlock",{block:_,id:as.name,type:"each",source:"(249:6) {#each a_opts_opp as k_opt}",ctx:n}),_}function rs(n){let e,t,s=n[0]&&is(n);const o={c:function(){s&&s.c(),e=Yt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),Q(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&N(s,1)):(s=is(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(We(),Y(s,1,1,()=>{s=null}),He())},i:function(a){t||(N(s),t=!0)},o:function(a){Y(s),t=!1},d:function(a){s&&s.d(a),a&&W(e)}};return L("SvelteRegisterBlock",{block:o,id:rs.name,type:"component",source:"",ctx:n}),o}class No{constructor(e,t){this._si_color=e,this._si_shape=t}get color(){return this._si_color}get shape(){return this._si_shape}}function Uo(n,e,t){let s,o,{$$slots:l={},$$scope:a}=e;ht("Decision",l,[]);const c={show:v,hide:g};let{k_deduced:i}=e;const r=at(),_=Lt("game");let h=_.language,y=!1;async function v(){t(0,y=!0)}function g(){t(0,y=!1)}const d={target:"abstain",color:null,shape:null};let w=null;function S(O,H){w!==H&&(t(1,w=H),r("change",H))}function m(){t(1,w=d),r("abstain")}const P=Se("canvas",{width:100,height:100}),p=P.getContext("2d");function f(O){p.clearRect(0,0,100,100),p.stroke(),p.globalAlpha=.8,bn(p,50,Math.pow(35,2),O.color,O.shape);const H=P.toDataURL();return Se("span",{},[Se("span",{class:"decision-opt-label"},[`${ye(O.color)} ${ye(O.shape)}`]),Se("img",{src:H})]).innerHTML}const C=["k_deduced"];Object.keys(e).forEach(O=>{!~C.indexOf(O)&&O.slice(0,2)!=="$$"&&O!=="slot"&&console.warn(`<Decision> was created with unknown prop '${O}'`)});const M=()=>m(),R=O=>S("bag",O),G=O=>S("opponent",O);return n.$$set=O=>{"k_deduced"in O&&t(9,i=O.k_deduced)},n.$capture_state=()=>({Opt:No,getContext:Lt,createEventDispatcher:at,fade:me,quadInOut:$e,proper:ye,dd:Se,draw_shape:bn,k_decision:c,k_deduced:i,dispatch:r,g_game:_,yw_lang:h,b_visible:y,show:v,hide:g,g_opt_abstain:d,g_opt_selected:w,stage_decision:S,stage_abstain:m,dm_canvas:P,d_ctx:p,render_icon:f,a_opts_opp:o,a_opts_arb:s}),n.$inject_state=O=>{"k_deduced"in O&&t(9,i=O.k_deduced),"yw_lang"in O&&(h=O.yw_lang),"b_visible"in O&&t(0,y=O.b_visible),"g_opt_selected"in O&&t(1,w=O.g_opt_selected),"a_opts_opp"in O&&t(2,o=O.a_opts_opp),"a_opts_arb"in O&&t(3,s=O.a_opts_arb)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&512&&t(3,s=i.enumerate("bag")),n.$$.dirty&512&&t(2,o=i.enumerate("opponent")),n.$$.dirty&512&&t(1,w=null)},[y,w,o,s,d,S,m,f,c,i,M,R,G]}class Li extends _t{constructor(e){super(e);ft(this,e,Uo,rs,dt,{k_decision:8,k_deduced:9}),L("SvelteRegisterComponent",{component:this,tagName:"Decision",options:e,id:rs.name});const{ctx:t}=this.$$,s=e.props||{};t[9]===void 0&&!("k_deduced"in s)&&console.warn("<Decision> was created without expected prop 'k_deduced'")}get k_decision(){return this.$$.ctx[8]}set k_decision(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_deduced(){throw new Error("<Decision>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_deduced(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const kn="src/component/ActionWidget.svelte";function Bi(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s[12]=t,s}function ls(n){let e,t,s,o,l,a=n[10].label+"",c,i,r,_,h;s=new qe({props:{icon:n[10].icon},$$inline:!0});function y(){return n[5](n[9])}const v={c:function(){e=j("span"),t=j("span"),Re(s.$$.fragment),o=D(),l=j("span"),c=fe(a),i=D(),E(t,"class","action-opt-icon s-8eNH5FVaHsSg"),q(t,kn,87,3,2291),E(l,"class","action-opt-text s-8eNH5FVaHsSg"),q(l,kn,90,3,2364),E(e,"class","action-opt "+(n[12]===0?"opt-lft":"")+" "+(n[3]-1===n[12]?"opt-rgt":"opt-mid")+" s-8eNH5FVaHsSg"),E(e,"data-opt",n[9]),z(e,"selected",n[9]===n[0]),q(e,kn,86,2,2093)},m:function(d,w){Q(d,e,w),k(e,t),Oe(s,t,null),k(e,o),k(e,l),k(l,c),k(e,i),r=!0,_||(h=Ne(e,"click",y,!1,!1,!1),_=!0)},p:function(d,w){n=d,w&5&&z(e,"selected",n[9]===n[0])},i:function(d){r||(N(s.$$.fragment,d),r=!0)},o:function(d){Y(s.$$.fragment,d),r=!1},d:function(d){d&&W(e),Me(s),_=!1,h()}};return L("SvelteRegisterBlock",{block:v,id:ls.name,type:"each",source:"(86:1) {#each ode(H_OPTS) as [si_opt, g_opt], i_opt}",ctx:n}),v}function cs(n){let e,t,s=Ue(n[2]);de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=ls(Bi(n,s,c));const l=c=>Y(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=j("span");for(let i=0;i<o.length;i+=1)o[i].c();E(e,"class","action s-8eNH5FVaHsSg"),Ws(e,"width",100*n[3]+"px"),q(e,kn,84,0,1967)},l:function(i){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,r){Q(i,e,r);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[6](e),t=!0},p:function(i,[r]){if(r&29){s=Ue(i[2]),de(s);let _;for(_=0;_<s.length;_+=1){const h=Bi(i,s,_);o[_]?(o[_].p(h,r),N(o[_],1)):(o[_]=ls(h),o[_].c(),N(o[_],1),o[_].m(e,null))}for(We(),_=s.length;_<o.length;_+=1)l(_);He()}},i:function(i){if(!t){for(let r=0;r<s.length;r+=1)N(o[r]);t=!0}},o:function(i){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)Y(o[r]);t=!1},d:function(i){i&&W(e),et(o,i),n[6](null)}};return L("SvelteRegisterBlock",{block:a,id:cs.name,type:"component",source:"",ctx:n}),a}function Do(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("ActionWidget",s,[]);const l={yes:{label:"Yes",icon:ln}},a=Ue(l).length;let c=d=>d,{si_selected:i="none"}=e,r;const _=at();function h(d){i!==d&&(t(0,i=d),_("change",d))}const y=["si_selected"];Object.keys(e).forEach(d=>{!~y.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<ActionWidget> was created with unknown prop '${d}'`)});const v=d=>h(d);function g(d){Ce[d?"unshift":"push"](()=>{r=d,t(1,r)})}return n.$$set=d=>{"si_selected"in d&&t(0,i=d.si_selected)},n.$capture_state=()=>({createEventDispatcher:at,Fa:qe,faCheckCircle:ln,ode:Ue,H_OPTS:l,NL_OPTS:a,f_apply:c,si_selected:i,dm_action:r,dispatch:_,select_opt:h}),n.$inject_state=d=>{"f_apply"in d&&(c=d.f_apply),"si_selected"in d&&t(0,i=d.si_selected),"dm_action"in d&&t(1,r=d.dm_action)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,r,l,a,h,v,g]}class Yi extends _t{constructor(e){super(e);ft(this,e,Do,cs,dt,{si_selected:0}),L("SvelteRegisterComponent",{component:this,tagName:"ActionWidget",options:e,id:cs.name})}get si_selected(){throw new Error("<ActionWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_selected(e){throw new Error("<ActionWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const sn="src/component/Pick.svelte";function Qi(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s}function us(n){let e,t,s,o=Ue(n[2]);de(o);let l=[];for(let i=0;i<o.length;i+=1)l[i]=_s(Qi(n,o,i));const a=i=>Y(l[i],1,1,()=>{l[i]=null}),c={c:function(){e=j("div");for(let r=0;r<l.length;r+=1)l[r].c();E(e,"class","pick s-AUZQ0ENzDxvQ"),z(e,"picked",!!n[1]),q(e,sn,77,1,1812)},m:function(r,_){Q(r,e,_);for(let h=0;h<l.length;h+=1)l[h].m(e,null);s=!0},p:function(r,_){if(_&14){o=Ue(r[2]),de(o);let h;for(h=0;h<o.length;h+=1){const y=Qi(r,o,h);l[h]?(l[h].p(y,_),N(l[h],1)):(l[h]=_s(y),l[h].c(),N(l[h],1),l[h].m(e,null))}for(We(),h=o.length;h<l.length;h+=1)a(h);He()}_&2&&z(e,"picked",!!r[1])},i:function(r){if(!s){for(let _=0;_<o.length;_+=1)N(l[_]);Ze(()=>{t||(t=ge(e,mt,{duration:2500},!0)),t.run(1)}),s=!0}},o:function(r){l=l.filter(Boolean);for(let _=0;_<l.length;_+=1)Y(l[_]);t||(t=ge(e,mt,{duration:2500},!1)),t.run(0),s=!1},d:function(r){r&&W(e),et(l,r),r&&t&&t.end()}};return L("SvelteRegisterBlock",{block:c,id:us.name,type:"if",source:"(77:0) {#if b_visible}",ctx:n}),c}function _s(n){let e,t,s=n[10].label+"",o,l,a,c,i,r,_=n[10].description+"",h,y,v,g,d;c=new qe({props:{icon:n[10].icon},$$inline:!0});function w(){return n[5](n[9])}const S={c:function(){e=j("span"),t=j("div"),o=fe(s),l=D(),a=j("div"),Re(c.$$.fragment),i=D(),r=j("div"),h=fe(_),y=D(),E(t,"class","pick-label s-AUZQ0ENzDxvQ"),q(t,sn,80,4,2071),E(a,"class","pick-icon s-AUZQ0ENzDxvQ"),q(a,sn,83,4,2131),E(r,"class","pick-description s-AUZQ0ENzDxvQ"),q(r,sn,86,4,2201),E(e,"class","pick-opt s-AUZQ0ENzDxvQ"),E(e,"data-pick",n[9]),z(e,"selected",n[1]===n[9]),q(e,sn,79,3,1946)},m:function(P,p){Q(P,e,p),k(e,t),k(t,o),k(e,l),k(e,a),Oe(c,a,null),k(e,i),k(e,r),k(r,h),k(e,y),v=!0,g||(d=Ne(e,"click",w,!1,!1,!1),g=!0)},p:function(P,p){n=P,p&6&&z(e,"selected",n[1]===n[9])},i:function(P){v||(N(c.$$.fragment,P),v=!0)},o:function(P){Y(c.$$.fragment,P),v=!1},d:function(P){P&&W(e),Me(c),g=!1,d()}};return L("SvelteRegisterBlock",{block:S,id:_s.name,type:"each",source:"(79:2) {#each ode(H_PICKS) as [si_pick, g_pick]}",ctx:n}),S}function fs(n){let e,t,s=n[0]&&us(n);const o={c:function(){s&&s.c(),e=Yt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),Q(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&N(s,1)):(s=us(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(We(),Y(s,1,1,()=>{s=null}),He())},i:function(a){t||(N(s),t=!0)},o:function(a){Y(s),t=!1},d:function(a){s&&s.d(a),a&&W(e)}};return L("SvelteRegisterBlock",{block:o,id:fs.name,type:"component",source:"",ctx:n}),o}function Lo(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("Pick",s,[]);const l={jackpot:{icon:Gs,label:"Jackpot",description:"A pile of SCRT accrued from lost wagers. The exact amount you will receive is a secret."},nft:{icon:Fs,label:"Power-up NFT",description:"A unique NFT that gives the owner some special power when used during gameplay. The type of power-up you will receive is a secret."}};let a=!1,c=null;const i={show:r,hide:_};function r(){t(0,a=!0)}function _(){t(0,a=!1)}const h=at();function y(d){t(1,c=d),h("pick",c)}const v=[];Object.keys(e).forEach(d=>{!~v.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Pick> was created with unknown prop '${d}'`)});const g=d=>y(d);return n.$capture_state=()=>({createEventDispatcher:at,blur:mt,Fa:qe,faCoins:Gs,faTrophy:Fs,ode:Ue,H_PICKS:l,b_visible:a,si_pick_selected:c,k_pick:i,show:r,hide:_,dispatch:h,pick:y}),n.$inject_state=d=>{"b_visible"in d&&t(0,a=d.b_visible),"si_pick_selected"in d&&t(1,c=d.si_pick_selected)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[a,c,l,y,i,g]}class Wi extends _t{constructor(e){super(e);ft(this,e,Lo,fs,dt,{k_pick:4}),L("SvelteRegisterComponent",{component:this,tagName:"Pick",options:e,id:fs.name})}get k_pick(){return this.$$.ctx[4]}set k_pick(e){throw new Error("<Pick>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class ds{#e;static includes(e){for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);if(s&&e.test(s))return!0}return!1}constructor(e,t){this._si_namespace=e,this.#e=t}set(e,t){let s;try{s=JSON.stringify(t)}catch{throw new Error("Unable to stringify value")}let o;try{o=jn.exports.AES.encrypt(s,this.#e).toString()}catch{throw new Error("Unable to encrypt message")}return localStorage.setItem(`${this._si_namespace}.${e}`,o)}get(e){const t=localStorage.getItem(`${this._si_namespace}.${e}`);if(t===null)return t;let s;try{s=jn.exports.AES.decrypt(t,this.#e).toString(jn.exports.enc.Utf8)}catch{throw new Error("Failed to decrypt value using provided secret")}let o;try{o=JSON.parse(s)}catch{throw new Error("Failed to parse decrypted text")}return o}clear(){const e=`${this._si_namespace}.`;for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);(s==null?void 0:s.startsWith(e))&&localStorage.removeItem(s)}}remove(e){return localStorage.removeItem(`${this._si_namespace}.${e}`)}}const{Error:Bo,Object:Yo,console:Qo}=vs,nt="src/component/App.svelte";function hs(n){let e,t,s,o,l,a;t=new qe({props:{icon:Ks},$$inline:!0});const c={c:function(){e=j("span"),Re(t.$$.fragment),E(e,"class","system-controls-burn s-SHyHC7YcIsCQ"),E(e,"alt","destroy cookies and cache"),q(e,nt,1797,2,61771)},m:function(r,_){Q(r,e,_),Oe(t,e,null),o=!0,l||(a=Ne(e,"click",n[24],!1,!1,!1),l=!0)},p:we,i:function(r){o||(N(t.$$.fragment,r),Ze(()=>{s||(s=ge(e,me,{duration:1e3},!0)),s.run(1)}),o=!0)},o:function(r){Y(t.$$.fragment,r),s||(s=ge(e,me,{duration:1e3},!1)),s.run(0),o=!1},d:function(r){r&&W(e),Me(t),r&&s&&s.end(),l=!1,a()}};return L("SvelteRegisterBlock",{block:c,id:hs.name,type:"if",source:"(1797:1) {#if (h_cookie && Object.keys(h_cookie).length) || localStorage.length}",ctx:n}),c}function ms(n){let e,t,s,o=ye(n[8])+"",l,a,c=ye(n[9])+"",i,r,_,h,y,v,g=ye(Ut(`nobody_has|${n[10]}`))+"",d,w,S,m;const P={c:function(){e=j("div"),t=j("div"),s=fe("The "),l=fe(o),a=D(),i=fe(c),r=D(),_=j("div"),h=j("span"),h.textContent="Hint:",y=D(),v=j("span"),d=fe(g),E(t,"class","chip s-SHyHC7YcIsCQ"),q(t,nt,1819,3,62473),E(h,"class","hint-prefix s-SHyHC7YcIsCQ"),q(h,nt,1823,4,62588),E(v,"class","hint-sentence s-SHyHC7YcIsCQ"),q(v,nt,1824,4,62631),E(_,"class","hint s-SHyHC7YcIsCQ"),q(_,nt,1822,3,62565),E(e,"class","mine s-SHyHC7YcIsCQ"),q(e,nt,1818,2,62347)},m:function(f,C){Q(f,e,C),k(e,t),k(t,s),k(t,l),k(t,a),k(t,i),k(e,r),k(e,_),k(_,h),k(_,y),k(_,v),k(v,d),m=!0},p:function(f,C){n=f,(!m||C[0]&256)&&o!==(o=ye(n[8])+"")&&Ie(l,o),(!m||C[0]&512)&&c!==(c=ye(n[9])+"")&&Ie(i,c),(!m||C[0]&1024)&&g!==(g=ye(Ut(`nobody_has|${n[10]}`))+"")&&Ie(d,g)},i:function(f){m||(Ze(()=>{S&&S.end(1),w=Cs(e,mt,{duration:2400,easing:$e,delay:4500}),w.start()}),m=!0)},o:function(f){w&&w.invalidate(),S=Ts(e,mt,{duration:2400,easing:$e}),m=!1},d:function(f){f&&W(e),f&&S&&S.end()}};return L("SvelteRegisterBlock",{block:P,id:ms.name,type:"if",source:"(1818:1) {#if si_player_hint}",ctx:n}),P}function ps(n){let e,t,s,o,l=n[1]&&Object.keys(n[1]).length||localStorage.length,a,c,i,r,_,h,y,v,g,d,w,S,m,P,p,f,C,M,R,G,O,H,J,A,ne,Pe,ae;s=new qe({props:{icon:n[0]?qn:In},$$inline:!0});let F=l&&hs(n);function re(X){n[25](X)}let pe={k_killables:n[13]};n[2]!==void 0&&(pe.k_panel=n[2]),c=new gi({props:pe,$$inline:!0}),Ce.push(()=>Qt(c,"k_panel",re));function be(X){n[27](X)}let he={};n[5]!==void 0&&(he.k_prompt=n[5]),d=new yi({props:he,$$inline:!0}),Ce.push(()=>Qt(d,"k_prompt",be));function Le(X){n[28](X)}let st={};n[4]!==void 0&&(st.k_tx=n[4]),m=new Ri({props:st,$$inline:!0}),Ce.push(()=>Qt(m,"k_tx",Le)),m.$on("basis",n[14]),m.$on("quality",n[15]);function wt(X){n[29](X)}let bt={k_deduced:n[12]};n[6]!==void 0&&(bt.k_decision=n[6]),f=new Li({props:bt,$$inline:!0}),Ce.push(()=>Qt(f,"k_decision",wt)),f.$on("abstain",n[17]),f.$on("change",n[18]);let K=n[10]&&ms(n);function rt(X){n[30](X)}let Fe={};n[7]!==void 0&&(Fe.k_pick=n[7]),G=new Wi({props:Fe,$$inline:!0}),Ce.push(()=>Qt(G,"k_pick",rt)),G.$on("pick",n[16]);function yt(X){n[31](X)}let ke={};n[3]!==void 0&&(ke.k_scene=n[3]),J=new Mi({props:ke,$$inline:!0}),Ce.push(()=>Qt(J,"k_scene",yt));const Ke={c:function(){e=j("div"),t=j("span"),Re(s.$$.fragment),o=D(),F&&F.c(),a=D(),Re(c.$$.fragment),r=D(),_=j("div"),h=j("img"),v=D(),g=j("div"),Re(d.$$.fragment),S=D(),Re(m.$$.fragment),p=D(),Re(f.$$.fragment),M=D(),K&&K.c(),R=D(),Re(G.$$.fragment),H=D(),Re(J.$$.fragment),E(t,"class","system-controls-audio s-SHyHC7YcIsCQ"),E(t,"alt","audio"),q(t,nt,1793,1,61552),E(e,"class","system-controls s-SHyHC7YcIsCQ"),q(e,nt,1792,0,61521),mo(h.src,y="/asset/smile.png")||E(h,"src",y),E(h,"alt","evil smile"),E(h,"class","s-SHyHC7YcIsCQ"),q(h,nt,1807,1,62039),E(_,"class","surprise s-SHyHC7YcIsCQ"),q(_,nt,1806,0,61991),E(g,"class","container s-SHyHC7YcIsCQ"),q(g,nt,1810,0,62095)},l:function(I){throw new Bo("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(I,se){Q(I,e,se),k(e,t),Oe(s,t,null),k(e,o),F&&F.m(e,null),Q(I,a,se),Oe(c,I,se),Q(I,r,se),Q(I,_,se),k(_,h),n[26](_),Q(I,v,se),Q(I,g,se),Oe(d,g,null),k(g,S),Oe(m,g,null),k(g,p),Oe(f,g,null),k(g,M),K&&K.m(g,null),k(g,R),Oe(G,g,null),k(g,H),Oe(J,g,null),ne=!0,Pe||(ae=Ne(t,"click",n[23],!1,!1,!1),Pe=!0)},p:function(I,se){const kt={};se[0]&1&&(kt.icon=I[0]?qn:In),s.$set(kt),se[0]&2&&(l=I[1]&&Object.keys(I[1]).length||localStorage.length),l?F?(F.p(I,se),se[0]&2&&N(F,1)):(F=hs(I),F.c(),N(F,1),F.m(e,null)):F&&(We(),Y(F,1,1,()=>{F=null}),He());const vt={};!i&&se[0]&4&&(i=!0,vt.k_panel=I[2],Wt(()=>i=!1)),c.$set(vt);const Be={};!w&&se[0]&32&&(w=!0,Be.k_prompt=I[5],Wt(()=>w=!1)),d.$set(Be);const St={};!P&&se[0]&16&&(P=!0,St.k_tx=I[4],Wt(()=>P=!1)),m.$set(St);const it={};se[0]&4096&&(it.k_deduced=I[12]),!C&&se[0]&64&&(C=!0,it.k_decision=I[6],Wt(()=>C=!1)),f.$set(it),I[10]?K?(K.p(I,se),se[0]&1024&&N(K,1)):(K=ms(I),K.c(),N(K,1),K.m(g,R)):K&&(We(),Y(K,1,1,()=>{K=null}),He());const Xe={};!O&&se[0]&128&&(O=!0,Xe.k_pick=I[7],Wt(()=>O=!1)),G.$set(Xe);const xe={};!A&&se[0]&8&&(A=!0,xe.k_scene=I[3],Wt(()=>A=!1)),J.$set(xe)},i:function(I){ne||(N(s.$$.fragment,I),N(F),N(c.$$.fragment,I),N(d.$$.fragment,I),N(m.$$.fragment,I),N(f.$$.fragment,I),N(K),N(G.$$.fragment,I),N(J.$$.fragment,I),ne=!0)},o:function(I){Y(s.$$.fragment,I),Y(F),Y(c.$$.fragment,I),Y(d.$$.fragment,I),Y(m.$$.fragment,I),Y(f.$$.fragment,I),Y(K),Y(G.$$.fragment,I),Y(J.$$.fragment,I),ne=!1},d:function(I){I&&W(e),Me(s),F&&F.d(),I&&W(a),Me(c,I),I&&W(r),I&&W(_),n[26](null),I&&W(v),I&&W(g),Me(d),Me(m),Me(f),K&&K.d(),Me(G),Me(J),Pe=!1,ae()}};return L("SvelteRegisterBlock",{block:Ke,id:ps.name,type:"component",source:"",ctx:n}),Ke}function gs(n){return n}function Wo(n,e,t){let s,{$$slots:o={},$$scope:l}=e;ht("App",o,[]);let a,c;try{const u=new Intl.Locale(navigator.language).language;u in xs&&(c=u)}catch{}{const u=Ot("en");u.subscribe(T=>c=T),zs("game",{language:u})}let i,r,_,h,y,v,g;const d=new si;let w,S,m,P,p=new tn,f=gs,C=gs;const M=new Image;M.src="/asset/monster.png";const R=new Image;R.src="/asset/smile.png";async function G(u){for(const T of Vs[u])T.delay&&await B(T.delay),await i.reveal_text(T.labels[c],T.interval,T.pause)}async function O(){await B(2e3),await G("attention"),await B(1800),await i.reveal_text(""),await B(1200)}async function H(){await i.reveal_text("good luck! ;)"),await B(800),await i.reveal_text("")}async function J(){return await h.ok("Reload"),window.location.reload(),new Promise(()=>{})}async function A(u){return d.killAll(),i.reveal_text(""),await i.error(u),J()}async function ne(){const u="                                 ";await i.reveal_text(u),re.epic_transition.play(),i.reveal_text(u+"  ",250),K.classList.add("triggered"),await B(160),t(11,K.style.opacity="0.0",K),setTimeout(()=>{t(11,K.style.display="none",K)},6e3),await B(2e3)}async function Pe(u=0){await i.warn(`
			This game stores encrypted query permit data in local storage.
			
			In order to protect this data, you must provide a passphrase each time the page is loaded.

			${ds.includes(/\.permits$/)?"Enter the same passphrase to restore a previous permit, or enter a different one to sign a new permit.":""}
		`);async function T(te=0){let Je=!1;te||d.addTimeout(()=>{Je||i.reveal_text("\u2193\u2193 click below to enter passphrase \u2193\u2193")},6500),await h.ok("Provide passphrase"),Je=!0;const qt=new Uint8Array(32);crypto.getRandomValues(qt);const Jt=[...qt].map(rn=>String.fromCharCode(rn%93+33)).join(""),Pn=window.prompt("Enter a passphrase to encrypt/decrypt query permits",Jt);if(Pn)return Pn.length<5?(i.reveal_text("passphrase must be at least 5 characters"),T(te+1)):Pn;{const rn=["null key encryption, eh? try again you silly goose","i can do this all day, can you?","there are only so many responses i have...","...and you're starting to piss me off","i'm serious dood -- don't make me"];return te<rn.length?i.reveal_text(rn[te],40):window.location.href="https://www.youtube.com/watch?v=dQw4w9WgXcQ",T(te+1)}}const ie=(await(await Xs.load()).get()).visitorId,oe=await T();if(i.reveal_text(""),!g){await i.warn(`
				This is a multiplayer, online game that uses smart contracts on the Secret Network to ensure fairness for all players.

				Interacting with the game requires submitting transactions to the blockchain via a web wallet such as Keplr (or a local wallet for testnet only).
			`),await B(600);const te=await h.opts({keplr:zt.isAvailable()?{label:"Connect Keplr",alt:"Connect a wallet using the Keplr extension for Chrome"}:{label:"Install Keplr",alt:"Keplr was not detected. Please install it first in order to use this option"}});switch(te){case"keplr":{try{g=zt.fromWindow()}catch{return window.open("https://www.keplr.app/","_blank"),await J()}jt({wallet:"keplr"},30*pt);break}case"local":return A("Local storage wallet not yet implemented");default:return A(`Unhandled response option: '${te}'`)}}let V=!1;const ee=Date.now();try{V=await g.enable({chainId:_n,chainName:fn,rest:dn,rpc:Zt},()=>A("Account was changed in wallet. Session terminated."))}catch(te){debugger;return te instanceof Un?u>=3?A("Keplr connection request rejected too many times"):(await B(2e3),await Pe(u+1)):te instanceof Dn||te instanceof Error?A(te.stack):A("Fatal unknown error")}if(!V)return A("Chain suggestion was denied. Unable to proceed.");Date.now()-ee>Ge&&(await i.warn(`Please make sure your network is set to "${fn}" in Keplr!`),await B(2100));const x=g.key,_e=x.bech32Address;i.wallet({name:x.name,addr:_e,ledger:x.isNanoLedger});const ve=new ds(_e,[ie,oe,"salt"].join("|"));let Qe=null;try{Qe=ve.get("permits")}catch{await i.warn("Change in passphrase detected. Clearing old query perrmits."),ve.clear()}await B(1e3);let Ae=!1;if(Qe&&Qe[Tt])a=Qe[Tt],Ae=!0;else{await i.warn(`
				Query permits allow you to read encrypted data from the blockchain without needing to write anything extra to the chain.

				Signing a query permit happens offline and does not require any gas.
			`),await B(1800),await h.ok("Sign permit");try{a={params:{chain_id:g.chain,allowed_tokens:[Tt,$t],permit_name:Nn,permissions:["owner"]},signature:await g.signQueryPermit()},ve.set("permits",Kt(At({},Qe||{}),{[Tt]:a,[$t]:a}))}catch(te){return A(te.stack)}}i.permit(a.params,Ae),await B(1200),await i.reveal_text(""),await B(1100)}async function ae(u=!1){let T=Ot("");u?i.warn("Still waiting for another player... {last_check}",{last_check:T}):i.warn("Created a new game. Now waiting for another player... {last_check}",{last_check:T});let U=window.Notification&&Notification.permission==="granted",$=!1;function ie(){if(U)i.warn("You will receive a notification once another player has joined.");else{const _e=Se("span"),ve=new Yi({target:_e});ve.$on("change",async()=>{const Qe=Date.now();await Notification.requestPermission()==="denied"?(ve.$set({si_selected:"none"}),Date.now()-Qe<.5*Ge?i.warn("User previously denied request for notifications. Need to reset in browser settings."):i.warn("User denied request for notification permission.")):i.warn("Confirmed. Notification will be sent when another player joins.")}),i.warn("Would you like to receive a notification once another player has joined? {approve}",{approve:_e})}}let oe=Date.now(),V=d.addInterval(()=>{oe&&T.set(`Last checked ${ni(oe)}`),$||($=!0,ie())},1e3),ee,x;for(;;){x=Date.now();try{ee=await he.queryGameState()}catch(ve){return ve instanceof On?A(ve.message):A(ve+"")}if(ee.round!==0)break;oe=Date.now();const _e=Date.now()-x;_e<10*Ge&&await B(_e)}return d.delInterval(V),T.set(""),re.retro_game_alarm.play(),ee}const F={epic_transition:"epic-transition.wav",coin_win:"coin-win.wav",retro_game_alarm:"retro-game-alarm.wav",retro_game_notif:"retro-game-notif.wav",trumpet_fanfare:"trumpet-fanfare.wav"},re=Object.fromEntries(Ue(F).map(([u,T])=>[u,new Audio(`/asset/${T}`)]));let pe=!1,be=gn(),he;class Le{constructor(T){this._s_expired="run out of time",this._s_kill=T.kill_text||"",this._k_eta=T.eta,this._yw_time=Ot("(estimating...)"),this._k_eta.eta,this._i_interval=d.addInterval(()=>{const $=this._k_eta;if(!$.ready)return;if($.expired){this._yw_time.set(this._s_expired),this._i_interval=0,d.delInterval(this._i_interval);try{this._dm_clock.remove()}catch{}return}const ie=$.remaining,oe=Math.max(0,Math.floor(ie/Ge)),V=Math.floor(oe/60);V?V<2?this._yw_time.set("less than 2 minutes remaining"):V<5?this._yw_time.set("less than 5 minutes remaining"):V<10?this._yw_time.set("less than 10 minutes remaining"):this._yw_time.set("a little more than 10 minutes remaining"):oe<=10?this._yw_time.set("less than 10 seconds remaining"):oe<=31?this._yw_time.set("less than 30 seconds remaining"):this._yw_time.set("less than 60 seconds remaining")},100);const U=this._dm_clock=Se("span");Object.assign(U.style,{paddingRight:"2px"}),new qe({target:U,props:{icon:Js}})}get interval(){return this._i_interval}get clock(){return this._dm_clock}get store(){return this._yw_time}kill(T=""){this._i_interval&&(d.delInterval(this._i_interval),this._i_interval=0,this._dm_clock.remove(),this._yw_time.set(T||this._s_kill))}}async function st(){return en("game"),A("Game over. Reload to play again.")}async function wt(){let u=!0;i.reveal_text("checking for active game...").then(()=>u&&i.spinning(!0));let T;try{try{T=await he.queryGameState()}finally{u=!1,i.reveal_text("")}}catch{debugger}if(T&&(console.log("Resuming:",T),T.round!==null)){if(T.finished?i.warn("Fast-forwarding through finished game so you can see the results."):i.warn("Successfully resumed active game."),T.round===0&&(T=await ae(!0)),T.round===1)return St(T,!0),!0;if(T.round===3)return Pt(T,!0),!0;await i.error(`Unrecognized game state round: ${T.round}`)}return!1}let bt=!1,K;Bt(async()=>{console.log({chain_name:fn,chain_id:_n,game_addr:Tt,game_hash:oi,rest:dn,rpc:Zt,minter_addr:$t,minter_hash:ai});const u=be.last_seen;if(u&&t(0,pe=!!+be.muted),be.wallet==="keplr")try{g=zt.fromWindow()}catch{en("wallet")}if(jt({last_seen:""+Date.now()},30*pt),t(1,be=gn()),await Pe(),he=new ri(g,Tt,a),be.game){if(await wt())return;en("game")}return u?await H():(await ne(),await O()),await i.arbiter(`
			Welcome${u?" back":""} to my game of secrets. In a moment, you will be matched with another player.

			I will give each of you a chip with a colored shape on it. There are only four colors (red, green, blue, black), and four shapes (triangle, square, circle, star).

			Your opponent will not be able to see your chip and vice versa. I will also take a third chip and hide it in a bag. Each chip will have a unique color and a unique shape. For example, if the chip in my bag is a red triangle, then nobody else has red, and nobody else has a triangle.

			The rules are simple. You and your opponent must exchange a message with each other. Cooperate to deduce what is in my bag and you both will advance to the next round. Betray your opponent by correctly guessing which chip they have and win their wager. Guess wrong and lose.
		`),await B(u?800:4600),yt()});class rt extends Error{}async function Fe(u){let T=!0;const U=u.reveal;typeof U=="string"?i.reveal_text(U).then(()=>T&&i.spinning(!0)):i.spinning(!0);const $=u.check,ie=u.condition||u.query_fail,oe=u.rejected||u.query_fail;let V;try{try{if(V=await u.exec(),!$(V))throw V=null,new rt}finally{T=!1,i.reveal_text("")}}catch(ee){if(console.error(ee),ee instanceof Error){const x=ee.message;if(/Account does not exist/.test(x))return A("Looks like your wallet is empty. Make sure to acquire some SCRT tokens so that you can pay the gas fees for transactions.");if(/must finish current game/.test(x))return jt({game:"started"},12*Mt),await wt()?null:A("Looks like you changed browsers or cleared cache since you last joined a game with this account. Please reload and the game will attempt to resume.");if(/contract not found/i.test(x))return A("Contract not found! Are you on the right network?");if(/execute contract failed/.test(x))return i.error(`Contract error: ${x}`),ie(ee),null;if(/Request rejected/.test(x))return i.error("Transaction rejected"),oe(ee),null;if(/timed out/.test(x)){const _e=Ot("");await i.warn("There was a timeout error while waiting for the transaction to be included. Waiting to see if it gets included... {retries}",{retries:_e});const ve=await async function Qe(Ae=1){await B(5e3);let te;try{te=await he.queryGameState(),$(te)||(console.warn("query permit check failed on game state",te),te=null)}catch(Je){if(!(Je instanceof rt))return await i.error(["Timeout error. Please try again with higher gas fee.",x]),u.query_fail?await u.query_fail(Je):null}return te||(Ae>=5?(await i.error("Reached maximum retries. Seems like your transaction failed. Try again with higher gas fee?"),u.query_fail?await u.query_fail(new rt):A("Unhandled query failure path.")):(_e.set(`Retried ${Ae===1?"once":`${Ae} times`} so far...`),await Qe(Ae+1)))}();if(ve)V=ve;else return null}else{debugger;return A(`Unhandled error: ${ee.stack}`)}}else return A(`Unknown error: ${ee}`)}return console.log(V),i.reveal_text(""),V}async function yt(){await i.reveal_text("ready to play?"),await h.ok("Join a game");const u=await Fe({reveal:"waiting for transaction to be verified... ",async exec(){return(await he.joinGame()).data.join.game_state},check(U){return U.round!==null},query_fail(){return yt(),null}});if(!u)return;let T=u;return u.round===0&&(jt({game:"started"},12*Mt),T=await ae()),T.round===1?St(T):T.round===3?A("round_3()"):(console.error(T),jt({game:"started"},12*Mt),A("Failed to join game while waiting for transaction. You can try once more by reloading this page."))}function ke(u){var T;t(8,w=u.chip_color.split(":")[1]),t(9,S=u.chip_shape.split(":")[1]),t(10,m=(T=u.hint)==null?void 0:T.split("|")[1]),P=u.first_submit,t(20,p=new tn),p.nobody(`color:${w}`),p.nobody(`shape:${S}`),p.nobody(m)}let Ke=Ft[0],X="";async function I(){const u=X?Nt(X):"",T=Gt[Ke].describe[c](u);await i.reveal_text(T)}function se(u){i.submittable(null),Ke=u.detail,X="",I()}function kt(){X="",i.submittable(null),_.show(),I()}async function vt(u){if(i.submittable(null),X=u.detail,P){const[,ie]=P.split("|");ie===X&&(X="",await i.arbiter("You cannot submit a message that would contradict your previous assertion."))}const[T,U]=X.split(":");let $="Unknowable";Ke==="nobody_has"?m===X?$="Truth":(T==="color"&&U===w||T==="shape"&&U===S)&&($="Lie"):T==="color"&&U===w||T==="shape"&&U===S?$="Truth":$="Lie",await I(),i.submittable(async()=>{_.hide(),i.submittable(null);const ie=await Fe({async exec(){return(await he.submitAssertion(Ke,X)).data.submit.game_state},check(oe){return P?oe.second_submit!==null:oe.first_submit!==null},query_fail(){return kt(),vt(u),null}});!ie||(await i.commit(),Be&&Be.kill(),xe&&xe.kill(),i.unsubmittable(),ie.second_submit?Ve(ie):Dt(ie))},$)}let Be;async function St(u,T=!1){ke(u),await i.reveal_text(""),await i.arbiter("Here is your chip, player..."),await r.animate_chip_entry(w,S),T||await B(5e3);let U=m.startsWith("color:");if(await i.arbiter(`
			Round 1: I've given you the ${w} ${S} this round, and a hint that nobody has ${U?"":"a "}${m.replace(/^[^:]+:/,"")}.

			I've also given your opponent a hint. Theirs is that nobody has a certain ${U?"shape":"color"}.
		`),T){if(u.first_submit)return await i.user(Ut(u.first_submit)),Dt(u,T)}else await B(4100);Be=new Le({eta:new gt(u.first_round_start_block+""),kill_text:"successfully submitted"}),await i.arbiter(["Now you must choose what to tell the other player. I will reveal both of your messages simultaneously once they both have been submitted. You have {clock_icon}{time_remaining}."],{clock_icon:Be.clock,time_remaining:Be.store}),await _.show(),T||await B(4e3),I()}let it=!1,Xe,xe;async function Dt(u,T=!1){var V;ke(u);const{opponent_first_submit:U,first_extra_secret:$}=u;if(!U&&!$)return it||(it=!0,Be&&Be.kill("already submittted"),Xe=new Le({eta:new gt(u.first_round_start_block+""),kill_text:"also submitted theirs"}),await i.arbiter(["Your submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Xe.clock,time_remaining:Xe.store})),await B(5e3),Dt(await he.queryGameState());Xe&&Xe.kill();const ie=Se("span");if($){const[ee,x]=$.split("|"),_e=Ot("");ee==="nobody_has"?(p.nobody(x),_e.set(`Your opponent has the hint that "nobody has ${Nt(x)}".`)):(p.opponent(x,!0),_e.set(`Your opponent has ${Nt(x)}.`)),new nn({target:ie,props:{b_mode_nobody:!1,si_assertion:x,si_known:"true"}}),await i.arbiter(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:_e,premise:ie})}else if(U){const[ee,x]=U.split("|");let _e=p.clone();const ve=ee==="nobody_has"&&x===m,Qe=new nn({target:ie,props:{b_mode_nobody:ee==="nobody_has",si_assertion:x,si_known:ve?"undeniable":""}}),Ae=Qe.k_premise;Qe.$on("change",()=>{t(21,f=Ae.apply),console.log(`Priori: ${p.explain()}`),console.log(`Opp1: ${_e.explain()}`),console.log([p,_e])}),await i.opponent([`${ye(Ut(U))} {premise}`],{premise:ie})}else return A("Fatal system error: unable to parse game state");if(T){if(u.second_submit)return await i.user(Ut(u.second_submit)),Ve(u,T)}else await B(4100);xe=new Le({eta:new gt(u.second_submit_turn_start_block+""),kill_text:"already submitted"});const oe=((V=u.first_submit)==null?void 0:V.split("|")[0])==="nobody_has"?"i_have":"nobody_has";await i.arbiter([`Both of you must now exchange one more message with each other. This time, I'm requiring you to submit a message about ${oe==="nobody_has"?'what "nobody has"':"your chip"}. You have {clock_icon}{time_remaining}.`],{clock_icon:xe.clock,time_remaining:xe.store}),await _.show(oe),I()}let b=!1,Z,ue,Te;async function Ve(u,T=!1){const{opponent_second_submit:U,second_extra_secret:$}=u;if(!U&&!$)return b||(b=!0,Z&&Z.kill(),ue=new Le({eta:new gt(u.second_submit_turn_start_block+""),kill_text:"also submitted theirs"}),await i.arbiter(["Your 2nd submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:ue.clock,time_remaining:ue.store})),await B(5e3),Ve(await he.queryGameState());const ie=Se("span");if($){const[oe,V]=$.split("|"),ee=Ot("");oe==="nobody_has"?(t(22,C=x=>x.nobody(V)),ee.set(`Your opponent has the hint that "nobody has ${Nt(V)}".`)):(t(22,C=x=>x.opponent(V,!0)),ee.set(`Your opponent has ${Nt(V)}.`)),new nn({target:ie,props:{b_mode_nobody:!1,si_assertion:V,si_known:"true"}}),await i.arbiter(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:ee,premise:ie})}else if(U){ue&&ue.kill();const[oe,V]=U.split("|"),ee=oe==="nobody_has"&&V===m,x=new nn({target:ie,props:{b_mode_nobody:oe==="nobody_has",si_assertion:V,si_known:ee?"undeniable":""}}),_e=x.k_premise;x.$on("change",()=>{t(22,C=_e.apply)}),await i.opponent([`${ye(Ut(U))} {premise}`],{premise:ie})}else return A("Fatal system error: unable to parse game state");if(T&&u.guess)return await i.user(vn(u.guess)),le(u,T);Te=new Le({eta:new gt(u.guess_turn_start_block+""),kill_text:"successfully submitted"}),await i.arbiter(`
			The time has come for you to surmise my secrets. You may either guess what is in my bag, what your opponent has, or abstain completely. You have {clock_icon}{time_remaining}.

			The precedence for winning is as follows:
			- [Guess wrong] < [Abstain] < [Correctly guess arbiter's bag] < [Corrrectly guess opponent's chip]

			Use the inline widgets next to each assertion above to logically reduce your option space.
		`,{clock_icon:Te.clock,time_remaining:Te.store}),await y.show(),console.log(u)}async function lt(u){i.submittable(null),await i.reveal_text(vn(u),30),i.submittable(async()=>{i.submittable(null),y.hide();const T=await Fe({async exec(){const U=(await he.submitGuess(u)).data.guess.game_state;return i.commit(),U},check(U){return U.guess!==null},query_fail(){return y.show(),lt(u),null}});!T||(Te.kill(),le(T))})}let Ye=!1,ct=!1,je;async function le(u,T=!1){const{round_result:U,round:$,result:ie}=u;let oe=!1;if(U&&!Ye){Ye=!0;const[V,ee]=U.split("|");ee==="wrong"?(await i.arbiter(`
					Sorry, your guess about ${V==="opponent"?"your opponent's chip":"my bag"} was wrong.
					
					Guessing wrong is the worst because you automatically lose your wager. Consider abstaining next time if you're unsure.
				`),oe=!0):await i.arbiter(`Nicely done, your guess about ${V==="opponent"?"your opponent's chip":"my bag"} was correct!`)}if(!u.opponent_guess)return ct||(ct=!0,je=new Le({eta:new gt(u.guess_turn_start_block+""),kill_text:"now submitted"}),await i.arbiter(`${oe?"Even though you lost":"However"}, I am still waiting for a guess from your opponent. They have {clock_icon}{time_remaining}.`,{clock_icon:je.clock,time_remaining:je.store})),await B(5e3),le(await he.queryGameState());if(je&&je.kill(),t(10,m=""),r.animate_chip_exit(),console.log("round_1d#over",u),u.finished)if(u.opponent_round_result){const{opponent_round_result:V,opponent_guess:ee}=u,[x,_e,ve]=ee.split(/\|/g),[,Qe]=V.split("|");let Ae="",te=!1;if(x==="abstain")Ae="abstained from guessing";else{const Je=_e.split(":")[1],qt=ve.split(":")[1],Jt=Ct[Je].labels[c]+" "+Ht[qt].labels[c];te=Qe!=="correct",Ae=`${te?"wrongly":"correctly"} guessed that ${x==="bag"?"my bag":"your chip"} is the ${Jt}`}if(ie==="you lost wager"){const Je=te?"But you'll be happy to know that your opponent":"Your opponent";return await i.arbiter([`${oe?"As you already know":"Bad news"}, you lost your wager. ${Je} ${Ae}, so they ${te?"also lost their wager":"won the game and gained your lost wager"}.`]),await B(9e3),st()}else if(ie==="you won wager"){const Je=BigInt(u.wager),qt=hn(Je),Jt=hn(Je*2n);return await i.arbiter(`
						Congratulations, you won! Your opponent ${Ae}, so they lost their wager.
						
						I have refunded you your original ${qt} plus an extra ${qt} from your opponent's wager for a total of ${Jt}.
					`),await B(9e3),st()}else await i.arbiter([`Well done. You and your opponent have tied, so you both can claim a reward. They ${Ae}.`]),T||await B(4e3)}else return A("Somebody terminated the game.");else if(u.round===3)Pt(u,T);else return A(`Game is not finished but round is ${u.round}.`)}let ze=!1,Ee;async function Pt(u,T=!1){if(Ee=new Le({eta:new gt(u.pick_reward_round_start_block+""),kill_text:"made your decision"}),await i.arbiter(`
			Congratulations on passing round 1 together! I have two rewards to choose from, a jackpot of SCRT, or an NFT that can be used to give you special powers next time you play.

			However, if you both attempt to claim the same prize, then neither of you will take it. You will only be able to take a reward if you and your opponent claim different things.

			You have {clock_icon}{time_remaining}.
		`,{clock_icon:Ee.clock,time_remaining:Ee.store}),u.pick)return on(u,!0);v.show()}async function ut(u){const{detail:T}=u;i.submittable(null),await i.reveal_text(`i pick the ${T}`),i.submittable(async()=>{v.hide();const U=await Fe({async exec(){const $=(await he.pickReward(T)).data.pick_reward.game_state;return i.commit(),$},check($){return $.pick!==null},query_fail(){return v.show(),ut(u),null}});!U||on(U)})}let ot,Et=!1;async function on(u,T=!1){Ee&&Ee.kill();const{result:U}=u;if(U){switch(U){case"you won jackpot":{await i.arbiter(`
						Fortune favors the bold! Your opponent picked the NFT, and you have successfully claimed the jackpot of ${hn(BigInt(u.jackpot_reward||"0"))}!
					`);break}case"you won nft":{await i.arbiter(`
						Wise move. While your opponent chose the short-term gain, you see the long-term potential. You have successfully claimed an NFT.
					`);break}case"you lost reward":{u.pick==="jackpot"?await i.arbiter(`
							Greed has spoiled your riches. Both players attempted to claim the jackpot, so you both shall leave empty-handed.
						`):await i.arbiter(`
							An unlucky pick. Both players attempted to claim the NFT, so you both shall leave empty-handed.
						`);break}}return await B(9e3),st()}else return Et||(Et=!0,ot=new Le({eta:new gt(u.pick_reward_round_start_block+""),kill_text:"also picked theirs"}),await i.arbiter(["Your pick has been noted. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:ot.clock,time_remaining:ot.store})),await B(5e3),on(await he.queryGameState())}function vn(u){let T;if(typeof u=="string"?T=Object.fromEntries(u.split(/\|/g).map(U=>U.split(":"))):T=u,T.target==="abstain")return"i abstain from guessing this round";{let U="";return T.target==="bag"?U+="the arbiter's bag is: a ":U+="my opponent's chip is: a ",U+Ct[T.color].labels[c]+" "+Ht[T.shape].labels[c]}}async function ws(){lt({target:"abstain",color:null,shape:null})}async function bs({detail:u}){lt(u)}let an=!1;function Sn(){if(!an)an=!0,i.error("The button you just clicked will remove all cookies and cache that the game previously created and then disable the current UI. If you agree to this, click the burn icon again.");else return Object.keys(gn()).forEach(u=>en(u)),localStorage.clear(),i.reveal_text(""),A("Cache burned")}const Hi=[];Yo.keys(e).forEach(u=>{!~Hi.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&Qo.warn(`<App> was created with unknown prop '${u}'`)});const Gi=()=>t(0,pe=!pe),Fi=()=>Sn();function zi(u){i=u,t(2,i)}function Ji(u){Ce[u?"unshift":"push"](()=>{K=u,t(11,K)})}function Ki(u){h=u,t(5,h)}function Xi(u){_=u,t(4,_)}function xi(u){y=u,t(6,y)}function Vi(u){v=u,t(7,v)}function Zi(u){r=u,t(3,r)}return n.$capture_state=()=>({onMount:Bt,setContext:zs,writable:Ot,blur:mt,fade:me,quadInOut:$e,Fa:qe,faClock:Js,faVolumeUp:In,faVolumeMute:qn,faFire:Ks,fingerprintjs:Xs,H_LANGUAGES:xs,H_COLORS:Ct,H_SHAPES:Ht,A_BASES:Ft,H_BASES:Gt,H_MESSAGES:Vs,SI_CHAIN:_n,S_CHAIN_NAME:fn,P_LCD_REST:dn,P_LCD_RPC:Zt,uscrt_to_scrt:hn,KeplrWallet:zt,EnableKeplrError:Un,OfflineSignerError:Dn,dd:Se,delete_cookie:en,read_cookie:gn,write_cookie:jt,XTL_SECONDS:Ge,XTL_HOURS:Mt,XTL_DAYS:pt,ode:Ue,proper:ye,timeout:B,relative_time:ni,Killables:si,Deduction:tn,use_assertion_in_sentence:Ut,use_quality_in_sentence:Nt,MessagePanel:gi,Prompt:yi,Assertion:Ri,Scene:Mi,PremiseWidget:nn,Decision:Li,ActionWidget:Yi,Pick:Wi,SI_PERMIT:Nn,ContractError:On,EtaEstimator:gt,GameContract:ri,P_CONTRACT_GAME_ADDR:Tt,SI_CONTRACT_GAME_CODE_HASH:oi,P_CONTRACT_MINTER_ADDR:$t,SI_CONTRACT_MINTER_CODE_HASH:ai,EncryptedLocalStorage:ds,F_IDENTITY:gs,g_permit:a,s_lang:c,k_panel:i,k_scene:r,k_tx:_,k_prompt:h,k_decision:y,k_pick:v,k_wallet:g,k_killables:d,si_player_color:w,si_player_shape:S,si_player_hint:m,si_submit_first:P,k_priori:p,f_assert_1:f,f_assert_2:C,d_img_monster:M,d_img_smile:R,reveal_prepared:G,introduction:O,welcome_back:H,reload:J,fatal:A,surprise:ne,connect_wallet:Pe,wait_for_other_player:ae,H_AUDIO_SRC:F,H_AUDIO:re,b_muted:pe,h_cookie:be,k_game:he,Countdown:Le,game_over:st,try_resume_game:wt,b_surprise:bt,dm_surprise:K,GameStateError:rt,safe_exec:Fe,try_join:yt,update_player_state:ke,si_assert_basis:Ke,si_assert_quality:X,reveal_tx:I,select_basis:se,reset_tx:kt,select_quality:vt,k_countdown_1a:Be,round_1a:St,b_notif_1b_waiting:it,k_countdown_1a2:Xe,k_countdown_1b:xe,round_1b:Dt,b_notif_1c_waiting:b,k_countdown_1b2:Z,k_countdown_1c:ue,k_countdown_1c2:Te,round_1c:Ve,prepare_guess:lt,b_notif_1d_result:Ye,b_notif_1d_waiting:ct,k_countdown_1d:je,round_1d:le,b_notif_3a_waiting:ze,k_countdown_3a:Ee,round_3a:Pt,select_pick:ut,k_countdown_3b:ot,b_notif_3b_waiting:Et,round_3b:on,use_guess_in_sentence:vn,select_abstain:ws,select_decision:bs,b_burn_clicked:an,burn:Sn,k_deduced:s}),n.$inject_state=u=>{"g_permit"in u&&(a=u.g_permit),"s_lang"in u&&(c=u.s_lang),"k_panel"in u&&t(2,i=u.k_panel),"k_scene"in u&&t(3,r=u.k_scene),"k_tx"in u&&t(4,_=u.k_tx),"k_prompt"in u&&t(5,h=u.k_prompt),"k_decision"in u&&t(6,y=u.k_decision),"k_pick"in u&&t(7,v=u.k_pick),"k_wallet"in u&&(g=u.k_wallet),"si_player_color"in u&&t(8,w=u.si_player_color),"si_player_shape"in u&&t(9,S=u.si_player_shape),"si_player_hint"in u&&t(10,m=u.si_player_hint),"si_submit_first"in u&&(P=u.si_submit_first),"k_priori"in u&&t(20,p=u.k_priori),"f_assert_1"in u&&t(21,f=u.f_assert_1),"f_assert_2"in u&&t(22,C=u.f_assert_2),"b_muted"in u&&t(0,pe=u.b_muted),"h_cookie"in u&&t(1,be=u.h_cookie),"k_game"in u&&(he=u.k_game),"b_surprise"in u&&(bt=u.b_surprise),"dm_surprise"in u&&t(11,K=u.dm_surprise),"si_assert_basis"in u&&(Ke=u.si_assert_basis),"si_assert_quality"in u&&(X=u.si_assert_quality),"k_countdown_1a"in u&&(Be=u.k_countdown_1a),"b_notif_1b_waiting"in u&&(it=u.b_notif_1b_waiting),"k_countdown_1a2"in u&&(Xe=u.k_countdown_1a2),"k_countdown_1b"in u&&(xe=u.k_countdown_1b),"b_notif_1c_waiting"in u&&(b=u.b_notif_1c_waiting),"k_countdown_1b2"in u&&(Z=u.k_countdown_1b2),"k_countdown_1c"in u&&(ue=u.k_countdown_1c),"k_countdown_1c2"in u&&(Te=u.k_countdown_1c2),"b_notif_1d_result"in u&&(Ye=u.b_notif_1d_result),"b_notif_1d_waiting"in u&&(ct=u.b_notif_1d_waiting),"k_countdown_1d"in u&&(je=u.k_countdown_1d),"b_notif_3a_waiting"in u&&(ze=u.b_notif_3a_waiting),"k_countdown_3a"in u&&(Ee=u.k_countdown_3a),"k_countdown_3b"in u&&(ot=u.k_countdown_3b),"b_notif_3b_waiting"in u&&(Et=u.b_notif_3b_waiting),"b_burn_clicked"in u&&(an=u.b_burn_clicked),"k_deduced"in u&&t(12,s=u.k_deduced)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty[0]&7340032&&t(12,s=C(f(p.clone()).clone()).clone()),n.$$.dirty[0]&3&&be&&(Object.values(re).forEach(u=>u.muted=pe),jt({muted:pe?"1":"0"},30*pt))},[pe,be,i,r,_,h,y,v,w,S,m,K,s,d,se,vt,ut,ws,bs,Sn,p,f,C,Gi,Fi,zi,Ji,Ki,Xi,xi,Vi,Zi]}class Ho extends _t{constructor(e){super(e);ft(this,e,Wo,ps,dt,{},null,[-1,-1,-1]),L("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:ps.name})}}new Ho({target:document.body,props:{}});
//# sourceMappingURL=index.c36d7856.js.map
