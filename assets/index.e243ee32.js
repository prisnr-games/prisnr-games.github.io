var yo=Object.defineProperty,ko=Object.defineProperties;var vo=Object.getOwnPropertyDescriptors;var Qs=Object.getOwnPropertySymbols;var So=Object.prototype.hasOwnProperty,Eo=Object.prototype.propertyIsEnumerable;var Ws=(n,e,t)=>e in n?yo(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Pt=(n,e)=>{for(var t in e||(e={}))So.call(e,t)&&Ws(n,t,e[t]);if(Qs)for(var t of Qs(e))Eo.call(e,t)&&Ws(n,t,e[t]);return n},tn=(n,e)=>ko(n,vo(e));import{v as Po,S as Ao,a as _t,i as ft,s as dt,d as Q,g as Hs,b as ht,c as Gt,o as Ft,e as Wn,f as mt,h as me,q as nn,F as Ie,j as Gs,k as Fs,l as zs,m as Ks,n as T,t as fe,p as C,r as j,u as H,w as S,x as Re,y as xe,z as Hn,A as Gn,B as G,C as Me,D as B,E as K,G as Ne,H as O,I as We,J as W,K as He,L as Ce,M as Oe,N as Ue,O as Co,P as To,Q as qe,R as pt,T as de,U as zt,V as it,W as ct,X as jo,Y as qo,Z as gt,_ as Js,$ as Xs,a0 as ye,a1 as Io,a2 as xs,a3 as Ro,a4 as Mo,a5 as No,a6 as Fn,a7 as Vs,a8 as Zs,a9 as $s,aa as ei,ab as sn,ac as ti,ad as ni,ae as on,af as Ut,ag as Lt,ah as si,ai as Pn,aj as ii,ak as oi,al as ai,am as zn,an as ri,ao as li,ap as ci,aq as ui,ar as Kn,as as Jn,at as Xn,au as Kt,av as _i,aw as Dt,ax as fi,ay as di,az as hi,aA as Oo,aB as Jt}from"./vendor.5ff8e4c0.js";const Uo=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}};Uo();const mi={en:{}},At={red:{color:"#a00000",labels:{en:"red"}},green:{color:"#006000",labels:{en:"green"}},blue:{color:"#0000a0",labels:{en:"blue"}},black:{color:"#000000",labels:{en:"black"}}},An=Object.keys(At),Xt={triangle:{symbol:"\u25B2",labels:{en:"triangle"}},square:{symbol:"\u25A0",labels:{en:"square"}},circle:{symbol:"\u25CF",labels:{en:"circle"}},star:{symbol:"\u2605",labels:{en:"star"}}},Cn=Object.keys(Xt),Ct={nobody_has:{describe:{en:n=>`nobody has ${n||"..."}`}},i_have:{describe:{en:n=>`my chip is ${n||"..."}`}}},xt=Object.keys(Ct),pi={attention:[{labels:{en:"the Arbiter approaches..."}}],loading:[{delay:2e3,interval:200,labels:{en:"hmmm"}},{delay:250,interval:500,labels:{en:"hmmm...."}}]},xn="pulsar-1",Tn="pulsar-1",jn="https://h7pwct6jl3.execute-api.us-west-2.amazonaws.com/",an="https://7yp08exitj.execute-api.us-west-2.amazonaws.com/",rn=n=>(Number(n/10000n)/100).toFixed(2).replace(/\.?0+$/,"")+" SCRT";class Vn extends Error{constructor(e,t){t?t instanceof TypeError?super(`${e}: ${t.stack}`):t instanceof Error?super(`${e}: ${t.stack}`):super(`${e}: Unknown error`):super(e)}}const Ve=1e3,Zn=60*Ve,Yt=60*Zn,wt=24*Yt,gi=7*wt,wi=30*wt,bi=365*wt,Le=Object.entries;function yi(n,e){return Le(n).reduce((t,[s,o])=>[...t,e(s,o)],[])}function Y(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}function $n(){return new Promise(()=>{})}const ve=n=>n[0].toUpperCase()+n.slice(1),Lo=[{ge:bi,divisor:bi,unit:"year"},{ge:wi,divisor:wi,unit:"month"},{ge:gi,divisor:gi,unit:"week"},{ge:wt,divisor:wt,unit:"day"},{ge:Yt,divisor:Yt,unit:"hour"},{ge:Zn,divisor:Zn,unit:"minute"},{ge:Ve,divisor:Ve,unit:"seconds"},{ge:0,divisor:1,text:"just now"}];function ki(n,e=Date.now(),t=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"})){const o=(typeof e=="object"?e.getTime():new Date(e).getTime())-(typeof n=="object"?n:new Date(n)).getTime(),l=Math.abs(o);for(const a of Lo)if(l>=a.ge){const c=Math.round(Math.abs(o)/a.divisor),u=o<0;return a.unit?t.format(u?c:-c,a.unit):a.text}}class vi{constructor(){this._as_intervals=new Set,this._as_timeouts=new Set}addInterval(e,t){const s=window.setInterval(e,t);return this._as_intervals.add(s),s}addTimeout(e,t){const s=window.setTimeout(()=>{this.delTimeout(s),e()},t);return this._as_timeouts.add(s),s}delInterval(e){window.clearInterval(e),this._as_intervals.delete(e)}delTimeout(e){window.clearTimeout(e),this._as_timeouts.delete(e)}killAll(){for(const e of this._as_intervals)this.delInterval(e);for(const e of this._as_timeouts)this.delTimeout(e)}}async function Do(n,e,t=null){if(t==null?void 0:t.search){if(e.includes("?"))throw new Error(`Cannot specify 'search' option in fetch config when URI already contains search params: "${e}"`);e+="?"+new URLSearchParams(t.search).toString(),delete t.search}try{return await Po(e,tn(Pt({},t),{method:n,mode:"cors",headers:Pt({Accept:"application/json"},(t||{}).headers||{})})).json()}catch(s){throw s}}async function Si(n,e=null){return Do("GET",n,e)}const Tt="secret1f6w596dklzvpju85g870jl388w7pk5z0mr35xr",Ei="8e0d4273f021b4367f797c929f5d28bf97912fb77664d043ffe019274ccff70a",Vt="secret1zs9yat3sn2j2z7a7cp2rw7qy3f3kuctdu7v9sk",Pi="36d94d2066b903ede9716f77f2fe99274aaa2c434feb424302dbb8aef9f34721";class ln extends Error{constructor(e){super(`The game contract returned the following error: ${e}`)}}const Yo="1000000",Bo=new TextDecoder;class Ai{constructor(e,t,s,o){this._k_wallet=e,this._p_contract=t,this._g_permit=s||null,this._si_code_hash=o}async execute(e,t,s=[]){const o=await this._k_wallet.execute(this._p_contract,e,s,t,this._si_code_hash);return{txnHash:o.transactionHash,data:JSON.parse(Bo.decode(o.data))}}query(e){return this._g_permit&&(e={with_permit:{query:e,permit:this._g_permit}}),this._k_wallet.query(this._p_contract,e)}}class Ci extends Ai{async queryGameState(){const e=await this.query({game_state:{}});if(e.error)throw new ln(e.error);return e.game_state}joinGame(){return this.execute({join:{}},{amount:[{amount:"8750",denom:"uscrt"}],gas:"35000"},[{denom:"uscrt",amount:Yo}])}submitAssertion(e,t){const[s,o]=t.split(":"),l=s==="color"?{color:o}:{shape:o};return this.execute({submit:Pt({target:e},l)},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}submitGuess(e){return this.execute({guess:e},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}pickReward(e){return this.execute({pick_reward:{reward:e}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"1000000"})}forceEndgame(){return this.execute({force_endgame:{}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"40000"})}}class Ti extends Ai{async queryListNfts(){const e=await this.query({tokens:{owner:this._k_wallet.publicAddress}});if(e.error)throw new ln(e.error);return e}async queryNftInfo(e){const t=await this.query({nft_info:{token_id:e}});if(t.error)throw new ln(t.error);return t}async*queryNfts(){const e=await this.queryListNfts();for(const t of e.token_list.tokens)yield await this.queryNftInfo(t)}}const Qo=(n,e)=>e<60*Ve?Date.now()-n.lastUpdated>5*Ve:Date.now()-n.lastUpdated>30*Ve,ji=200;console.log(`Imposing global ${ji} blocks per 5 minutes estimate`);let es=!1,qn=0n,qi=0,Ii=0;async function Wo(){if(Date.now()-Ii<5*Ve)return;const n=new URL(an);n.pathname="/status";try{const e=await Si(n.href),{latest_block_height:t,latest_block_time:s}=e.data.result.sync_info;qn=BigInt(t),qi=new Date(s).getTime(),Ii=Date.now()}catch{}}class bt{constructor(e,t=ji,s=Qo){this._xt_start=0,this._xt_eta=0,this._xt_updated=0,this._b_currently_updating=!1,this._xg_block_start=BigInt(e),this._xg_block_dest=this._xg_block_start+BigInt(t),this._f_should_update=()=>s(this,this._xt_eta-Date.now())}async fetch_start_time(){const e=new URL(an);e.pathname="/block";const t=await Si(e.href,{search:{block:this._xg_block_start+""}});this._xt_start=new Date(t.data.result.block.header.time).getTime()}async estimate(){es=!0,this._xt_start||await this.fetch_start_time(),await Wo();const e=Number(qn-this._xg_block_start);if(e<5)return 0;const t=(qi-this._xt_start)/e,s=Number(this._xg_block_dest-qn),o=this._xt_updated=Date.now();return es=!1,this._xt_eta=o+Math.round(s*t)}get lastUpdated(){return this._xt_updated}get destinationBlock(){return this._xg_block_dest}get expired(){return qn>=this.destinationBlock}get ready(){return this._xt_eta!==0}get eta(){return!this.expired&&!es&&this._f_should_update()&&this.estimate(),this._xt_eta}get remaining(){return this.eta-Date.now()}}const ts="prisnr.games";class ns extends Vn{constructor(e){super("While attempting to enable Keplr",e)}}class ss extends Vn{constructor(e){super("While attempting to acquire offline signer",e)}}class Ho extends Vn{constructor(e){super("While attempting to acquire enigma utils",e)}}class Zt{constructor(e){this._b_disabled=!1,this._f_change_listener=null,this._k_keplr=e}static isAvailable(){return!!window.keplr}static fromWindow(){if(window.keplr)return new Zt(window.keplr);throw new Error("Keplr extension is not installed")}disable(){this._f_change_listener&&window.removeEventListener("keplr_keystorechange",this._f_change_listener),this._b_disabled=!0}async enable(e,t){if(this._b_disabled)return!1;const s=this._si_chain=e.chainId;this._fk_change=t;try{await this._k_keplr.experimentalSuggestChain({chainId:s,chainName:e.chainName,rpc:e.rpc,rest:e.rest,bip44:{coinType:529},coinType:529,stakeCurrency:{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6},bech32Config:{bech32PrefixAccAddr:"secret",bech32PrefixAccPub:"secretpub",bech32PrefixValAddr:"secretvaloper",bech32PrefixValPub:"secretvaloperpub",bech32PrefixConsAddr:"secretvalcons",bech32PrefixConsPub:"secretvalconspub"},currencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],feeCurrencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],gasPriceStep:{low:.1,average:.25,high:.4},features:["secretwasm"]})}catch{return!1}try{await this._k_keplr.enable(s)}catch(o){throw new ns(o)}try{this._k_signer=window.getOfflineSigner(s)}catch(o){throw new ss(o)}try{this._k_enigma=window.getEnigmaUtils(s)}catch(o){throw new Ho(o)}return this._g_key=await this._k_keplr.getKey(s),this._a_accounts=await this._k_signer.getAccounts(),this._k_client=new Ao(jn,this.publicAddress,this._k_signer,this._k_enigma,{exec:{amount:[{amount:"62500",denom:"uscrt"}],gas:"250000"}}),window.addEventListener("keplr_keystorechange",this._f_change_listener=async()=>{(await this._k_keplr.getKey(s)).bech32Address!==this.publicAddress&&this._fk_change()}),!0}get chain(){return this._si_chain}get key(){return this._g_key}get accounts(){return this._a_accounts}get primaryAccount(){return this.accounts[0]}get publicAddress(){return this.primaryAccount.address}async signQueryPermit(){return this._b_disabled?$n():(await this._k_keplr.signAmino(this.chain,this.publicAddress,{chain_id:this.chain,account_number:"0",sequence:"0",fee:{amount:[{denom:"uscrt",amount:"0"}],gas:"1"},msgs:[{type:"query_permit",value:{permit_name:ts,allowed_tokens:[Tt,Vt],permissions:["owner"]}}],memo:""},{preferNoSetFee:!0,preferNoSetMemo:!0})).signature}execute(e,t,s,o,l){if(this._b_disabled)return $n();let a="";if(o&&(a+=` --gas ${o.gas}`),s&&s.length){const c=s[0];a+=` --amount ${c.amount}${c.denom}`}return this._k_client.execute(e,t,"",s,o,l||void 0)}query(e,t,s,o){return this._b_disabled?$n():this._k_client.queryContractSmart(e,t,s||{},o||void 0)}}const In=(n,e)=>n.querySelector(e),Ri=(n,e)=>Array.prototype.slice.call(n.querySelectorAll(e),0);function Te(n,e={},t=[]){const s=document.createElement(n);for(const o in e)s.setAttribute(o,e[o]+"");for(const o of t)s.append(o);return s}function Rn(){return document.cookie.split(";").reduce((n,e)=>{const t=e.trim().split("=");return tn(Pt({},n),{[t[0]]:t.slice(1).join("=")})},{})}function jt(n,e){document.cookie=Object.entries(tn(Pt({},n),{"max-age":""+e})).map(([t,s])=>`${t}=${s}`).join("; ")}function cn(n){return jt({[n]:""},0)}const Go=65535,Mi=128,Fo="RGBK\u25B2\u2586\u25CF\u2605";function Ni(n){let e=[];for(let t=0;t<8;t++)n&Mi?e.push(Fo[t]):e.push(" "),n=n<<1;return`[${e.join(",")}]`}function Mn(n,e=!1){const[t,s]=n.split(":");if(t==="color"){const o=An.indexOf(s);return 1<<7-o|(e?15:0)}else{const o=Cn.indexOf(s);return 1<<3-o|(e?240:0)}}function Bt(n){const[e,t]=n.split(":");return`${e==="shape"?"a ":""}${t}`}function Qt(n){const[e,t]=n.split("|");return`${e==="nobody_has"?"nobody has ":"my chip is"} ${Bt(t)}`}class un{constructor(e=Go){this._xm_deduce=e}clone(){return new un(this._xm_deduce)}nobody(e){let t=Mn(e);return t|=t<<8,this._xm_deduce&=~t,this}opponent(e,t){if(t){const s=Mn(e,!0),o=~Mn(e);this._xm_deduce&=o<<8|s}else this._xm_deduce&=~Mn(e);return this}explain(){const e=this._xm_deduce>>8,t=this._xm_deduce&255;return[`A: ${Ni(e)}`,`O: ${Ni(t)}`].join(`
`)}enumerate(e){let t=e==="bag"?this._xm_deduce>>8:this._xm_deduce&255;const s=[],o=[];for(let a=0;a<8;a++)t&Mi&&(a<4?s.push(An[a]):o.push(Cn[a-4])),t=t<<1;const l=[];for(const a of s)for(const c of o)l.push({target:e,color:a,shape:c});return l}}const{Object:zo,console:Oi}=Hs,ue="src/component/MessagePanel.svelte";function is(n){let e,t,s,o,l;const a={c:function(){e=T("span"),t=fe(n[3]),C(e,"class","msg-console-eval s-l2U1SoEQLPY0"),j(e,ue,632,3,16621)},m:function(u,i){H(u,e,i),S(e,t),n[22](e),l=!0},p:function(u,i){(!l||i[0]&8)&&Re(t,u[3])},i:function(u){l||(xe(()=>{o&&o.end(1),s=Hn(e,me,{duration:1e3}),s.start()}),l=!0)},o:function(u){s&&s.invalidate(),o=Gn(e,me,{duration:500}),l=!1},d:function(u){u&&G(e),n[22](null),u&&o&&o.end()}};return Q("SvelteRegisterBlock",{block:a,id:is.name,type:"if",source:"(632:2) {#if s_evaluation}",ctx:n}),a}function os(n){let e,t,s,o,l,a,c,u,i,_,d,b,k,w,h,p,A;o=new Ie({props:{icon:Gs},$$inline:!0}),d=new Ie({props:{icon:Fs},$$inline:!0});let m=n[12].length&&as(n);const P={c:function(){e=T("div"),t=T("span"),s=T("span"),Me(o.$$.fragment),l=B(),a=T("span"),c=fe(n[6]),u=B(),i=T("span"),_=T("span"),Me(d.$$.fragment),b=B(),k=T("span"),w=fe(n[7]),h=B(),m&&m.c(),C(s,"class","msg-nav-icon lifted s-l2U1SoEQLPY0"),j(s,ue,644,4,16918),C(a,"class","msg-nav-name s-l2U1SoEQLPY0"),K(a,"long-name",n[6].length>=40),j(a,ue,645,4,16983),C(t,"class","msg-nav-group s-l2U1SoEQLPY0"),j(t,ue,643,3,16885),C(_,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(_,ue,648,4,17119),C(k,"class","msg-nav-addr addr s-l2U1SoEQLPY0"),j(k,ue,649,4,17179),C(i,"class","msg-nav-group s-l2U1SoEQLPY0"),j(i,ue,647,3,17086),C(e,"class","msg-nav s-l2U1SoEQLPY0"),j(e,ue,642,2,16810)},m:function(f,v){H(f,e,v),S(e,t),S(t,s),Ne(o,s,null),S(t,l),S(t,a),S(a,c),S(e,u),S(e,i),S(i,_),Ne(d,_,null),S(i,b),S(i,k),S(k,w),S(e,h),m&&m.m(e,null),A=!0},p:function(f,v){n=f,(!A||v[0]&64)&&Re(c,n[6]),v[0]&64&&K(a,"long-name",n[6].length>=40),(!A||v[0]&128)&&Re(w,n[7]),n[12].length?m?(m.p(n,v),v[0]&4096&&O(m,1)):(m=as(n),m.c(),O(m,1),m.m(e,null)):m&&(We(),W(m,1,1,()=>{m=null}),He())},i:function(f){A||(O(o.$$.fragment,f),O(d.$$.fragment,f),O(m),xe(()=>{p||(p=Ce(e,Wn,{duration:750,easing:nn},!0)),p.run(1)}),A=!0)},o:function(f){W(o.$$.fragment,f),W(d.$$.fragment,f),W(m),p||(p=Ce(e,Wn,{duration:750,easing:nn},!1)),p.run(0),A=!1},d:function(f){f&&G(e),Oe(o),Oe(d),m&&m.d(),f&&p&&p.end()}};return Q("SvelteRegisterBlock",{block:P,id:os.name,type:"if",source:"(642:1) {#if b_nav_display}",ctx:n}),P}function as(n){let e,t,s,o,l,a,c=n[12][0]+"",u,i,_,d,b=n[12][1]+"",k,w,h,p,A,m=n[12][2]+"",P,y,f;s=new Ie({props:{icon:zs},$$inline:!0});const v={c:function(){e=T("span"),t=T("span"),Me(s.$$.fragment),o=B(),l=T("span"),a=T("span"),u=fe(c),i=fe(":"),_=B(),d=T("span"),k=fe(b),w=B(),h=T("span"),h.textContent="...",p=B(),A=T("span"),P=fe(m),C(t,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(t,ue,653,5,17348),C(a,"class","prefix s-l2U1SoEQLPY0"),j(a,ue,655,6,17460),C(d,"class","addr s-l2U1SoEQLPY0"),j(d,ue,656,6,17518),C(h,"class","ellipsis s-l2U1SoEQLPY0"),j(h,ue,657,6,17573),C(A,"class","addr s-l2U1SoEQLPY0"),j(A,ue,658,6,17613),C(l,"class","msg-nav-permit inline-flex s-l2U1SoEQLPY0"),j(l,ue,654,5,17412),C(e,"class","msg-nav-group s-l2U1SoEQLPY0"),j(e,ue,652,4,17280)},m:function(M,U){H(M,e,U),S(e,t),Ne(s,t,null),S(e,o),S(e,l),S(l,a),S(a,u),S(a,i),S(l,_),S(l,d),S(d,k),S(l,w),S(l,h),S(l,p),S(l,A),S(A,P),f=!0},p:function(M,U){(!f||U[0]&4096)&&c!==(c=M[12][0]+"")&&Re(u,c),(!f||U[0]&4096)&&b!==(b=M[12][1]+"")&&Re(k,b),(!f||U[0]&4096)&&m!==(m=M[12][2]+"")&&Re(P,m)},i:function(M){f||(O(s.$$.fragment,M),xe(()=>{y||(y=Ce(e,me,{duration:1e3},!0)),y.run(1)}),f=!0)},o:function(M){W(s.$$.fragment,M),y||(y=Ce(e,me,{duration:1e3},!1)),y.run(0),f=!1},d:function(M){M&&G(e),Oe(s),M&&y&&y.end()}};return Q("SvelteRegisterBlock",{block:v,id:as.name,type:"if",source:"(652:3) {#if a_permit_displays.length}",ctx:n}),v}function rs(n){let e,t,s,o,l,a,c,u,i;s=new Ie({props:{icon:Ks},$$inline:!0});const _={c:function(){e=T("div"),t=T("span"),Me(s.$$.fragment),o=B(),l=T("span"),l.textContent="Submit",C(t,"class","msg-submit-icon s-l2U1SoEQLPY0"),j(t,ue,673,3,17960),C(l,"class","msg-submit-text s-l2U1SoEQLPY0"),j(l,ue,674,3,18027),C(e,"class","msg-submit s-l2U1SoEQLPY0"),K(e,"active",!!n[9]),j(e,ue,665,2,17738)},m:function(b,k){H(b,e,k),S(e,t),Ne(s,t,null),S(e,o),S(e,l),n[23](e),c=!0,u||(i=[Ue(e,"click",function(){Co(n[9]||Ui)&&(n[9]||Ui).apply(this,arguments)},!1,!1,!1),Ue(e,"mouseenter",n[15],!1,!1,!1),Ue(e,"mouseleave",n[16],!1,!1,!1)],u=!0)},p:function(b,k){n=b,k[0]&512&&K(e,"active",!!n[9])},i:function(b){c||(O(s.$$.fragment,b),xe(()=>{a||(a=Ce(e,mt,{},!0)),a.run(1)}),c=!0)},o:function(b){W(s.$$.fragment,b),a||(a=Ce(e,mt,{},!1)),a.run(0),c=!1},d:function(b){b&&G(e),Oe(s),n[23](null),b&&a&&a.end(),u=!1,To(i)}};return Q("SvelteRegisterBlock",{block:_,id:rs.name,type:"if",source:"(665:1) {#if b_submit_display}",ctx:n}),_}function ls(n){let e,t,s,o,l,a,c,u,i,_,d,b,k,w,h,p=n[3]&&is(n),A=n[5]&&os(n),m=n[8]&&rs(n);const P={c:function(){e=T("div"),t=T("div"),s=T("div"),o=B(),l=T("div"),a=T("span"),c=fe(">\xA0"),u=fe(n[4]),i=fe(n[11]),_=B(),d=T("span"),d.textContent="\xA0",b=B(),p&&p.c(),k=B(),A&&A.c(),w=B(),m&&m.c(),C(s,"class","msg-history-scroll s-l2U1SoEQLPY0"),j(s,ue,626,2,16373),C(t,"class","msg-history s-l2U1SoEQLPY0"),j(t,ue,625,1,16322),C(a,"class","text s-l2U1SoEQLPY0"),j(a,ue,629,2,16473),C(d,"class","cursor blinking s-l2U1SoEQLPY0"),j(d,ue,630,2,16531),C(l,"class","msg-console s-l2U1SoEQLPY0"),j(l,ue,628,1,16445),C(e,"class","msg-panel s-l2U1SoEQLPY0"),j(e,ue,624,0,16276)},l:function(f){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(f,v){H(f,e,v),S(e,t),S(t,s),n[19](s),n[20](t),S(e,o),S(e,l),S(l,a),S(a,c),S(a,u),S(a,i),S(l,_),S(l,d),n[21](d),S(l,b),p&&p.m(l,null),S(e,k),A&&A.m(e,null),S(e,w),m&&m.m(e,null),n[24](e),h=!0},p:function(f,v){(!h||v[0]&16)&&Re(u,f[4]),(!h||v[0]&2048)&&Re(i,f[11]),f[3]?p?(p.p(f,v),v[0]&8&&O(p,1)):(p=is(f),p.c(),O(p,1),p.m(l,null)):p&&(We(),W(p,1,1,()=>{p=null}),He()),f[5]?A?(A.p(f,v),v[0]&32&&O(A,1)):(A=os(f),A.c(),O(A,1),A.m(e,w)):A&&(We(),W(A,1,1,()=>{A=null}),He()),f[8]?m?(m.p(f,v),v[0]&256&&O(m,1)):(m=rs(f),m.c(),O(m,1),m.m(e,null)):m&&(We(),W(m,1,1,()=>{m=null}),He())},i:function(f){h||(O(p),O(A),O(m),h=!0)},o:function(f){W(p),W(A),W(m),h=!1},d:function(f){f&&G(e),n[19](null),n[20](null),n[21](null),p&&p.d(),A&&A.d(),m&&m.d(),n[24](null)}};return Q("SvelteRegisterBlock",{block:P,id:ls.name,type:"component",source:"",ctx:n}),P}const Ui=()=>{};function Ko(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("MessagePanel",s,[]);const{language:l}=Gt("game");let a;l.subscribe(g=>a=g);const c={reveal_text:U,spinning:re,commit:Ye,receive:Z,arbiter:$e,opponent:pe,user:Se,error:rt,warn:ge,wallet:Fe,permit:ze,submittable:tt,unsubmittable:ae};let{k_killables:u}=e,i,_,d,b="\u275A",k="",w="",h=!1,p="",A="",m="",P=!1,y=null,f,v=0,q=!1,M="";async function U(g,ee=60,Ee=0,Ke=!1){F&&(t(11,L=""),u.delInterval(F),N=0,F=0),Ke||(M=g);let _e=++v;ee||(ee=60);const nt=w.length,St=g.length;let Qe=0;for(;Qe<Math.min(nt,St)&&w[Qe]===g[Qe];Qe++);const Et=3/5;for(let he=nt;he>Qe;he--)if(t(4,w=w.slice(0,-1)),await Y(ee*Et),v!==_e)return;if(Ee&&await Y(Ee),v!==_e)return;const ke=f||In(document.body,".cursor");if(!!ke){for(let he=Qe;he<St;he++)if(ke.classList.remove("blinking"),await Y(10),v!==_e||(ke.classList.add("blinking"),t(4,w+=g[he]),await Y(ee),v!==_e))return}}const I=["\u25DC \u25DD"," \u02C9\u25DE"," \u02CD\u25DD","\u25DF \u25DE","\u25DC\u02CD ","\u25DF\u02C9 "];let L="",F=0,N=0;async function re(g){if(g){if(F===0){let Ee=function(){t(11,L=" "+I[N++]+" "),N%=I.length};F=-1;const ee=w;await U(ee+" "+I[I.length-1]+" ",60,0,!0),t(4,w=ee),Ee(),F=u.addInterval(Ee,100)}}else F>0&&(t(11,L=""),u.delInterval(F),N=0,F=0)}async function J(){await U("")}let Ze=0;async function Z(g){if(q)return;for(;!i;)await Y(100);const ee=g.widgets||{},Ee=Ze++,Ke=Te("div",{class:["line-commit",...g.classes||[]].join(" ")},[`> ${g.from}: `,...g.text.flatMap(ke=>{const he=[];let Pe=0;for(const{0:ut,1:lt,index:Je}of ke.matchAll(/\{([a-z0-9-_]+)\}/ig)){const st=ee[lt];st?(Pe!==Je&&he.push(ke.slice(Pe,Je)),st instanceof Element?he.push(st):he.push(Te("span",{class:`msg-widget-${lt}-${Ee}`}))):(console.error(`No such widget '${lt}' was passed in with the formatted line`),he.push(ke.slice(Pe,Je+ut.length))),Pe=Je+ut.length}return Pe!==ke.length&&he.push(ke.slice(Pe)),he.push(Te("div",{class:"newline"})),he})]);for(const[ke,he]of Le(ee))typeof he.subscribe=="function"&&he.subscribe(Pe=>{const ut=Ri(Ke,`.msg-widget-${ke}-${Ee}`);for(const lt of ut)lt.innerHTML=Pe});const _e=Te("div",{class:"curtain"});_.append(Ke),_.append(_e),t(0,i.scrollTop=i.scrollHeight,i);const nt=_.getBoundingClientRect(),St=Ke.getBoundingClientRect(),Qe=St.top-nt.top,Et=St.height+5;Object.assign(_e.style,{top:`${Qe}px`,height:`${Et}px`,left:"0px",width:"100%"}),await Y(100);for(let ke=0;ke<Et;ke+=5)Object.assign(_e.style,{top:`${Qe+ke}px`,height:`${Et-ke}px`}),await Y(100);_e.remove()}const Ge=g=>Array.isArray(g)?g:g.trim().split(/\n/).map(ee=>ee.trim());async function $e(g,ee){return await Z({from:"Arbiter",classes:["from-arbiter"],text:Ge(g),widgets:ee||{}})}async function pe(g,ee){return await Z({from:"Opponent",classes:["from-opponent"],text:g,widgets:ee||{}})}async function Se(g,ee){return await Z({from:`You${m}`,classes:["from-user"],text:Ge(g),widgets:ee||{}})}async function Ye(){Se(M||w),t(4,w="")}async function rt(g,ee=!1){await Z({from:"System",classes:["from-system-error"],text:Ge(g)}),ee&&(q=!0)}async function ge(g,ee){await Z({from:"System",classes:["from-system-warn"],text:Ge(g),widgets:ee||{}})}function Fe(g){g.addr?(t(5,h=!0),t(6,p=g.name),t(7,A=g.addr),m=p?` (${p})`:""):t(5,h=!1)}let X=[];function ze(g,ee){const Ee=g.allowed_tokens[0];t(12,X=[ee?"restored":"signed",Ee.slice(0,"secret12345".length),Ee.slice(-5)])}let et=0;async function qt(){debugger;const g=Date.now();g-et>3e4&&(await U("sorry, you don't get to type :P"),await Y(1600),await J(),et=g)}let oe;function tt(g,ee){if(t(8,P=!0),oe){const Ee=oe.getBoundingClientRect();Object.assign(oe.style,{position:"fixed",top:`${Ee.top}px`,left:`${Ee.left}px`})}t(3,k=""),ee&&setTimeout(()=>{oe&&oe.style.position&&Object.assign(oe.style,{position:"",top:"",left:""}),t(3,k=ee)},500),t(9,y=g)}function ae(){t(8,P=!1),t(9,y=null)}Ft(()=>{d.addEventListener("keydown",()=>{qt()})});let R;async function se(){await Y(100),R.classList.add("hover")}async function yt(){t(14,R.style.animation="0",R),await Y(100),R.classList.remove("hover"),await Y(1e3),t(14,R.style.animation="",R)}const kt=["k_killables"];zo.keys(e).forEach(g=>{!~kt.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&Oi.warn(`<MessagePanel> was created with unknown prop '${g}'`)});function vt(g){qe[g?"unshift":"push"](()=>{_=g,t(1,_)})}function we(g){qe[g?"unshift":"push"](()=>{i=g,t(0,i)})}function Be(g){qe[g?"unshift":"push"](()=>{f=g,t(10,f)})}function x(g){qe[g?"unshift":"push"](()=>{oe=g,t(13,oe)})}function It(g){qe[g?"unshift":"push"](()=>{R=g,t(14,R)})}function Wt(g){qe[g?"unshift":"push"](()=>{d=g,t(2,d)})}return n.$$set=g=>{"k_killables"in g&&t(18,u=g.k_killables)},n.$capture_state=()=>({getContext:Gt,onMount:Ft,slide:Wn,blur:mt,fade:me,quadOut:nn,Fa:Ie,faUser:Gs,faWallet:Fs,faTicketAlt:zs,faPaperPlane:Ks,ode:Le,timeout:Y,dd:Te,qs:In,qsa:Ri,ys_lang:l,s_lang:a,k_panel:c,k_killables:u,dm_history:i,dm_history_data:_,dm_panel:d,s_cursor:b,s_evaluation:k,s_text:w,b_nav_display:h,s_nav_name:p,s_nav_addr:A,s_account_alias:m,b_submit_display:P,fk_submit:y,dm_cursor:f,i_iter:v,b_disabled:q,s_revealing:M,reveal_text:U,A_SPIN:I,s_spinner:L,i_spinning:F,i_spin:N,spinning:re,clear:J,c_msgs:Ze,receive:Z,rerformat_lines:Ge,arbiter:$e,opponent:pe,user:Se,commit:Ye,error:rt,warn:ge,wallet:Fe,a_permit_displays:X,permit:ze,dt_attempt_last:et,attempt_type:qt,dm_eval:oe,submittable:tt,unsubmittable:ae,dm_submit:R,mouseenter_submit:se,mouseleave_submit:yt}),n.$inject_state=g=>{"s_lang"in g&&(a=g.s_lang),"k_killables"in g&&t(18,u=g.k_killables),"dm_history"in g&&t(0,i=g.dm_history),"dm_history_data"in g&&t(1,_=g.dm_history_data),"dm_panel"in g&&t(2,d=g.dm_panel),"s_cursor"in g&&(b=g.s_cursor),"s_evaluation"in g&&t(3,k=g.s_evaluation),"s_text"in g&&t(4,w=g.s_text),"b_nav_display"in g&&t(5,h=g.b_nav_display),"s_nav_name"in g&&t(6,p=g.s_nav_name),"s_nav_addr"in g&&t(7,A=g.s_nav_addr),"s_account_alias"in g&&(m=g.s_account_alias),"b_submit_display"in g&&t(8,P=g.b_submit_display),"fk_submit"in g&&t(9,y=g.fk_submit),"dm_cursor"in g&&t(10,f=g.dm_cursor),"i_iter"in g&&(v=g.i_iter),"b_disabled"in g&&(q=g.b_disabled),"s_revealing"in g&&(M=g.s_revealing),"s_spinner"in g&&t(11,L=g.s_spinner),"i_spinning"in g&&(F=g.i_spinning),"i_spin"in g&&(N=g.i_spin),"c_msgs"in g&&(Ze=g.c_msgs),"a_permit_displays"in g&&t(12,X=g.a_permit_displays),"dt_attempt_last"in g&&(et=g.dt_attempt_last),"dm_eval"in g&&t(13,oe=g.dm_eval),"dm_submit"in g&&t(14,R=g.dm_submit)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,_,d,k,w,h,p,A,P,y,f,L,X,oe,R,se,yt,c,u,vt,we,Be,x,It,Wt]}class Li extends _t{constructor(e){super(e);ft(this,e,Ko,ls,dt,{k_panel:17,k_killables:18},null,[-1,-1]),Q("SvelteRegisterComponent",{component:this,tagName:"MessagePanel",options:e,id:ls.name});const{ctx:t}=this.$$,s=e.props||{};t[18]===void 0&&!("k_killables"in s)&&Oi.warn("<MessagePanel> was created without expected prop 'k_killables'")}get k_panel(){return this.$$.ctx[17]}set k_panel(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_killables(){throw new Error("<MessagePanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_killables(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Di="src/component/Prompt.svelte";function Yi(n,e,t){const s=n.slice();return s[17]=e[t],s}function cs(n){let e,t,s=n[0];de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=us(Yi(n,s,c));const l=c=>W(o[c],1,1,()=>{o[c]=null}),a={c:function(){for(let u=0;u<o.length;u+=1)o[u].c();e=zt()},m:function(u,i){for(let _=0;_<o.length;_+=1)o[_].m(u,i);H(u,e,i),t=!0},p:function(u,i){if(i&9){s=u[0],de(s);let _;for(_=0;_<s.length;_+=1){const d=Yi(u,s,_);o[_]?(o[_].p(d,i),O(o[_],1)):(o[_]=us(d),o[_].c(),O(o[_],1),o[_].m(e.parentNode,e))}for(We(),_=s.length;_<o.length;_+=1)l(_);He()}},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)O(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)W(o[i]);t=!1},d:function(u){it(o,u),u&&G(e)}};return Q("SvelteRegisterBlock",{block:a,id:cs.name,type:"if",source:"(122:1) {#if b_display}",ctx:n}),a}function us(n){let e,t=n[17].label+"",s,o,l,a,c,u,i,_,d;function b(){return n[5](n[17])}const k={c:function(){e=T("button"),s=fe(t),o=B(),C(e,"class",l="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"),C(e,"alt",a=n[17].alt||""),j(e,Di,123,3,2733)},m:function(h,p){H(h,e,p),S(e,s),S(e,o),i=!0,_||(d=Ue(e,"click",b,!1,!1,!1),_=!0)},p:function(h,p){n=h,(!i||p&1)&&t!==(t=n[17].label+"")&&Re(s,t),(!i||p&1&&l!==(l="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"))&&C(e,"class",l),(!i||p&1&&a!==(a=n[17].alt||""))&&C(e,"alt",a)},i:function(h){i||(xe(()=>{u&&u.end(1),c=Hn(e,me,{duration:2800,easing:pt}),c.start()}),i=!0)},o:function(h){c&&c.invalidate(),u=Gn(e,me,{duration:2800,easing:nn}),i=!1},d:function(h){h&&G(e),h&&u&&u.end(),_=!1,d()}};return Q("SvelteRegisterBlock",{block:k,id:us.name,type:"each",source:"(123:2) {#each a_opts as g_opt}",ctx:n}),k}function _s(n){let e,t,s=n[1]&&cs(n);const o={c:function(){e=T("div"),s&&s.c(),C(e,"class","prompt s-c0715tBQdWx2"),K(e,"showing",n[2]),j(e,Di,120,0,2640)},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){H(a,e,c),s&&s.m(e,null),t=!0},p:function(a,[c]){a[1]?s?(s.p(a,c),c&2&&O(s,1)):(s=cs(a),s.c(),O(s,1),s.m(e,null)):s&&(We(),W(s,1,1,()=>{s=null}),He()),c&4&&K(e,"showing",a[2])},i:function(a){t||(O(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){a&&G(e),s&&s.d()}};return Q("SvelteRegisterBlock",{block:o,id:_s.name,type:"component",source:"",ctx:n}),o}function Jo(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("Prompt",s,[]);const l={ok:P,opts:y,yes:m,yes_no:A},a={key:"yes",label:"Yes"},c={key:"no",label:"No"},u=[a,c],i=()=>{},_=q=>{q()};let d=[],b=!1,k=!1,w=i;function h(q){w(q),t(1,b=!1)}function p(q,M=_){return new Promise(U=>{w=I=>{M(U,I),t(1,b=!1)},t(0,d=q),t(1,b=!0),queueMicrotask(()=>{t(2,k=!0)})})}function A(){return p(u,(q,M)=>{q(M.key==="yes")})}function m(){return p([a])}function P(q="Ok"){return p([{key:"ok",label:q}])}function y(q){return p(yi(q,(M,U)=>Pt({key:M},U)),(M,U)=>{M(U.key)})}const f=[];Object.keys(e).forEach(q=>{!~f.indexOf(q)&&q.slice(0,2)!=="$$"&&q!=="slot"&&console.warn(`<Prompt> was created with unknown prop '${q}'`)});const v=q=>h(q);return n.$capture_state=()=>({oderac:yi,expoOut:pt,quadOut:nn,fade:me,k_prompt:l,G_ANS_YES:a,G_ANS_NO:c,A_OPTS_YES_NO:u,F_NOOP:i,F_CALL:_,a_opts:d,b_display:b,b_showing:k,fk_answer:w,answer:h,prompt:p,yes_no:A,yes:m,ok:P,opts:y}),n.$inject_state=q=>{"a_opts"in q&&t(0,d=q.a_opts),"b_display"in q&&t(1,b=q.b_display),"b_showing"in q&&t(2,k=q.b_showing),"fk_answer"in q&&(w=q.fk_answer)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[d,b,k,h,l,v]}class Bi extends _t{constructor(e){super(e);ft(this,e,Jo,_s,dt,{k_prompt:4}),Q("SvelteRegisterComponent",{component:this,tagName:"Prompt",options:e,id:_s.name})}get k_prompt(){return this.$$.ctx[4]}set k_prompt(e){throw new Error("<Prompt>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ot="src/component/Assertion.svelte";function Qi(n,e,t){const s=n.slice();return s[15]=e[t],s}function Wi(n,e,t){const s=n.slice();return s[18]=e[t],s}function Hi(n,e,t){const s=n.slice();return s[15]=e[t],s}function Gi(n,e,t){const s=n.slice();return s[18]=e[t],s}function Fi(n,e,t){const s=n.slice();return s[27]=e[t],s}function fs(n){let e,t,s,o,l,a,c,u,i,_,d=xt;de(d);let b=[];for(let m=0;m<d.length;m+=1)b[m]=ds(Fi(n,d,m));let k=n[7];de(k);let w=[];for(let m=0;m<k.length;m+=1)w[m]=ms(Hi(n,k,m));let h=n[7];de(h);let p=[];for(let m=0;m<h.length;m+=1)p[m]=gs(Qi(n,h,m));const A={c:function(){e=T("div"),t=T("span");for(let P=0;P<b.length;P+=1)b[P].c();o=B(),l=T("span");for(let P=0;P<w.length;P+=1)w[P].c();c=B(),u=T("span");for(let P=0;P<p.length;P+=1)p[P].c();C(t,"class","tab-wrap s-WG7syJ6nmWd-"),j(t,ot,207,2,5236),C(e,"class","tx-basis s-WG7syJ6nmWd-"),j(e,ot,206,1,5159),C(l,"class","diamond tx-colors s-WG7syJ6nmWd-"),j(l,ot,216,1,5512),C(u,"class","diamond tx-shapes s-WG7syJ6nmWd-"),j(u,ot,235,1,6075)},m:function(P,y){H(P,e,y),S(e,t);for(let f=0;f<b.length;f+=1)b[f].m(t,null);H(P,o,y),H(P,l,y);for(let f=0;f<w.length;f+=1)w[f].m(l,null);H(P,c,y),H(P,u,y);for(let f=0;f<p.length;f+=1)p[f].m(u,null);_=!0},p:function(P,y){if(n=P,y&42){d=xt,de(d);let f;for(f=0;f<d.length;f+=1){const v=Fi(n,d,f);b[f]?b[f].p(v,y):(b[f]=ds(v),b[f].c(),b[f].m(t,null))}for(;f<b.length;f+=1)b[f].d(1);b.length=d.length}if(y&204){k=n[7],de(k);let f;for(f=0;f<k.length;f+=1){const v=Hi(n,k,f);w[f]?w[f].p(v,y):(w[f]=ms(v),w[f].c(),w[f].m(l,null))}for(;f<w.length;f+=1)w[f].d(1);w.length=k.length}if(y&196){h=n[7],de(h);let f;for(f=0;f<h.length;f+=1){const v=Qi(n,h,f);p[f]?p[f].p(v,y):(p[f]=gs(v),p[f].c(),p[f].m(u,null))}for(;f<p.length;f+=1)p[f].d(1);p.length=h.length}},i:function(P){_||(xe(()=>{s||(s=Ce(e,me,{duration:3600,easing:gt},!0)),s.run(1)}),xe(()=>{a||(a=Ce(l,me,{delay:2400,duration:3200,easing:pt},!0)),a.run(1)}),xe(()=>{i||(i=Ce(u,me,{delay:3200,duration:3200,easing:pt},!0)),i.run(1)}),_=!0)},o:function(P){s||(s=Ce(e,me,{duration:3600,easing:gt},!1)),s.run(0),a||(a=Ce(l,me,{delay:2400,duration:3200,easing:pt},!1)),a.run(0),i||(i=Ce(u,me,{delay:3200,duration:3200,easing:pt},!1)),i.run(0),_=!1},d:function(P){P&&G(e),it(b,P),P&&s&&s.end(),P&&G(o),P&&G(l),it(w,P),P&&a&&a.end(),P&&G(c),P&&G(u),it(p,P),P&&i&&i.end()}};return Q("SvelteRegisterBlock",{block:A,id:fs.name,type:"if",source:"(206:0) {#if b_visible}",ctx:n}),A}function ds(n){let e,t=ve(Ct[n[27]].describe[n[3]](""))+"",s,o,l,a;const c={c:function(){e=T("span"),s=fe(t),o=B(),C(e,"class","active tab s-WG7syJ6nmWd-"),C(e,"data-basis",n[27]),K(e,"active",n[27]===n[1]),j(e,ot,209,4,5295)},m:function(i,_){H(i,e,_),S(e,s),S(e,o),l||(a=Ue(e,"click",n[5],!1,!1,!1),l=!0)},p:function(i,_){_&8&&t!==(t=ve(Ct[i[27]].describe[i[3]](""))+"")&&Re(s,t),_&2&&K(e,"active",i[27]===i[1])},d:function(i){i&&G(e),l=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:ds.name,type:"each",source:"(209:3) {#each A_BASES as si_basis}",ctx:n}),c}function zi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:zi.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Ki(n){let e,t,s=ve(At[n[26]].labels[n[3]])+"",o,l,a;const c={c:function(){e=T("button"),t=T("span"),o=fe(s),C(t,"class","s-WG7syJ6nmWd-"),j(t,ot,227,7,5942),C(e,"class","diamond-"+n[18].pos+" color-"+n[26]+" s-WG7syJ6nmWd-"),C(e,"data-quality","color:"+n[26]),K(e,"selected",`color:${n[26]}`===n[2]),j(e,ot,221,6,5736)},m:function(i,_){H(i,e,_),S(e,t),S(t,o),l||(a=Ue(e,"click",n[6],!1,!1,!1),l=!0)},p:function(i,_){_&8&&s!==(s=ve(At[i[26]].labels[i[3]])+"")&&Re(o,s),_&132&&K(e,"selected",`color:${i[26]}`===i[2])},d:function(i){i&&G(e),l=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:Ki.name,type:"then",source:'(221:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function Ji(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Ji.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function hs(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Ji,then:Ki,catch:zi,value:26};Js(An[n[18].key],t);const s={c:function(){e=zt(),t.block.c()},m:function(l,a){H(l,e,a),t.block.m(l,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(l,a){n=l,Xs(t,n,a)},d:function(l){l&&G(e),t.block.d(l),t.token=null,t=null}};return Q("SvelteRegisterBlock",{block:s,id:hs.name,type:"each",source:"(220:4) {#each a_group as g_loc}",ctx:n}),s}function ms(n){let e,t,s=n[15];de(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=hs(Gi(n,s,a));const l={c:function(){e=T("span");for(let c=0;c<o.length;c+=1)o[c].c();t=B(),C(e,"class","s-WG7syJ6nmWd-"),j(e,ot,218,3,5646)},m:function(c,u){H(c,e,u);for(let i=0;i<o.length;i+=1)o[i].m(e,null);S(e,t)},p:function(c,u){if(u&204){s=c[15],de(s);let i;for(i=0;i<s.length;i+=1){const _=Gi(c,s,i);o[i]?o[i].p(_,u):(o[i]=hs(_),o[i].c(),o[i].m(e,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d:function(c){c&&G(e),it(o,c)}};return Q("SvelteRegisterBlock",{block:l,id:ms.name,type:"each",source:"(218:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),l}function Xi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Xi.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function xi(n){let e,t,s=Xt[n[21]].symbol+"",o,l,a;const c={c:function(){e=T("button"),t=T("span"),o=fe(s),C(t,"class","s-WG7syJ6nmWd-"),j(t,ot,246,7,6507),C(e,"class","diamond-"+n[18].pos+" bg-rad-"+n[18].pos+" s-WG7syJ6nmWd-"),C(e,"data-quality","shape:"+n[21]),K(e,"selected",`shape:${n[21]}`===n[2]),j(e,ot,240,6,6299)},m:function(i,_){H(i,e,_),S(e,t),S(t,o),l||(a=Ue(e,"click",n[6],!1,!1,!1),l=!0)},p:function(i,_){_&132&&K(e,"selected",`shape:${i[21]}`===i[2])},d:function(i){i&&G(e),l=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:xi.name,type:"then",source:'(240:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),c}function Vi(n){const e={c:ye,m:ye,p:ye,d:ye};return Q("SvelteRegisterBlock",{block:e,id:Vi.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function ps(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Vi,then:xi,catch:Xi,value:21};Js(Cn[n[18].key],t);const s={c:function(){e=zt(),t.block.c()},m:function(l,a){H(l,e,a),t.block.m(l,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(l,a){n=l,Xs(t,n,a)},d:function(l){l&&G(e),t.block.d(l),t.token=null,t=null}};return Q("SvelteRegisterBlock",{block:s,id:ps.name,type:"each",source:"(239:4) {#each a_group as g_loc}",ctx:n}),s}function gs(n){let e,t,s=n[15];de(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=ps(Wi(n,s,a));const l={c:function(){e=T("span");for(let c=0;c<o.length;c+=1)o[c].c();t=B(),C(e,"class","s-WG7syJ6nmWd-"),j(e,ot,237,3,6209)},m:function(c,u){H(c,e,u);for(let i=0;i<o.length;i+=1)o[i].m(e,null);S(e,t)},p:function(c,u){if(u&196){s=c[15],de(s);let i;for(i=0;i<s.length;i+=1){const _=Wi(c,s,i);o[i]?o[i].p(_,u):(o[i]=ps(_),o[i].c(),o[i].m(e,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d:function(c){c&&G(e),it(o,c)}};return Q("SvelteRegisterBlock",{block:l,id:gs.name,type:"each",source:"(237:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),l}function ws(n){let e,t,s=n[0]&&fs(n);const o={c:function(){s&&s.c(),e=zt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),H(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&O(s,1)):(s=fs(a),s.c(),O(s,1),s.m(e.parentNode,e)):s&&(We(),W(s,1,1,()=>{s=null}),He())},i:function(a){t||(O(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){s&&s.d(a),a&&G(e)}};return Q("SvelteRegisterBlock",{block:o,id:ws.name,type:"component",source:"",ctx:n}),o}function Xo(n,e,t){let s,{$$slots:o={},$$scope:l}=e;ht("Assertion",o,[]);const a={show:b,hide:k},c=ct(),u=Gt("game");let i=u.language;jo(i,"yw_lang"),qo(n,i,f=>t(3,s=f));let _=!1,d="";async function b(f){d=f||"",f&&(t(1,w=f),c("basis",w)),t(0,_=!0)}function k(){t(0,_=!1)}let w=xt[0],h=null;const p=(f,v)=>f.closest(`[data-${v}]`).getAttribute(`data-${v}`);function A(f){const v=p(f.target,"basis");if(d&&v!==d){c("force_reject",[v,d]);return}t(1,w=v),c("basis",w)}function m(f){t(2,h=p(f.target,"quality")),c("quality",h)}const P=[[{key:0,pos:"top"},{key:2,pos:"rgt"}],[{key:1,pos:"lft"},{key:3,pos:"btm"}]],y=[];return Object.keys(e).forEach(f=>{!~y.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Assertion> was created with unknown prop '${f}'`)}),n.$capture_state=()=>({getContext:Gt,createEventDispatcher:ct,fade:me,expoOut:pt,quadInOut:gt,proper:ve,A_BASES:xt,A_COLORS:An,A_SHAPES:Cn,H_BASES:Ct,H_COLORS:At,H_SHAPES:Xt,k_tx:a,dispatch:c,g_game:u,yw_lang:i,b_visible:_,si_basis_force:d,show:b,hide:k,si_basis_active:w,si_quality:h,data:p,select_basis:A,select_quality:m,A_DIAMOND_KEYS:P,$yw_lang:s}),n.$inject_state=f=>{"yw_lang"in f&&t(4,i=f.yw_lang),"b_visible"in f&&t(0,_=f.b_visible),"si_basis_force"in f&&(d=f.si_basis_force),"si_basis_active"in f&&t(1,w=f.si_basis_active),"si_quality"in f&&t(2,h=f.si_quality)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[_,w,h,s,i,A,m,P,a]}class Zi extends _t{constructor(e){super(e);ft(this,e,Xo,ws,dt,{k_tx:8}),Q("SvelteRegisterComponent",{component:this,tagName:"Assertion",options:e,id:ws.name})}get k_tx(){return this.$$.ctx[8]}set k_tx(e){throw new Error("<Assertion>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function $i(n,e){const t=new Io(39,39,3.3,128,1),s=[new xs({color:"red"}),new Ro({map:n,bumpMap:e,bumpScale:Math.random()*.2+.2}),new xs({map:n})];{const i=new Mo;for(var o=0;o<16;o++){var l=(o+1)/16,a=l*Math.PI*2,c=10*Math.cos(a),u=10*Math.sin(a);o==0?i.moveTo(c,u):i.lineTo(c,u)}return new No(t,s)}}const bs=Math.PI,xo=bs*2,ys=Math.sqrt(3);function Nn(n,e,t,s,o){const l=new Path2D;switch(o){case"triangle":{const a=Math.sqrt(t*ys),c=ys*.5*a,u=a*ys/6,i=u/3;l.moveTo(e,e-(c-u)+i),l.lineTo(e+a/2,e+u+i),l.lineTo(e-a/2,e+u+i);break}case"square":{const a=Math.sqrt(t),c=e-a*.5;l.moveTo(c,c),l.lineTo(c+a,c),l.lineTo(c+a,c+a),l.lineTo(c,c+a);break}case"circle":{const a=Math.sqrt(t/bs);l.ellipse(e,e,a,a,0,0,xo);break}case"star":{const a=bs/5,c=Math.sqrt(2*t/(5*Math.sin(a)));let u=-1.5*a;l.moveTo(e,e-c);for(let i=0;i<9;i++){const _=c*((i%2+1)/2);l.lineTo(e+_*Math.cos(u),e+_*Math.sin(u)),u+=a}break}}l.closePath(),n.fillStyle=At[s].color,n.fill(l),n.globalAlpha=1,n.strokeStyle="black",n.lineWidth=Math.round(Math.sqrt(t)/50),n.stroke(l)}const Vo="src/component/Scene.svelte";function ks(n){let e;const t={c:function(){e=T("div"),C(e,"class","s-O3-AoQkAZcdH"),j(e,Vo,246,0,8015)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,l){H(o,e,l),n[2](e)},p:ye,i:ye,o:ye,d:function(o){o&&G(e),n[2](null)}};return Q("SvelteRegisterBlock",{block:t,id:ks.name,type:"component",source:"",ctx:n}),t}function Zo(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("Scene",s,[]);const l=Math.PI,a=l*2,c=Math.sqrt(3),u={animate_chip_entry:m,animate_chip_exit:P};let i;async function _(v){const q={},M=new ti;for(const U in v){const I=v[U];q[U]=await new Promise(L=>{M.load(I,F=>{L(F)})})}return q}function d(v){const q=v.image,M=Te("canvas",{width:q.width,height:q.height}),U=M.getContext("2d");return[M,U,q]}let b,k,w,h,p;function A(v,q){const[M,U,I]=d(b.chip),L=I.width;I.height,U.drawImage(I,0,0);const F=L/2,N=Math.pow(F*(2/9),2)*l;Nn(U,F,N,v,q),w=new Fn(M),k=$i(w,h),p.add(k)}async function m(v,q){A(v,q),k.position.y=8e5,k.visible=!0,new Ut(new sn(-780,-2450,-3e3)).to(new sn(0,0,0),4e3).easing(Lt.Cubic.Out).onUpdate(L=>{k.position.setX(L.x),k.position.setZ(L.z)}).start(),new Ut({y:750}).to({y:0},4e3).easing(Lt.Back.Out).onUpdate(({y:L})=>{k.position.setY(L)}).start(),new Ut(new on(0,0,0)).to(new on(0,l/2,l/2-l/6),4e3).easing(Lt.Cubic.Out).onUpdate(L=>{k.rotation.set(L.x,L.y,L.z)}).start()}async function P(){new Ut(new sn(0,0,0)).to(new sn(-780,-2450,-3e3),4e3).easing(Lt.Cubic.Out).onUpdate(U=>{k.position.setX(U.x),k.position.setZ(U.z)}).start(),new Ut({y:0}).to({y:750},4e3).easing(Lt.Back.Out).onUpdate(({y:U})=>{k.position.setY(U)}).start(),new Ut(new on(0,l/2,l/2-l/6)).to(new on(0,0,0),4e3).easing(Lt.Cubic.Out).onUpdate(U=>{k.rotation.set(U.x,U.y,U.z)}).start(),await Y(4e3),k.visible=!0}Ft(async()=>{b=await _({chip:"/asset/chip.png",chip_displace:"/asset/chip-displacement.png",scuffs:"/asset/scuffs.png"}),w=b.chip,h=b.scuffs;{const[N,re,J]=d(b.scuffs),Ze=N.width,Z=N.height,Ge=Math.random()*a;re.save();const $e=Ze/2,pe=Z/2;re.translate($e,pe),re.rotate(Ge),re.scale(Math.SQRT2,Math.SQRT2),re.drawImage(J,-$e,-pe),re.restore(),h=new Fn(N)}const v=new Vs({antialias:!0}),q=In(document.body,".msg-panel").getBoundingClientRect(),M=window.innerWidth,U=Math.max(400,Math.min(800,window.innerHeight-q.bottom));if(v.setSize(M,U),!i)return;i.appendChild(v.domElement);const I=M/U;p=new $s;const L=new ei(45,I,1,5e3);L.position.set(0,0,140),L.lookAt(0,0,0);{const N=new Zs(3158064);p.add(N)}{const N=new ni;N.position.set(0,100,50),N.decay=2.5,N.angle=Math.PI/9,N.penumbra=.9,p.add(N)}function F(){v.render(p,L)}v.setAnimationLoop(()=>{F(),si()})});const y=[];Object.keys(e).forEach(v=>{!~y.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&console.warn(`<Scene> was created with unknown prop '${v}'`)});function f(v){qe[v?"unshift":"push"](()=>{i=v,t(0,i)})}return n.$capture_state=()=>({onMount:Ft,chip:$i,AmbientLight:Zs,Scene:$s,PerspectiveCamera:ei,WebGLRenderer:Vs,Vector3:sn,TextureLoader:ti,SpotLight:ni,Euler:on,CanvasTexture:Fn,Tween:Ut,Easing:Lt,updateTween:si,timeout:Y,dd:Te,qs:In,draw_shape:Nn,X_PI:l,X_2PI:a,X_SQRT_3:c,k_scene:u,dm_container:i,load_textures:_,canvas_from_tex:d,h_textures:b,ym_chip:k,yt_chip:w,yt_bump:h,y_scene:p,create_chip:A,animate_chip_entry:m,animate_chip_exit:P}),n.$inject_state=v=>{"dm_container"in v&&t(0,i=v.dm_container),"h_textures"in v&&(b=v.h_textures),"ym_chip"in v&&(k=v.ym_chip),"yt_chip"in v&&(w=v.yt_chip),"yt_bump"in v&&(h=v.yt_bump),"y_scene"in v&&(p=v.y_scene)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,u,f]}class eo extends _t{constructor(e){super(e);ft(this,e,Zo,ks,dt,{k_scene:1}),Q("SvelteRegisterComponent",{component:this,tagName:"Scene_1",options:e,id:ks.name})}get k_scene(){return this.$$.ctx[1]}set k_scene(e){throw new Error("<Scene>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const On="src/component/PremiseWidget.svelte";function to(n,e,t){const s=n.slice();return s[14]=e[t][0],s[15]=e[t][1],s[17]=t,s}function vs(n){let e,t,s,o,l,a=n[15].label+"",c,u,i,_,d,b,k;s=new Ie({props:{icon:n[15].icon},$$inline:!0});function w(){return n[9](n[14])}const h={c:function(){e=T("span"),t=T("span"),Me(s.$$.fragment),o=B(),l=T("span"),c=fe(a),u=B(),C(t,"class","truth-opt-icon s-6n-w-T5otbqJ"),j(t,On,158,3,4045),C(l,"class","truth-opt-text s-6n-w-T5otbqJ"),j(l,On,161,3,4117),C(e,"class",i="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"),C(e,"data-opt",_=n[14]),K(e,"selected",n[14]===n[2]),K(e,"undeniable",n[0]==="undeniable"),K(e,"true",n[0]==="true"),K(e,"verified",n[0]==="verified"),j(e,On,149,2,3714)},m:function(A,m){H(A,e,m),S(e,t),Ne(s,t,null),S(e,o),S(e,l),S(l,c),S(e,u),d=!0,b||(k=Ue(e,"click",w,!1,!1,!1),b=!0)},p:function(A,m){n=A;const P={};m&2&&(P.icon=n[15].icon),s.$set(P),(!d||m&2)&&a!==(a=n[15].label+"")&&Re(c,a),(!d||m&16&&i!==(i="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"))&&C(e,"class",i),(!d||m&2&&_!==(_=n[14]))&&C(e,"data-opt",_),m&22&&K(e,"selected",n[14]===n[2]),m&17&&K(e,"undeniable",n[0]==="undeniable"),m&17&&K(e,"true",n[0]==="true"),m&17&&K(e,"verified",n[0]==="verified")},i:function(A){d||(O(s.$$.fragment,A),d=!0)},o:function(A){W(s.$$.fragment,A),d=!1},d:function(A){A&&G(e),Oe(s),b=!1,k()}};return Q("SvelteRegisterBlock",{block:h,id:vs.name,type:"each",source:"(149:1) {#each a_opts as [si_opt, g_opt], i_opt}",ctx:n}),h}function Ss(n){let e,t,s=n[1];de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=vs(to(n,s,c));const l=c=>W(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=T("span");for(let u=0;u<o.length;u+=1)o[u].c();C(e,"class","truth s-6n-w-T5otbqJ"),K(e,"known",!!n[0]),j(e,On,147,0,3603)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,i){H(u,e,i);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[10](e),t=!0},p:function(u,[i]){if(i&55){s=u[1],de(s);let _;for(_=0;_<s.length;_+=1){const d=to(u,s,_);o[_]?(o[_].p(d,i),O(o[_],1)):(o[_]=vs(d),o[_].c(),O(o[_],1),o[_].m(e,null))}for(We(),_=s.length;_<o.length;_+=1)l(_);He()}i&1&&K(e,"known",!!u[0])},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)O(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)W(o[i]);t=!1},d:function(u){u&&G(e),it(o,u),n[10](null)}};return Q("SvelteRegisterBlock",{block:a,id:Ss.name,type:"component",source:"",ctx:n}),a}function $o(n,e,t){let s,{$$slots:o={},$$scope:l}=e;ht("PremiseWidget",o,[]);const a={ignore:{label:"Ignore",icon:oi},trust:{label:"Trust",icon:Pn},distrust:{label:"Distrust",icon:ii}};let c=Le(a),{b_mode_nobody:u}=e,{si_assertion:i}=e,{si_known:_}=e;const d={apply(y){return b(y)}};let b=y=>y,k="ignore",w;const h=ct();function p(y){k!==y&&(t(2,k=y),u?b=f=>k==="trust"?f.nobody(i):k==="distrust"?f.opponent(i,!0):f:b=f=>k==="trust"?f.opponent(i,!0):k==="distrust"?f.opponent(i,!1):f,h("change",y))}const A=["b_mode_nobody","si_assertion","si_known"];Object.keys(e).forEach(y=>{!~A.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&console.warn(`<PremiseWidget> was created with unknown prop '${y}'`)});const m=y=>p(y);function P(y){qe[y?"unshift":"push"](()=>{w=y,t(3,w)})}return n.$$set=y=>{"b_mode_nobody"in y&&t(6,u=y.b_mode_nobody),"si_assertion"in y&&t(7,i=y.si_assertion),"si_known"in y&&t(0,_=y.si_known)},n.$capture_state=()=>({createEventDispatcher:ct,Fa:Ie,faCheckCircle:Pn,faTimesCircle:ii,faDotCircle:oi,faEgg:ai,faCheck:zn,ode:Le,proper:ve,H_OPTS:a,a_opts:c,b_mode_nobody:u,si_assertion:i,si_known:_,k_premise:d,f_apply:b,si_belief:k,dm_truth:w,dispatch:h,select_opt:p,nl_opts:s}),n.$inject_state=y=>{"a_opts"in y&&t(1,c=y.a_opts),"b_mode_nobody"in y&&t(6,u=y.b_mode_nobody),"si_assertion"in y&&t(7,i=y.si_assertion),"si_known"in y&&t(0,_=y.si_known),"f_apply"in y&&(b=y.f_apply),"si_belief"in y&&t(2,k=y.si_belief),"dm_truth"in y&&t(3,w=y.dm_truth),"nl_opts"in y&&t(4,s=y.nl_opts)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&_&&t(1,c=Le({ignore:{label:ve(_),icon:{undeniable:ai,true:zn,verified:zn}[_]}})),n.$$.dirty&2&&t(4,s=c.length)},[_,c,k,w,s,p,u,i,d,m,P]}class _n extends _t{constructor(e){super(e);ft(this,e,$o,Ss,dt,{b_mode_nobody:6,si_assertion:7,si_known:0,k_premise:8}),Q("SvelteRegisterComponent",{component:this,tagName:"PremiseWidget",options:e,id:Ss.name});const{ctx:t}=this.$$,s=e.props||{};t[6]===void 0&&!("b_mode_nobody"in s)&&console.warn("<PremiseWidget> was created without expected prop 'b_mode_nobody'"),t[7]===void 0&&!("si_assertion"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_assertion'"),t[0]===void 0&&!("si_known"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_known'")}get b_mode_nobody(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set b_mode_nobody(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_assertion(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_assertion(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_known(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_known(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_premise(){return this.$$.ctx[8]}set k_premise(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const De="src/component/Decision.svelte";function no(n,e,t){const s=n.slice();return s[20]=e[t],s}function so(n,e,t){const s=n.slice();return s[20]=e[t],s}function Es(n){let e,t,s,o,l,a,c,u,i,_,d,b,k,w,h,p,A,m,P,y,f=n[3];de(f);let v=[];for(let I=0;I<f.length;I+=1)v[I]=Ps(so(n,f,I));let q=n[2];de(q);let M=[];for(let I=0;I<q.length;I+=1)M[I]=As(no(n,q,I));const U={c:function(){e=T("div"),t=T("div"),s=T("div"),o=T("button"),o.textContent="Abstain",l=B(),a=T("div"),c=T("span"),c.textContent="Arbiter's bag:",u=B(),i=T("span"),_=T("span");for(let L=0;L<v.length;L+=1)v[L].c();d=B(),b=T("div"),k=T("span"),k.textContent="Opponent's chip:",w=B(),h=T("span"),p=T("span");for(let L=0;L<M.length;L+=1)M[L].c();C(o,"class","s-UQAPz40uou8M"),j(o,De,220,4,7343),C(s,"class","decision-abstain s-UQAPz40uou8M"),K(s,"selected",n[4]===n[1]),j(s,De,219,3,7258),C(c,"class","decision-opts-row-title s-UQAPz40uou8M"),j(c,De,225,4,7479),C(_,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(_,De,229,5,7597),C(i,"class","decision-opts-row-view s-UQAPz40uou8M"),j(i,De,228,4,7554),C(a,"class","decision-opts-row s-UQAPz40uou8M"),C(a,"data-target","bag"),j(a,De,224,3,7425),C(k,"class","decision-opts-row-title s-UQAPz40uou8M"),j(k,De,243,4,7990),C(p,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(p,De,247,5,8110),C(h,"class","decision-opts-row-view s-UQAPz40uou8M"),j(h,De,246,4,8067),C(b,"class","decision-opts-row s-UQAPz40uou8M"),C(b,"data-target","opponent"),j(b,De,242,3,7931),C(t,"class","decision-opts s-UQAPz40uou8M"),j(t,De,218,2,7227),C(e,"class","decision s-UQAPz40uou8M"),K(e,"staged",!!n[1]),j(e,De,214,1,7028)},m:function(L,F){H(L,e,F),S(e,t),S(t,s),S(s,o),S(t,l),S(t,a),S(a,c),S(a,u),S(a,i),S(i,_);for(let N=0;N<v.length;N+=1)v[N].m(_,null);S(t,d),S(t,b),S(b,k),S(b,w),S(b,h),S(h,p);for(let N=0;N<M.length;N+=1)M[N].m(p,null);m=!0,P||(y=Ue(o,"click",n[10],!1,!1,!1),P=!0)},p:function(L,F){if(n=L,F&18&&K(s,"selected",n[4]===n[1]),F&170){f=n[3],de(f);let N;for(N=0;N<f.length;N+=1){const re=so(n,f,N);v[N]?v[N].p(re,F):(v[N]=Ps(re),v[N].c(),v[N].m(_,null))}for(;N<v.length;N+=1)v[N].d(1);v.length=f.length}if(F&166){q=n[2],de(q);let N;for(N=0;N<q.length;N+=1){const re=no(n,q,N);M[N]?M[N].p(re,F):(M[N]=As(re),M[N].c(),M[N].m(p,null))}for(;N<M.length;N+=1)M[N].d(1);M.length=q.length}F&2&&K(e,"staged",!!n[1])},i:function(L){m||(xe(()=>{A||(A=Ce(e,me,{duration:3600,easing:gt},!0)),A.run(1)}),m=!0)},o:function(L){A||(A=Ce(e,me,{duration:3600,easing:gt},!1)),A.run(0),m=!1},d:function(L){L&&G(e),it(v,L),it(M,L),L&&A&&A.end(),P=!1,y()}};return Q("SvelteRegisterBlock",{block:U,id:Es.name,type:"if",source:"(214:0) {#if b_visible}",ctx:n}),U}function Ps(n){let e,t,s=n[7](n[20])+"",o,l,a;function c(){return n[11](n[20])}const u={c:function(){e=T("span"),t=new li,o=B(),t.a=o,C(e,"class","decision-opt s-UQAPz40uou8M"),K(e,"selected",n[20]===n[1]),j(e,De,231,7,7681)},m:function(_,d){H(_,e,d),t.m(s,e),S(e,o),l||(a=Ue(e,"click",c,!1,!1,!1),l=!0)},p:function(_,d){n=_,d&8&&s!==(s=n[7](n[20])+"")&&t.p(s),d&10&&K(e,"selected",n[20]===n[1])},d:function(_){_&&G(e),l=!1,a()}};return Q("SvelteRegisterBlock",{block:u,id:Ps.name,type:"each",source:"(231:6) {#each a_opts_arb as k_opt}",ctx:n}),u}function As(n){let e,t,s=n[7](n[20])+"",o,l,a,c,u;function i(){return n[12](n[20])}const _={c:function(){e=T("span"),t=new li,o=B(),l=T("img"),a=B(),t.a=o,ri(l,"display","none"),C(l,"alt","hidden"),C(l,"class","s-UQAPz40uou8M"),j(l,De,255,8,8390),C(e,"class","decision-opt s-UQAPz40uou8M"),K(e,"selected",n[20]===n[1]),j(e,De,249,7,8194)},m:function(b,k){H(b,e,k),t.m(s,e),S(e,o),S(e,l),S(e,a),c||(u=Ue(e,"click",i,!1,!1,!1),c=!0)},p:function(b,k){n=b,k&4&&s!==(s=n[7](n[20])+"")&&t.p(s),k&6&&K(e,"selected",n[20]===n[1])},d:function(b){b&&G(e),c=!1,u()}};return Q("SvelteRegisterBlock",{block:_,id:As.name,type:"each",source:"(249:6) {#each a_opts_opp as k_opt}",ctx:n}),_}function Cs(n){let e,t,s=n[0]&&Es(n);const o={c:function(){s&&s.c(),e=zt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),H(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&O(s,1)):(s=Es(a),s.c(),O(s,1),s.m(e.parentNode,e)):s&&(We(),W(s,1,1,()=>{s=null}),He())},i:function(a){t||(O(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){s&&s.d(a),a&&G(e)}};return Q("SvelteRegisterBlock",{block:o,id:Cs.name,type:"component",source:"",ctx:n}),o}class ea{constructor(e,t){this._si_color=e,this._si_shape=t}get color(){return this._si_color}get shape(){return this._si_shape}}function ta(n,e,t){let s,o,{$$slots:l={},$$scope:a}=e;ht("Decision",l,[]);const c={show:k,hide:w};let{k_deduced:u}=e;const i=ct(),_=Gt("game");let d=_.language,b=!1;async function k(){t(0,b=!0)}function w(){t(0,b=!1)}const h={target:"abstain",color:null,shape:null};let p=null;function A(I,L){p!==L&&(t(1,p=L),i("change",L))}function m(){t(1,p=h),i("abstain")}const P=Te("canvas",{width:100,height:100}),y=P.getContext("2d");function f(I){y.clearRect(0,0,100,100),y.stroke(),y.globalAlpha=.8,Nn(y,50,Math.pow(35,2),I.color,I.shape);const L=P.toDataURL();return Te("span",{},[Te("span",{class:"decision-opt-label"},[`${ve(I.color)} ${ve(I.shape)}`]),Te("img",{src:L})]).innerHTML}const v=["k_deduced"];Object.keys(e).forEach(I=>{!~v.indexOf(I)&&I.slice(0,2)!=="$$"&&I!=="slot"&&console.warn(`<Decision> was created with unknown prop '${I}'`)});const q=()=>m(),M=I=>A("bag",I),U=I=>A("opponent",I);return n.$$set=I=>{"k_deduced"in I&&t(9,u=I.k_deduced)},n.$capture_state=()=>({Opt:ea,getContext:Gt,createEventDispatcher:ct,fade:me,quadInOut:gt,proper:ve,dd:Te,draw_shape:Nn,k_decision:c,k_deduced:u,dispatch:i,g_game:_,yw_lang:d,b_visible:b,show:k,hide:w,g_opt_abstain:h,g_opt_selected:p,stage_decision:A,stage_abstain:m,dm_canvas:P,d_ctx:y,render_icon:f,a_opts_opp:o,a_opts_arb:s}),n.$inject_state=I=>{"k_deduced"in I&&t(9,u=I.k_deduced),"yw_lang"in I&&(d=I.yw_lang),"b_visible"in I&&t(0,b=I.b_visible),"g_opt_selected"in I&&t(1,p=I.g_opt_selected),"a_opts_opp"in I&&t(2,o=I.a_opts_opp),"a_opts_arb"in I&&t(3,s=I.a_opts_arb)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&512&&t(3,s=u.enumerate("bag")),n.$$.dirty&512&&t(2,o=u.enumerate("opponent")),n.$$.dirty&512&&t(1,p=null)},[b,p,o,s,h,A,m,f,c,u,q,M,U]}class io extends _t{constructor(e){super(e);ft(this,e,ta,Cs,dt,{k_decision:8,k_deduced:9}),Q("SvelteRegisterComponent",{component:this,tagName:"Decision",options:e,id:Cs.name});const{ctx:t}=this.$$,s=e.props||{};t[9]===void 0&&!("k_deduced"in s)&&console.warn("<Decision> was created without expected prop 'k_deduced'")}get k_decision(){return this.$$.ctx[8]}set k_decision(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_deduced(){throw new Error("<Decision>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_deduced(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Un="src/component/ActionWidget.svelte";function oo(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s[12]=t,s}function Ts(n){let e,t,s,o,l,a=n[10].label+"",c,u,i,_,d;s=new Ie({props:{icon:n[10].icon},$$inline:!0});function b(){return n[5](n[9])}const k={c:function(){e=T("span"),t=T("span"),Me(s.$$.fragment),o=B(),l=T("span"),c=fe(a),u=B(),C(t,"class","action-opt-icon s-8eNH5FVaHsSg"),j(t,Un,87,3,2291),C(l,"class","action-opt-text s-8eNH5FVaHsSg"),j(l,Un,90,3,2364),C(e,"class","action-opt "+(n[12]===0?"opt-lft":"")+" "+(n[3]-1===n[12]?"opt-rgt":"opt-mid")+" s-8eNH5FVaHsSg"),C(e,"data-opt",n[9]),K(e,"selected",n[9]===n[0]),j(e,Un,86,2,2093)},m:function(h,p){H(h,e,p),S(e,t),Ne(s,t,null),S(e,o),S(e,l),S(l,c),S(e,u),i=!0,_||(d=Ue(e,"click",b,!1,!1,!1),_=!0)},p:function(h,p){n=h,p&5&&K(e,"selected",n[9]===n[0])},i:function(h){i||(O(s.$$.fragment,h),i=!0)},o:function(h){W(s.$$.fragment,h),i=!1},d:function(h){h&&G(e),Oe(s),_=!1,d()}};return Q("SvelteRegisterBlock",{block:k,id:Ts.name,type:"each",source:"(86:1) {#each ode(H_OPTS) as [si_opt, g_opt], i_opt}",ctx:n}),k}function js(n){let e,t,s=Le(n[2]);de(s);let o=[];for(let c=0;c<s.length;c+=1)o[c]=Ts(oo(n,s,c));const l=c=>W(o[c],1,1,()=>{o[c]=null}),a={c:function(){e=T("span");for(let u=0;u<o.length;u+=1)o[u].c();C(e,"class","action s-8eNH5FVaHsSg"),ri(e,"width",100*n[3]+"px"),j(e,Un,84,0,1967)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,i){H(u,e,i);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[6](e),t=!0},p:function(u,[i]){if(i&29){s=Le(u[2]),de(s);let _;for(_=0;_<s.length;_+=1){const d=oo(u,s,_);o[_]?(o[_].p(d,i),O(o[_],1)):(o[_]=Ts(d),o[_].c(),O(o[_],1),o[_].m(e,null))}for(We(),_=s.length;_<o.length;_+=1)l(_);He()}},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)O(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)W(o[i]);t=!1},d:function(u){u&&G(e),it(o,u),n[6](null)}};return Q("SvelteRegisterBlock",{block:a,id:js.name,type:"component",source:"",ctx:n}),a}function na(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("ActionWidget",s,[]);const l={yes:{label:"Yes",icon:Pn}},a=Le(l).length;let c=h=>h,{si_selected:u="none"}=e,i;const _=ct();function d(h){u!==h&&(t(0,u=h),_("change",h))}const b=["si_selected"];Object.keys(e).forEach(h=>{!~b.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<ActionWidget> was created with unknown prop '${h}'`)});const k=h=>d(h);function w(h){qe[h?"unshift":"push"](()=>{i=h,t(1,i)})}return n.$$set=h=>{"si_selected"in h&&t(0,u=h.si_selected)},n.$capture_state=()=>({createEventDispatcher:ct,Fa:Ie,faCheckCircle:Pn,ode:Le,H_OPTS:l,NL_OPTS:a,f_apply:c,si_selected:u,dm_action:i,dispatch:_,select_opt:d}),n.$inject_state=h=>{"f_apply"in h&&(c=h.f_apply),"si_selected"in h&&t(0,u=h.si_selected),"dm_action"in h&&t(1,i=h.dm_action)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[u,i,l,a,d,k,w]}class ao extends _t{constructor(e){super(e);ft(this,e,na,js,dt,{si_selected:0}),Q("SvelteRegisterComponent",{component:this,tagName:"ActionWidget",options:e,id:js.name})}get si_selected(){throw new Error("<ActionWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_selected(e){throw new Error("<ActionWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const fn="src/component/Pick.svelte";function ro(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s}function qs(n){let e,t,s,o=Le(n[2]);de(o);let l=[];for(let u=0;u<o.length;u+=1)l[u]=Is(ro(n,o,u));const a=u=>W(l[u],1,1,()=>{l[u]=null}),c={c:function(){e=T("div");for(let i=0;i<l.length;i+=1)l[i].c();C(e,"class","pick s-AUZQ0ENzDxvQ"),K(e,"picked",!!n[1]),j(e,fn,77,1,1812)},m:function(i,_){H(i,e,_);for(let d=0;d<l.length;d+=1)l[d].m(e,null);s=!0},p:function(i,_){if(_&14){o=Le(i[2]),de(o);let d;for(d=0;d<o.length;d+=1){const b=ro(i,o,d);l[d]?(l[d].p(b,_),O(l[d],1)):(l[d]=Is(b),l[d].c(),O(l[d],1),l[d].m(e,null))}for(We(),d=o.length;d<l.length;d+=1)a(d);He()}_&2&&K(e,"picked",!!i[1])},i:function(i){if(!s){for(let _=0;_<o.length;_+=1)O(l[_]);xe(()=>{t||(t=Ce(e,mt,{duration:2500},!0)),t.run(1)}),s=!0}},o:function(i){l=l.filter(Boolean);for(let _=0;_<l.length;_+=1)W(l[_]);t||(t=Ce(e,mt,{duration:2500},!1)),t.run(0),s=!1},d:function(i){i&&G(e),it(l,i),i&&t&&t.end()}};return Q("SvelteRegisterBlock",{block:c,id:qs.name,type:"if",source:"(77:0) {#if b_visible}",ctx:n}),c}function Is(n){let e,t,s=n[10].label+"",o,l,a,c,u,i,_=n[10].description+"",d,b,k,w,h;c=new Ie({props:{icon:n[10].icon},$$inline:!0});function p(){return n[5](n[9])}const A={c:function(){e=T("span"),t=T("div"),o=fe(s),l=B(),a=T("div"),Me(c.$$.fragment),u=B(),i=T("div"),d=fe(_),b=B(),C(t,"class","pick-label s-AUZQ0ENzDxvQ"),j(t,fn,80,4,2071),C(a,"class","pick-icon s-AUZQ0ENzDxvQ"),j(a,fn,83,4,2131),C(i,"class","pick-description s-AUZQ0ENzDxvQ"),j(i,fn,86,4,2201),C(e,"class","pick-opt s-AUZQ0ENzDxvQ"),C(e,"data-pick",n[9]),K(e,"selected",n[1]===n[9]),j(e,fn,79,3,1946)},m:function(P,y){H(P,e,y),S(e,t),S(t,o),S(e,l),S(e,a),Ne(c,a,null),S(e,u),S(e,i),S(i,d),S(e,b),k=!0,w||(h=Ue(e,"click",p,!1,!1,!1),w=!0)},p:function(P,y){n=P,y&6&&K(e,"selected",n[1]===n[9])},i:function(P){k||(O(c.$$.fragment,P),k=!0)},o:function(P){W(c.$$.fragment,P),k=!1},d:function(P){P&&G(e),Oe(c),w=!1,h()}};return Q("SvelteRegisterBlock",{block:A,id:Is.name,type:"each",source:"(79:2) {#each ode(H_PICKS) as [si_pick, g_pick]}",ctx:n}),A}function Rs(n){let e,t,s=n[0]&&qs(n);const o={c:function(){s&&s.c(),e=zt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){s&&s.m(a,c),H(a,e,c),t=!0},p:function(a,[c]){a[0]?s?(s.p(a,c),c&1&&O(s,1)):(s=qs(a),s.c(),O(s,1),s.m(e.parentNode,e)):s&&(We(),W(s,1,1,()=>{s=null}),He())},i:function(a){t||(O(s),t=!0)},o:function(a){W(s),t=!1},d:function(a){s&&s.d(a),a&&G(e)}};return Q("SvelteRegisterBlock",{block:o,id:Rs.name,type:"component",source:"",ctx:n}),o}function sa(n,e,t){let{$$slots:s={},$$scope:o}=e;ht("Pick",s,[]);const l={jackpot:{icon:ci,label:"Jackpot",description:"A pile of SCRT accrued from lost wagers. The exact amount you will receive is a secret."},nft:{icon:ui,label:"Power-up NFT",description:"A unique NFT that gives the owner some special power when used during gameplay. The type of power-up you will receive is a secret."}};let a=!1,c=null;const u={show:i,hide:_};function i(){t(0,a=!0)}function _(){t(0,a=!1)}const d=ct();function b(h){t(1,c=h),d("pick",c)}const k=[];Object.keys(e).forEach(h=>{!~k.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Pick> was created with unknown prop '${h}'`)});const w=h=>b(h);return n.$capture_state=()=>({createEventDispatcher:ct,blur:mt,Fa:Ie,faCoins:ci,faTrophy:ui,ode:Le,H_PICKS:l,b_visible:a,si_pick_selected:c,k_pick:u,show:i,hide:_,dispatch:d,pick:b}),n.$inject_state=h=>{"b_visible"in h&&t(0,a=h.b_visible),"si_pick_selected"in h&&t(1,c=h.si_pick_selected)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[a,c,l,b,u,w]}class lo extends _t{constructor(e){super(e);ft(this,e,sa,Rs,dt,{k_pick:4}),Q("SvelteRegisterComponent",{component:this,tagName:"Pick",options:e,id:Rs.name})}get k_pick(){return this.$$.ctx[4]}set k_pick(e){throw new Error("<Pick>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class Ms{#e;static includes(e){for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);if(s&&e.test(s))return!0}return!1}constructor(e,t,s){const o=window.btoa(JSON.stringify(s||{}));this._si_namespace=`${e}.${o}`,this.#e=t}set(e,t){let s;try{s=JSON.stringify(t)}catch{throw new Error("Unable to stringify value")}let o;try{o=Kn.exports.AES.encrypt(s,this.#e).toString()}catch{throw new Error("Unable to encrypt message")}return localStorage.setItem(`${this._si_namespace}.${e}`,o)}get(e){const t=localStorage.getItem(`${this._si_namespace}.${e}`);if(t===null)return t;let s;try{s=Kn.exports.AES.decrypt(t,this.#e).toString(Kn.exports.enc.Utf8)}catch{throw new Error("Failed to decrypt value using provided secret")}let o;try{o=JSON.parse(s)}catch{throw new Error("Failed to parse decrypted text")}return o}clear(){const e=`${this._si_namespace}.`;for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);(s==null?void 0:s.startsWith(e))&&localStorage.removeItem(s)}}remove(e){return localStorage.removeItem(`${this._si_namespace}.${e}`)}}const{Error:ia,Object:oa,console:aa}=Hs,at="src/component/App.svelte";function Ns(n){let e,t,s,o,l,a;t=new Ie({props:{icon:di},$$inline:!0});const c={c:function(){e=T("span"),Me(t.$$.fragment),C(e,"class","system-controls-burn s-SHyHC7YcIsCQ"),C(e,"alt","destroy cookies and cache"),j(e,at,2007,2,67511)},m:function(i,_){H(i,e,_),Ne(t,e,null),o=!0,l||(a=Ue(e,"click",n[25],!1,!1,!1),l=!0)},p:ye,i:function(i){o||(O(t.$$.fragment,i),xe(()=>{s||(s=Ce(e,me,{duration:1e3},!0)),s.run(1)}),o=!0)},o:function(i){W(t.$$.fragment,i),s||(s=Ce(e,me,{duration:1e3},!1)),s.run(0),o=!1},d:function(i){i&&G(e),Oe(t),i&&s&&s.end(),l=!1,a()}};return Q("SvelteRegisterBlock",{block:c,id:Ns.name,type:"if",source:"(2007:1) {#if (h_cookie && Object.keys(h_cookie).length) || localStorage.length}",ctx:n}),c}function Os(n){let e,t,s,o=ve(n[8])+"",l,a,c=ve(n[9])+"",u,i,_,d,b,k,w=ve(Qt(`nobody_has|${n[10]}`))+"",h,p,A,m;const P={c:function(){e=T("div"),t=T("div"),s=fe("The "),l=fe(o),a=B(),u=fe(c),i=B(),_=T("div"),d=T("span"),d.textContent="Hint:",b=B(),k=T("span"),h=fe(w),C(t,"class","chip s-SHyHC7YcIsCQ"),j(t,at,2029,3,68244),C(d,"class","hint-prefix s-SHyHC7YcIsCQ"),j(d,at,2033,4,68359),C(k,"class","hint-sentence s-SHyHC7YcIsCQ"),j(k,at,2034,4,68402),C(_,"class","hint s-SHyHC7YcIsCQ"),j(_,at,2032,3,68336),C(e,"class","mine s-SHyHC7YcIsCQ"),j(e,at,2028,2,68118)},m:function(f,v){H(f,e,v),S(e,t),S(t,s),S(t,l),S(t,a),S(t,u),S(e,i),S(e,_),S(_,d),S(_,b),S(_,k),S(k,h),m=!0},p:function(f,v){n=f,(!m||v[0]&256)&&o!==(o=ve(n[8])+"")&&Re(l,o),(!m||v[0]&512)&&c!==(c=ve(n[9])+"")&&Re(u,c),(!m||v[0]&1024)&&w!==(w=ve(Qt(`nobody_has|${n[10]}`))+"")&&Re(h,w)},i:function(f){m||(xe(()=>{A&&A.end(1),p=Hn(e,mt,{duration:2400,easing:gt,delay:4500}),p.start()}),m=!0)},o:function(f){p&&p.invalidate(),A=Gn(e,mt,{duration:2400,easing:gt}),m=!1},d:function(f){f&&G(e),f&&A&&A.end()}};return Q("SvelteRegisterBlock",{block:P,id:Os.name,type:"if",source:"(2028:1) {#if si_player_hint}",ctx:n}),P}function Us(n){let e,t,s,o,l=n[1]&&Object.keys(n[1]).length||localStorage.length,a,c,u,i,_,d,b,k,w,h,p,A,m,P,y,f,v,q,M,U,I,L,F,N,re,J,Ze;s=new Ie({props:{icon:n[0]?Jn:Xn},$$inline:!0});let Z=l&&Ns(n);function Ge(ae){n[26](ae)}let $e={k_killables:n[13]};n[2]!==void 0&&($e.k_panel=n[2]),c=new Li({props:$e,$$inline:!0}),qe.push(()=>Kt(c,"k_panel",Ge));function pe(ae){n[28](ae)}let Se={};n[5]!==void 0&&(Se.k_prompt=n[5]),h=new Bi({props:Se,$$inline:!0}),qe.push(()=>Kt(h,"k_prompt",pe));function Ye(ae){n[29](ae)}let rt={};n[4]!==void 0&&(rt.k_tx=n[4]),m=new Zi({props:rt,$$inline:!0}),qe.push(()=>Kt(m,"k_tx",Ye)),m.$on("basis",n[14]),m.$on("quality",n[16]),m.$on("force_reject",n[15]);function ge(ae){n[30](ae)}let Fe={k_deduced:n[12]};n[6]!==void 0&&(Fe.k_decision=n[6]),f=new io({props:Fe,$$inline:!0}),qe.push(()=>Kt(f,"k_decision",ge)),f.$on("abstain",n[18]),f.$on("change",n[19]);let X=n[10]&&Os(n);function ze(ae){n[31](ae)}let et={};n[7]!==void 0&&(et.k_pick=n[7]),U=new lo({props:et,$$inline:!0}),qe.push(()=>Kt(U,"k_pick",ze)),U.$on("pick",n[17]);function qt(ae){n[32](ae)}let oe={};n[3]!==void 0&&(oe.k_scene=n[3]),F=new eo({props:oe,$$inline:!0}),qe.push(()=>Kt(F,"k_scene",qt));const tt={c:function(){e=T("div"),t=T("span"),Me(s.$$.fragment),o=B(),Z&&Z.c(),a=B(),Me(c.$$.fragment),i=B(),_=T("div"),d=T("img"),k=B(),w=T("div"),Me(h.$$.fragment),A=B(),Me(m.$$.fragment),y=B(),Me(f.$$.fragment),q=B(),X&&X.c(),M=B(),Me(U.$$.fragment),L=B(),Me(F.$$.fragment),C(t,"class","system-controls-audio s-SHyHC7YcIsCQ"),C(t,"alt","audio"),j(t,at,2003,1,67292),C(e,"class","system-controls s-SHyHC7YcIsCQ"),j(e,at,2002,0,67261),Oo(d.src,b="/asset/smile.png")||C(d,"src",b),C(d,"alt","evil smile"),C(d,"class","s-SHyHC7YcIsCQ"),j(d,at,2017,1,67779),C(_,"class","surprise s-SHyHC7YcIsCQ"),j(_,at,2016,0,67731),C(w,"class","container s-SHyHC7YcIsCQ"),j(w,at,2020,0,67835)},l:function(R){throw new ia("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(R,se){H(R,e,se),S(e,t),Ne(s,t,null),S(e,o),Z&&Z.m(e,null),H(R,a,se),Ne(c,R,se),H(R,i,se),H(R,_,se),S(_,d),n[27](_),H(R,k,se),H(R,w,se),Ne(h,w,null),S(w,A),Ne(m,w,null),S(w,y),Ne(f,w,null),S(w,q),X&&X.m(w,null),S(w,M),Ne(U,w,null),S(w,L),Ne(F,w,null),re=!0,J||(Ze=Ue(t,"click",n[24],!1,!1,!1),J=!0)},p:function(R,se){const yt={};se[0]&1&&(yt.icon=R[0]?Jn:Xn),s.$set(yt),se[0]&2&&(l=R[1]&&Object.keys(R[1]).length||localStorage.length),l?Z?(Z.p(R,se),se[0]&2&&O(Z,1)):(Z=Ns(R),Z.c(),O(Z,1),Z.m(e,null)):Z&&(We(),W(Z,1,1,()=>{Z=null}),He());const kt={};!u&&se[0]&4&&(u=!0,kt.k_panel=R[2],Jt(()=>u=!1)),c.$set(kt);const vt={};!p&&se[0]&32&&(p=!0,vt.k_prompt=R[5],Jt(()=>p=!1)),h.$set(vt);const we={};!P&&se[0]&16&&(P=!0,we.k_tx=R[4],Jt(()=>P=!1)),m.$set(we);const Be={};se[0]&4096&&(Be.k_deduced=R[12]),!v&&se[0]&64&&(v=!0,Be.k_decision=R[6],Jt(()=>v=!1)),f.$set(Be),R[10]?X?(X.p(R,se),se[0]&1024&&O(X,1)):(X=Os(R),X.c(),O(X,1),X.m(w,M)):X&&(We(),W(X,1,1,()=>{X=null}),He());const x={};!I&&se[0]&128&&(I=!0,x.k_pick=R[7],Jt(()=>I=!1)),U.$set(x);const It={};!N&&se[0]&8&&(N=!0,It.k_scene=R[3],Jt(()=>N=!1)),F.$set(It)},i:function(R){re||(O(s.$$.fragment,R),O(Z),O(c.$$.fragment,R),O(h.$$.fragment,R),O(m.$$.fragment,R),O(f.$$.fragment,R),O(X),O(U.$$.fragment,R),O(F.$$.fragment,R),re=!0)},o:function(R){W(s.$$.fragment,R),W(Z),W(c.$$.fragment,R),W(h.$$.fragment,R),W(m.$$.fragment,R),W(f.$$.fragment,R),W(X),W(U.$$.fragment,R),W(F.$$.fragment,R),re=!1},d:function(R){R&&G(e),Oe(s),Z&&Z.d(),R&&G(a),Oe(c,R),R&&G(i),R&&G(_),n[27](null),R&&G(k),R&&G(w),Oe(h),Oe(m),Oe(f),X&&X.d(),Oe(U),Oe(F),J=!1,Ze()}};return Q("SvelteRegisterBlock",{block:tt,id:Us.name,type:"component",source:"",ctx:n}),tt}function Ls(n){return n}function ra(n,e,t){let s,{$$slots:o={},$$scope:l}=e;ht("App",o,[]);const a={chain_name:Tn,chain_id:xn,game_addr:Tt,game_hash:Ei,rest:jn,rpc:an,minter_addr:Vt,minter_hash:Pi};let c,u;try{const r=new Intl.Locale(navigator.language).language;r in mi&&(u=r)}catch{}{const r=Dt("en");r.subscribe(E=>u=E),_i("game",{language:r})}let i,_,d,b,k,w,h;const p=new vi;let A,m,P,y,f=new un,v=Ls,q=Ls;function M(r){let E=0;const D=50,ie=D/5e3,te=window.setInterval(()=>{E+=ie,E>=1?window.clearInterval(te):r.volume=1-pt(E)},D)}const U=new Image;U.src="/asset/monster.png";const I=new Image;I.src="/asset/smile.png";async function L(r){for(const E of pi[r])E.delay&&await Y(E.delay),await i.reveal_text(E.labels[u],E.interval,E.pause)}async function F(){await Y(2e3),await L("attention"),await Y(1800),await i.reveal_text(""),await Y(1200)}async function N(){await i.reveal_text("good luck! ;)"),await Y(800),await i.reveal_text("")}async function re(){return await b.ok("Reload"),window.location.reload(),new Promise(()=>{})}async function J(r){return p.killAll(),i.reveal_text(""),await Be(r),re()}async function Ze(){const r="                                 ";await i.reveal_text(r),pe.epic_transition.play(),i.reveal_text(r+"  ",250),oe.classList.add("triggered"),await Y(160),t(11,oe.style.opacity="0.0",oe),setTimeout(()=>{t(11,oe.style.display="none",oe)},6e3),await Y(2e3)}async function Z(r=0){await i.warn(`
			This game stores encrypted query permit data in local storage.
			
			In order to protect this data, you must provide a passphrase each time the page is loaded.

			${Ms.includes(/\.permits$/)?"Enter the same passphrase to restore a previous permit, or enter a different one to sign a new permit.":""}
		`);async function E(ne=0){let Xe=!1;ne||p.addTimeout(()=>{Xe||i.reveal_text("\u2193\u2193 click below to enter passphrase \u2193\u2193")},6500),await b.ok("Provide passphrase"),Xe=!0;const Ot=new Uint8Array(32);crypto.getRandomValues(Ot);const en=[...Ot].map(En=>String.fromCharCode(En%93+33)).join(""),Qn=window.prompt("Enter a passphrase to encrypt/decrypt query permits",en);if(Qn)return Qn.length<5?(i.reveal_text("passphrase must be at least 5 characters"),E(ne+1)):Qn;{const En=["null key encryption, eh? try again you silly goose","i can do this all day, can you?","there are only so many responses i have...","...and you're starting to piss me off","i'm serious dood -- don't make me"];return ne<En.length?i.reveal_text(En[ne],40):window.location.href="https://www.youtube.com/watch?v=dQw4w9WgXcQ",E(ne+1)}}const te=(await(await hi.load()).get()).visitorId,le=await E();if(i.reveal_text(""),!h){await we(`
				This is a multiplayer, online game that uses smart contracts on the Secret Network to ensure fairness for all players.

				Interacting with the game requires submitting transactions to the blockchain via a web wallet such as Keplr (or a local wallet for testnet only).
			`),await Y(600);const ne=await b.opts({keplr:Zt.isAvailable()?{label:"Connect Keplr",alt:"Connect a wallet using the Keplr extension for Chrome"}:{label:"Install Keplr",alt:"Keplr was not detected. Please install it first in order to use this option"}});switch(ne){case"keplr":{try{h=Zt.fromWindow()}catch{return window.open("https://www.keplr.app/","_blank"),await re()}jt({wallet:"keplr"},30*wt);break}case"local":return J("Local storage wallet not yet implemented");default:return J(`Unhandled response option: '${ne}'`)}}let $=!1;const V=Date.now();try{$=await h.enable({chainId:xn,chainName:Tn,rest:jn,rpc:an},()=>(h.disable(),J("Account was changed in wallet. Session terminated.")))}catch(ne){debugger;return ne instanceof ns?r>=3?J("Keplr connection request rejected too many times"):(await Y(2e3),await Z(r+1)):ne instanceof ss||ne instanceof Error?J(ne.stack):J("Fatal unknown error")}if(!$)return J("Chain suggestion was denied. Unable to proceed.");Date.now()-V>Ve&&(await we(`Please make sure your network is set to "${Tn}" in Keplr!`),await Y(2100));const z=h.key,ce=z.bech32Address;i.wallet({name:z.name,addr:ce,ledger:z.isNanoLedger});const be=new Ms(ce,[te,le,"salt"].join("|"),a);let Ae=null;try{Ae=be.get("permits")}catch{await we("Change in passphrase detected. Clearing old query perrmits."),be.clear()}await Y(1e3);let je=!1;if(Ae&&Ae[Tt])c=Ae[Tt],je=!0;else{await we(`
				Query permits allow you to read encrypted data from the blockchain without needing to write anything extra to the chain.

				Signing a query permit happens offline and does not require any gas.
			`),await Y(1800),await b.ok("Sign permit");try{c={params:{chain_id:h.chain,allowed_tokens:[Tt,Vt],permit_name:ts,permissions:["owner"]},signature:await h.signQueryPermit()},be.set("permits",tn(Pt({},Ae||{}),{[Tt]:c,[Vt]:c}))}catch(ne){return J(ne.stack)}}i.permit(c.params,je),await Y(1200),await i.reveal_text(""),await Y(1100)}async function Ge(r=!1){let E=Dt("");r?we("Still waiting for another player... {last_check}",{last_check:E}):we("Created a new game. Now waiting for another player... {last_check}",{last_check:E});let D=window.Notification&&Notification.permission==="granted",ie=!1;function te(){if(D)we("You will receive a notification once another player has joined.");else{const ce=Te("span"),be=new ao({target:ce});be.$on("change",async()=>{const Ae=Date.now();await Notification.requestPermission()==="denied"?(be.$set({si_selected:"none"}),Date.now()-Ae<.5*Ve?we("User previously denied request for notifications. Need to reset in browser settings."):we("User denied request for notification permission.")):we("Confirmed. Notification will be sent when another player joins.")}),we("Would you like to receive a notification once another player has joined? {approve}",{approve:ce})}}let le=Date.now(),$=p.addInterval(()=>{le&&E.set(`Last checked ${ki(le)}`),ie||(ie=!0,te())},1e3),V,z;for(;;){z=Date.now();try{V=await ge.queryGameState()}catch(be){return be instanceof ln?J(be.message):J(be+"")}if(V.round!==0)break;le=Date.now(),await Y(5e3);const ce=Date.now()-z;ce<10*Ve&&await Y(ce)}p.delInterval($),E.set("");{let ce=function(){window.removeEventListener("focus",be)},be=function(){ce(),M(Ae)};const Ae=pe.retro_game_alarm;Ae.play(),document.hasFocus()?(await Y(1800),M(Ae)):window.addEventListener("focus",be)}return V}const $e={epic_transition:"epic-transition.wav",coin:"coin.wav",death:"death.wav",menu_1a:"menu-1a.wav",menu_1b:"menu-1b.wav",rise:"rise.wav",coin_win:"coin-win.wav",retro_game_alarm:"retro-game-alarm.wav",retro_game_notif:"retro-game-notif.wav",trumpet_fanfare:"trumpet-fanfare.wav"},pe=Object.fromEntries(Le($e).map(([r,E])=>[r,new Audio(`/asset/audio/${E}`)]));let Se=!1,Ye=Rn(),rt,ge;async function Fe(){await x(`
			Your opponent is taking too long. Since you have already fulfilled your duty, I will allow you to end the game and get a refund.

			Would you like to end the game?
		`),await i.reveal_text("yes, give me my money back"),i.submittable(async()=>{i.submittable(null);const r=await g({async exec(){return(await ge.forceEndgame()).data.force_endgame.game_state},check(E){return E.finished!==null},query_fail(){return Fe(),null},persist_reveal:!0});if(!!r)return await i.commit(),i.unsubmittable(),await x(`I have refunded you ${rn(BigInt(r.wager))}.`),await pe.coin.play(),ze()})}class X{constructor(E){this._s_expired="run out of time";const D=E.terminate;this._s_kill=E.kill_text||"",this._k_eta=E.eta,this._yw_time=Dt("(estimating...)"),this._k_eta.eta,this._i_interval=p.addInterval(()=>{const te=this._k_eta;if(!te.ready)return;if(te.expired){this._yw_time.set(this._s_expired),p.delInterval(this._i_interval),this._i_interval=0;try{this._dm_clock.remove()}catch{}D&&D();return}const le=te.remaining,$=Math.max(0,Math.floor(le/Ve)),V=Math.floor($/60);V?V<2?this._yw_time.set("less than 2 minutes remaining"):V<5?this._yw_time.set("less than 5 minutes remaining"):V<10?this._yw_time.set("less than 10 minutes remaining"):this._yw_time.set("a little more than 10 minutes remaining"):$<=10?this._yw_time.set("less than 10 seconds remaining"):$<=31?this._yw_time.set("less than 30 seconds remaining"):this._yw_time.set("less than 60 seconds remaining")},100);const ie=this._dm_clock=Te("span");Object.assign(ie.style,{paddingRight:"2px"}),new Ie({target:ie,props:{icon:fi}})}get interval(){return this._i_interval}get clock(){return this._dm_clock}get store(){return this._yw_time}kill(E=""){this._i_interval&&(p.delInterval(this._i_interval),this._i_interval=0,this._dm_clock.remove(),this._yw_time.set(E||this._s_kill))}}async function ze(){return cn("game"),J("Game over. Reload to play again.")}async function et(){let r=!0;i.reveal_text("checking for active game...").then(()=>r&&i.spinning(!0));let E;try{try{E=await ge.queryGameState()}finally{r=!1,i.reveal_text("")}}catch{debugger}if(E&&(console.log("Resuming:",E),E.round!==null)){if(E.finished?we("Fast-forwarding through finished game so you can see the results."):we("Successfully resumed active game."),E.round===0&&(E=await Ge(!0)),E.round===1)return ut(E,!0),!0;if(E.round===3)return Ln(E,!0),!0;await Be(`Unrecognized game state round: ${E.round}`)}return!1}let qt=!1,oe;const tt=r=>r.cloneNode();async function ae(){if(Se)return;const r=tt(pe.menu_1a);r.volume=.4;try{await r.play()}catch{}}async function R(){if(Se)return;const r=tt(pe.menu_1b);r.volume=.4;try{await r.play()}catch{}}async function se(){try{await pe.rise.play()}catch{}}async function yt(){const r=tt(pe.coin);r.volume=Math.random()*.35+.1;try{await r.play()}catch{}}async function kt(){if(!Se)for(let r=0;r<10;r++)yt(),await Y(Math.random()<.35?150:250)}async function vt(){const r=tt(pe.death);try{await r.play()}catch{}}async function we(...r){return R(),i.warn(...r)}async function Be(...r){return R(),i.error(...r)}async function x(...r){return ae(),i.arbiter(...r)}async function It(){for await(const r of rt.queryNfts()){debugger;console.log(r)}}Object.assign(window,{H_AUDIO:pe,play_menu_1a:ae,play_menu_1b:R,play_notif:se,play_jackpot:kt}),Ft(async()=>{console.log(a);const r=Ye.last_seen;if(r&&t(0,Se=!!+Ye.muted),Ye.wallet==="keplr")try{h=Zt.fromWindow()}catch{cn("wallet")}if(jt({last_seen:""+Date.now()},30*wt),t(1,Ye=Rn()),await Z(),rt=new Ti(h,Vt,c),It(),ge=new Ci(h,Tt,c),Ye.game){if(await et())return;cn("game")}return r?await N():(await Ze(),await F()),await x(`
			Welcome${r?" back":""} to my game of secrets. In a moment, you will be matched with another player.

			I will give each of you a chip with a colored shape on it. There are only four colors (red, green, blue, black), and four shapes (triangle, square, circle, star).

			Your opponent will not be able to see your chip and vice versa. I will also take a third chip and hide it in a bag. Each chip will have a unique color and a unique shape. For example, if the chip in my bag is a red triangle, then nobody else has red, and nobody else has a triangle.

			The rules are simple. You and your opponent must exchange a message with each other. Cooperate to deduce what is in my bag and you both will advance to the next round. Betray your opponent by correctly guessing which chip they have and win their wager. Guess wrong and lose.
		`),await Y(r?800:4600),ee()});class Wt extends Error{}async function g(r){let E=!0;const D=r.reveal;typeof D=="string"?i.reveal_text(D).then(()=>E&&i.spinning(!0)):i.spinning(!0);const ie=r.check,te=r.condition||r.query_fail,le=r.rejected||r.query_fail;let $;try{try{if($=await r.exec(),!ie($))throw $=null,new Wt}finally{E=!1,r.persist_reveal||i.reveal_text("")}}catch(V){if(console.error(V),V instanceof Error){const z=V.message;if(/Account does not exist/.test(z))return J("Looks like your wallet is empty. Make sure to acquire some SCRT tokens so that you can pay the gas fees for transactions.");if(/must finish current game/.test(z))return jt({game:"started"},12*Yt),await et()?null:J("Looks like you changed browsers or cleared cache since you last joined a game with this account. Please reload and the game will attempt to resume.");if(/contract not found/i.test(z))return J("Contract not found! Are you on the right network?");if(/Game is finished/i.test(z))return ze(),new Promise(()=>{});if(/execute contract failed/.test(z))return Be(`Contract error: ${z}`),te(V),null;if(/Request rejected/.test(z))return Be("Transaction rejected"),le(V),null;if(/timed out/.test(z)){const ce=Dt("");await we("There was a timeout error while waiting for the transaction to be included. Waiting to see if it gets included... {retries}",{retries:ce});const be=await async function Ae(je=1){await Y(5e3);let ne;try{if(ne=await ge.queryGameState(),!ie(ne)){if(console.warn("query permit check failed on game state",ne),ne.finished)return await x("Your opponent ended the game because you took too long to respond."),await ze(),null;ne=null}}catch(Xe){if(!(Xe instanceof Wt))return await Be(["Timeout error. Please try again with higher gas fee.",z]),r.query_fail?await r.query_fail(Xe):null}return ne||(je>=5?(await Be("Reached maximum retries. Seems like your transaction failed. Try again with higher gas fee?"),r.query_fail?await r.query_fail(new Wt):J("Unhandled query failure path.")):(ce.set(`Retried ${je===1?"once":`${je} times`} so far...`),await Ae(je+1)))}();if(be)$=be;else return null}else{debugger;return J(`Unhandled error: ${V.stack}`)}}else return J(`Unknown error: ${V}`)}return console.log($),$}async function ee(){await i.reveal_text("ready to play?"),await b.ok("Join a game");const r=await g({reveal:"waiting for transaction to be verified... ",async exec(){return(await ge.joinGame()).data.join.game_state},check(D){return D.round!==null},query_fail(){return ee(),null}});if(!r)return;let E=r;return r.round===0&&(jt({game:"started"},12*Yt),E=await Ge()),E.round===1||E.round===3?ut(E):(console.error(E),jt({game:"started"},12*Yt),J("Failed to join game while waiting for transaction. You can try once more by reloading this page."))}function Ee(r){var E;t(8,A=r.chip_color.split(":")[1]),t(9,m=r.chip_shape.split(":")[1]),t(10,P=(E=r.hint)==null?void 0:E.split("|")[1]),y=r.first_submit,t(21,f=new un),f.nobody(`color:${A}`),f.nobody(`shape:${m}`),f.nobody(P)}let Ke=xt[0],_e="";async function nt(){const r=_e?Bt(_e):"",E=Ct[Ke].describe[u](r);await i.reveal_text(E)}function St(r){i.submittable(null),Ke=r.detail,_e="",nt()}let Qe=!1;function Et(r){if(Qe)return;Qe=!0;const[E,D]=r.detail;x(`You already used "${Ct[E].describe[u]("")}" last turn. Now you must use "${Ct[D].describe[u]("")}".`)}function ke(){_e="",i.submittable(null),d.show(),nt()}async function he(r){if(i.submittable(null),_e=r.detail,y){const[,te]=y.split("|");te===_e&&(_e="",await x("You cannot submit a message that would contradict your previous assertion."))}const[E,D]=_e.split(":");let ie="Unknowable";Ke==="nobody_has"?P===_e?ie="Truth":(E==="color"&&D===A||E==="shape"&&D===m)&&(ie="Lie"):E==="color"&&D===A||E==="shape"&&D===m?ie="Truth":ie="Lie",await nt(),i.submittable(async()=>{d.hide(),i.submittable(null);const te=await g({async exec(){return(await ge.submitAssertion(Ke,_e)).data.submit.game_state},check(le){return y?le.second_submit!==null:le.first_submit!==null},query_fail(){return ke(),he(r),null},persist_reveal:!0});!te||(await i.commit(),i.spinning(!1),Pe&&Pe.kill(),st&&st.kill(),i.unsubmittable(),te.second_submit?pn(te):dn(te))},ie)}let Pe;async function ut(r,E=!1){Ee(r),await i.reveal_text(""),await x("Here is your chip, player..."),await _.animate_chip_entry(A,m),E||await Y(5e3);let D=P.startsWith("color:");if(await x(`
			Round 1: I've given you the ${A} ${m} this round, and a hint that nobody has ${D?"":"a "}${P.replace(/^[^:]+:/,"")}.

			I've also given your opponent a hint. Theirs is that nobody has a certain ${D?"shape":"color"}.
		`),E){if(r.first_submit)return await i.user(Qt(r.first_submit)),dn(r,E)}else await Y(4100);Pe=new X({eta:new bt(r.first_round_start_block+""),kill_text:"successfully submitted"}),await x(["Now you must choose what to tell the other player. I will reveal both of your messages simultaneously once they both have been submitted. You have {clock_icon}{time_remaining}."],{clock_icon:Pe.clock,time_remaining:Pe.store}),await d.show(),E||await Y(4e3),nt()}let lt=!1,Je,st;async function dn(r,E=!1){var $;Ee(r);const{opponent_first_submit:D,first_extra_secret:ie}=r;if(!D&&!ie)return lt||(lt=!0,Pe&&Pe.kill("already submittted"),Je=new X({eta:new bt(r.first_round_start_block+""),kill_text:"also submitted theirs",terminate:Fe}),await x(["Your submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Je.clock,time_remaining:Je.store})),await Y(5e3),dn(await ge.queryGameState());Je&&Je.kill(),E||se();const te=Te("span");if(ie){const[V,z]=ie.split("|"),ce=Dt("");V==="nobody_has"?(f.nobody(z),ce.set(`Your opponent has the hint that "nobody has ${Bt(z)}".`)):(f.opponent(z,!0),ce.set(`Your opponent has ${Bt(z)}.`)),new _n({target:te,props:{b_mode_nobody:!1,si_assertion:z,si_known:"true"}}),await x(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:ce,premise:te})}else if(D){const[V,z]=D.split("|");let ce=f.clone();const be=V==="nobody_has"&&z===P,Ae=new _n({target:te,props:{b_mode_nobody:V==="nobody_has",si_assertion:z,si_known:be?"undeniable":""}}),je=Ae.k_premise;Ae.$on("change",()=>{t(22,v=je.apply),console.log(`Priori: ${f.explain()}`),console.log(`Opp1: ${ce.explain()}`),console.log([f,ce])}),await i.opponent([`${ve(Qt(D))} {premise}`],{premise:te})}else return J("Fatal system error: unable to parse game state");if(E){if(r.second_submit)return await i.user(Qt(r.second_submit)),pn(r,E)}else await Y(4100);st=new X({eta:new bt(r.second_submit_turn_start_block+""),kill_text:"already submitted"});const le=(($=r.first_submit)==null?void 0:$.split("|")[0])==="nobody_has"?"i_have":"nobody_has";await x([`Both of you must now exchange one more message with each other. This time, I'm requiring you to submit a message about ${le==="nobody_has"?'what "nobody has"':"your chip"}. You have {clock_icon}{time_remaining}.`],{clock_icon:st.clock,time_remaining:st.store}),await d.show(le),nt()}let hn=!1,mn,Rt,Ht;async function pn(r,E=!1){const{opponent_second_submit:D,second_extra_secret:ie}=r;if(!D&&!ie)return hn||(hn=!0,mn&&mn.kill(),Rt=new X({eta:new bt(r.second_submit_turn_start_block+""),kill_text:"also submitted theirs",terminate:Fe}),await x(["Your 2nd submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Rt.clock,time_remaining:Rt.store})),await Y(5e3),pn(await ge.queryGameState());E||se();const te=Te("span");if(ie){const[le,$]=ie.split("|"),V=Dt("");le==="nobody_has"?(t(23,q=z=>z.nobody($)),V.set(`Your opponent has the hint that "nobody has ${Bt($)}".`)):(t(23,q=z=>z.opponent($,!0)),V.set(`Your opponent has ${Bt($)}.`)),new _n({target:te,props:{b_mode_nobody:!1,si_assertion:$,si_known:"true"}}),await x(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:V,premise:te})}else if(D){Rt&&Rt.kill();const[le,$]=D.split("|"),V=le==="nobody_has"&&$===P,z=new _n({target:te,props:{b_mode_nobody:le==="nobody_has",si_assertion:$,si_known:V?"undeniable":""}}),ce=z.k_premise;z.$on("change",()=>{t(23,q=ce.apply)}),await i.opponent([`${ve(Qt(D))} {premise}`],{premise:te})}else return J("Fatal system error: unable to parse game state");if(E&&r.guess)return await i.user(Yn(r.guess)),yn(r,E);Ht=new X({eta:new bt(r.guess_turn_start_block+""),kill_text:"successfully submitted"}),await x(`
			The time has come for you to surmise my secrets. You may either guess what is in my bag, what your opponent has, or abstain completely. You have {clock_icon}{time_remaining}.

			The precedence for winning is as follows:
			- [Guess wrong] < [Abstain] < [Correctly guess arbiter's bag] < [Corrrectly guess opponent's chip]

			Use the inline widgets next to each assertion above to logically reduce your option space.
		`,{clock_icon:Ht.clock,time_remaining:Ht.store}),await k.show(),console.log(r)}async function gn(r){i.submittable(null),await i.reveal_text(Yn(r),30),i.submittable(async()=>{i.submittable(null),k.hide();const E=await g({async exec(){return(await ge.submitGuess(r)).data.guess.game_state},check(D){return D.guess!==null},query_fail(){return k.show(),gn(r),null},persist_reveal:!0});!E||(await i.commit(),i.unsubmittable(),Ht.kill(),yn(E))})}let wn=!1,bn=!1,Mt;async function yn(r,E=!1){const{round_result:D,round:ie,result:te}=r;let le=!1;if(D&&!wn){wn=!0;const[$,V]=D.split("|");V==="wrong"?(await x(`
					Sorry, your guess about ${$==="opponent"?"your opponent's chip":"my bag"} was wrong.
					
					Guessing wrong is the worst because you automatically lose your wager. Consider abstaining next time if you're unsure.
				`),le=!0):await x(`Nicely done, your guess about ${$==="opponent"?"your opponent's chip":"my bag"} was correct!`)}if(!r.opponent_guess)return bn||(bn=!0,Mt=new X({eta:new bt(r.guess_turn_start_block+""),kill_text:"now submitted",terminate:Fe}),await x(`${le?"Even though you lost":"However"}, I am still waiting for a guess from your opponent. They have {clock_icon}{time_remaining}.`,{clock_icon:Mt.clock,time_remaining:Mt.store})),await Y(5e3),yn(await ge.queryGameState());if(Mt&&Mt.kill(),t(10,P=""),_.animate_chip_exit(),console.log("round_1d#over",r),r.finished)if(r.opponent_round_result){const{opponent_round_result:$,opponent_guess:V}=r,[z,ce,be]=V.split(/\|/g),[,Ae]=$.split("|");let je="",ne=!1;if(z==="abstain")je="abstained from guessing";else{const Xe=ce.split(":")[1],Ot=be.split(":")[1],en=At[Xe].labels[u]+" "+Xt[Ot].labels[u];ne=Ae!=="correct",je=`${ne?"wrongly":"correctly"} guessed that ${z==="bag"?"my bag":"your chip"} is the ${en}`}if(te==="you lost wager")return await x([`${le?"As you already know":"Bad news"}, you lost your wager. ${ne?"But you'll be happy to know that your opponent":"Your opponent"} ${je}, so they ${ne?"also lost their wager":"won the game and gained your lost wager"}.`]),await Y(9e3),ze();if(te==="you won wager"){const Xe=BigInt(r.wager),Ot=rn(Xe),en=rn(Xe*2n);return await x(`
						Congratulations, you won! Your opponent ${je}, so they lost their wager.
						
						I have refunded you your original ${Ot} plus an extra ${Ot} from your opponent's wager for a total of ${en}.
					`),await Y(9e3),ze()}else await x([`Well done. You and your opponent have tied, so you both can claim a reward. They ${je}.`]),E||await Y(4e3)}else return J("Somebody terminated the game.");else if(r.round===3)Ln(r,E);else return J(`Game is not finished but round is ${r.round}.`)}let Ds=!1,Nt;async function Ln(r,E=!1){if(Nt=new X({eta:new bt(r.pick_reward_round_start_block+""),kill_text:"made your decision"}),await pe.trumpet_fanfare.play(),await Y(1500),await x(`
			Congratulations on passing round 1 together! I have two rewards to choose from, a jackpot of SCRT, or an NFT that can be used to give you special powers next time you play.

			However, if you both attempt to claim the same prize, then neither of you will take it. You will only be able to take a reward if you and your opponent claim different things.

			You have {clock_icon}{time_remaining}.
		`,{clock_icon:Nt.clock,time_remaining:Nt.store}),r.pick)return vn(r,!0);w.show()}async function Dn(r){const{detail:E}=r;i.submittable(null),await i.reveal_text(`i pick the ${E}`),i.submittable(async()=>{i.submittable(null),w.hide();const D=await g({async exec(){return(await ge.pickReward(E)).data.pick_reward.game_state},check(ie){return ie.pick!==null},query_fail(){return w.show(),Dn(r),null},persist_reveal:!0});!D||(await i.commit(),i.unsubmittable(),vn(D))})}let $t,kn=!1;async function vn(r,E=!1){Nt&&Nt.kill();const{result:D}=r;if(D){switch(D){case"you won jackpot":{kt(),await x(`
						Fortune favors the bold! Your opponent picked the NFT, and you have successfully claimed the jackpot of ${rn(BigInt(r.jackpot_reward||"0"))}!
					`);break}case"you won nft":{vt(),await x(`
						Wise move. While your opponent chose the short-term gain, you see the long-term potential. You have successfully claimed an NFT.
					`);break}case"you lost reward":{vt(),r.pick==="jackpot"?await x(`
							Greed has spoiled your riches. Both players attempted to claim the jackpot, so you both shall leave empty-handed.
						`):await x(`
							An unlucky pick. Both players attempted to claim the NFT, so you both shall leave empty-handed.
						`);break}}return await Y(9e3),ze()}else return kn||(kn=!0,$t=new X({eta:new bt(r.pick_reward_round_start_block+""),kill_text:"also picked theirs",terminate:Fe}),await x(["Your pick has been noted. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:$t.clock,time_remaining:$t.store})),await Y(5e3),vn(await ge.queryGameState())}function Yn(r){let E;if(typeof r=="string"?E=Object.fromEntries(r.split(/\|/g).map(D=>D.split(":"))):E=r,E.target==="abstain")return"i abstain from guessing this round";{let D="";return E.target==="bag"?D+="the arbiter's bag is: a ":D+="my opponent's chip is: a ",D+At[E.color].labels[u]+" "+Xt[E.shape].labels[u]}}async function Ys(){gn({target:"abstain",color:null,shape:null})}async function Bs({detail:r}){gn(r)}let Sn=!1;function Bn(){if(!Sn)Sn=!0,Be("The button you just clicked will remove all cookies and cache that the game previously created and then disable the current UI. If you agree to this, click the burn icon again.");else return Object.keys(Rn()).forEach(r=>cn(r)),localStorage.clear(),i.reveal_text(""),J("Cache burned")}const co=[];oa.keys(e).forEach(r=>{!~co.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&aa.warn(`<App> was created with unknown prop '${r}'`)});const uo=()=>t(0,Se=!Se),_o=()=>Bn();function fo(r){i=r,t(2,i)}function ho(r){qe[r?"unshift":"push"](()=>{oe=r,t(11,oe)})}function mo(r){b=r,t(5,b)}function po(r){d=r,t(4,d)}function go(r){k=r,t(6,k)}function wo(r){w=r,t(7,w)}function bo(r){_=r,t(3,_)}return n.$capture_state=()=>({onMount:Ft,setContext:_i,writable:Dt,blur:mt,fade:me,quadInOut:gt,expoOut:pt,Fa:Ie,faClock:fi,faVolumeUp:Xn,faVolumeMute:Jn,faFire:di,fingerprintjs:hi,H_LANGUAGES:mi,H_COLORS:At,H_SHAPES:Xt,A_BASES:xt,H_BASES:Ct,H_MESSAGES:pi,SI_CHAIN:xn,S_CHAIN_NAME:Tn,P_LCD_REST:jn,P_LCD_RPC:an,uscrt_to_scrt:rn,KeplrWallet:Zt,EnableKeplrError:ns,OfflineSignerError:ss,dd:Te,delete_cookie:cn,read_cookie:Rn,write_cookie:jt,XTL_SECONDS:Ve,XTL_HOURS:Yt,XTL_DAYS:wt,ode:Le,proper:ve,timeout:Y,relative_time:ki,Killables:vi,Deduction:un,use_assertion_in_sentence:Qt,use_quality_in_sentence:Bt,MessagePanel:Li,Prompt:Bi,Assertion:Zi,Scene:eo,PremiseWidget:_n,Decision:io,ActionWidget:ao,Pick:lo,SI_PERMIT:ts,ContractError:ln,EtaEstimator:bt,GameContract:Ci,P_CONTRACT_GAME_ADDR:Tt,SI_CONTRACT_GAME_CODE_HASH:Ei,P_CONTRACT_MINTER_ADDR:Vt,SI_CONTRACT_MINTER_CODE_HASH:Pi,MinterContract:Ti,EncryptedLocalStorage:Ms,F_IDENTITY:Ls,G_NETWORK_SUMMARY:a,g_permit:c,s_lang:u,k_panel:i,k_scene:_,k_tx:d,k_prompt:b,k_decision:k,k_pick:w,k_wallet:h,k_killables:p,si_player_color:A,si_player_shape:m,si_player_hint:P,si_submit_first:y,k_priori:f,f_assert_1:v,f_assert_2:q,quiet_fade:M,d_img_monster:U,d_img_smile:I,reveal_prepared:L,introduction:F,welcome_back:N,reload:re,fatal:J,surprise:Ze,connect_wallet:Z,wait_for_other_player:Ge,H_AUDIO_SRC:$e,H_AUDIO:pe,b_muted:Se,h_cookie:Ye,k_minter:rt,k_game:ge,force_endgame:Fe,Countdown:X,game_over:ze,try_resume_game:et,b_surprise:qt,dm_surprise:oe,clone_audio:tt,play_menu_1a:ae,play_menu_1b:R,play_notif:se,play_coin:yt,play_jackpot:kt,play_death:vt,warn:we,err:Be,arbiter:x,display_nfts:It,GameStateError:Wt,safe_exec:g,try_join:ee,update_player_state:Ee,si_assert_basis:Ke,si_assert_quality:_e,reveal_tx:nt,select_basis:St,b_force_rejected:Qe,force_reject:Et,reset_tx:ke,select_quality:he,k_countdown_1a:Pe,round_1a:ut,b_notif_1b_waiting:lt,k_countdown_1a2:Je,k_countdown_1b:st,round_1b:dn,b_notif_1c_waiting:hn,k_countdown_1b2:mn,k_countdown_1c:Rt,k_countdown_1c2:Ht,round_1c:pn,prepare_guess:gn,b_notif_1d_result:wn,b_notif_1d_waiting:bn,k_countdown_1d:Mt,round_1d:yn,b_notif_3a_waiting:Ds,k_countdown_3a:Nt,round_3a:Ln,select_pick:Dn,k_countdown_3b:$t,b_notif_3b_waiting:kn,round_3b:vn,use_guess_in_sentence:Yn,select_abstain:Ys,select_decision:Bs,b_burn_clicked:Sn,burn:Bn,k_deduced:s}),n.$inject_state=r=>{"g_permit"in r&&(c=r.g_permit),"s_lang"in r&&(u=r.s_lang),"k_panel"in r&&t(2,i=r.k_panel),"k_scene"in r&&t(3,_=r.k_scene),"k_tx"in r&&t(4,d=r.k_tx),"k_prompt"in r&&t(5,b=r.k_prompt),"k_decision"in r&&t(6,k=r.k_decision),"k_pick"in r&&t(7,w=r.k_pick),"k_wallet"in r&&(h=r.k_wallet),"si_player_color"in r&&t(8,A=r.si_player_color),"si_player_shape"in r&&t(9,m=r.si_player_shape),"si_player_hint"in r&&t(10,P=r.si_player_hint),"si_submit_first"in r&&(y=r.si_submit_first),"k_priori"in r&&t(21,f=r.k_priori),"f_assert_1"in r&&t(22,v=r.f_assert_1),"f_assert_2"in r&&t(23,q=r.f_assert_2),"b_muted"in r&&t(0,Se=r.b_muted),"h_cookie"in r&&t(1,Ye=r.h_cookie),"k_minter"in r&&(rt=r.k_minter),"k_game"in r&&(ge=r.k_game),"b_surprise"in r&&(qt=r.b_surprise),"dm_surprise"in r&&t(11,oe=r.dm_surprise),"si_assert_basis"in r&&(Ke=r.si_assert_basis),"si_assert_quality"in r&&(_e=r.si_assert_quality),"b_force_rejected"in r&&(Qe=r.b_force_rejected),"k_countdown_1a"in r&&(Pe=r.k_countdown_1a),"b_notif_1b_waiting"in r&&(lt=r.b_notif_1b_waiting),"k_countdown_1a2"in r&&(Je=r.k_countdown_1a2),"k_countdown_1b"in r&&(st=r.k_countdown_1b),"b_notif_1c_waiting"in r&&(hn=r.b_notif_1c_waiting),"k_countdown_1b2"in r&&(mn=r.k_countdown_1b2),"k_countdown_1c"in r&&(Rt=r.k_countdown_1c),"k_countdown_1c2"in r&&(Ht=r.k_countdown_1c2),"b_notif_1d_result"in r&&(wn=r.b_notif_1d_result),"b_notif_1d_waiting"in r&&(bn=r.b_notif_1d_waiting),"k_countdown_1d"in r&&(Mt=r.k_countdown_1d),"b_notif_3a_waiting"in r&&(Ds=r.b_notif_3a_waiting),"k_countdown_3a"in r&&(Nt=r.k_countdown_3a),"k_countdown_3b"in r&&($t=r.k_countdown_3b),"b_notif_3b_waiting"in r&&(kn=r.b_notif_3b_waiting),"b_burn_clicked"in r&&(Sn=r.b_burn_clicked),"k_deduced"in r&&t(12,s=r.k_deduced)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty[0]&14680064&&t(12,s=q(v(f.clone()).clone()).clone()),n.$$.dirty[0]&3&&Ye&&(Object.values(pe).forEach(r=>r.muted=Se),jt({muted:Se?"1":"0"},30*wt))},[Se,Ye,i,_,d,b,k,w,A,m,P,oe,s,p,St,Et,he,Dn,Ys,Bs,Bn,f,v,q,uo,_o,fo,ho,mo,po,go,wo,bo]}class la extends _t{constructor(e){super(e);ft(this,e,ra,Us,dt,{},null,[-1,-1,-1,-1]),Q("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:Us.name})}}new la({target:document.body,props:{}});
//# sourceMappingURL=index.e243ee32.js.map
