var to=Object.defineProperty,no=Object.defineProperties;var so=Object.getOwnPropertyDescriptors;var Ss=Object.getOwnPropertySymbols;var io=Object.prototype.hasOwnProperty,oo=Object.prototype.propertyIsEnumerable;var Ps=(n,e,t)=>e in n?to(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vt=(n,e)=>{for(var t in e||(e={}))io.call(e,t)&&Ps(n,t,e[t]);if(Ss)for(var t of Ss(e))oo.call(e,t)&&Ps(n,t,e[t]);return n},Xt=(n,e)=>no(n,so(e));import{v as ao,S as ro,a as ft,i as dt,s as ht,d as Q,g as Es,b as mt,c as Yt,o as Lt,e as An,f as pt,h as fe,q as Cn,F as Te,j as As,k as Cs,l as Ts,m as js,n as T,t as ce,p as A,r as j,u as G,w as S,x as je,y as Ve,z as qs,A as Is,B as F,C as qe,D as B,E as K,G as Ie,H as N,I as Le,J as H,K as Be,L as he,M as Re,N as Oe,O as lo,P as co,Q as Ee,R as Ze,T as ue,U as Bt,V as st,W as at,X as uo,Y as _o,Z as xt,_ as Rs,$ as Os,a0 as me,a1 as fo,a2 as Ms,a3 as ho,a4 as mo,a5 as po,a6 as Tn,a7 as Ns,a8 as Us,a9 as Ds,aa as Ys,ab as Vt,ac as Ls,ad as Bs,ae as Zt,af as Rt,ag as Ot,ah as Qs,ai as _n,aj as Ws,ak as Hs,al as Gs,am as jn,an as Fs,ao as zs,ap as Js,aq as Ks,ar as qn,as as In,at as Rn,au as Qt,av as Xs,aw as Mt,ax as xs,ay as Vs,az as Zs,aA as go,aB as Wt}from"./vendor.1ad4c259.js";const wo=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}};wo();const $s={en:{}},St={red:{color:"#a00000",labels:{en:"red"}},green:{color:"#006000",labels:{en:"green"}},blue:{color:"#0000a0",labels:{en:"blue"}},black:{color:"#000000",labels:{en:"black"}}},fn=Object.keys(St),Ht={triangle:{symbol:"\u25B2",labels:{en:"triangle"}},square:{symbol:"\u25A0",labels:{en:"square"}},circle:{symbol:"\u25CF",labels:{en:"circle"}},star:{symbol:"\u2605",labels:{en:"star"}}},dn=Object.keys(Ht),Gt={nobody_has:{describe:{en:n=>`nobody has ${n||"..."}`}},i_have:{describe:{en:n=>`my chip is ${n||"..."}`}}},Ft=Object.keys(Gt),ei={attention:[{labels:{en:"the Arbiter approaches..."}}],loading:[{delay:2e3,interval:200,labels:{en:"hmmm"}},{delay:250,interval:500,labels:{en:"hmmm...."}}]},On="pulsar-1",hn="pulsar-1",mn="https://h7pwct6jl3.execute-api.us-west-2.amazonaws.com/",$t="https://7yp08exitj.execute-api.us-west-2.amazonaws.com/",en=n=>(Number(n/10000n)/100).toFixed(2).replace(/\.0+$/,"")+" SCRT";class Mn extends Error{constructor(e,t){t?t instanceof TypeError?super(`${e}: ${t.stack}`):t instanceof Error?super(`${e}: ${t.stack}`):super(`${e}: Unknown error`):super(e)}}const $e=1e3,Nn=60*$e,Nt=60*Nn,gt=24*Nt,ti=7*gt,ni=30*gt,si=365*gt,Me=Object.entries;function ii(n,e){return Me(n).reduce((t,[s,o])=>[...t,e(s,o)],[])}function W(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}const ge=n=>n[0].toUpperCase()+n.slice(1),bo=[{ge:si,divisor:si,unit:"year"},{ge:ni,divisor:ni,unit:"month"},{ge:ti,divisor:ti,unit:"week"},{ge:gt,divisor:gt,unit:"day"},{ge:Nt,divisor:Nt,unit:"hour"},{ge:Nn,divisor:Nn,unit:"minute"},{ge:$e,divisor:$e,unit:"seconds"},{ge:0,divisor:1,text:"just now"}];function oi(n,e=Date.now(),t=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"})){const o=(typeof e=="object"?e.getTime():new Date(e).getTime())-(typeof n=="object"?n:new Date(n)).getTime(),r=Math.abs(o);for(const a of bo)if(r>=a.ge){const l=Math.round(Math.abs(o)/a.divisor),u=o<0;return a.unit?t.format(u?l:-l,a.unit):a.text}}class ai{constructor(){this._as_intervals=new Set,this._as_timeouts=new Set}addInterval(e,t){const s=window.setInterval(e,t);return this._as_intervals.add(s),s}addTimeout(e,t){const s=window.setTimeout(()=>{this.delTimeout(s),e()},t);return this._as_timeouts.add(s),s}delInterval(e){window.clearInterval(e),this._as_intervals.delete(e)}delTimeout(e){window.clearTimeout(e),this._as_timeouts.delete(e)}killAll(){for(const e of this._as_intervals)this.delInterval(e);for(const e of this._as_timeouts)this.delTimeout(e)}}async function yo(n,e,t=null){if(t==null?void 0:t.search){if(e.includes("?"))throw new Error(`Cannot specify 'search' option in fetch config when URI already contains search params: "${e}"`);e+="?"+new URLSearchParams(t.search).toString(),delete t.search}try{return await ao(e,Xt(vt({},t),{method:n,mode:"cors",headers:vt({Accept:"application/json"},(t||{}).headers||{})})).json()}catch(s){throw s}}async function ri(n,e=null){return yo("GET",n,e)}const Pt="secret1zkn3d4u0t8hrr6jhqrdeg96ygrhmx66f9dm6cu",li="7c98f9e086e687e8f920dc6c0bee01a88c8097223d53bd494ffb7b8bfec4f364",tn="secret1rfwt2zlw27f9ps28svetzmt32tv0rwnr6jg5hz",ci="36d94d2066b903ede9716f77f2fe99274aaa2c434feb424302dbb8aef9f34721";class Un extends Error{constructor(e){super(`The game contract returned the following error: ${e}`)}}const ko="1000000",vo=new TextDecoder;class ui{constructor(e,t,s,o){this._k_wallet=e,this._p_contract=t,this._g_permit=s||null,this._si_code_hash=o}async execute(e,t,s=[]){const o=await this._k_wallet.execute(this._p_contract,e,s,t,this._si_code_hash);return{txnHash:o.transactionHash,data:JSON.parse(vo.decode(o.data))}}joinGame(){return this.execute({join:{}},{amount:[{amount:"8750",denom:"uscrt"}],gas:"35000"},[{denom:"uscrt",amount:ko}])}submitAssertion(e,t){const[s,o]=t.split(":"),r=s==="color"?{color:o}:{shape:o};return this.execute({submit:vt({target:e},r)},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}submitGuess(e){return this.execute({guess:e},{amount:[{amount:"10000",denom:"uscrt"}],gas:"40000"})}pickReward(e){return this.execute({pick_reward:{reward:e}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"1000000"})}forceEndgame(){return this.execute({force_endgame:{}},{amount:[{amount:"1000",denom:"uscrt"}],gas:"40000"})}query(e){return this._g_permit&&(e={with_permit:{query:e,permit:this._g_permit}}),this._k_wallet.query(this._p_contract,e)}async queryGameState(){const e=await this.query({game_state:{}});if(e.error)throw new Un(e.error);return e.game_state}}const So=(n,e)=>e<60*$e?Date.now()-n.lastUpdated>5*$e:Date.now()-n.lastUpdated>30*$e,_i=200;console.log(`Imposing global ${_i} blocks per 5 minutes estimate`);let Dn=!1,pn=0n,fi=0,di=0;async function Po(){if(Date.now()-di<5*$e)return;const n=new URL($t);n.pathname="/status";try{const e=await ri(n.href),{latest_block_height:t,latest_block_time:s}=e.data.result.sync_info;pn=BigInt(t),fi=new Date(s).getTime(),di=Date.now()}catch{}}class wt{constructor(e,t=_i,s=So){this._xt_start=0,this._xt_eta=0,this._xt_updated=0,this._b_currently_updating=!1,this._xg_block_start=BigInt(e),this._xg_block_dest=this._xg_block_start+BigInt(t),this._f_should_update=()=>s(this,this._xt_eta-Date.now())}async fetch_start_time(){const e=new URL($t);e.pathname="/block";const t=await ri(e.href,{search:{block:this._xg_block_start+""}});this._xt_start=new Date(t.data.result.block.header.time).getTime()}async estimate(){Dn=!0,this._xt_start||await this.fetch_start_time(),await Po();const e=Number(pn-this._xg_block_start);if(e<5)return 0;const t=(fi-this._xt_start)/e,s=Number(this._xg_block_dest-pn),o=this._xt_updated=Date.now();return Dn=!1,this._xt_eta=o+Math.round(s*t)}get lastUpdated(){return this._xt_updated}get destinationBlock(){return this._xg_block_dest}get expired(){return pn>=this.destinationBlock}get ready(){return this._xt_eta!==0}get eta(){return!this.expired&&!Dn&&this._f_should_update()&&this.estimate(),this._xt_eta}get remaining(){return this.eta-Date.now()}}const Yn="Scrt Prisoners";class Ln extends Mn{constructor(e){super("While attempting to enable Keplr",e)}}class Bn extends Mn{constructor(e){super("While attempting to acquire offline signer",e)}}class Eo extends Mn{constructor(e){super("While attempting to acquire enigma utils",e)}}class zt{static isAvailable(){return!!window.keplr}static fromWindow(){if(window.keplr)return new zt(window.keplr);throw new Error("Keplr extension is not installed")}constructor(e){this._k_keplr=e}async enable(e,t){const s=this._si_chain=e.chainId;this._fk_change=t;try{await this._k_keplr.experimentalSuggestChain({chainId:s,chainName:e.chainName,rpc:e.rpc,rest:e.rest,bip44:{coinType:529},coinType:529,stakeCurrency:{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6},bech32Config:{bech32PrefixAccAddr:"secret",bech32PrefixAccPub:"secretpub",bech32PrefixValAddr:"secretvaloper",bech32PrefixValPub:"secretvaloperpub",bech32PrefixConsAddr:"secretvalcons",bech32PrefixConsPub:"secretvalconspub"},currencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],feeCurrencies:[{coinDenom:"SCRT",coinMinimalDenom:"uscrt",coinDecimals:6}],gasPriceStep:{low:.1,average:.25,high:.4},features:["secretwasm"]})}catch{return!1}try{await this._k_keplr.enable(s)}catch(o){throw new Ln(o)}try{this._k_signer=window.getOfflineSigner(s)}catch(o){throw new Bn(o)}try{this._k_enigma=window.getEnigmaUtils(s)}catch(o){throw new Eo(o)}return this._g_key=await this._k_keplr.getKey(s),this._a_accounts=await this._k_signer.getAccounts(),this._k_client=new ro(mn,this.publicAddress,this._k_signer,this._k_enigma,{exec:{amount:[{amount:"62500",denom:"uscrt"}],gas:"250000"}}),window.addEventListener("keplr_keystorechange",async()=>{(await this._k_keplr.getKey(s)).bech32Address!==this.publicAddress&&this._fk_change()}),!0}get chain(){return this._si_chain}get key(){return this._g_key}get accounts(){return this._a_accounts}get primaryAccount(){return this.accounts[0]}get publicAddress(){return this.primaryAccount.address}async signQueryPermit(){return(await this._k_keplr.signAmino(this.chain,this.publicAddress,{chain_id:this.chain,account_number:"0",sequence:"0",fee:{amount:[{denom:"uscrt",amount:"0"}],gas:"1"},msgs:[{type:"query_permit",value:{permit_name:Yn,allowed_tokens:[Pt,tn],permissions:["owner"]}}],memo:""},{preferNoSetFee:!0,preferNoSetMemo:!0})).signature}execute(e,t,s,o,r){let a="";if(o&&(a+=` --gas ${o.gas}`),s&&s.length){const l=s[0];a+=` --amount ${l.amount}${l.denom}`}return console.log(`secretd tx compute execute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}${a}`),this._k_client.execute(e,t,"",s,o,r||void 0)}query(e,t,s,o){return console.log(`secretd q compute ${e} '${JSON.stringify(t)}' --from ${this.publicAddress}`),this._k_client.queryContractSmart(e,t,s||{},o||void 0)}}const gn=(n,e)=>n.querySelector(e),hi=(n,e)=>Array.prototype.slice.call(n.querySelectorAll(e),0);function ke(n,e={},t=[]){const s=document.createElement(n);for(const o in e)s.setAttribute(o,e[o]+"");for(const o of t)s.append(o);return s}function wn(){return document.cookie.split(";").reduce((n,e)=>{const t=e.trim().split("=");return Xt(vt({},n),{[t[0]]:t.slice(1).join("=")})},{})}function Et(n,e){document.cookie=Object.entries(Xt(vt({},n),{"max-age":""+e})).map(([t,s])=>`${t}=${s}`).join("; ")}function nn(n){return Et({[n]:""},0)}const Ao=65535,mi=128,Co="RGBK\u25B2\u2586\u25CF\u2605";function pi(n){let e=[];for(let t=0;t<8;t++)n&mi?e.push(Co[t]):e.push(" "),n=n<<1;return`[${e.join(",")}]`}function bn(n,e=!1){const[t,s]=n.split(":");if(t==="color"){const o=fn.indexOf(s);return 1<<7-o|(e?15:0)}else{const o=dn.indexOf(s);return 1<<3-o|(e?240:0)}}function Ut(n){const[e,t]=n.split(":");return`${e==="shape"?"a ":""}${t}`}function Dt(n){const[e,t]=n.split("|");return`${e==="nobody_has"?"nobody has ":"my chip is"} ${Ut(t)}`}class sn{constructor(e=Ao){this._xm_deduce=e}clone(){return new sn(this._xm_deduce)}nobody(e){let t=bn(e);return t|=t<<8,this._xm_deduce&=~t,this}opponent(e,t){if(t){const s=bn(e,!0),o=~bn(e);this._xm_deduce&=o<<8|s}else this._xm_deduce&=~bn(e);return this}explain(){const e=this._xm_deduce>>8,t=this._xm_deduce&255;return[`A: ${pi(e)}`,`O: ${pi(t)}`].join(`
`)}enumerate(e){let t=e==="bag"?this._xm_deduce>>8:this._xm_deduce&255;const s=[],o=[];for(let a=0;a<8;a++)t&mi&&(a<4?s.push(fn[a]):o.push(dn[a-4])),t=t<<1;const r=[];for(const a of s)for(const l of o)r.push({target:e,color:a,shape:l});return r}}const{Object:To,console:gi}=Es,re="src/component/MessagePanel.svelte";function Qn(n){let e,t,s,o,r;const a={c:function(){e=T("span"),t=ce(n[3]),A(e,"class","msg-console-eval s-l2U1SoEQLPY0"),j(e,re,630,3,16559)},m:function(u,i){G(u,e,i),S(e,t),n[22](e),r=!0},p:function(u,i){(!r||i[0]&8)&&je(t,u[3])},i:function(u){r||(Ve(()=>{o&&o.end(1),s=qs(e,fe,{duration:1e3}),s.start()}),r=!0)},o:function(u){s&&s.invalidate(),o=Is(e,fe,{duration:500}),r=!1},d:function(u){u&&F(e),n[22](null),u&&o&&o.end()}};return Q("SvelteRegisterBlock",{block:a,id:Qn.name,type:"if",source:"(630:2) {#if s_evaluation}",ctx:n}),a}function Wn(n){let e,t,s,o,r,a,l,u,i,_,d,w,y,p,h,b,E;o=new Te({props:{icon:As},$$inline:!0}),d=new Te({props:{icon:Cs},$$inline:!0});let m=n[12].length&&Hn(n);const P={c:function(){e=T("div"),t=T("span"),s=T("span"),qe(o.$$.fragment),r=B(),a=T("span"),l=ce(n[6]),u=B(),i=T("span"),_=T("span"),qe(d.$$.fragment),w=B(),y=T("span"),p=ce(n[7]),h=B(),m&&m.c(),A(s,"class","msg-nav-icon lifted s-l2U1SoEQLPY0"),j(s,re,642,4,16856),A(a,"class","msg-nav-name s-l2U1SoEQLPY0"),K(a,"long-name",n[6].length>=40),j(a,re,643,4,16921),A(t,"class","msg-nav-group s-l2U1SoEQLPY0"),j(t,re,641,3,16823),A(_,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(_,re,646,4,17057),A(y,"class","msg-nav-addr addr s-l2U1SoEQLPY0"),j(y,re,647,4,17117),A(i,"class","msg-nav-group s-l2U1SoEQLPY0"),j(i,re,645,3,17024),A(e,"class","msg-nav s-l2U1SoEQLPY0"),j(e,re,640,2,16748)},m:function(f,v){G(f,e,v),S(e,t),S(t,s),Ie(o,s,null),S(t,r),S(t,a),S(a,l),S(e,u),S(e,i),S(i,_),Ie(d,_,null),S(i,w),S(i,y),S(y,p),S(e,h),m&&m.m(e,null),E=!0},p:function(f,v){n=f,(!E||v[0]&64)&&je(l,n[6]),v[0]&64&&K(a,"long-name",n[6].length>=40),(!E||v[0]&128)&&je(p,n[7]),n[12].length?m?(m.p(n,v),v[0]&4096&&N(m,1)):(m=Hn(n),m.c(),N(m,1),m.m(e,null)):m&&(Le(),H(m,1,1,()=>{m=null}),Be())},i:function(f){E||(N(o.$$.fragment,f),N(d.$$.fragment,f),N(m),Ve(()=>{b||(b=he(e,An,{duration:750,easing:Cn},!0)),b.run(1)}),E=!0)},o:function(f){H(o.$$.fragment,f),H(d.$$.fragment,f),H(m),b||(b=he(e,An,{duration:750,easing:Cn},!1)),b.run(0),E=!1},d:function(f){f&&F(e),Re(o),Re(d),m&&m.d(),f&&b&&b.end()}};return Q("SvelteRegisterBlock",{block:P,id:Wn.name,type:"if",source:"(640:1) {#if b_nav_display}",ctx:n}),P}function Hn(n){let e,t,s,o,r,a,l=n[12][0]+"",u,i,_,d,w=n[12][1]+"",y,p,h,b,E,m=n[12][2]+"",P,k,f;s=new Te({props:{icon:Ts},$$inline:!0});const v={c:function(){e=T("span"),t=T("span"),qe(s.$$.fragment),o=B(),r=T("span"),a=T("span"),u=ce(l),i=ce(":"),_=B(),d=T("span"),y=ce(w),p=B(),h=T("span"),h.textContent="...",b=B(),E=T("span"),P=ce(m),A(t,"class","msg-nav-icon s-l2U1SoEQLPY0"),j(t,re,651,5,17286),A(a,"class","prefix s-l2U1SoEQLPY0"),j(a,re,653,6,17398),A(d,"class","addr s-l2U1SoEQLPY0"),j(d,re,654,6,17456),A(h,"class","ellipsis s-l2U1SoEQLPY0"),j(h,re,655,6,17511),A(E,"class","addr s-l2U1SoEQLPY0"),j(E,re,656,6,17551),A(r,"class","msg-nav-permit inline-flex s-l2U1SoEQLPY0"),j(r,re,652,5,17350),A(e,"class","msg-nav-group s-l2U1SoEQLPY0"),j(e,re,650,4,17218)},m:function(M,U){G(M,e,U),S(e,t),Ie(s,t,null),S(e,o),S(e,r),S(r,a),S(a,u),S(a,i),S(r,_),S(r,d),S(d,y),S(r,p),S(r,h),S(r,b),S(r,E),S(E,P),f=!0},p:function(M,U){(!f||U[0]&4096)&&l!==(l=M[12][0]+"")&&je(u,l),(!f||U[0]&4096)&&w!==(w=M[12][1]+"")&&je(y,w),(!f||U[0]&4096)&&m!==(m=M[12][2]+"")&&je(P,m)},i:function(M){f||(N(s.$$.fragment,M),Ve(()=>{k||(k=he(e,fe,{duration:1e3},!0)),k.run(1)}),f=!0)},o:function(M){H(s.$$.fragment,M),k||(k=he(e,fe,{duration:1e3},!1)),k.run(0),f=!1},d:function(M){M&&F(e),Re(s),M&&k&&k.end()}};return Q("SvelteRegisterBlock",{block:v,id:Hn.name,type:"if",source:"(650:3) {#if a_permit_displays.length}",ctx:n}),v}function Gn(n){let e,t,s,o,r,a,l,u,i;s=new Te({props:{icon:js},$$inline:!0});const _={c:function(){e=T("div"),t=T("span"),qe(s.$$.fragment),o=B(),r=T("span"),r.textContent="Submit",A(t,"class","msg-submit-icon s-l2U1SoEQLPY0"),j(t,re,671,3,17898),A(r,"class","msg-submit-text s-l2U1SoEQLPY0"),j(r,re,672,3,17965),A(e,"class","msg-submit s-l2U1SoEQLPY0"),K(e,"active",!!n[9]),j(e,re,663,2,17676)},m:function(w,y){G(w,e,y),S(e,t),Ie(s,t,null),S(e,o),S(e,r),n[23](e),l=!0,u||(i=[Oe(e,"click",function(){lo(n[9]||wi)&&(n[9]||wi).apply(this,arguments)},!1,!1,!1),Oe(e,"mouseenter",n[15],!1,!1,!1),Oe(e,"mouseleave",n[16],!1,!1,!1)],u=!0)},p:function(w,y){n=w,y[0]&512&&K(e,"active",!!n[9])},i:function(w){l||(N(s.$$.fragment,w),Ve(()=>{a||(a=he(e,pt,{},!0)),a.run(1)}),l=!0)},o:function(w){H(s.$$.fragment,w),a||(a=he(e,pt,{},!1)),a.run(0),l=!1},d:function(w){w&&F(e),Re(s),n[23](null),w&&a&&a.end(),u=!1,co(i)}};return Q("SvelteRegisterBlock",{block:_,id:Gn.name,type:"if",source:"(663:1) {#if b_submit_display}",ctx:n}),_}function Fn(n){let e,t,s,o,r,a,l,u,i,_,d,w,y,p,h,b=n[3]&&Qn(n),E=n[5]&&Wn(n),m=n[8]&&Gn(n);const P={c:function(){e=T("div"),t=T("div"),s=T("div"),o=B(),r=T("div"),a=T("span"),l=ce(">\xA0"),u=ce(n[4]),i=ce(n[11]),_=B(),d=T("span"),d.textContent="\xA0",w=B(),b&&b.c(),y=B(),E&&E.c(),p=B(),m&&m.c(),A(s,"class","msg-history-scroll s-l2U1SoEQLPY0"),j(s,re,624,2,16311),A(t,"class","msg-history s-l2U1SoEQLPY0"),j(t,re,623,1,16260),A(a,"class","text s-l2U1SoEQLPY0"),j(a,re,627,2,16411),A(d,"class","cursor blinking s-l2U1SoEQLPY0"),j(d,re,628,2,16469),A(r,"class","msg-console s-l2U1SoEQLPY0"),j(r,re,626,1,16383),A(e,"class","msg-panel s-l2U1SoEQLPY0"),j(e,re,622,0,16214)},l:function(f){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(f,v){G(f,e,v),S(e,t),S(t,s),n[19](s),n[20](t),S(e,o),S(e,r),S(r,a),S(a,l),S(a,u),S(a,i),S(r,_),S(r,d),n[21](d),S(r,w),b&&b.m(r,null),S(e,y),E&&E.m(e,null),S(e,p),m&&m.m(e,null),n[24](e),h=!0},p:function(f,v){(!h||v[0]&16)&&je(u,f[4]),(!h||v[0]&2048)&&je(i,f[11]),f[3]?b?(b.p(f,v),v[0]&8&&N(b,1)):(b=Qn(f),b.c(),N(b,1),b.m(r,null)):b&&(Le(),H(b,1,1,()=>{b=null}),Be()),f[5]?E?(E.p(f,v),v[0]&32&&N(E,1)):(E=Wn(f),E.c(),N(E,1),E.m(e,p)):E&&(Le(),H(E,1,1,()=>{E=null}),Be()),f[8]?m?(m.p(f,v),v[0]&256&&N(m,1)):(m=Gn(f),m.c(),N(m,1),m.m(e,null)):m&&(Le(),H(m,1,1,()=>{m=null}),Be())},i:function(f){h||(N(b),N(E),N(m),h=!0)},o:function(f){H(b),H(E),H(m),h=!1},d:function(f){f&&F(e),n[19](null),n[20](null),n[21](null),b&&b.d(),E&&E.d(),m&&m.d(),n[24](null)}};return Q("SvelteRegisterBlock",{block:P,id:Fn.name,type:"component",source:"",ctx:n}),P}const wi=()=>{};function jo(n,e,t){let{$$slots:s={},$$scope:o}=e;mt("MessagePanel",s,[]);const{language:r}=Yt("game");let a;r.subscribe(g=>a=g);const l={reveal_text:U,spinning:L,commit:de,receive:V,arbiter:Qe,opponent:ve,user:Se,error:Ke,warn:Ue,wallet:tt,permit:At,submittable:lt,unsubmittable:ie};let{k_killables:u}=e,i,_,d,w="\u275A",y="",p="",h=!1,b="",E="",m="",P=!1,k=null,f,v=0,q=!1,M="";async function U(g,Z=60,pe=0){M=g;let We=++v;z&&(t(11,D=""),u.delInterval(z),O=0,z=0),Z||(Z=60);const Ce=p.length,nt=g.length;let De=0;for(;De<Math.min(Ce,nt)&&p[De]===g[De];De++);const _t=3/5;for(let oe=Ce;oe>De;oe--)if(t(4,p=p.slice(0,-1)),await W(Z*_t),v!==We)return;if(pe&&await W(pe),v!==We)return;const xe=f||gn(document.body,".cursor");if(!!xe){for(let oe=De;oe<nt;oe++)if(xe.classList.remove("blinking"),await W(10),v!==We||(xe.classList.add("blinking"),t(4,p+=g[oe]),await W(Z),v!==We))return}}const I=["\u25DC \u25DD"," \u02C9\u25DE"," \u02CD\u25DD","\u25DF \u25DE","\u25DC\u02CD ","\u25DF\u02C9 "];let D="",z=0,O=0;async function L(g){if(g){if(z===0){let pe=function(){t(11,D=" "+I[O++]+" "),O%=I.length};z=-1;const Z=p;await U(Z+" "+I[I.length-1]+" "),t(4,p=Z),pe(),z=u.addInterval(pe,100)}}else z>0&&(t(11,D=""),u.delInterval(z),O=0,z=0)}async function et(){await U("")}let ze=0;async function V(g){if(q)return;for(;!i;)await W(100);const Z=g.widgets||{},pe=ze++,We=ke("div",{class:["line-commit",...g.classes||[]].join(" ")},[`> ${g.from}: `,...g.text.flatMap(oe=>{const be=[];let He=0;for(const{0:jt,1:Ge,index:kt}of oe.matchAll(/\{([a-z0-9-_]+)\}/ig)){const qt=Z[Ge];qt?(He!==kt&&be.push(oe.slice(He,kt)),qt instanceof Element?be.push(qt):be.push(ke("span",{class:`msg-widget-${Ge}-${pe}`}))):(console.error(`No such widget '${Ge}' was passed in with the formatted line`),be.push(oe.slice(He,kt+jt.length))),He=kt+jt.length}return He!==oe.length&&be.push(oe.slice(He)),be.push(ke("div",{class:"newline"})),be})]);for(const[oe,be]of Me(Z))typeof be.subscribe=="function"&&be.subscribe(He=>{const jt=hi(We,`.msg-widget-${oe}-${pe}`);for(const Ge of jt)Ge.innerHTML=He});const Ce=ke("div",{class:"curtain"});_.append(We),_.append(Ce),t(0,i.scrollTop=i.scrollHeight,i);const nt=_.getBoundingClientRect(),De=We.getBoundingClientRect(),_t=De.top-nt.top,xe=De.height+5;Object.assign(Ce.style,{top:`${_t}px`,height:`${xe}px`,left:"0px",width:"100%"}),await W(100);for(let oe=0;oe<xe;oe+=5)Object.assign(Ce.style,{top:`${_t+oe}px`,height:`${xe-oe}px`}),await W(120);Ce.remove()}const Je=g=>Array.isArray(g)?g:g.trim().split(/\n/).map(Z=>Z.trim());async function Qe(g,Z){return await V({from:"Arbiter",classes:["from-arbiter"],text:Je(g),widgets:Z||{}})}async function ve(g,Z){return await V({from:"Opponent",classes:["from-opponent"],text:g,widgets:Z||{}})}async function Se(g,Z){return await V({from:`You${m}`,classes:["from-user"],text:Je(g),widgets:Z||{}})}async function de(){Se(M||p),t(4,p="")}async function Ke(g,Z=!1){await V({from:"System",classes:["from-system-error"],text:Je(g)}),Z&&(q=!0)}async function Ue(g,Z){await V({from:"System",classes:["from-system-warn"],text:Je(g),widgets:Z||{}})}function tt(g){g.addr?(t(5,h=!0),t(6,b=g.name),t(7,E=g.addr),m=b?` (${b})`:""):t(5,h=!1)}let se=[];function At(g,Z){const pe=g.allowed_tokens[0];t(12,se=[Z?"restored":"signed",pe.slice(0,"secret12345".length),pe.slice(-5)])}let we=0;async function rt(){debugger;const g=Date.now();g-we>3e4&&(await U("sorry, you don't get to type :P"),await W(1600),await et(),we=g)}let _e;function lt(g,Z){if(t(8,P=!0),_e){const pe=_e.getBoundingClientRect();Object.assign(_e.style,{position:"fixed",top:`${pe.top}px`,left:`${pe.left}px`})}t(3,y=""),Z&&setTimeout(()=>{_e&&_e.style.position&&Object.assign(_e.style,{position:"",top:"",left:""}),t(3,y=Z)},500),t(9,k=g)}function ie(){t(8,P=!1),t(9,k=null)}Lt(()=>{d.addEventListener("keydown",()=>{rt()})});let R;async function J(){await W(100),R.classList.add("hover")}async function Xe(){t(14,R.style.animation="0",R),await W(100),R.classList.remove("hover"),await W(1e3),t(14,R.style.animation="",R)}const Ct=["k_killables"];To.keys(e).forEach(g=>{!~Ct.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&gi.warn(`<MessagePanel> was created with unknown prop '${g}'`)});function Tt(g){Ee[g?"unshift":"push"](()=>{_=g,t(1,_)})}function bt(g){Ee[g?"unshift":"push"](()=>{i=g,t(0,i)})}function Ae(g){Ee[g?"unshift":"push"](()=>{f=g,t(10,f)})}function yt(g){Ee[g?"unshift":"push"](()=>{_e=g,t(13,_e)})}function ct(g){Ee[g?"unshift":"push"](()=>{R=g,t(14,R)})}function ut(g){Ee[g?"unshift":"push"](()=>{d=g,t(2,d)})}return n.$$set=g=>{"k_killables"in g&&t(18,u=g.k_killables)},n.$capture_state=()=>({getContext:Yt,onMount:Lt,slide:An,blur:pt,fade:fe,quadOut:Cn,Fa:Te,faUser:As,faWallet:Cs,faTicketAlt:Ts,faPaperPlane:js,ode:Me,timeout:W,dd:ke,qs:gn,qsa:hi,ys_lang:r,s_lang:a,k_panel:l,k_killables:u,dm_history:i,dm_history_data:_,dm_panel:d,s_cursor:w,s_evaluation:y,s_text:p,b_nav_display:h,s_nav_name:b,s_nav_addr:E,s_account_alias:m,b_submit_display:P,fk_submit:k,dm_cursor:f,i_iter:v,b_disabled:q,s_revealing:M,reveal_text:U,A_SPIN:I,s_spinner:D,i_spinning:z,i_spin:O,spinning:L,clear:et,c_msgs:ze,receive:V,rerformat_lines:Je,arbiter:Qe,opponent:ve,user:Se,commit:de,error:Ke,warn:Ue,wallet:tt,a_permit_displays:se,permit:At,dt_attempt_last:we,attempt_type:rt,dm_eval:_e,submittable:lt,unsubmittable:ie,dm_submit:R,mouseenter_submit:J,mouseleave_submit:Xe}),n.$inject_state=g=>{"s_lang"in g&&(a=g.s_lang),"k_killables"in g&&t(18,u=g.k_killables),"dm_history"in g&&t(0,i=g.dm_history),"dm_history_data"in g&&t(1,_=g.dm_history_data),"dm_panel"in g&&t(2,d=g.dm_panel),"s_cursor"in g&&(w=g.s_cursor),"s_evaluation"in g&&t(3,y=g.s_evaluation),"s_text"in g&&t(4,p=g.s_text),"b_nav_display"in g&&t(5,h=g.b_nav_display),"s_nav_name"in g&&t(6,b=g.s_nav_name),"s_nav_addr"in g&&t(7,E=g.s_nav_addr),"s_account_alias"in g&&(m=g.s_account_alias),"b_submit_display"in g&&t(8,P=g.b_submit_display),"fk_submit"in g&&t(9,k=g.fk_submit),"dm_cursor"in g&&t(10,f=g.dm_cursor),"i_iter"in g&&(v=g.i_iter),"b_disabled"in g&&(q=g.b_disabled),"s_revealing"in g&&(M=g.s_revealing),"s_spinner"in g&&t(11,D=g.s_spinner),"i_spinning"in g&&(z=g.i_spinning),"i_spin"in g&&(O=g.i_spin),"c_msgs"in g&&(ze=g.c_msgs),"a_permit_displays"in g&&t(12,se=g.a_permit_displays),"dt_attempt_last"in g&&(we=g.dt_attempt_last),"dm_eval"in g&&t(13,_e=g.dm_eval),"dm_submit"in g&&t(14,R=g.dm_submit)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,_,d,y,p,h,b,E,P,k,f,D,se,_e,R,J,Xe,l,u,Tt,bt,Ae,yt,ct,ut]}class bi extends ft{constructor(e){super(e);dt(this,e,jo,Fn,ht,{k_panel:17,k_killables:18},null,[-1,-1]),Q("SvelteRegisterComponent",{component:this,tagName:"MessagePanel",options:e,id:Fn.name});const{ctx:t}=this.$$,s=e.props||{};t[18]===void 0&&!("k_killables"in s)&&gi.warn("<MessagePanel> was created without expected prop 'k_killables'")}get k_panel(){return this.$$.ctx[17]}set k_panel(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_killables(){throw new Error("<MessagePanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_killables(e){throw new Error("<MessagePanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const yi="src/component/Prompt.svelte";function ki(n,e,t){const s=n.slice();return s[17]=e[t],s}function zn(n){let e,t,s=n[0];ue(s);let o=[];for(let l=0;l<s.length;l+=1)o[l]=Jn(ki(n,s,l));const r=l=>H(o[l],1,1,()=>{o[l]=null}),a={c:function(){for(let u=0;u<o.length;u+=1)o[u].c();e=Bt()},m:function(u,i){for(let _=0;_<o.length;_+=1)o[_].m(u,i);G(u,e,i),t=!0},p:function(u,i){if(i&9){s=u[0],ue(s);let _;for(_=0;_<s.length;_+=1){const d=ki(u,s,_);o[_]?(o[_].p(d,i),N(o[_],1)):(o[_]=Jn(d),o[_].c(),N(o[_],1),o[_].m(e.parentNode,e))}for(Le(),_=s.length;_<o.length;_+=1)r(_);Be()}},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)N(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)H(o[i]);t=!1},d:function(u){st(o,u),u&&F(e)}};return Q("SvelteRegisterBlock",{block:a,id:zn.name,type:"if",source:"(122:1) {#if b_display}",ctx:n}),a}function Jn(n){let e,t=n[17].label+"",s,o,r,a,l,u,i,_;function d(){return n[5](n[17])}const w={c:function(){e=T("button"),s=ce(t),o=B(),A(e,"class",r="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"),A(e,"alt",a=n[17].alt||""),j(e,yi,123,3,2717)},m:function(p,h){G(p,e,h),S(e,s),S(e,o),u=!0,i||(_=Oe(e,"click",d,!1,!1,!1),i=!0)},p:function(p,h){n=p,(!u||h&1)&&t!==(t=n[17].label+"")&&je(s,t),(!u||h&1&&r!==(r="prompt-btn-"+n[17].key+" s-c0715tBQdWx2"))&&A(e,"class",r),(!u||h&1&&a!==(a=n[17].alt||""))&&A(e,"alt",a)},i:function(p){u||(Ve(()=>{l||(l=he(e,fe,{duration:3200,easing:Ze},!0)),l.run(1)}),u=!0)},o:function(p){l||(l=he(e,fe,{duration:3200,easing:Ze},!1)),l.run(0),u=!1},d:function(p){p&&F(e),p&&l&&l.end(),i=!1,_()}};return Q("SvelteRegisterBlock",{block:w,id:Jn.name,type:"each",source:"(123:2) {#each a_opts as g_opt}",ctx:n}),w}function Kn(n){let e,t,s=n[1]&&zn(n);const o={c:function(){e=T("div"),s&&s.c(),A(e,"class","prompt s-c0715tBQdWx2"),K(e,"showing",n[2]),j(e,yi,120,0,2624)},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,l){G(a,e,l),s&&s.m(e,null),t=!0},p:function(a,[l]){a[1]?s?(s.p(a,l),l&2&&N(s,1)):(s=zn(a),s.c(),N(s,1),s.m(e,null)):s&&(Le(),H(s,1,1,()=>{s=null}),Be()),l&4&&K(e,"showing",a[2])},i:function(a){t||(N(s),t=!0)},o:function(a){H(s),t=!1},d:function(a){a&&F(e),s&&s.d()}};return Q("SvelteRegisterBlock",{block:o,id:Kn.name,type:"component",source:"",ctx:n}),o}function qo(n,e,t){let{$$slots:s={},$$scope:o}=e;mt("Prompt",s,[]);const r={ok:P,opts:k,yes:m,yes_no:E},a={key:"yes",label:"Yes"},l={key:"no",label:"No"},u=[a,l],i=()=>{},_=q=>{q()};let d=[],w=!1,y=!1,p=i;function h(q){p(q),t(1,w=!1)}function b(q,M=_){return new Promise(U=>{p=I=>{M(U,I),t(1,w=!1)},t(0,d=q),t(1,w=!0),queueMicrotask(()=>{t(2,y=!0)})})}function E(){return b(u,(q,M)=>{q(M.key==="yes")})}function m(){return b([a])}function P(q="Ok"){return b([{key:"ok",label:q}])}function k(q){return b(ii(q,(M,U)=>vt({key:M},U)),(M,U)=>{M(U.key)})}const f=[];Object.keys(e).forEach(q=>{!~f.indexOf(q)&&q.slice(0,2)!=="$$"&&q!=="slot"&&console.warn(`<Prompt> was created with unknown prop '${q}'`)});const v=q=>h(q);return n.$capture_state=()=>({oderac:ii,quadInOut:Ze,fade:fe,k_prompt:r,G_ANS_YES:a,G_ANS_NO:l,A_OPTS_YES_NO:u,F_NOOP:i,F_CALL:_,a_opts:d,b_display:w,b_showing:y,fk_answer:p,answer:h,prompt:b,yes_no:E,yes:m,ok:P,opts:k}),n.$inject_state=q=>{"a_opts"in q&&t(0,d=q.a_opts),"b_display"in q&&t(1,w=q.b_display),"b_showing"in q&&t(2,y=q.b_showing),"fk_answer"in q&&(p=q.fk_answer)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[d,w,y,h,r,v]}class vi extends ft{constructor(e){super(e);dt(this,e,qo,Kn,ht,{k_prompt:4}),Q("SvelteRegisterComponent",{component:this,tagName:"Prompt",options:e,id:Kn.name})}get k_prompt(){return this.$$.ctx[4]}set k_prompt(e){throw new Error("<Prompt>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const it="src/component/Assertion.svelte";function Si(n,e,t){const s=n.slice();return s[15]=e[t],s}function Pi(n,e,t){const s=n.slice();return s[18]=e[t],s}function Ei(n,e,t){const s=n.slice();return s[15]=e[t],s}function Ai(n,e,t){const s=n.slice();return s[18]=e[t],s}function Ci(n,e,t){const s=n.slice();return s[27]=e[t],s}function Xn(n){let e,t,s,o,r,a,l,u,i,_,d=Ft;ue(d);let w=[];for(let m=0;m<d.length;m+=1)w[m]=xn(Ci(n,d,m));let y=n[7];ue(y);let p=[];for(let m=0;m<y.length;m+=1)p[m]=Zn(Ei(n,y,m));let h=n[7];ue(h);let b=[];for(let m=0;m<h.length;m+=1)b[m]=es(Si(n,h,m));const E={c:function(){e=T("div"),t=T("span");for(let P=0;P<w.length;P+=1)w[P].c();o=B(),r=T("span");for(let P=0;P<p.length;P+=1)p[P].c();l=B(),u=T("span");for(let P=0;P<b.length;P+=1)b[P].c();A(t,"class","tab-wrap s-WG7syJ6nmWd-"),j(t,it,206,2,5169),A(e,"class","tx-basis s-WG7syJ6nmWd-"),j(e,it,205,1,5092),A(r,"class","diamond tx-colors s-WG7syJ6nmWd-"),j(r,it,215,1,5445),A(u,"class","diamond tx-shapes s-WG7syJ6nmWd-"),j(u,it,234,1,6008)},m:function(P,k){G(P,e,k),S(e,t);for(let f=0;f<w.length;f+=1)w[f].m(t,null);G(P,o,k),G(P,r,k);for(let f=0;f<p.length;f+=1)p[f].m(r,null);G(P,l,k),G(P,u,k);for(let f=0;f<b.length;f+=1)b[f].m(u,null);_=!0},p:function(P,k){if(n=P,k&42){d=Ft,ue(d);let f;for(f=0;f<d.length;f+=1){const v=Ci(n,d,f);w[f]?w[f].p(v,k):(w[f]=xn(v),w[f].c(),w[f].m(t,null))}for(;f<w.length;f+=1)w[f].d(1);w.length=d.length}if(k&204){y=n[7],ue(y);let f;for(f=0;f<y.length;f+=1){const v=Ei(n,y,f);p[f]?p[f].p(v,k):(p[f]=Zn(v),p[f].c(),p[f].m(r,null))}for(;f<p.length;f+=1)p[f].d(1);p.length=y.length}if(k&196){h=n[7],ue(h);let f;for(f=0;f<h.length;f+=1){const v=Si(n,h,f);b[f]?b[f].p(v,k):(b[f]=es(v),b[f].c(),b[f].m(u,null))}for(;f<b.length;f+=1)b[f].d(1);b.length=h.length}},i:function(P){_||(Ve(()=>{s||(s=he(e,fe,{duration:3600,easing:Ze},!0)),s.run(1)}),Ve(()=>{a||(a=he(r,fe,{delay:2400,duration:3200,easing:xt},!0)),a.run(1)}),Ve(()=>{i||(i=he(u,fe,{delay:3200,duration:3200,easing:xt},!0)),i.run(1)}),_=!0)},o:function(P){s||(s=he(e,fe,{duration:3600,easing:Ze},!1)),s.run(0),a||(a=he(r,fe,{delay:2400,duration:3200,easing:xt},!1)),a.run(0),i||(i=he(u,fe,{delay:3200,duration:3200,easing:xt},!1)),i.run(0),_=!1},d:function(P){P&&F(e),st(w,P),P&&s&&s.end(),P&&F(o),P&&F(r),st(p,P),P&&a&&a.end(),P&&F(l),P&&F(u),st(b,P),P&&i&&i.end()}};return Q("SvelteRegisterBlock",{block:E,id:Xn.name,type:"if",source:"(205:0) {#if b_visible}",ctx:n}),E}function xn(n){let e,t=ge(Gt[n[27]].describe[n[3]](""))+"",s,o,r,a;const l={c:function(){e=T("span"),s=ce(t),o=B(),A(e,"class","active tab s-WG7syJ6nmWd-"),A(e,"data-basis",n[27]),K(e,"active",n[27]===n[1]),j(e,it,208,4,5228)},m:function(i,_){G(i,e,_),S(e,s),S(e,o),r||(a=Oe(e,"click",n[5],!1,!1,!1),r=!0)},p:function(i,_){_&8&&t!==(t=ge(Gt[i[27]].describe[i[3]](""))+"")&&je(s,t),_&2&&K(e,"active",i[27]===i[1])},d:function(i){i&&F(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:l,id:xn.name,type:"each",source:"(208:3) {#each A_BASES as si_basis}",ctx:n}),l}function Ti(n){const e={c:me,m:me,p:me,d:me};return Q("SvelteRegisterBlock",{block:e,id:Ti.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function ji(n){let e,t,s=ge(St[n[26]].labels[n[3]])+"",o,r,a;const l={c:function(){e=T("button"),t=T("span"),o=ce(s),A(t,"class","s-WG7syJ6nmWd-"),j(t,it,226,7,5875),A(e,"class","diamond-"+n[18].pos+" color-"+n[26]+" s-WG7syJ6nmWd-"),A(e,"data-quality","color:"+n[26]),K(e,"selected",`color:${n[26]}`===n[2]),j(e,it,220,6,5669)},m:function(i,_){G(i,e,_),S(e,t),S(t,o),r||(a=Oe(e,"click",n[6],!1,!1,!1),r=!0)},p:function(i,_){_&8&&s!==(s=ge(St[i[26]].labels[i[3]])+"")&&je(o,s),_&132&&K(e,"selected",`color:${i[26]}`===i[2])},d:function(i){i&&F(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:l,id:ji.name,type:"then",source:'(220:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),l}function qi(n){const e={c:me,m:me,p:me,d:me};return Q("SvelteRegisterBlock",{block:e,id:qi.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Vn(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:qi,then:ji,catch:Ti,value:26};Rs(fn[n[18].key],t);const s={c:function(){e=Bt(),t.block.c()},m:function(r,a){G(r,e,a),t.block.m(r,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(r,a){n=r,Os(t,n,a)},d:function(r){r&&F(e),t.block.d(r),t.token=null,t=null}};return Q("SvelteRegisterBlock",{block:s,id:Vn.name,type:"each",source:"(219:4) {#each a_group as g_loc}",ctx:n}),s}function Zn(n){let e,t,s=n[15];ue(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=Vn(Ai(n,s,a));const r={c:function(){e=T("span");for(let l=0;l<o.length;l+=1)o[l].c();t=B(),A(e,"class","s-WG7syJ6nmWd-"),j(e,it,217,3,5579)},m:function(l,u){G(l,e,u);for(let i=0;i<o.length;i+=1)o[i].m(e,null);S(e,t)},p:function(l,u){if(u&204){s=l[15],ue(s);let i;for(i=0;i<s.length;i+=1){const _=Ai(l,s,i);o[i]?o[i].p(_,u):(o[i]=Vn(_),o[i].c(),o[i].m(e,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d:function(l){l&&F(e),st(o,l)}};return Q("SvelteRegisterBlock",{block:r,id:Zn.name,type:"each",source:"(217:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),r}function Ii(n){const e={c:me,m:me,p:me,d:me};return Q("SvelteRegisterBlock",{block:e,id:Ii.name,type:"catch",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function Ri(n){let e,t,s=Ht[n[21]].symbol+"",o,r,a;const l={c:function(){e=T("button"),t=T("span"),o=ce(s),A(t,"class","s-WG7syJ6nmWd-"),j(t,it,245,7,6440),A(e,"class","diamond-"+n[18].pos+" bg-rad-"+n[18].pos+" s-WG7syJ6nmWd-"),A(e,"data-quality","shape:"+n[21]),K(e,"selected",`shape:${n[21]}`===n[2]),j(e,it,239,6,6232)},m:function(i,_){G(i,e,_),S(e,t),S(t,o),r||(a=Oe(e,"click",n[6],!1,!1,!1),r=!0)},p:function(i,_){_&132&&K(e,"selected",`shape:${i[21]}`===i[2])},d:function(i){i&&F(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:l,id:Ri.name,type:"then",source:'(239:47)        <button        class=\\"diamond-{g_loc.pos}',ctx:n}),l}function Oi(n){const e={c:me,m:me,p:me,d:me};return Q("SvelteRegisterBlock",{block:e,id:Oi.name,type:"pending",source:'(1:0) <script context=\\"module\\" lang=\\"ts\\"><\/script>  <script lang=\\"ts\\">import { getContext, createEventDispatcher, }',ctx:n}),e}function $n(n){let e,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Oi,then:Ri,catch:Ii,value:21};Rs(dn[n[18].key],t);const s={c:function(){e=Bt(),t.block.c()},m:function(r,a){G(r,e,a),t.block.m(r,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e},p:function(r,a){n=r,Os(t,n,a)},d:function(r){r&&F(e),t.block.d(r),t.token=null,t=null}};return Q("SvelteRegisterBlock",{block:s,id:$n.name,type:"each",source:"(238:4) {#each a_group as g_loc}",ctx:n}),s}function es(n){let e,t,s=n[15];ue(s);let o=[];for(let a=0;a<s.length;a+=1)o[a]=$n(Pi(n,s,a));const r={c:function(){e=T("span");for(let l=0;l<o.length;l+=1)o[l].c();t=B(),A(e,"class","s-WG7syJ6nmWd-"),j(e,it,236,3,6142)},m:function(l,u){G(l,e,u);for(let i=0;i<o.length;i+=1)o[i].m(e,null);S(e,t)},p:function(l,u){if(u&196){s=l[15],ue(s);let i;for(i=0;i<s.length;i+=1){const _=Pi(l,s,i);o[i]?o[i].p(_,u):(o[i]=$n(_),o[i].c(),o[i].m(e,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d:function(l){l&&F(e),st(o,l)}};return Q("SvelteRegisterBlock",{block:r,id:es.name,type:"each",source:"(236:2) {#each A_DIAMOND_KEYS as a_group}",ctx:n}),r}function ts(n){let e,t,s=n[0]&&Xn(n);const o={c:function(){s&&s.c(),e=Bt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,l){s&&s.m(a,l),G(a,e,l),t=!0},p:function(a,[l]){a[0]?s?(s.p(a,l),l&1&&N(s,1)):(s=Xn(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(Le(),H(s,1,1,()=>{s=null}),Be())},i:function(a){t||(N(s),t=!0)},o:function(a){H(s),t=!1},d:function(a){s&&s.d(a),a&&F(e)}};return Q("SvelteRegisterBlock",{block:o,id:ts.name,type:"component",source:"",ctx:n}),o}function Io(n,e,t){let s,{$$slots:o={},$$scope:r}=e;mt("Assertion",o,[]);const a={show:w,hide:y},l=at(),u=Yt("game");let i=u.language;uo(i,"yw_lang"),_o(n,i,f=>t(3,s=f));let _=!1,d="";async function w(f){d=f||"",f&&(t(1,p=f),l("basis",p)),t(0,_=!0)}function y(){t(0,_=!1)}let p=Ft[0],h=null;const b=(f,v)=>f.closest(`[data-${v}]`).getAttribute(`data-${v}`);function E(f){const v=b(f.target,"basis");d&&v!==d||(t(1,p=v),l("basis",p))}function m(f){t(2,h=b(f.target,"quality")),l("quality",h)}const P=[[{key:0,pos:"top"},{key:2,pos:"rgt"}],[{key:1,pos:"lft"},{key:3,pos:"btm"}]],k=[];return Object.keys(e).forEach(f=>{!~k.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Assertion> was created with unknown prop '${f}'`)}),n.$capture_state=()=>({getContext:Yt,createEventDispatcher:at,fade:fe,expoOut:xt,quadInOut:Ze,proper:ge,A_BASES:Ft,A_COLORS:fn,A_SHAPES:dn,H_BASES:Gt,H_COLORS:St,H_SHAPES:Ht,k_tx:a,dispatch:l,g_game:u,yw_lang:i,b_visible:_,si_basis_force:d,show:w,hide:y,si_basis_active:p,si_quality:h,data:b,select_basis:E,select_quality:m,A_DIAMOND_KEYS:P,$yw_lang:s}),n.$inject_state=f=>{"yw_lang"in f&&t(4,i=f.yw_lang),"b_visible"in f&&t(0,_=f.b_visible),"si_basis_force"in f&&(d=f.si_basis_force),"si_basis_active"in f&&t(1,p=f.si_basis_active),"si_quality"in f&&t(2,h=f.si_quality)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[_,p,h,s,i,E,m,P,a]}class Mi extends ft{constructor(e){super(e);dt(this,e,Io,ts,ht,{k_tx:8}),Q("SvelteRegisterComponent",{component:this,tagName:"Assertion",options:e,id:ts.name})}get k_tx(){return this.$$.ctx[8]}set k_tx(e){throw new Error("<Assertion>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Ni(n,e){const t=new fo(39,39,3.3,128,1),s=[new Ms({color:"red"}),new ho({map:n,bumpMap:e,bumpScale:Math.random()*.2+.2}),new Ms({map:n})];{const i=new mo;for(var o=0;o<16;o++){var r=(o+1)/16,a=r*Math.PI*2,l=10*Math.cos(a),u=10*Math.sin(a);o==0?i.moveTo(l,u):i.lineTo(l,u)}return new po(t,s)}}const ns=Math.PI,Ro=ns*2,ss=Math.sqrt(3);function yn(n,e,t,s,o){const r=new Path2D;switch(o){case"triangle":{const a=Math.sqrt(t*ss),l=ss*.5*a,u=a*ss/6,i=u/3;r.moveTo(e,e-(l-u)+i),r.lineTo(e+a/2,e+u+i),r.lineTo(e-a/2,e+u+i);break}case"square":{const a=Math.sqrt(t),l=e-a*.5;r.moveTo(l,l),r.lineTo(l+a,l),r.lineTo(l+a,l+a),r.lineTo(l,l+a);break}case"circle":{const a=Math.sqrt(t/ns);r.ellipse(e,e,a,a,0,0,Ro);break}case"star":{const a=ns/5,l=Math.sqrt(2*t/(5*Math.sin(a)));let u=-1.5*a;r.moveTo(e,e-l);for(let i=0;i<9;i++){const _=l*((i%2+1)/2);r.lineTo(e+_*Math.cos(u),e+_*Math.sin(u)),u+=a}break}}r.closePath(),n.fillStyle=St[s].color,n.fill(r),n.globalAlpha=1,n.strokeStyle="black",n.lineWidth=Math.round(Math.sqrt(t)/50),n.stroke(r)}const Oo="src/component/Scene.svelte";function is(n){let e;const t={c:function(){e=T("div"),A(e,"class","s-O3-AoQkAZcdH"),j(e,Oo,246,0,8015)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,r){G(o,e,r),n[2](e)},p:me,i:me,o:me,d:function(o){o&&F(e),n[2](null)}};return Q("SvelteRegisterBlock",{block:t,id:is.name,type:"component",source:"",ctx:n}),t}function Mo(n,e,t){let{$$slots:s={},$$scope:o}=e;mt("Scene",s,[]);const r=Math.PI,a=r*2,l=Math.sqrt(3),u={animate_chip_entry:m,animate_chip_exit:P};let i;async function _(v){const q={},M=new Ls;for(const U in v){const I=v[U];q[U]=await new Promise(D=>{M.load(I,z=>{D(z)})})}return q}function d(v){const q=v.image,M=ke("canvas",{width:q.width,height:q.height}),U=M.getContext("2d");return[M,U,q]}let w,y,p,h,b;function E(v,q){const[M,U,I]=d(w.chip),D=I.width;I.height,U.drawImage(I,0,0);const z=D/2,O=Math.pow(z*(2/9),2)*r;yn(U,z,O,v,q),p=new Tn(M),y=Ni(p,h),b.add(y)}async function m(v,q){E(v,q),y.position.y=8e5,y.visible=!0,new Rt(new Vt(-780,-2450,-3e3)).to(new Vt(0,0,0),4e3).easing(Ot.Cubic.Out).onUpdate(D=>{y.position.setX(D.x),y.position.setZ(D.z)}).start(),new Rt({y:750}).to({y:0},4e3).easing(Ot.Back.Out).onUpdate(({y:D})=>{y.position.setY(D)}).start(),new Rt(new Zt(0,0,0)).to(new Zt(0,r/2,r/2-r/6),4e3).easing(Ot.Cubic.Out).onUpdate(D=>{y.rotation.set(D.x,D.y,D.z)}).start()}async function P(){new Rt(new Vt(0,0,0)).to(new Vt(-780,-2450,-3e3),4e3).easing(Ot.Cubic.Out).onUpdate(U=>{y.position.setX(U.x),y.position.setZ(U.z)}).start(),new Rt({y:0}).to({y:750},4e3).easing(Ot.Back.Out).onUpdate(({y:U})=>{y.position.setY(U)}).start(),new Rt(new Zt(0,r/2,r/2-r/6)).to(new Zt(0,0,0),4e3).easing(Ot.Cubic.Out).onUpdate(U=>{y.rotation.set(U.x,U.y,U.z)}).start(),await W(4e3),y.visible=!0}Lt(async()=>{w=await _({chip:"/asset/chip.png",chip_displace:"/asset/chip-displacement.png",scuffs:"/asset/scuffs.png"}),p=w.chip,h=w.scuffs;{const[O,L,et]=d(w.scuffs),ze=O.width,V=O.height,Je=Math.random()*a;L.save();const Qe=ze/2,ve=V/2;L.translate(Qe,ve),L.rotate(Je),L.scale(Math.SQRT2,Math.SQRT2),L.drawImage(et,-Qe,-ve),L.restore(),h=new Tn(O)}const v=new Ns({antialias:!0}),q=gn(document.body,".msg-panel").getBoundingClientRect(),M=window.innerWidth,U=Math.max(400,Math.min(800,window.innerHeight-q.bottom));if(v.setSize(M,U),!i)return;i.appendChild(v.domElement);const I=M/U;b=new Ds;const D=new Ys(45,I,1,5e3);D.position.set(0,0,140),D.lookAt(0,0,0);{const O=new Us(3158064);b.add(O)}{const O=new Bs;O.position.set(0,100,50),O.decay=2.5,O.angle=Math.PI/9,O.penumbra=.9,b.add(O)}function z(){v.render(b,D)}v.setAnimationLoop(()=>{z(),Qs()})});const k=[];Object.keys(e).forEach(v=>{!~k.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&console.warn(`<Scene> was created with unknown prop '${v}'`)});function f(v){Ee[v?"unshift":"push"](()=>{i=v,t(0,i)})}return n.$capture_state=()=>({onMount:Lt,chip:Ni,AmbientLight:Us,Scene:Ds,PerspectiveCamera:Ys,WebGLRenderer:Ns,Vector3:Vt,TextureLoader:Ls,SpotLight:Bs,Euler:Zt,CanvasTexture:Tn,Tween:Rt,Easing:Ot,updateTween:Qs,timeout:W,dd:ke,qs:gn,draw_shape:yn,X_PI:r,X_2PI:a,X_SQRT_3:l,k_scene:u,dm_container:i,load_textures:_,canvas_from_tex:d,h_textures:w,ym_chip:y,yt_chip:p,yt_bump:h,y_scene:b,create_chip:E,animate_chip_entry:m,animate_chip_exit:P}),n.$inject_state=v=>{"dm_container"in v&&t(0,i=v.dm_container),"h_textures"in v&&(w=v.h_textures),"ym_chip"in v&&(y=v.ym_chip),"yt_chip"in v&&(p=v.yt_chip),"yt_bump"in v&&(h=v.yt_bump),"y_scene"in v&&(b=v.y_scene)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[i,u,f]}class Ui extends ft{constructor(e){super(e);dt(this,e,Mo,is,ht,{k_scene:1}),Q("SvelteRegisterComponent",{component:this,tagName:"Scene_1",options:e,id:is.name})}get k_scene(){return this.$$.ctx[1]}set k_scene(e){throw new Error("<Scene>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const kn="src/component/PremiseWidget.svelte";function Di(n,e,t){const s=n.slice();return s[14]=e[t][0],s[15]=e[t][1],s[17]=t,s}function os(n){let e,t,s,o,r,a=n[15].label+"",l,u,i,_,d,w,y;s=new Te({props:{icon:n[15].icon},$$inline:!0});function p(){return n[9](n[14])}const h={c:function(){e=T("span"),t=T("span"),qe(s.$$.fragment),o=B(),r=T("span"),l=ce(a),u=B(),A(t,"class","truth-opt-icon s-6n-w-T5otbqJ"),j(t,kn,158,3,4045),A(r,"class","truth-opt-text s-6n-w-T5otbqJ"),j(r,kn,161,3,4117),A(e,"class",i="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"),A(e,"data-opt",_=n[14]),K(e,"selected",n[14]===n[2]),K(e,"undeniable",n[0]==="undeniable"),K(e,"true",n[0]==="true"),K(e,"verified",n[0]==="verified"),j(e,kn,149,2,3714)},m:function(E,m){G(E,e,m),S(e,t),Ie(s,t,null),S(e,o),S(e,r),S(r,l),S(e,u),d=!0,w||(y=Oe(e,"click",p,!1,!1,!1),w=!0)},p:function(E,m){n=E;const P={};m&2&&(P.icon=n[15].icon),s.$set(P),(!d||m&2)&&a!==(a=n[15].label+"")&&je(l,a),(!d||m&16&&i!==(i="truth-opt "+(n[17]===0?"opt-lft":"")+" "+(n[4]-1===n[17]?"opt-rgt":"")+" s-6n-w-T5otbqJ"))&&A(e,"class",i),(!d||m&2&&_!==(_=n[14]))&&A(e,"data-opt",_),m&22&&K(e,"selected",n[14]===n[2]),m&17&&K(e,"undeniable",n[0]==="undeniable"),m&17&&K(e,"true",n[0]==="true"),m&17&&K(e,"verified",n[0]==="verified")},i:function(E){d||(N(s.$$.fragment,E),d=!0)},o:function(E){H(s.$$.fragment,E),d=!1},d:function(E){E&&F(e),Re(s),w=!1,y()}};return Q("SvelteRegisterBlock",{block:h,id:os.name,type:"each",source:"(149:1) {#each a_opts as [si_opt, g_opt], i_opt}",ctx:n}),h}function as(n){let e,t,s=n[1];ue(s);let o=[];for(let l=0;l<s.length;l+=1)o[l]=os(Di(n,s,l));const r=l=>H(o[l],1,1,()=>{o[l]=null}),a={c:function(){e=T("span");for(let u=0;u<o.length;u+=1)o[u].c();A(e,"class","truth s-6n-w-T5otbqJ"),K(e,"known",!!n[0]),j(e,kn,147,0,3603)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,i){G(u,e,i);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[10](e),t=!0},p:function(u,[i]){if(i&55){s=u[1],ue(s);let _;for(_=0;_<s.length;_+=1){const d=Di(u,s,_);o[_]?(o[_].p(d,i),N(o[_],1)):(o[_]=os(d),o[_].c(),N(o[_],1),o[_].m(e,null))}for(Le(),_=s.length;_<o.length;_+=1)r(_);Be()}i&1&&K(e,"known",!!u[0])},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)N(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)H(o[i]);t=!1},d:function(u){u&&F(e),st(o,u),n[10](null)}};return Q("SvelteRegisterBlock",{block:a,id:as.name,type:"component",source:"",ctx:n}),a}function No(n,e,t){let s,{$$slots:o={},$$scope:r}=e;mt("PremiseWidget",o,[]);const a={ignore:{label:"Ignore",icon:Hs},trust:{label:"Trust",icon:_n},distrust:{label:"Distrust",icon:Ws}};let l=Me(a),{b_mode_nobody:u}=e,{si_assertion:i}=e,{si_known:_}=e;const d={apply(k){return w(k)}};let w=k=>k,y="ignore",p;const h=at();function b(k){y!==k&&(t(2,y=k),u?w=f=>y==="trust"?f.nobody(i):y==="distrust"?f.opponent(i,!0):f:w=f=>y==="trust"?f.opponent(i,!0):y==="distrust"?f.opponent(i,!1):f,h("change",k))}const E=["b_mode_nobody","si_assertion","si_known"];Object.keys(e).forEach(k=>{!~E.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&console.warn(`<PremiseWidget> was created with unknown prop '${k}'`)});const m=k=>b(k);function P(k){Ee[k?"unshift":"push"](()=>{p=k,t(3,p)})}return n.$$set=k=>{"b_mode_nobody"in k&&t(6,u=k.b_mode_nobody),"si_assertion"in k&&t(7,i=k.si_assertion),"si_known"in k&&t(0,_=k.si_known)},n.$capture_state=()=>({createEventDispatcher:at,Fa:Te,faCheckCircle:_n,faTimesCircle:Ws,faDotCircle:Hs,faEgg:Gs,faCheck:jn,ode:Me,proper:ge,H_OPTS:a,a_opts:l,b_mode_nobody:u,si_assertion:i,si_known:_,k_premise:d,f_apply:w,si_belief:y,dm_truth:p,dispatch:h,select_opt:b,nl_opts:s}),n.$inject_state=k=>{"a_opts"in k&&t(1,l=k.a_opts),"b_mode_nobody"in k&&t(6,u=k.b_mode_nobody),"si_assertion"in k&&t(7,i=k.si_assertion),"si_known"in k&&t(0,_=k.si_known),"f_apply"in k&&(w=k.f_apply),"si_belief"in k&&t(2,y=k.si_belief),"dm_truth"in k&&t(3,p=k.dm_truth),"nl_opts"in k&&t(4,s=k.nl_opts)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&1&&_&&t(1,l=Me({ignore:{label:ge(_),icon:{undeniable:Gs,true:jn,verified:jn}[_]}})),n.$$.dirty&2&&t(4,s=l.length)},[_,l,y,p,s,b,u,i,d,m,P]}class on extends ft{constructor(e){super(e);dt(this,e,No,as,ht,{b_mode_nobody:6,si_assertion:7,si_known:0,k_premise:8}),Q("SvelteRegisterComponent",{component:this,tagName:"PremiseWidget",options:e,id:as.name});const{ctx:t}=this.$$,s=e.props||{};t[6]===void 0&&!("b_mode_nobody"in s)&&console.warn("<PremiseWidget> was created without expected prop 'b_mode_nobody'"),t[7]===void 0&&!("si_assertion"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_assertion'"),t[0]===void 0&&!("si_known"in s)&&console.warn("<PremiseWidget> was created without expected prop 'si_known'")}get b_mode_nobody(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set b_mode_nobody(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_assertion(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_assertion(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get si_known(){throw new Error("<PremiseWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_known(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_premise(){return this.$$.ctx[8]}set k_premise(e){throw new Error("<PremiseWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ne="src/component/Decision.svelte";function Yi(n,e,t){const s=n.slice();return s[20]=e[t],s}function Li(n,e,t){const s=n.slice();return s[20]=e[t],s}function rs(n){let e,t,s,o,r,a,l,u,i,_,d,w,y,p,h,b,E,m,P,k,f=n[3];ue(f);let v=[];for(let I=0;I<f.length;I+=1)v[I]=ls(Li(n,f,I));let q=n[2];ue(q);let M=[];for(let I=0;I<q.length;I+=1)M[I]=cs(Yi(n,q,I));const U={c:function(){e=T("div"),t=T("div"),s=T("div"),o=T("button"),o.textContent="Abstain",r=B(),a=T("div"),l=T("span"),l.textContent="Arbiter's bag:",u=B(),i=T("span"),_=T("span");for(let D=0;D<v.length;D+=1)v[D].c();d=B(),w=T("div"),y=T("span"),y.textContent="Opponent's chip:",p=B(),h=T("span"),b=T("span");for(let D=0;D<M.length;D+=1)M[D].c();A(o,"class","s-UQAPz40uou8M"),j(o,Ne,220,4,7343),A(s,"class","decision-abstain s-UQAPz40uou8M"),K(s,"selected",n[4]===n[1]),j(s,Ne,219,3,7258),A(l,"class","decision-opts-row-title s-UQAPz40uou8M"),j(l,Ne,225,4,7479),A(_,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(_,Ne,229,5,7597),A(i,"class","decision-opts-row-view s-UQAPz40uou8M"),j(i,Ne,228,4,7554),A(a,"class","decision-opts-row s-UQAPz40uou8M"),A(a,"data-target","bag"),j(a,Ne,224,3,7425),A(y,"class","decision-opts-row-title s-UQAPz40uou8M"),j(y,Ne,243,4,7990),A(b,"class","decision-opts-row-view-data s-UQAPz40uou8M"),j(b,Ne,247,5,8110),A(h,"class","decision-opts-row-view s-UQAPz40uou8M"),j(h,Ne,246,4,8067),A(w,"class","decision-opts-row s-UQAPz40uou8M"),A(w,"data-target","opponent"),j(w,Ne,242,3,7931),A(t,"class","decision-opts s-UQAPz40uou8M"),j(t,Ne,218,2,7227),A(e,"class","decision s-UQAPz40uou8M"),K(e,"staged",!!n[1]),j(e,Ne,214,1,7028)},m:function(D,z){G(D,e,z),S(e,t),S(t,s),S(s,o),S(t,r),S(t,a),S(a,l),S(a,u),S(a,i),S(i,_);for(let O=0;O<v.length;O+=1)v[O].m(_,null);S(t,d),S(t,w),S(w,y),S(w,p),S(w,h),S(h,b);for(let O=0;O<M.length;O+=1)M[O].m(b,null);m=!0,P||(k=Oe(o,"click",n[10],!1,!1,!1),P=!0)},p:function(D,z){if(n=D,z&18&&K(s,"selected",n[4]===n[1]),z&170){f=n[3],ue(f);let O;for(O=0;O<f.length;O+=1){const L=Li(n,f,O);v[O]?v[O].p(L,z):(v[O]=ls(L),v[O].c(),v[O].m(_,null))}for(;O<v.length;O+=1)v[O].d(1);v.length=f.length}if(z&166){q=n[2],ue(q);let O;for(O=0;O<q.length;O+=1){const L=Yi(n,q,O);M[O]?M[O].p(L,z):(M[O]=cs(L),M[O].c(),M[O].m(b,null))}for(;O<M.length;O+=1)M[O].d(1);M.length=q.length}z&2&&K(e,"staged",!!n[1])},i:function(D){m||(Ve(()=>{E||(E=he(e,fe,{duration:3600,easing:Ze},!0)),E.run(1)}),m=!0)},o:function(D){E||(E=he(e,fe,{duration:3600,easing:Ze},!1)),E.run(0),m=!1},d:function(D){D&&F(e),st(v,D),st(M,D),D&&E&&E.end(),P=!1,k()}};return Q("SvelteRegisterBlock",{block:U,id:rs.name,type:"if",source:"(214:0) {#if b_visible}",ctx:n}),U}function ls(n){let e,t,s=n[7](n[20])+"",o,r,a;function l(){return n[11](n[20])}const u={c:function(){e=T("span"),t=new zs,o=B(),t.a=o,A(e,"class","decision-opt s-UQAPz40uou8M"),K(e,"selected",n[20]===n[1]),j(e,Ne,231,7,7681)},m:function(_,d){G(_,e,d),t.m(s,e),S(e,o),r||(a=Oe(e,"click",l,!1,!1,!1),r=!0)},p:function(_,d){n=_,d&8&&s!==(s=n[7](n[20])+"")&&t.p(s),d&10&&K(e,"selected",n[20]===n[1])},d:function(_){_&&F(e),r=!1,a()}};return Q("SvelteRegisterBlock",{block:u,id:ls.name,type:"each",source:"(231:6) {#each a_opts_arb as k_opt}",ctx:n}),u}function cs(n){let e,t,s=n[7](n[20])+"",o,r,a,l,u;function i(){return n[12](n[20])}const _={c:function(){e=T("span"),t=new zs,o=B(),r=T("img"),a=B(),t.a=o,Fs(r,"display","none"),A(r,"alt","hidden"),A(r,"class","s-UQAPz40uou8M"),j(r,Ne,255,8,8390),A(e,"class","decision-opt s-UQAPz40uou8M"),K(e,"selected",n[20]===n[1]),j(e,Ne,249,7,8194)},m:function(w,y){G(w,e,y),t.m(s,e),S(e,o),S(e,r),S(e,a),l||(u=Oe(e,"click",i,!1,!1,!1),l=!0)},p:function(w,y){n=w,y&4&&s!==(s=n[7](n[20])+"")&&t.p(s),y&6&&K(e,"selected",n[20]===n[1])},d:function(w){w&&F(e),l=!1,u()}};return Q("SvelteRegisterBlock",{block:_,id:cs.name,type:"each",source:"(249:6) {#each a_opts_opp as k_opt}",ctx:n}),_}function us(n){let e,t,s=n[0]&&rs(n);const o={c:function(){s&&s.c(),e=Bt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,l){s&&s.m(a,l),G(a,e,l),t=!0},p:function(a,[l]){a[0]?s?(s.p(a,l),l&1&&N(s,1)):(s=rs(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(Le(),H(s,1,1,()=>{s=null}),Be())},i:function(a){t||(N(s),t=!0)},o:function(a){H(s),t=!1},d:function(a){s&&s.d(a),a&&F(e)}};return Q("SvelteRegisterBlock",{block:o,id:us.name,type:"component",source:"",ctx:n}),o}class Uo{constructor(e,t){this._si_color=e,this._si_shape=t}get color(){return this._si_color}get shape(){return this._si_shape}}function Do(n,e,t){let s,o,{$$slots:r={},$$scope:a}=e;mt("Decision",r,[]);const l={show:y,hide:p};let{k_deduced:u}=e;const i=at(),_=Yt("game");let d=_.language,w=!1;async function y(){t(0,w=!0)}function p(){t(0,w=!1)}const h={target:"abstain",color:null,shape:null};let b=null;function E(I,D){b!==D&&(t(1,b=D),i("change",D))}function m(){t(1,b=h),i("abstain")}const P=ke("canvas",{width:100,height:100}),k=P.getContext("2d");function f(I){k.clearRect(0,0,100,100),k.stroke(),k.globalAlpha=.8,yn(k,50,Math.pow(35,2),I.color,I.shape);const D=P.toDataURL();return ke("span",{},[ke("span",{class:"decision-opt-label"},[`${ge(I.color)} ${ge(I.shape)}`]),ke("img",{src:D})]).innerHTML}const v=["k_deduced"];Object.keys(e).forEach(I=>{!~v.indexOf(I)&&I.slice(0,2)!=="$$"&&I!=="slot"&&console.warn(`<Decision> was created with unknown prop '${I}'`)});const q=()=>m(),M=I=>E("bag",I),U=I=>E("opponent",I);return n.$$set=I=>{"k_deduced"in I&&t(9,u=I.k_deduced)},n.$capture_state=()=>({Opt:Uo,getContext:Yt,createEventDispatcher:at,fade:fe,quadInOut:Ze,proper:ge,dd:ke,draw_shape:yn,k_decision:l,k_deduced:u,dispatch:i,g_game:_,yw_lang:d,b_visible:w,show:y,hide:p,g_opt_abstain:h,g_opt_selected:b,stage_decision:E,stage_abstain:m,dm_canvas:P,d_ctx:k,render_icon:f,a_opts_opp:o,a_opts_arb:s}),n.$inject_state=I=>{"k_deduced"in I&&t(9,u=I.k_deduced),"yw_lang"in I&&(d=I.yw_lang),"b_visible"in I&&t(0,w=I.b_visible),"g_opt_selected"in I&&t(1,b=I.g_opt_selected),"a_opts_opp"in I&&t(2,o=I.a_opts_opp),"a_opts_arb"in I&&t(3,s=I.a_opts_arb)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty&512&&t(3,s=u.enumerate("bag")),n.$$.dirty&512&&t(2,o=u.enumerate("opponent")),n.$$.dirty&512&&t(1,b=null)},[w,b,o,s,h,E,m,f,l,u,q,M,U]}class Bi extends ft{constructor(e){super(e);dt(this,e,Do,us,ht,{k_decision:8,k_deduced:9}),Q("SvelteRegisterComponent",{component:this,tagName:"Decision",options:e,id:us.name});const{ctx:t}=this.$$,s=e.props||{};t[9]===void 0&&!("k_deduced"in s)&&console.warn("<Decision> was created without expected prop 'k_deduced'")}get k_decision(){return this.$$.ctx[8]}set k_decision(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get k_deduced(){throw new Error("<Decision>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set k_deduced(e){throw new Error("<Decision>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const vn="src/component/ActionWidget.svelte";function Qi(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s[12]=t,s}function _s(n){let e,t,s,o,r,a=n[10].label+"",l,u,i,_,d;s=new Te({props:{icon:n[10].icon},$$inline:!0});function w(){return n[5](n[9])}const y={c:function(){e=T("span"),t=T("span"),qe(s.$$.fragment),o=B(),r=T("span"),l=ce(a),u=B(),A(t,"class","action-opt-icon s-8eNH5FVaHsSg"),j(t,vn,87,3,2291),A(r,"class","action-opt-text s-8eNH5FVaHsSg"),j(r,vn,90,3,2364),A(e,"class","action-opt "+(n[12]===0?"opt-lft":"")+" "+(n[3]-1===n[12]?"opt-rgt":"opt-mid")+" s-8eNH5FVaHsSg"),A(e,"data-opt",n[9]),K(e,"selected",n[9]===n[0]),j(e,vn,86,2,2093)},m:function(h,b){G(h,e,b),S(e,t),Ie(s,t,null),S(e,o),S(e,r),S(r,l),S(e,u),i=!0,_||(d=Oe(e,"click",w,!1,!1,!1),_=!0)},p:function(h,b){n=h,b&5&&K(e,"selected",n[9]===n[0])},i:function(h){i||(N(s.$$.fragment,h),i=!0)},o:function(h){H(s.$$.fragment,h),i=!1},d:function(h){h&&F(e),Re(s),_=!1,d()}};return Q("SvelteRegisterBlock",{block:y,id:_s.name,type:"each",source:"(86:1) {#each ode(H_OPTS) as [si_opt, g_opt], i_opt}",ctx:n}),y}function fs(n){let e,t,s=Me(n[2]);ue(s);let o=[];for(let l=0;l<s.length;l+=1)o[l]=_s(Qi(n,s,l));const r=l=>H(o[l],1,1,()=>{o[l]=null}),a={c:function(){e=T("span");for(let u=0;u<o.length;u+=1)o[u].c();A(e,"class","action s-8eNH5FVaHsSg"),Fs(e,"width",100*n[3]+"px"),j(e,vn,84,0,1967)},l:function(u){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(u,i){G(u,e,i);for(let _=0;_<o.length;_+=1)o[_].m(e,null);n[6](e),t=!0},p:function(u,[i]){if(i&29){s=Me(u[2]),ue(s);let _;for(_=0;_<s.length;_+=1){const d=Qi(u,s,_);o[_]?(o[_].p(d,i),N(o[_],1)):(o[_]=_s(d),o[_].c(),N(o[_],1),o[_].m(e,null))}for(Le(),_=s.length;_<o.length;_+=1)r(_);Be()}},i:function(u){if(!t){for(let i=0;i<s.length;i+=1)N(o[i]);t=!0}},o:function(u){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)H(o[i]);t=!1},d:function(u){u&&F(e),st(o,u),n[6](null)}};return Q("SvelteRegisterBlock",{block:a,id:fs.name,type:"component",source:"",ctx:n}),a}function Yo(n,e,t){let{$$slots:s={},$$scope:o}=e;mt("ActionWidget",s,[]);const r={yes:{label:"Yes",icon:_n}},a=Me(r).length;let l=h=>h,{si_selected:u="none"}=e,i;const _=at();function d(h){u!==h&&(t(0,u=h),_("change",h))}const w=["si_selected"];Object.keys(e).forEach(h=>{!~w.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<ActionWidget> was created with unknown prop '${h}'`)});const y=h=>d(h);function p(h){Ee[h?"unshift":"push"](()=>{i=h,t(1,i)})}return n.$$set=h=>{"si_selected"in h&&t(0,u=h.si_selected)},n.$capture_state=()=>({createEventDispatcher:at,Fa:Te,faCheckCircle:_n,ode:Me,H_OPTS:r,NL_OPTS:a,f_apply:l,si_selected:u,dm_action:i,dispatch:_,select_opt:d}),n.$inject_state=h=>{"f_apply"in h&&(l=h.f_apply),"si_selected"in h&&t(0,u=h.si_selected),"dm_action"in h&&t(1,i=h.dm_action)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[u,i,r,a,d,y,p]}class Wi extends ft{constructor(e){super(e);dt(this,e,Yo,fs,ht,{si_selected:0}),Q("SvelteRegisterComponent",{component:this,tagName:"ActionWidget",options:e,id:fs.name})}get si_selected(){throw new Error("<ActionWidget>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set si_selected(e){throw new Error("<ActionWidget>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const an="src/component/Pick.svelte";function Hi(n,e,t){const s=n.slice();return s[9]=e[t][0],s[10]=e[t][1],s}function ds(n){let e,t,s,o=Me(n[2]);ue(o);let r=[];for(let u=0;u<o.length;u+=1)r[u]=hs(Hi(n,o,u));const a=u=>H(r[u],1,1,()=>{r[u]=null}),l={c:function(){e=T("div");for(let i=0;i<r.length;i+=1)r[i].c();A(e,"class","pick s-AUZQ0ENzDxvQ"),K(e,"picked",!!n[1]),j(e,an,77,1,1812)},m:function(i,_){G(i,e,_);for(let d=0;d<r.length;d+=1)r[d].m(e,null);s=!0},p:function(i,_){if(_&14){o=Me(i[2]),ue(o);let d;for(d=0;d<o.length;d+=1){const w=Hi(i,o,d);r[d]?(r[d].p(w,_),N(r[d],1)):(r[d]=hs(w),r[d].c(),N(r[d],1),r[d].m(e,null))}for(Le(),d=o.length;d<r.length;d+=1)a(d);Be()}_&2&&K(e,"picked",!!i[1])},i:function(i){if(!s){for(let _=0;_<o.length;_+=1)N(r[_]);Ve(()=>{t||(t=he(e,pt,{duration:2500},!0)),t.run(1)}),s=!0}},o:function(i){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)H(r[_]);t||(t=he(e,pt,{duration:2500},!1)),t.run(0),s=!1},d:function(i){i&&F(e),st(r,i),i&&t&&t.end()}};return Q("SvelteRegisterBlock",{block:l,id:ds.name,type:"if",source:"(77:0) {#if b_visible}",ctx:n}),l}function hs(n){let e,t,s=n[10].label+"",o,r,a,l,u,i,_=n[10].description+"",d,w,y,p,h;l=new Te({props:{icon:n[10].icon},$$inline:!0});function b(){return n[5](n[9])}const E={c:function(){e=T("span"),t=T("div"),o=ce(s),r=B(),a=T("div"),qe(l.$$.fragment),u=B(),i=T("div"),d=ce(_),w=B(),A(t,"class","pick-label s-AUZQ0ENzDxvQ"),j(t,an,80,4,2071),A(a,"class","pick-icon s-AUZQ0ENzDxvQ"),j(a,an,83,4,2131),A(i,"class","pick-description s-AUZQ0ENzDxvQ"),j(i,an,86,4,2201),A(e,"class","pick-opt s-AUZQ0ENzDxvQ"),A(e,"data-pick",n[9]),K(e,"selected",n[1]===n[9]),j(e,an,79,3,1946)},m:function(P,k){G(P,e,k),S(e,t),S(t,o),S(e,r),S(e,a),Ie(l,a,null),S(e,u),S(e,i),S(i,d),S(e,w),y=!0,p||(h=Oe(e,"click",b,!1,!1,!1),p=!0)},p:function(P,k){n=P,k&6&&K(e,"selected",n[1]===n[9])},i:function(P){y||(N(l.$$.fragment,P),y=!0)},o:function(P){H(l.$$.fragment,P),y=!1},d:function(P){P&&F(e),Re(l),p=!1,h()}};return Q("SvelteRegisterBlock",{block:E,id:hs.name,type:"each",source:"(79:2) {#each ode(H_PICKS) as [si_pick, g_pick]}",ctx:n}),E}function ms(n){let e,t,s=n[0]&&ds(n);const o={c:function(){s&&s.c(),e=Bt()},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,l){s&&s.m(a,l),G(a,e,l),t=!0},p:function(a,[l]){a[0]?s?(s.p(a,l),l&1&&N(s,1)):(s=ds(a),s.c(),N(s,1),s.m(e.parentNode,e)):s&&(Le(),H(s,1,1,()=>{s=null}),Be())},i:function(a){t||(N(s),t=!0)},o:function(a){H(s),t=!1},d:function(a){s&&s.d(a),a&&F(e)}};return Q("SvelteRegisterBlock",{block:o,id:ms.name,type:"component",source:"",ctx:n}),o}function Lo(n,e,t){let{$$slots:s={},$$scope:o}=e;mt("Pick",s,[]);const r={jackpot:{icon:Js,label:"Jackpot",description:"A pile of SCRT accrued from lost wagers. The exact amount you will receive is a secret."},nft:{icon:Ks,label:"Power-up NFT",description:"A unique NFT that gives the owner some special power when used during gameplay. The type of power-up you will receive is a secret."}};let a=!1,l=null;const u={show:i,hide:_};function i(){t(0,a=!0)}function _(){t(0,a=!1)}const d=at();function w(h){t(1,l=h),d("pick",l)}const y=[];Object.keys(e).forEach(h=>{!~y.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Pick> was created with unknown prop '${h}'`)});const p=h=>w(h);return n.$capture_state=()=>({createEventDispatcher:at,blur:pt,Fa:Te,faCoins:Js,faTrophy:Ks,ode:Me,H_PICKS:r,b_visible:a,si_pick_selected:l,k_pick:u,show:i,hide:_,dispatch:d,pick:w}),n.$inject_state=h=>{"b_visible"in h&&t(0,a=h.b_visible),"si_pick_selected"in h&&t(1,l=h.si_pick_selected)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[a,l,r,w,u,p]}class Gi extends ft{constructor(e){super(e);dt(this,e,Lo,ms,ht,{k_pick:4}),Q("SvelteRegisterComponent",{component:this,tagName:"Pick",options:e,id:ms.name})}get k_pick(){return this.$$.ctx[4]}set k_pick(e){throw new Error("<Pick>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class ps{#e;static includes(e){for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);if(s&&e.test(s))return!0}return!1}constructor(e,t,s){const o=window.btoa(JSON.stringify(s||{}));this._si_namespace=`${e}.${o}`,this.#e=t}set(e,t){let s;try{s=JSON.stringify(t)}catch{throw new Error("Unable to stringify value")}let o;try{o=qn.exports.AES.encrypt(s,this.#e).toString()}catch{throw new Error("Unable to encrypt message")}return localStorage.setItem(`${this._si_namespace}.${e}`,o)}get(e){const t=localStorage.getItem(`${this._si_namespace}.${e}`);if(t===null)return t;let s;try{s=qn.exports.AES.decrypt(t,this.#e).toString(qn.exports.enc.Utf8)}catch{throw new Error("Failed to decrypt value using provided secret")}let o;try{o=JSON.parse(s)}catch{throw new Error("Failed to parse decrypted text")}return o}clear(){const e=`${this._si_namespace}.`;for(let t=localStorage.length;t>=0;t--){const s=localStorage.key(t);(s==null?void 0:s.startsWith(e))&&localStorage.removeItem(s)}}remove(e){return localStorage.removeItem(`${this._si_namespace}.${e}`)}}const{Error:Bo,Object:Qo,console:Wo}=Es,ot="src/component/App.svelte";function gs(n){let e,t,s,o,r,a;t=new Te({props:{icon:Vs},$$inline:!0});const l={c:function(){e=T("span"),qe(t.$$.fragment),A(e,"class","system-controls-burn s-SHyHC7YcIsCQ"),A(e,"alt","destroy cookies and cache"),j(e,ot,1836,2,63141)},m:function(i,_){G(i,e,_),Ie(t,e,null),o=!0,r||(a=Oe(e,"click",n[24],!1,!1,!1),r=!0)},p:me,i:function(i){o||(N(t.$$.fragment,i),Ve(()=>{s||(s=he(e,fe,{duration:1e3},!0)),s.run(1)}),o=!0)},o:function(i){H(t.$$.fragment,i),s||(s=he(e,fe,{duration:1e3},!1)),s.run(0),o=!1},d:function(i){i&&F(e),Re(t),i&&s&&s.end(),r=!1,a()}};return Q("SvelteRegisterBlock",{block:l,id:gs.name,type:"if",source:"(1836:1) {#if (h_cookie && Object.keys(h_cookie).length) || localStorage.length}",ctx:n}),l}function ws(n){let e,t,s,o=ge(n[8])+"",r,a,l=ge(n[9])+"",u,i,_,d,w,y,p=ge(Dt(`nobody_has|${n[10]}`))+"",h,b,E,m;const P={c:function(){e=T("div"),t=T("div"),s=ce("The "),r=ce(o),a=B(),u=ce(l),i=B(),_=T("div"),d=T("span"),d.textContent="Hint:",w=B(),y=T("span"),h=ce(p),A(t,"class","chip s-SHyHC7YcIsCQ"),j(t,ot,1858,3,63843),A(d,"class","hint-prefix s-SHyHC7YcIsCQ"),j(d,ot,1862,4,63958),A(y,"class","hint-sentence s-SHyHC7YcIsCQ"),j(y,ot,1863,4,64001),A(_,"class","hint s-SHyHC7YcIsCQ"),j(_,ot,1861,3,63935),A(e,"class","mine s-SHyHC7YcIsCQ"),j(e,ot,1857,2,63717)},m:function(f,v){G(f,e,v),S(e,t),S(t,s),S(t,r),S(t,a),S(t,u),S(e,i),S(e,_),S(_,d),S(_,w),S(_,y),S(y,h),m=!0},p:function(f,v){n=f,(!m||v[0]&256)&&o!==(o=ge(n[8])+"")&&je(r,o),(!m||v[0]&512)&&l!==(l=ge(n[9])+"")&&je(u,l),(!m||v[0]&1024)&&p!==(p=ge(Dt(`nobody_has|${n[10]}`))+"")&&je(h,p)},i:function(f){m||(Ve(()=>{E&&E.end(1),b=qs(e,pt,{duration:2400,easing:Ze,delay:4500}),b.start()}),m=!0)},o:function(f){b&&b.invalidate(),E=Is(e,pt,{duration:2400,easing:Ze}),m=!1},d:function(f){f&&F(e),f&&E&&E.end()}};return Q("SvelteRegisterBlock",{block:P,id:ws.name,type:"if",source:"(1857:1) {#if si_player_hint}",ctx:n}),P}function bs(n){let e,t,s,o,r=n[1]&&Object.keys(n[1]).length||localStorage.length,a,l,u,i,_,d,w,y,p,h,b,E,m,P,k,f,v,q,M,U,I,D,z,O,L,et,ze;s=new Te({props:{icon:n[0]?In:Rn},$$inline:!0});let V=r&&gs(n);function Je(ie){n[25](ie)}let Qe={k_killables:n[13]};n[2]!==void 0&&(Qe.k_panel=n[2]),l=new bi({props:Qe,$$inline:!0}),Ee.push(()=>Qt(l,"k_panel",Je));function ve(ie){n[27](ie)}let Se={};n[5]!==void 0&&(Se.k_prompt=n[5]),h=new vi({props:Se,$$inline:!0}),Ee.push(()=>Qt(h,"k_prompt",ve));function de(ie){n[28](ie)}let Ke={};n[4]!==void 0&&(Ke.k_tx=n[4]),m=new Mi({props:Ke,$$inline:!0}),Ee.push(()=>Qt(m,"k_tx",de)),m.$on("basis",n[14]),m.$on("quality",n[15]);function Ue(ie){n[29](ie)}let tt={k_deduced:n[12]};n[6]!==void 0&&(tt.k_decision=n[6]),f=new Bi({props:tt,$$inline:!0}),Ee.push(()=>Qt(f,"k_decision",Ue)),f.$on("abstain",n[17]),f.$on("change",n[18]);let se=n[10]&&ws(n);function At(ie){n[30](ie)}let we={};n[7]!==void 0&&(we.k_pick=n[7]),U=new Gi({props:we,$$inline:!0}),Ee.push(()=>Qt(U,"k_pick",At)),U.$on("pick",n[16]);function rt(ie){n[31](ie)}let _e={};n[3]!==void 0&&(_e.k_scene=n[3]),z=new Ui({props:_e,$$inline:!0}),Ee.push(()=>Qt(z,"k_scene",rt));const lt={c:function(){e=T("div"),t=T("span"),qe(s.$$.fragment),o=B(),V&&V.c(),a=B(),qe(l.$$.fragment),i=B(),_=T("div"),d=T("img"),y=B(),p=T("div"),qe(h.$$.fragment),E=B(),qe(m.$$.fragment),k=B(),qe(f.$$.fragment),q=B(),se&&se.c(),M=B(),qe(U.$$.fragment),D=B(),qe(z.$$.fragment),A(t,"class","system-controls-audio s-SHyHC7YcIsCQ"),A(t,"alt","audio"),j(t,ot,1832,1,62922),A(e,"class","system-controls s-SHyHC7YcIsCQ"),j(e,ot,1831,0,62891),go(d.src,w="/asset/smile.png")||A(d,"src",w),A(d,"alt","evil smile"),A(d,"class","s-SHyHC7YcIsCQ"),j(d,ot,1846,1,63409),A(_,"class","surprise s-SHyHC7YcIsCQ"),j(_,ot,1845,0,63361),A(p,"class","container s-SHyHC7YcIsCQ"),j(p,ot,1849,0,63465)},l:function(R){throw new Bo("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(R,J){G(R,e,J),S(e,t),Ie(s,t,null),S(e,o),V&&V.m(e,null),G(R,a,J),Ie(l,R,J),G(R,i,J),G(R,_,J),S(_,d),n[26](_),G(R,y,J),G(R,p,J),Ie(h,p,null),S(p,E),Ie(m,p,null),S(p,k),Ie(f,p,null),S(p,q),se&&se.m(p,null),S(p,M),Ie(U,p,null),S(p,D),Ie(z,p,null),L=!0,et||(ze=Oe(t,"click",n[23],!1,!1,!1),et=!0)},p:function(R,J){const Xe={};J[0]&1&&(Xe.icon=R[0]?In:Rn),s.$set(Xe),J[0]&2&&(r=R[1]&&Object.keys(R[1]).length||localStorage.length),r?V?(V.p(R,J),J[0]&2&&N(V,1)):(V=gs(R),V.c(),N(V,1),V.m(e,null)):V&&(Le(),H(V,1,1,()=>{V=null}),Be());const Ct={};!u&&J[0]&4&&(u=!0,Ct.k_panel=R[2],Wt(()=>u=!1)),l.$set(Ct);const Tt={};!b&&J[0]&32&&(b=!0,Tt.k_prompt=R[5],Wt(()=>b=!1)),h.$set(Tt);const bt={};!P&&J[0]&16&&(P=!0,bt.k_tx=R[4],Wt(()=>P=!1)),m.$set(bt);const Ae={};J[0]&4096&&(Ae.k_deduced=R[12]),!v&&J[0]&64&&(v=!0,Ae.k_decision=R[6],Wt(()=>v=!1)),f.$set(Ae),R[10]?se?(se.p(R,J),J[0]&1024&&N(se,1)):(se=ws(R),se.c(),N(se,1),se.m(p,M)):se&&(Le(),H(se,1,1,()=>{se=null}),Be());const yt={};!I&&J[0]&128&&(I=!0,yt.k_pick=R[7],Wt(()=>I=!1)),U.$set(yt);const ct={};!O&&J[0]&8&&(O=!0,ct.k_scene=R[3],Wt(()=>O=!1)),z.$set(ct)},i:function(R){L||(N(s.$$.fragment,R),N(V),N(l.$$.fragment,R),N(h.$$.fragment,R),N(m.$$.fragment,R),N(f.$$.fragment,R),N(se),N(U.$$.fragment,R),N(z.$$.fragment,R),L=!0)},o:function(R){H(s.$$.fragment,R),H(V),H(l.$$.fragment,R),H(h.$$.fragment,R),H(m.$$.fragment,R),H(f.$$.fragment,R),H(se),H(U.$$.fragment,R),H(z.$$.fragment,R),L=!1},d:function(R){R&&F(e),Re(s),V&&V.d(),R&&F(a),Re(l,R),R&&F(i),R&&F(_),n[26](null),R&&F(y),R&&F(p),Re(h),Re(m),Re(f),se&&se.d(),Re(U),Re(z),et=!1,ze()}};return Q("SvelteRegisterBlock",{block:lt,id:bs.name,type:"component",source:"",ctx:n}),lt}function ys(n){return n}function Ho(n,e,t){let s,{$$slots:o={},$$scope:r}=e;mt("App",o,[]);const a={chain_name:hn,chain_id:On,game_addr:Pt,game_hash:li,rest:mn,rpc:$t,minter_addr:tn,minter_hash:ci};let l,u;try{const c=new Intl.Locale(navigator.language).language;c in $s&&(u=c)}catch{}{const c=Mt("en");c.subscribe(C=>u=C),Xs("game",{language:c})}let i,_,d,w,y,p,h;const b=new ai;let E,m,P,k,f=new sn,v=ys,q=ys;const M=new Image;M.src="/asset/monster.png";const U=new Image;U.src="/asset/smile.png";async function I(c){for(const C of ei[c])C.delay&&await W(C.delay),await i.reveal_text(C.labels[u],C.interval,C.pause)}async function D(){await W(2e3),await I("attention"),await W(1800),await i.reveal_text(""),await W(1200)}async function z(){await i.reveal_text("good luck! ;)"),await W(800),await i.reveal_text("")}async function O(){return await w.ok("Reload"),window.location.reload(),new Promise(()=>{})}async function L(c){return b.killAll(),i.reveal_text(""),await i.error(c),O()}async function et(){const c="                                 ";await i.reveal_text(c),Qe.epic_transition.play(),i.reveal_text(c+"  ",250),we.classList.add("triggered"),await W(160),t(11,we.style.opacity="0.0",we),setTimeout(()=>{t(11,we.style.display="none",we)},6e3),await W(2e3)}async function ze(c=0){await i.warn(`
			This game stores encrypted query permit data in local storage.
			
			In order to protect this data, you must provide a passphrase each time the page is loaded.

			${ps.includes(/\.permits$/)?"Enter the same passphrase to restore a previous permit, or enter a different one to sign a new permit.":""}
		`);async function C(te=0){let Fe=!1;te||b.addTimeout(()=>{Fe||i.reveal_text("\u2193\u2193 click below to enter passphrase \u2193\u2193")},6500),await w.ok("Provide passphrase"),Fe=!0;const It=new Uint8Array(32);crypto.getRandomValues(It);const Kt=[...It].map(un=>String.fromCharCode(un%93+33)).join(""),En=window.prompt("Enter a passphrase to encrypt/decrypt query permits",Kt);if(En)return En.length<5?(i.reveal_text("passphrase must be at least 5 characters"),C(te+1)):En;{const un=["null key encryption, eh? try again you silly goose","i can do this all day, can you?","there are only so many responses i have...","...and you're starting to piss me off","i'm serious dood -- don't make me"];return te<un.length?i.reveal_text(un[te],40):window.location.href="https://www.youtube.com/watch?v=dQw4w9WgXcQ",C(te+1)}}const ee=(await(await Zs.load()).get()).visitorId,ae=await C();if(i.reveal_text(""),!h){await i.warn(`
				This is a multiplayer, online game that uses smart contracts on the Secret Network to ensure fairness for all players.

				Interacting with the game requires submitting transactions to the blockchain via a web wallet such as Keplr (or a local wallet for testnet only).
			`),await W(600);const te=await w.opts({keplr:zt.isAvailable()?{label:"Connect Keplr",alt:"Connect a wallet using the Keplr extension for Chrome"}:{label:"Install Keplr",alt:"Keplr was not detected. Please install it first in order to use this option"}});switch(te){case"keplr":{try{h=zt.fromWindow()}catch{return window.open("https://www.keplr.app/","_blank"),await O()}Et({wallet:"keplr"},30*gt);break}case"local":return L("Local storage wallet not yet implemented");default:return L(`Unhandled response option: '${te}'`)}}let $=!1;const x=Date.now();try{$=await h.enable({chainId:On,chainName:hn,rest:mn,rpc:$t},()=>L("Account was changed in wallet. Session terminated."))}catch(te){debugger;return te instanceof Ln?c>=3?L("Keplr connection request rejected too many times"):(await W(2e3),await ze(c+1)):te instanceof Bn||te instanceof Error?L(te.stack):L("Fatal unknown error")}if(!$)return L("Chain suggestion was denied. Unable to proceed.");Date.now()-x>$e&&(await i.warn(`Please make sure your network is set to "${hn}" in Keplr!`),await W(2100));const X=h.key,le=X.bech32Address;i.wallet({name:X.name,addr:le,ledger:X.isNanoLedger});const ye=new ps(le,[ee,ae,"salt"].join("|"),a);let Ye=null;try{Ye=ye.get("permits")}catch{await i.warn("Change in passphrase detected. Clearing old query perrmits."),ye.clear()}await W(1e3);let Pe=!1;if(Ye&&Ye[Pt])l=Ye[Pt],Pe=!0;else{await i.warn(`
				Query permits allow you to read encrypted data from the blockchain without needing to write anything extra to the chain.

				Signing a query permit happens offline and does not require any gas.
			`),await W(1800),await w.ok("Sign permit");try{l={params:{chain_id:h.chain,allowed_tokens:[Pt,tn],permit_name:Yn,permissions:["owner"]},signature:await h.signQueryPermit()},ye.set("permits",Xt(vt({},Ye||{}),{[Pt]:l,[tn]:l}))}catch(te){return L(te.stack)}}i.permit(l.params,Pe),await W(1200),await i.reveal_text(""),await W(1100)}async function V(c=!1){let C=Mt("");c?i.warn("Still waiting for another player... {last_check}",{last_check:C}):i.warn("Created a new game. Now waiting for another player... {last_check}",{last_check:C});let Y=window.Notification&&Notification.permission==="granted",ne=!1;function ee(){if(Y)i.warn("You will receive a notification once another player has joined.");else{const le=ke("span"),ye=new Wi({target:le});ye.$on("change",async()=>{const Ye=Date.now();await Notification.requestPermission()==="denied"?(ye.$set({si_selected:"none"}),Date.now()-Ye<.5*$e?i.warn("User previously denied request for notifications. Need to reset in browser settings."):i.warn("User denied request for notification permission.")):i.warn("Confirmed. Notification will be sent when another player joins.")}),i.warn("Would you like to receive a notification once another player has joined? {approve}",{approve:le})}}let ae=Date.now(),$=b.addInterval(()=>{ae&&C.set(`Last checked ${oi(ae)}`),ne||(ne=!0,ee())},1e3),x,X;for(;;){X=Date.now();try{x=await de.queryGameState()}catch(ye){return ye instanceof Un?L(ye.message):L(ye+"")}if(x.round!==0)break;ae=Date.now();const le=Date.now()-X;le<10*$e&&await W(le)}return b.delInterval($),C.set(""),Qe.retro_game_alarm.play(),x}const Je={epic_transition:"epic-transition.wav",coin_win:"coin-win.wav",retro_game_alarm:"retro-game-alarm.wav",retro_game_notif:"retro-game-notif.wav",trumpet_fanfare:"trumpet-fanfare.wav"},Qe=Object.fromEntries(Me(Je).map(([c,C])=>[c,new Audio(`/asset/${C}`)]));let ve=!1,Se=wn(),de;async function Ke(){await i.arbiter(`
			Your opponent is taking too long. Since you have already fulfilled your duty, I will allow you to end the game and get a refund.

			Would you like to end the game?
		`),await i.reveal_text("yes, give me my money back"),i.submittable(async()=>{i.submittable(null);const c=await _e({async exec(){const C=(await de.forceEndgame()).data.force_endgame.game_state;return i.commit(),C},check(C){return C.finished!==null},query_fail(){return Ke(),null}});if(!!c)return i.unsubmittable(),i.arbiter(`I have refunded you ${en(BigInt(c.wager))}.`),tt()})}class Ue{constructor(C){this._s_expired="run out of time";const Y=C.terminate;this._s_kill=C.kill_text||"",this._k_eta=C.eta,this._yw_time=Mt("(estimating...)"),this._k_eta.eta,this._i_interval=b.addInterval(()=>{const ee=this._k_eta;if(!ee.ready)return;if(ee.expired){this._yw_time.set(this._s_expired),b.delInterval(this._i_interval),this._i_interval=0;try{this._dm_clock.remove()}catch{}Y&&Y();return}const ae=ee.remaining,$=Math.max(0,Math.floor(ae/$e)),x=Math.floor($/60);x?x<2?this._yw_time.set("less than 2 minutes remaining"):x<5?this._yw_time.set("less than 5 minutes remaining"):x<10?this._yw_time.set("less than 10 minutes remaining"):this._yw_time.set("a little more than 10 minutes remaining"):$<=10?this._yw_time.set("less than 10 seconds remaining"):$<=31?this._yw_time.set("less than 30 seconds remaining"):this._yw_time.set("less than 60 seconds remaining")},100);const ne=this._dm_clock=ke("span");Object.assign(ne.style,{paddingRight:"2px"}),new Te({target:ne,props:{icon:xs}})}get interval(){return this._i_interval}get clock(){return this._dm_clock}get store(){return this._yw_time}kill(C=""){this._i_interval&&(b.delInterval(this._i_interval),this._i_interval=0,this._dm_clock.remove(),this._yw_time.set(C||this._s_kill))}}async function tt(){return nn("game"),L("Game over. Reload to play again.")}async function se(){let c=!0;i.reveal_text("checking for active game...").then(()=>c&&i.spinning(!0));let C;try{try{C=await de.queryGameState()}finally{c=!1,i.reveal_text("")}}catch{debugger}if(C&&(console.log("Resuming:",C),C.round!==null)){if(C.finished?i.warn("Fast-forwarding through finished game so you can see the results."):i.warn("Successfully resumed active game."),C.round===0&&(C=await V(!0)),C.round===1)return yt(C,!0),!0;if(C.round===3)return kt(C,!0),!0;await i.error(`Unrecognized game state round: ${C.round}`)}return!1}let At=!1,we;Lt(async()=>{console.log(a);const c=Se.last_seen;if(c&&t(0,ve=!!+Se.muted),Se.wallet==="keplr")try{h=zt.fromWindow()}catch{nn("wallet")}if(Et({last_seen:""+Date.now()},30*gt),t(1,Se=wn()),await ze(),de=new ui(h,Pt,l),Se.game){if(await se())return;nn("game")}return c?await z():(await et(),await D()),await i.arbiter(`
			Welcome${c?" back":""} to my game of secrets. In a moment, you will be matched with another player.

			I will give each of you a chip with a colored shape on it. There are only four colors (red, green, blue, black), and four shapes (triangle, square, circle, star).

			Your opponent will not be able to see your chip and vice versa. I will also take a third chip and hide it in a bag. Each chip will have a unique color and a unique shape. For example, if the chip in my bag is a red triangle, then nobody else has red, and nobody else has a triangle.

			The rules are simple. You and your opponent must exchange a message with each other. Cooperate to deduce what is in my bag and you both will advance to the next round. Betray your opponent by correctly guessing which chip they have and win their wager. Guess wrong and lose.
		`),await W(c?800:4600),lt()});class rt extends Error{}async function _e(c){let C=!0;const Y=c.reveal;typeof Y=="string"?i.reveal_text(Y).then(()=>C&&i.spinning(!0)):i.spinning(!0);const ne=c.check,ee=c.condition||c.query_fail,ae=c.rejected||c.query_fail;let $;try{try{if($=await c.exec(),!ne($))throw $=null,new rt}finally{C=!1,i.reveal_text("")}}catch(x){if(console.error(x),x instanceof Error){const X=x.message;if(/Account does not exist/.test(X))return L("Looks like your wallet is empty. Make sure to acquire some SCRT tokens so that you can pay the gas fees for transactions.");if(/must finish current game/.test(X))return Et({game:"started"},12*Nt),await se()?null:L("Looks like you changed browsers or cleared cache since you last joined a game with this account. Please reload and the game will attempt to resume.");if(/contract not found/i.test(X))return L("Contract not found! Are you on the right network?");if(/execute contract failed/.test(X))return i.error(`Contract error: ${X}`),ee(x),null;if(/Request rejected/.test(X))return i.error("Transaction rejected"),ae(x),null;if(/timed out/.test(X)){const le=Mt("");await i.warn("There was a timeout error while waiting for the transaction to be included. Waiting to see if it gets included... {retries}",{retries:le});const ye=await async function Ye(Pe=1){await W(5e3);let te;try{te=await de.queryGameState(),ne(te)||(console.warn("query permit check failed on game state",te),te=null)}catch(Fe){if(!(Fe instanceof rt))return await i.error(["Timeout error. Please try again with higher gas fee.",X]),c.query_fail?await c.query_fail(Fe):null}return te||(Pe>=5?(await i.error("Reached maximum retries. Seems like your transaction failed. Try again with higher gas fee?"),c.query_fail?await c.query_fail(new rt):L("Unhandled query failure path.")):(le.set(`Retried ${Pe===1?"once":`${Pe} times`} so far...`),await Ye(Pe+1)))}();if(ye)$=ye;else return null}else{debugger;return L(`Unhandled error: ${x.stack}`)}}else return L(`Unknown error: ${x}`)}return console.log($),i.reveal_text(""),$}async function lt(){await i.reveal_text("ready to play?"),await w.ok("Join a game");const c=await _e({reveal:"waiting for transaction to be verified... ",async exec(){return(await de.joinGame()).data.join.game_state},check(Y){return Y.round!==null},query_fail(){return lt(),null}});if(!c)return;let C=c;return c.round===0&&(Et({game:"started"},12*Nt),C=await V()),C.round===1?yt(C):C.round===3?L("round_3()"):(console.error(C),Et({game:"started"},12*Nt),L("Failed to join game while waiting for transaction. You can try once more by reloading this page."))}function ie(c){var C;t(8,E=c.chip_color.split(":")[1]),t(9,m=c.chip_shape.split(":")[1]),t(10,P=(C=c.hint)==null?void 0:C.split("|")[1]),k=c.first_submit,t(20,f=new sn),f.nobody(`color:${E}`),f.nobody(`shape:${m}`),f.nobody(P)}let R=Ft[0],J="";async function Xe(){const c=J?Ut(J):"",C=Gt[R].describe[u](c);await i.reveal_text(C)}function Ct(c){i.submittable(null),R=c.detail,J="",Xe()}function Tt(){J="",i.submittable(null),d.show(),Xe()}async function bt(c){if(i.submittable(null),J=c.detail,k){const[,ee]=k.split("|");ee===J&&(J="",await i.arbiter("You cannot submit a message that would contradict your previous assertion."))}const[C,Y]=J.split(":");let ne="Unknowable";R==="nobody_has"?P===J?ne="Truth":(C==="color"&&Y===E||C==="shape"&&Y===m)&&(ne="Lie"):C==="color"&&Y===E||C==="shape"&&Y===m?ne="Truth":ne="Lie",await Xe(),i.submittable(async()=>{d.hide(),i.submittable(null);const ee=await _e({async exec(){return(await de.submitAssertion(R,J)).data.submit.game_state},check(ae){return k?ae.second_submit!==null:ae.first_submit!==null},query_fail(){return Tt(),bt(c),null}});!ee||(await i.commit(),Ae&&Ae.kill(),g&&g.kill(),i.unsubmittable(),ee.second_submit?De(ee):Z(ee))},ne)}let Ae;async function yt(c,C=!1){ie(c),await i.reveal_text(""),await i.arbiter("Here is your chip, player..."),await _.animate_chip_entry(E,m),C||await W(5e3);let Y=P.startsWith("color:");if(await i.arbiter(`
			Round 1: I've given you the ${E} ${m} this round, and a hint that nobody has ${Y?"":"a "}${P.replace(/^[^:]+:/,"")}.

			I've also given your opponent a hint. Theirs is that nobody has a certain ${Y?"shape":"color"}.
		`),C){if(c.first_submit)return await i.user(Dt(c.first_submit)),Z(c,C)}else await W(4100);Ae=new Ue({eta:new wt(c.first_round_start_block+""),kill_text:"successfully submitted"}),await i.arbiter(["Now you must choose what to tell the other player. I will reveal both of your messages simultaneously once they both have been submitted. You have {clock_icon}{time_remaining}."],{clock_icon:Ae.clock,time_remaining:Ae.store}),await d.show(),C||await W(4e3),Xe()}let ct=!1,ut,g;async function Z(c,C=!1){var $;ie(c);const{opponent_first_submit:Y,first_extra_secret:ne}=c;if(!Y&&!ne)return ct||(ct=!0,Ae&&Ae.kill("already submittted"),ut=new Ue({eta:new wt(c.first_round_start_block+""),kill_text:"also submitted theirs",terminate:Ke}),await i.arbiter(["Your submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:ut.clock,time_remaining:ut.store})),await W(5e3),Z(await de.queryGameState());ut&&ut.kill();const ee=ke("span");if(ne){const[x,X]=ne.split("|"),le=Mt("");x==="nobody_has"?(f.nobody(X),le.set(`Your opponent has the hint that "nobody has ${Ut(X)}".`)):(f.opponent(X,!0),le.set(`Your opponent has ${Ut(X)}.`)),new on({target:ee,props:{b_mode_nobody:!1,si_assertion:X,si_known:"true"}}),await i.arbiter(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:le,premise:ee})}else if(Y){const[x,X]=Y.split("|");let le=f.clone();const ye=x==="nobody_has"&&X===P,Ye=new on({target:ee,props:{b_mode_nobody:x==="nobody_has",si_assertion:X,si_known:ye?"undeniable":""}}),Pe=Ye.k_premise;Ye.$on("change",()=>{t(21,v=Pe.apply),console.log(`Priori: ${f.explain()}`),console.log(`Opp1: ${le.explain()}`),console.log([f,le])}),await i.opponent([`${ge(Dt(Y))} {premise}`],{premise:ee})}else return L("Fatal system error: unable to parse game state");if(C){if(c.second_submit)return await i.user(Dt(c.second_submit)),De(c,C)}else await W(4100);g=new Ue({eta:new wt(c.second_submit_turn_start_block+""),kill_text:"already submitted"});const ae=(($=c.first_submit)==null?void 0:$.split("|")[0])==="nobody_has"?"i_have":"nobody_has";await i.arbiter([`Both of you must now exchange one more message with each other. This time, I'm requiring you to submit a message about ${ae==="nobody_has"?'what "nobody has"':"your chip"}. You have {clock_icon}{time_remaining}.`],{clock_icon:g.clock,time_remaining:g.store}),await d.show(ae),Xe()}let pe=!1,We,Ce,nt;async function De(c,C=!1){const{opponent_second_submit:Y,second_extra_secret:ne}=c;if(!Y&&!ne)return pe||(pe=!0,We&&We.kill(),Ce=new Ue({eta:new wt(c.second_submit_turn_start_block+""),kill_text:"also submitted theirs",terminate:Ke}),await i.arbiter(["Your 2nd submission has been received. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Ce.clock,time_remaining:Ce.store})),await W(5e3),De(await de.queryGameState());const ee=ke("span");if(ne){const[ae,$]=ne.split("|"),x=Mt("");ae==="nobody_has"?(t(22,q=X=>X.nobody($)),x.set(`Your opponent has the hint that "nobody has ${Ut($)}".`)):(t(22,q=X=>X.opponent($,!0)),x.set(`Your opponent has ${Ut($)}.`)),new on({target:ee,props:{b_mode_nobody:!1,si_assertion:$,si_known:"true"}}),await i.arbiter(`
				The other player tried to deceive you by submitting a false assertion. You would have known it's false given what you know about your chip and your hint.
				
				Instead, I will now reveal to you one of their secrets. They will not know that I have done any of this.

				{secret} {premise}
			`,{secret:x,premise:ee})}else if(Y){Ce&&Ce.kill();const[ae,$]=Y.split("|"),x=ae==="nobody_has"&&$===P,X=new on({target:ee,props:{b_mode_nobody:ae==="nobody_has",si_assertion:$,si_known:x?"undeniable":""}}),le=X.k_premise;X.$on("change",()=>{t(22,q=le.apply)}),await i.opponent([`${ge(Dt(Y))} {premise}`],{premise:ee})}else return L("Fatal system error: unable to parse game state");if(C&&c.guess)return await i.user(Sn(c.guess)),He(c,C);nt=new Ue({eta:new wt(c.guess_turn_start_block+""),kill_text:"successfully submitted"}),await i.arbiter(`
			The time has come for you to surmise my secrets. You may either guess what is in my bag, what your opponent has, or abstain completely. You have {clock_icon}{time_remaining}.

			The precedence for winning is as follows:
			- [Guess wrong] < [Abstain] < [Correctly guess arbiter's bag] < [Corrrectly guess opponent's chip]

			Use the inline widgets next to each assertion above to logically reduce your option space.
		`,{clock_icon:nt.clock,time_remaining:nt.store}),await y.show(),console.log(c)}async function _t(c){i.submittable(null),await i.reveal_text(Sn(c),30),i.submittable(async()=>{i.submittable(null),y.hide();const C=await _e({async exec(){const Y=(await de.submitGuess(c)).data.guess.game_state;return i.commit(),Y},check(Y){return Y.guess!==null},query_fail(){return y.show(),_t(c),null}});!C||(nt.kill(),He(C))})}let xe=!1,oe=!1,be;async function He(c,C=!1){const{round_result:Y,round:ne,result:ee}=c;let ae=!1;if(Y&&!xe){xe=!0;const[$,x]=Y.split("|");x==="wrong"?(await i.arbiter(`
					Sorry, your guess about ${$==="opponent"?"your opponent's chip":"my bag"} was wrong.
					
					Guessing wrong is the worst because you automatically lose your wager. Consider abstaining next time if you're unsure.
				`),ae=!0):await i.arbiter(`Nicely done, your guess about ${$==="opponent"?"your opponent's chip":"my bag"} was correct!`)}if(!c.opponent_guess)return oe||(oe=!0,be=new Ue({eta:new wt(c.guess_turn_start_block+""),kill_text:"now submitted",terminate:Ke}),await i.arbiter(`${ae?"Even though you lost":"However"}, I am still waiting for a guess from your opponent. They have {clock_icon}{time_remaining}.`,{clock_icon:be.clock,time_remaining:be.store})),await W(5e3),He(await de.queryGameState());if(be&&be.kill(),t(10,P=""),_.animate_chip_exit(),console.log("round_1d#over",c),c.finished)if(c.opponent_round_result){const{opponent_round_result:$,opponent_guess:x}=c,[X,le,ye]=x.split(/\|/g),[,Ye]=$.split("|");let Pe="",te=!1;if(X==="abstain")Pe="abstained from guessing";else{const Fe=le.split(":")[1],It=ye.split(":")[1],Kt=St[Fe].labels[u]+" "+Ht[It].labels[u];te=Ye!=="correct",Pe=`${te?"wrongly":"correctly"} guessed that ${X==="bag"?"my bag":"your chip"} is the ${Kt}`}if(ee==="you lost wager"){const Fe=te?"But you'll be happy to know that your opponent":"Your opponent";return await i.arbiter([`${ae?"As you already know":"Bad news"}, you lost your wager. ${Fe} ${Pe}, so they ${te?"also lost their wager":"won the game and gained your lost wager"}.`]),await W(9e3),tt()}else if(ee==="you won wager"){const Fe=BigInt(c.wager),It=en(Fe),Kt=en(Fe*2n);return await i.arbiter(`
						Congratulations, you won! Your opponent ${Pe}, so they lost their wager.
						
						I have refunded you your original ${It} plus an extra ${It} from your opponent's wager for a total of ${Kt}.
					`),await W(9e3),tt()}else await i.arbiter([`Well done. You and your opponent have tied, so you both can claim a reward. They ${Pe}.`]),C||await W(4e3)}else return L("Somebody terminated the game.");else if(c.round===3)kt(c,C);else return L(`Game is not finished but round is ${c.round}.`)}let jt=!1,Ge;async function kt(c,C=!1){if(Ge=new Ue({eta:new wt(c.pick_reward_round_start_block+""),kill_text:"made your decision"}),await i.arbiter(`
			Congratulations on passing round 1 together! I have two rewards to choose from, a jackpot of SCRT, or an NFT that can be used to give you special powers next time you play.

			However, if you both attempt to claim the same prize, then neither of you will take it. You will only be able to take a reward if you and your opponent claim different things.

			You have {clock_icon}{time_remaining}.
		`,{clock_icon:Ge.clock,time_remaining:Ge.store}),c.pick)return ln(c,!0);p.show()}async function qt(c){const{detail:C}=c;i.submittable(null),await i.reveal_text(`i pick the ${C}`),i.submittable(async()=>{p.hide();const Y=await _e({async exec(){const ne=(await de.pickReward(C)).data.pick_reward.game_state;return i.commit(),ne},check(ne){return ne.pick!==null},query_fail(){return p.show(),qt(c),null}});!Y||ln(Y)})}let Jt,rn=!1;async function ln(c,C=!1){Ge&&Ge.kill();const{result:Y}=c;if(Y){switch(Y){case"you won jackpot":{await i.arbiter(`
						Fortune favors the bold! Your opponent picked the NFT, and you have successfully claimed the jackpot of ${en(BigInt(c.jackpot_reward||"0"))}!
					`);break}case"you won nft":{await i.arbiter(`
						Wise move. While your opponent chose the short-term gain, you see the long-term potential. You have successfully claimed an NFT.
					`);break}case"you lost reward":{c.pick==="jackpot"?await i.arbiter(`
							Greed has spoiled your riches. Both players attempted to claim the jackpot, so you both shall leave empty-handed.
						`):await i.arbiter(`
							An unlucky pick. Both players attempted to claim the NFT, so you both shall leave empty-handed.
						`);break}}return await W(9e3),tt()}else return rn||(rn=!0,Jt=new Ue({eta:new wt(c.pick_reward_round_start_block+""),kill_text:"also picked theirs",terminate:Ke}),await i.arbiter(["Your pick has been noted. Your opponent has {clock_icon}{time_remaining}."],{clock_icon:Jt.clock,time_remaining:Jt.store})),await W(5e3),ln(await de.queryGameState())}function Sn(c){let C;if(typeof c=="string"?C=Object.fromEntries(c.split(/\|/g).map(Y=>Y.split(":"))):C=c,C.target==="abstain")return"i abstain from guessing this round";{let Y="";return C.target==="bag"?Y+="the arbiter's bag is: a ":Y+="my opponent's chip is: a ",Y+St[C.color].labels[u]+" "+Ht[C.shape].labels[u]}}async function ks(){_t({target:"abstain",color:null,shape:null})}async function vs({detail:c}){_t(c)}let cn=!1;function Pn(){if(!cn)cn=!0,i.error("The button you just clicked will remove all cookies and cache that the game previously created and then disable the current UI. If you agree to this, click the burn icon again.");else return Object.keys(wn()).forEach(c=>nn(c)),localStorage.clear(),i.reveal_text(""),L("Cache burned")}const Fi=[];Qo.keys(e).forEach(c=>{!~Fi.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&Wo.warn(`<App> was created with unknown prop '${c}'`)});const zi=()=>t(0,ve=!ve),Ji=()=>Pn();function Ki(c){i=c,t(2,i)}function Xi(c){Ee[c?"unshift":"push"](()=>{we=c,t(11,we)})}function xi(c){w=c,t(5,w)}function Vi(c){d=c,t(4,d)}function Zi(c){y=c,t(6,y)}function $i(c){p=c,t(7,p)}function eo(c){_=c,t(3,_)}return n.$capture_state=()=>({onMount:Lt,setContext:Xs,writable:Mt,blur:pt,fade:fe,quadInOut:Ze,Fa:Te,faClock:xs,faVolumeUp:Rn,faVolumeMute:In,faFire:Vs,fingerprintjs:Zs,H_LANGUAGES:$s,H_COLORS:St,H_SHAPES:Ht,A_BASES:Ft,H_BASES:Gt,H_MESSAGES:ei,SI_CHAIN:On,S_CHAIN_NAME:hn,P_LCD_REST:mn,P_LCD_RPC:$t,uscrt_to_scrt:en,KeplrWallet:zt,EnableKeplrError:Ln,OfflineSignerError:Bn,dd:ke,delete_cookie:nn,read_cookie:wn,write_cookie:Et,XTL_SECONDS:$e,XTL_HOURS:Nt,XTL_DAYS:gt,ode:Me,proper:ge,timeout:W,relative_time:oi,Killables:ai,Deduction:sn,use_assertion_in_sentence:Dt,use_quality_in_sentence:Ut,MessagePanel:bi,Prompt:vi,Assertion:Mi,Scene:Ui,PremiseWidget:on,Decision:Bi,ActionWidget:Wi,Pick:Gi,SI_PERMIT:Yn,ContractError:Un,EtaEstimator:wt,GameContract:ui,P_CONTRACT_GAME_ADDR:Pt,SI_CONTRACT_GAME_CODE_HASH:li,P_CONTRACT_MINTER_ADDR:tn,SI_CONTRACT_MINTER_CODE_HASH:ci,EncryptedLocalStorage:ps,F_IDENTITY:ys,G_NETWORK_SUMMARY:a,g_permit:l,s_lang:u,k_panel:i,k_scene:_,k_tx:d,k_prompt:w,k_decision:y,k_pick:p,k_wallet:h,k_killables:b,si_player_color:E,si_player_shape:m,si_player_hint:P,si_submit_first:k,k_priori:f,f_assert_1:v,f_assert_2:q,d_img_monster:M,d_img_smile:U,reveal_prepared:I,introduction:D,welcome_back:z,reload:O,fatal:L,surprise:et,connect_wallet:ze,wait_for_other_player:V,H_AUDIO_SRC:Je,H_AUDIO:Qe,b_muted:ve,h_cookie:Se,k_game:de,force_endgame:Ke,Countdown:Ue,game_over:tt,try_resume_game:se,b_surprise:At,dm_surprise:we,GameStateError:rt,safe_exec:_e,try_join:lt,update_player_state:ie,si_assert_basis:R,si_assert_quality:J,reveal_tx:Xe,select_basis:Ct,reset_tx:Tt,select_quality:bt,k_countdown_1a:Ae,round_1a:yt,b_notif_1b_waiting:ct,k_countdown_1a2:ut,k_countdown_1b:g,round_1b:Z,b_notif_1c_waiting:pe,k_countdown_1b2:We,k_countdown_1c:Ce,k_countdown_1c2:nt,round_1c:De,prepare_guess:_t,b_notif_1d_result:xe,b_notif_1d_waiting:oe,k_countdown_1d:be,round_1d:He,b_notif_3a_waiting:jt,k_countdown_3a:Ge,round_3a:kt,select_pick:qt,k_countdown_3b:Jt,b_notif_3b_waiting:rn,round_3b:ln,use_guess_in_sentence:Sn,select_abstain:ks,select_decision:vs,b_burn_clicked:cn,burn:Pn,k_deduced:s}),n.$inject_state=c=>{"g_permit"in c&&(l=c.g_permit),"s_lang"in c&&(u=c.s_lang),"k_panel"in c&&t(2,i=c.k_panel),"k_scene"in c&&t(3,_=c.k_scene),"k_tx"in c&&t(4,d=c.k_tx),"k_prompt"in c&&t(5,w=c.k_prompt),"k_decision"in c&&t(6,y=c.k_decision),"k_pick"in c&&t(7,p=c.k_pick),"k_wallet"in c&&(h=c.k_wallet),"si_player_color"in c&&t(8,E=c.si_player_color),"si_player_shape"in c&&t(9,m=c.si_player_shape),"si_player_hint"in c&&t(10,P=c.si_player_hint),"si_submit_first"in c&&(k=c.si_submit_first),"k_priori"in c&&t(20,f=c.k_priori),"f_assert_1"in c&&t(21,v=c.f_assert_1),"f_assert_2"in c&&t(22,q=c.f_assert_2),"b_muted"in c&&t(0,ve=c.b_muted),"h_cookie"in c&&t(1,Se=c.h_cookie),"k_game"in c&&(de=c.k_game),"b_surprise"in c&&(At=c.b_surprise),"dm_surprise"in c&&t(11,we=c.dm_surprise),"si_assert_basis"in c&&(R=c.si_assert_basis),"si_assert_quality"in c&&(J=c.si_assert_quality),"k_countdown_1a"in c&&(Ae=c.k_countdown_1a),"b_notif_1b_waiting"in c&&(ct=c.b_notif_1b_waiting),"k_countdown_1a2"in c&&(ut=c.k_countdown_1a2),"k_countdown_1b"in c&&(g=c.k_countdown_1b),"b_notif_1c_waiting"in c&&(pe=c.b_notif_1c_waiting),"k_countdown_1b2"in c&&(We=c.k_countdown_1b2),"k_countdown_1c"in c&&(Ce=c.k_countdown_1c),"k_countdown_1c2"in c&&(nt=c.k_countdown_1c2),"b_notif_1d_result"in c&&(xe=c.b_notif_1d_result),"b_notif_1d_waiting"in c&&(oe=c.b_notif_1d_waiting),"k_countdown_1d"in c&&(be=c.k_countdown_1d),"b_notif_3a_waiting"in c&&(jt=c.b_notif_3a_waiting),"k_countdown_3a"in c&&(Ge=c.k_countdown_3a),"k_countdown_3b"in c&&(Jt=c.k_countdown_3b),"b_notif_3b_waiting"in c&&(rn=c.b_notif_3b_waiting),"b_burn_clicked"in c&&(cn=c.b_burn_clicked),"k_deduced"in c&&t(12,s=c.k_deduced)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{n.$$.dirty[0]&7340032&&t(12,s=q(v(f.clone()).clone()).clone()),n.$$.dirty[0]&3&&Se&&(Object.values(Qe).forEach(c=>c.muted=ve),Et({muted:ve?"1":"0"},30*gt))},[ve,Se,i,_,d,w,y,p,E,m,P,we,s,b,Ct,bt,qt,ks,vs,Pn,f,v,q,zi,Ji,Ki,Xi,xi,Vi,Zi,$i,eo]}class Go extends ft{constructor(e){super(e);dt(this,e,Ho,bs,ht,{},null,[-1,-1,-1]),Q("SvelteRegisterComponent",{component:this,tagName:"App",options:e,id:bs.name})}}new Go({target:document.body,props:{}});
//# sourceMappingURL=index.04f61f2e.js.map
